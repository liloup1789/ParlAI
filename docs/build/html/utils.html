

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>core.utils &mdash; ParlAI  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/parlai_theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="core.thread_utils" href="thread_utils.html" />
    <link rel="prev" title="core.teachers" href="teachers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ParlAI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial_quick.html">ParlAI Quick-start</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_basic.html">Intro to ParlAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_task.html">Tasks and Datasets in ParlAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_worlds.html">Data Handling, Batching, and Hogwild</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_seq2seq.html">Creating an Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_torch_ranker_agent.html">Using Torch Ranker Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_tipsntricks.html">Tips and Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_mturk.html">Using Mechanical Turk</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_messenger.html">Using Facebook Messenger</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_tensorboard.html">Using tensorboard for metric tracking</a></li>
</ul>
<p class="caption"><span class="caption-text">Tasks &amp; Model Zoo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="zoo.html">Model Zoo</a></li>
</ul>
<p class="caption"><span class="caption-text">Core Library</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="observations.html">observations</a></li>
<li class="toctree-l1"><a class="reference internal" href="agents.html">core.agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="torch_agent.html">core.torch_agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_data.html">core.build_data</a></li>
<li class="toctree-l1"><a class="reference internal" href="dict.html">core.dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">core.metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="params.html">core.params</a></li>
<li class="toctree-l1"><a class="reference internal" href="teachers.html">core.teachers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">core.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="thread_utils.html">core.thread_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="worlds.html">core.worlds</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="repeat_label.html">agents.repeat_label</a></li>
<li class="toctree-l1"><a class="reference internal" href="unigram_agent.html">agents.unigram</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_seq2seq.html">agents.example_seq2seq</a></li>
</ul>
<p class="caption"><span class="caption-text">Scripts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli_usage.html">Command Line Usage</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ParlAI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>core.utils</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-parlai.utils.misc">
<span id="core-utils"></span><h1>core.utils<a class="headerlink" href="#module-parlai.utils.misc" title="Permalink to this headline">¶</a></h1>
<p>File for miscellaneous utility functions and constants.</p>
<dl class="function">
<dt id="parlai.utils.misc.neginf">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">neginf</code><span class="sig-paren">(</span><em class="sig-param">dtype</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.neginf" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a representable finite number near -inf for a dtype.</p>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.maintain_dialog_history">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">maintain_dialog_history</code><span class="sig-paren">(</span><em class="sig-param">history</em>, <em class="sig-param">observation</em>, <em class="sig-param">reply=''</em>, <em class="sig-param">historyLength=1</em>, <em class="sig-param">useReplies='label_else_model'</em>, <em class="sig-param">dict=None</em>, <em class="sig-param">useStartEndIndices=True</em>, <em class="sig-param">splitSentences=False</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.maintain_dialog_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep track of dialog history, up to a truncation length.</p>
<p>Either includes replies from the labels, model, or not all using param
‘replies’.</p>
<p>DEPRECATED. USE PARLAI.CORE.TORCH_AGENT INSTEAD.</p>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.load_cands">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">load_cands</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">lines_have_ids=False</em>, <em class="sig-param">cands_are_replies=False</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.load_cands" title="Permalink to this definition">¶</a></dt>
<dd><p>Load global fixed set of candidate labels that the teacher provides.</p>
<p>Every example will include these as candidates. The true labels for a
specific example are also added to this set, so that it’s possible to get
the right answer.</p>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.load_opt_file">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">load_opt_file</code><span class="sig-paren">(</span><em class="sig-param">optfile</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.load_opt_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an Opt from disk.</p>
</dd></dl>

<dl class="class">
<dt id="parlai.utils.misc.Opt">
<em class="property">class </em><code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">Opt</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Opt" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>Class for tracking options.</p>
<p>Functions like a dict, but allows us to track the history of arguments
as they are set.</p>
<dl class="method">
<dt id="parlai.utils.misc.Opt.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Opt.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.Opt.display_deepcopies">
<code class="sig-name descname">display_deepcopies</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Opt.display_deepcopies" title="Permalink to this definition">¶</a></dt>
<dd><p>Display all deepcopies.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.Opt.display_history">
<code class="sig-name descname">display_history</code><span class="sig-paren">(</span><em class="sig-param">key</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Opt.display_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Display the history for an item in the dict.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="parlai.utils.misc.Predictor">
<em class="property">class </em><code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">Predictor</code><span class="sig-paren">(</span><em class="sig-param">args=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Predictor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper to set up running version of model and request predictions.</p>
<p>Note that this maintains no World state (does not use a World), merely
providing the observation directly to the model and getting a response.</p>
<p>This is limiting when it comes to certain use cases, but allows for quick
model deployment.</p>
<dl class="method">
<dt id="parlai.utils.misc.Predictor.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">args=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Predictor.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the predictor, setting up opt automatically if needed.</p>
<p>Args is expected to be in the same format as sys.argv: e.g. a list in
the form [‘–model’, ‘seq2seq’, ‘-hs’, 128, ‘-lr’, 0.5].</p>
<p>kwargs is interpreted by appending ‘–’ to it and replacing underscores
with hyphens, so ‘dict_file=/tmp/dict.tsv’ would be interpreted as
‘–dict-file /tmp/dict.tsv’.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.Predictor.predict">
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><em class="sig-param">observation</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Predictor.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>From a ParlAI-standard message dict, get model prediction.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="parlai.utils.misc.Timer">
<em class="property">class </em><code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">Timer</code><a class="headerlink" href="#parlai.utils.misc.Timer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Computes elapsed time.</p>
<dl class="method">
<dt id="parlai.utils.misc.Timer.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Timer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize timer.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.Timer.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Timer.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset timer to zero.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.Timer.resume">
<code class="sig-name descname">resume</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Timer.resume" title="Permalink to this definition">¶</a></dt>
<dd><p>Resume timer.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.Timer.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Timer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Pause timer.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.Timer.time">
<code class="sig-name descname">time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.Timer.time" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current timer time.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="parlai.utils.misc.TimeLogger">
<em class="property">class </em><code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">TimeLogger</code><a class="headerlink" href="#parlai.utils.misc.TimeLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for logging time progress against a goal.</p>
<dl class="method">
<dt id="parlai.utils.misc.TimeLogger.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.TimeLogger.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up timer.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.TimeLogger.total_time">
<code class="sig-name descname">total_time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.TimeLogger.total_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Return time elapsed at last log call.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.TimeLogger.time">
<code class="sig-name descname">time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.TimeLogger.time" title="Permalink to this definition">¶</a></dt>
<dd><p>Return current timer time.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.TimeLogger.log">
<code class="sig-name descname">log</code><span class="sig-paren">(</span><em class="sig-param">done</em>, <em class="sig-param">total</em>, <em class="sig-param">report=None</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.TimeLogger.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Log report, time elapsed, and percentage progress towards goal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>done</strong> – number of examples completed so far</p></li>
<li><p><strong>total</strong> – total number of elements to be completed. if total &gt; 0,
calculates the time remaining and percentage complete.</p></li>
<li><p><strong>report</strong> – dict of pairs to log</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple log string, log dict
log string contains time elapsed and string representation of
the log dict
log dict contains pairs of all items to log, which includes
percentage complete and projected time left if total &gt; 0</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="parlai.utils.misc.AttrDict">
<em class="property">class </em><code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">AttrDict</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.AttrDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>Helper class to have a dict-like object with dot access.</p>
<p>For example, instead of <cite>d = {‘key’: ‘value’}</cite> use
<cite>d = AttrDict(key=’value’)</cite>.
To access keys, instead of doing <cite>d[‘key’]</cite> use <cite>d.key</cite>.</p>
<p>While this has some limitations on the possible keys (for example, do not
set the key <cite>items</cite> or you will lose access to the <cite>items()</cite> method), this
can make some code more clear.</p>
<dl class="method">
<dt id="parlai.utils.misc.AttrDict.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.AttrDict.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize AttrDict using input dict.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.round_sigfigs">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">round_sigfigs</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">sigfigs=4</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.round_sigfigs" title="Permalink to this definition">¶</a></dt>
<dd><p>Round value to specified significant figures.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – input number</p></li>
<li><p><strong>sigfigs</strong> – number of significant figures to return</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float number rounded to specified sigfigs</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="parlai.utils.misc.NoLock">
<em class="property">class </em><code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">NoLock</code><a class="headerlink" href="#parlai.utils.misc.NoLock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Empty <cite>lock</cite>. Does nothing when you enter or exit.</p>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.no_lock">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">no_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.no_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a nolock for other classes to use for no-op locking.</p>
</dd></dl>

<dl class="class">
<dt id="parlai.utils.misc.PaddingUtils">
<em class="property">class </em><code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">PaddingUtils</code><a class="headerlink" href="#parlai.utils.misc.PaddingUtils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Helps with padding input and target tensors.</p>
<p>DEPRECATED. USE PARLAI.CORE.TORCH_AGENT INSTEAD.</p>
<dl class="method">
<dt id="parlai.utils.misc.PaddingUtils.pad_text">
<em class="property">classmethod </em><code class="sig-name descname">pad_text</code><span class="sig-paren">(</span><em class="sig-param">observations</em>, <em class="sig-param">dictionary</em>, <em class="sig-param">end_idx=None</em>, <em class="sig-param">null_idx=0</em>, <em class="sig-param">dq=False</em>, <em class="sig-param">eval_labels=True</em>, <em class="sig-param">truncate=None</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.PaddingUtils.pad_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Pad observations to max width.</p>
<p>We check that examples are valid, pad with zeros, and sort by length
so that we can use the pack_padded function. The list valid_inds
keeps track of which indices are valid and the order in which we sort
the examples.</p>
<p>dq – whether we should use deque or list
eval_labels – whether or not we want to consider eval labels
truncate – truncate input and output lengths</p>
<p>DEPRECATED. USE PARLAI.CORE.TORCH_AGENT INSTEAD.</p>
</dd></dl>

<dl class="method">
<dt id="parlai.utils.misc.PaddingUtils.map_predictions">
<em class="property">classmethod </em><code class="sig-name descname">map_predictions</code><span class="sig-paren">(</span><em class="sig-param">predictions</em>, <em class="sig-param">valid_inds</em>, <em class="sig-param">batch_reply</em>, <em class="sig-param">observations</em>, <em class="sig-param">dictionary</em>, <em class="sig-param">end_idx</em>, <em class="sig-param">report_freq=0.1</em>, <em class="sig-param">labels=None</em>, <em class="sig-param">answers=None</em>, <em class="sig-param">ys=None</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.PaddingUtils.map_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Match predictions to original index in the batch.</p>
<p>Predictions are mapped back to appropriate indices in the batch_reply
using valid_inds.</p>
<p>report_freq – how often we report predictions</p>
<p>DEPRECATED. USE PARLAI.CORE.TORCH_AGENT INSTEAD.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.clip_text">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">clip_text</code><span class="sig-paren">(</span><em class="sig-param">text</em>, <em class="sig-param">max_len</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.clip_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Clip text to max length, adding ellipses.</p>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.display_messages">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">display_messages</code><span class="sig-paren">(</span><em class="sig-param">msgs</em>, <em class="sig-param">prettify=False</em>, <em class="sig-param">ignore_fields=''</em>, <em class="sig-param">max_len=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.display_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string describing the set of messages provided.</p>
<p>If prettify is true, candidates are displayed using prettytable.
ignore_fields provides a list of fields in the msgs which should not be
displayed.</p>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.str_to_msg">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">str_to_msg</code><span class="sig-paren">(</span><em class="sig-param">txt</em>, <em class="sig-param">ignore_fields=''</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.str_to_msg" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert formatted string to ParlAI message dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>txt</strong> – formatted string to convert. String format is tab-separated fields,
with colon separating field name and contents.</p></li>
<li><p><strong>ignore_fields</strong> – (default ‘’) comma-separated field names to not
include in the msg dict even if they’re in the string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.msg_to_str">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">msg_to_str</code><span class="sig-paren">(</span><em class="sig-param">msg</em>, <em class="sig-param">ignore_fields=''</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.msg_to_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert ParlAI message dict to string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – dict to convert into a string.</p></li>
<li><p><strong>ignore_fields</strong> – (default ‘’) comma-separated field names to not include in the string
even if they’re in the msg dict.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.set_namedtuple_defaults">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">set_namedtuple_defaults</code><span class="sig-paren">(</span><em class="sig-param">namedtuple</em>, <em class="sig-param">default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.set_namedtuple_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Set <em>all</em> of the fields for a given nametuple to a singular value.</p>
<p>Additionally removes the default docstring for each field.
Modifies the tuple in place, but returns it anyway.</p>
<p>More info:
<a class="reference external" href="https://stackoverflow.com/a/18348004">https://stackoverflow.com/a/18348004</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namedtuple</strong> – A constructed collections.namedtuple</p></li>
<li><p><strong>default</strong> – The default value to set.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the modified namedtuple</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.padded_tensor">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">padded_tensor</code><span class="sig-paren">(</span><em class="sig-param">items</em>, <em class="sig-param">pad_idx=0</em>, <em class="sig-param">use_cuda=False</em>, <em class="sig-param">left_padded=False</em>, <em class="sig-param">max_len=None</em>, <em class="sig-param">fp16friendly=False</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.padded_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a right-padded matrix from an uneven list of lists.</p>
<p>Returns (padded, lengths), where padded is the padded matrix, and lengths
is a list containing the lengths of each row.</p>
<p>Matrix is right-padded (filled to the right) by default, but can be
left padded if the flag is set to True.</p>
<p>Matrix can also be placed on cuda automatically.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>items</strong> (<em>list</em><em>[</em><em>iter</em><em>[</em><em>int</em><em>]</em><em>]</em>) – List of items</p></li>
<li><p><strong>sort</strong> (<em>bool</em>) – If True, orders by the length</p></li>
<li><p><strong>pad_idx</strong> (<em>int</em>) – the value to use for padding</p></li>
<li><p><strong>use_cuda</strong> (<em>bool</em>) – if true, places <cite>padded</cite> on GPU</p></li>
<li><p><strong>left_padded</strong> (<em>bool</em>) – </p></li>
<li><p><strong>max_len</strong> (<em>int</em>) – if None, the max length is the maximum item length</p></li>
<li><p><strong>fp16friendly</strong> (<em>bool</em>) – if True, pads the time dimension to be a multiple of 8.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(padded, lengths) tuple</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(Tensor[int64], list[int])</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.padded_3d">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">padded_3d</code><span class="sig-paren">(</span><em class="sig-param">tensors</em>, <em class="sig-param">pad_idx=0</em>, <em class="sig-param">use_cuda=0</em>, <em class="sig-param">dtype=torch.int64</em>, <em class="sig-param">fp16friendly=False</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.padded_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Make 3D padded tensor for list of lists of 1D tensors or lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tensors</strong> – list of lists of 1D tensors (or lists)</p></li>
<li><p><strong>pad_idx</strong> – padding to fill tensor with</p></li>
<li><p><strong>use_cuda</strong> – whether to call cuda() before returning</p></li>
<li><p><strong>fp16friendly</strong> (<em>bool</em>) – if True, pads the final dimension to be a multiple of 8.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>3D tensor with the maximum dimensions of the inputs</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.argsort">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">argsort</code><span class="sig-paren">(</span><em class="sig-param">keys</em>, <em class="sig-param">*lists</em>, <em class="sig-param">descending=False</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.argsort" title="Permalink to this definition">¶</a></dt>
<dd><p>Reorder each list in lists by the (descending) sorted order of keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>iter</em>) – Keys to order by.</p></li>
<li><p><strong>lists</strong> (<em>list</em><em>[</em><em>list</em><em>]</em>) – Lists to reordered by keys’s order.  Correctly handles lists and 1-D
tensors.</p></li>
<li><p><strong>descending</strong> (<em>bool</em>) – Use descending order if true.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The reordered items.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.warn_once">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">warn_once</code><span class="sig-paren">(</span><em class="sig-param">msg</em>, <em class="sig-param">warningtype=None</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.warn_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise a warning, but only once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> (<em>str</em>) – Message to display</p></li>
<li><p><strong>warningtype</strong> (<em>Warning</em>) – Type of warning, e.g. DeprecationWarning</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="parlai.utils.misc.fp16_optimizer_wrapper">
<code class="sig-prename descclassname">parlai.utils.misc.</code><code class="sig-name descname">fp16_optimizer_wrapper</code><span class="sig-paren">(</span><em class="sig-param">optimizer</em>, <em class="sig-param">verbose=False</em>, <em class="sig-param">dynamic_loss_scale=True</em>, <em class="sig-param">loss_initial_scale=131072.0</em><span class="sig-paren">)</span><a class="headerlink" href="#parlai.utils.misc.fp16_optimizer_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap the an optimizer with FP16 loss scaling protection.</p>
<p>Requires apex to be installed. Will throw an ImportError if it is not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optimizer</strong> – Any torch optimizer</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Enables verbose output in the FP16 optimizer. Turning this on can help
debug when FP16 is underperforming.</p></li>
<li><p><strong>dynamic_loss_scaling</strong> (<em>bool</em>) – FP16 requires loss scaling to avoid underflows. It is recommended this
stays on, but advanced users may want it off.</p></li>
<li><p><strong>loss_initial_scale</strong> (<em>float</em>) – Initial loss scaling. Default chosen empirically, but models with very low
or high loss values may need this adjusted. Stick with powers of 2.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An APEX FP16 optimizer. Please note this has different requirements on
how backward() and step() are called.</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="thread_utils.html" class="btn btn-neutral float-right" title="core.thread_utils" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="teachers.html" class="btn btn-neutral float-left" title="core.teachers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Facebook AI Research

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>