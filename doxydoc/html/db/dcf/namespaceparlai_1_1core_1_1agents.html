<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParlAI: parlai.core.agents Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ParlAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d5/d22/namespaceparlai.html">parlai</a></li><li class="navelem"><a class="el" href="../../d1/d43/namespaceparlai_1_1core.html">core</a></li><li class="navelem"><a class="el" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html">agents</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">parlai.core.agents Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html">Agent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dbd/classparlai_1_1core_1_1agents_1_1MultiTaskTeacher.html">MultiTaskTeacher</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dbf/classparlai_1_1core_1_1agents_1_1Teacher.html">Teacher</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7a5f5076b35ce376d8b46bfb362bfc53"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7a5f5076b35ce376d8b46bfb362bfc53">name_to_agent_class</a> (name)</td></tr>
<tr class="separator:a7a5f5076b35ce376d8b46bfb362bfc53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eb0ec391b94a2adc51acdf8d2a35a68"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7eb0ec391b94a2adc51acdf8d2a35a68">compare_init_model_opts</a> (opt, curr_opt)</td></tr>
<tr class="separator:a7eb0ec391b94a2adc51acdf8d2a35a68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a213df46dd21144eb4c056bb58c294c5d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a213df46dd21144eb4c056bb58c294c5d">load_agent_module</a> (opt)</td></tr>
<tr class="separator:a213df46dd21144eb4c056bb58c294c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14a9d134d76ffd0509e50703d0f2c949"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a14a9d134d76ffd0509e50703d0f2c949">get_agent_module</a> (dir_name)</td></tr>
<tr class="separator:a14a9d134d76ffd0509e50703d0f2c949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0d54074d4bcc148bb415ab5515a53b5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#ad0d54074d4bcc148bb415ab5515a53b5">create_agent</a> (opt, requireModelExists=False)</td></tr>
<tr class="separator:ad0d54074d4bcc148bb415ab5515a53b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5af5dd1d2f9da491b60348d479b849f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#aa5af5dd1d2f9da491b60348d479b849f">create_agent_from_shared</a> (shared_agent)</td></tr>
<tr class="separator:aa5af5dd1d2f9da491b60348d479b849f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5600530545f5e60a79e2d657b5af1d8c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a5600530545f5e60a79e2d657b5af1d8c">create_agents_from_shared</a> (shared)</td></tr>
<tr class="separator:a5600530545f5e60a79e2d657b5af1d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a530b987b67a802a8e9c5fa3c24ae942f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a530b987b67a802a8e9c5fa3c24ae942f">get_task_module</a> (taskname)</td></tr>
<tr class="separator:a530b987b67a802a8e9c5fa3c24ae942f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4473fa54af02b5ab385b41b51dacd10"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#ab4473fa54af02b5ab385b41b51dacd10">create_task_agent_from_taskname</a> (opt)</td></tr>
<tr class="separator:ab4473fa54af02b5ab385b41b51dacd10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7eb0ec391b94a2adc51acdf8d2a35a68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eb0ec391b94a2adc51acdf8d2a35a68">&#9670;&nbsp;</a></span>compare_init_model_opts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.agents.compare_init_model_opts </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>curr_opt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Print loud warning when `init_model` opts differ from previous configuration.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00452">452</a> of file <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html">agents.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="keyword">def </span><a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7eb0ec391b94a2adc51acdf8d2a35a68">compare_init_model_opts</a>(opt, curr_opt):</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="stringliteral">    Print loud warning when `init_model` opts differ from previous configuration.</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">if</span> opt.get(<span class="stringliteral">&#39;init_model&#39;</span>) <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">return</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    opt[<span class="stringliteral">&#39;init_model&#39;</span>] = <a class="code" href="../../d5/dbb/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0.html#a5fbd3301b67f00d6d146fb01c7cd7626">modelzoo_path</a>(opt[<span class="stringliteral">&#39;datapath&#39;</span>], opt[<span class="stringliteral">&#39;init_model&#39;</span>])</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    optfile = opt[<span class="stringliteral">&#39;init_model&#39;</span>] + <span class="stringliteral">&#39;.opt&#39;</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isfile(optfile):</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">return</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    init_model_opt = <a class="code" href="../../d7/db6/namespaceparlai_1_1utils_1_1misc.html#a7c97ef3250327bc549ac652a481be0cf">load_opt_file</a>(optfile)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    extra_opts = {}</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    different_opts = {}</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    exempt_opts = [</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="stringliteral">&#39;model_file&#39;</span>,</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="stringliteral">&#39;dict_file&#39;</span>,</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="stringliteral">&#39;override&#39;</span>,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="stringliteral">&#39;starttime&#39;</span>,</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="stringliteral">&#39;init_model&#39;</span>,</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="stringliteral">&#39;batchindex&#39;</span>,</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    ]</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment"># search through init model opts</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> init_model_opt.items():</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">if</span> (</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            k <span class="keywordflow">not</span> <span class="keywordflow">in</span> exempt_opts</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">and</span> k <span class="keywordflow">in</span> init_model_opt</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="keywordflow">and</span> init_model_opt[k] != curr_opt.get(k)</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        ):</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <span class="keywordflow">if</span> isinstance(v, list):</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                <span class="keywordflow">if</span> init_model_opt[k] != list(curr_opt[k]):</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                    different_opts[k] = <span class="stringliteral">&#39;,&#39;</span>.join([<a class="code" href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">str</a>(x) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> v])</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                different_opts[k] = v</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment"># search through opts to load</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> curr_opt.items():</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">if</span> k <span class="keywordflow">not</span> <span class="keywordflow">in</span> exempt_opts <span class="keywordflow">and</span> k <span class="keywordflow">not</span> <span class="keywordflow">in</span> init_model_opt:</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keywordflow">if</span> isinstance(v, list):</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                extra_opts[k] = <span class="stringliteral">&#39;,&#39;</span>.join([<a class="code" href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">str</a>(x) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> v])</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                extra_opts[k] = v</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment"># print warnings</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    extra_strs = [<span class="stringliteral">&#39;{}: {}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(k, v) <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> extra_opts.items()]</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">if</span> extra_strs:</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        print(<span class="stringliteral">&#39;\n&#39;</span> + <span class="stringliteral">&#39;*&#39;</span> * 75)</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        print(</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <span class="stringliteral">&#39;[ WARNING ] : your model is being loaded with opts that do not &#39;</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="stringliteral">&#39;exist in the model you are initializing the weights with: &#39;</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <span class="stringliteral">&#39;{}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(<span class="stringliteral">&#39;,&#39;</span>.join(extra_strs))</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        )</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    different_strs = [</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="stringliteral">&#39;--{} {}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(k, v).replace(<span class="stringliteral">&#39;_&#39;</span>, <span class="stringliteral">&#39;-&#39;</span>) <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> different_opts.items()</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    ]</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">if</span> different_strs:</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        print(<span class="stringliteral">&#39;\n&#39;</span> + <span class="stringliteral">&#39;*&#39;</span> * 75)</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        print(</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="stringliteral">&#39;[ WARNING ] : your model is being loaded with opts that differ &#39;</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="stringliteral">&#39;from the model you are initializing the weights with. Add the &#39;</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="stringliteral">&#39;following args to your run command to change this: \n&#39;</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="stringliteral">&#39;\n{}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(<span class="stringliteral">&#39; &#39;</span>.join(different_strs))</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        )</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        print(<span class="stringliteral">&#39;*&#39;</span> * 75)</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a7eb0ec391b94a2adc51acdf8d2a35a68"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7eb0ec391b94a2adc51acdf8d2a35a68">parlai.core.agents.compare_init_model_opts</a></div><div class="ttdeci">def compare_init_model_opts(opt, curr_opt)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00452">agents.py:452</a></div></div>
<div class="ttc" id="namespacegenerate__task__READMEs_html_a5b88452ffb87b78c8c85ececebafc09f"><div class="ttname"><a href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">generate_task_READMEs.str</a></div><div class="ttdeci">string str</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d04/generate__task__READMEs_8py_source.html#l00022">generate_task_READMEs.py:22</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_html_a5fbd3301b67f00d6d146fb01c7cd7626"><div class="ttname"><a href="../../d5/dbb/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0.html#a5fbd3301b67f00d6d146fb01c7cd7626">parlai.agents.legacy_agents.seq2seq.utils_v0.modelzoo_path</a></div><div class="ttdeci">def modelzoo_path(datapath, path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd3/utils__v0_8py_source.html#l00755">utils_v0.py:755</a></div></div>
<div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
<div class="ttc" id="namespaceparlai_1_1utils_1_1misc_html_a7c97ef3250327bc549ac652a481be0cf"><div class="ttname"><a href="../../d7/db6/namespaceparlai_1_1utils_1_1misc.html#a7c97ef3250327bc549ac652a481be0cf">parlai.utils.misc.load_opt_file</a></div><div class="ttdeci">def load_opt_file(optfile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/misc_8py_source.html#l00175">misc.py:175</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad0d54074d4bcc148bb415ab5515a53b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0d54074d4bcc148bb415ab5515a53b5">&#9670;&nbsp;</a></span>create_agent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.agents.create_agent </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>requireModelExists</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create an agent from the options ``model``, ``model_params`` and ``model_file``.

The input is either of the form
``parlai.agents.ir_baseline.agents:IrBaselineAgent`` (i.e. the path
followed by the class name) or else just ``ir_baseline`` which
assumes the path above, and a class name suffixed with 'Agent'.

If ``model-file`` is available in the options this function can also
attempt to load the model from that location instead. This avoids having to
specify all the other options necessary to set up the model including its
name as they are all loaded from the options file if it exists (the file
opt['model_file'] + '.opt' must exist and contain a pickled or json dict
containing the model's options).
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00696">696</a> of file <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html">agents.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="keyword">def </span><a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#ad0d54074d4bcc148bb415ab5515a53b5">create_agent</a>(opt, requireModelExists=False):</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="stringliteral">    Create an agent from the options ``model``, ``model_params`` and ``model_file``.</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="stringliteral">    The input is either of the form</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="stringliteral">    ``parlai.agents.ir_baseline.agents:IrBaselineAgent`` (i.e. the path</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="stringliteral">    followed by the class name) or else just ``ir_baseline`` which</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="stringliteral">    assumes the path above, and a class name suffixed with &#39;Agent&#39;.</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="stringliteral">    If ``model-file`` is available in the options this function can also</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="stringliteral">    attempt to load the model from that location instead. This avoids having to</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="stringliteral">    specify all the other options necessary to set up the model including its</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="stringliteral">    name as they are all loaded from the options file if it exists (the file</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="stringliteral">    opt[&#39;model_file&#39;] + &#39;.opt&#39; must exist and contain a pickled or json dict</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="stringliteral">    containing the model&#39;s options).</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">if</span> opt.get(<span class="stringliteral">&#39;datapath&#39;</span>, <span class="keywordtype">None</span>) <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="comment"># add datapath, it is missing</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keyword">from</span> <a class="code" href="../../d3/d3f/namespaceparlai_1_1core_1_1params.html">parlai.core.params</a> <span class="keyword">import</span> ParlaiParser, get_model_name</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        parser = ParlaiParser(add_parlai_args=<span class="keyword">False</span>)</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        parser.add_parlai_data_path()</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="comment"># add model args if they are missing</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        model = <a class="code" href="../../d3/d3f/namespaceparlai_1_1core_1_1params.html#a6d160324f6af84562334fd0698141074">get_model_name</a>(opt)</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordflow">if</span> model <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            parser.add_model_subargs(model)</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        opt_parser = parser.parse_args(<span class="stringliteral">&quot;&quot;</span>, print_args=<span class="keyword">False</span>)</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> opt_parser.items():</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="keywordflow">if</span> k <span class="keywordflow">not</span> <span class="keywordflow">in</span> opt:</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                opt[k] = v</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">if</span> opt.get(<span class="stringliteral">&#39;model_file&#39;</span>):</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        opt[<span class="stringliteral">&#39;model_file&#39;</span>] = <a class="code" href="../../d5/dbb/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0.html#a5fbd3301b67f00d6d146fb01c7cd7626">modelzoo_path</a>(opt.get(<span class="stringliteral">&#39;datapath&#39;</span>), opt[<span class="stringliteral">&#39;model_file&#39;</span>])</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">if</span> requireModelExists <span class="keywordflow">and</span> <span class="keywordflow">not</span> os.path.isfile(opt[<span class="stringliteral">&#39;model_file&#39;</span>]):</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <span class="keywordflow">raise</span> RuntimeError(</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                <span class="stringliteral">&#39;WARNING: Model file does not exist, check to make &#39;</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="stringliteral">&#39;sure it is correct: {}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(opt[<span class="stringliteral">&#39;model_file&#39;</span>])</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            )</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="comment"># Attempt to load the model from the model file first (this way we do</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="comment"># not even have to specify the model name as a parameter)</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        model = <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a213df46dd21144eb4c056bb58c294c5d">load_agent_module</a>(opt)</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">if</span> model <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="keywordflow">return</span> model</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            print(<span class="stringliteral">&quot;[ no model with opt yet at: &quot;</span> + opt.get(<span class="stringliteral">&#39;model_file&#39;</span>) + <span class="stringliteral">&quot;(.opt) ]&quot;</span>)</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> opt.get(<span class="stringliteral">&#39;model&#39;</span>):</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        model_class = <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a14a9d134d76ffd0509e50703d0f2c949">get_agent_module</a>(opt[<span class="stringliteral">&#39;model&#39;</span>])</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="comment"># if we want to load weights from --init-model, compare opts with</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="comment"># loaded ones</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7eb0ec391b94a2adc51acdf8d2a35a68">compare_init_model_opts</a>(opt, opt)</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        model = model_class(opt)</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="keywordflow">if</span> requireModelExists <span class="keywordflow">and</span> hasattr(model, <span class="stringliteral">&#39;load&#39;</span>) <span class="keywordflow">and</span> <span class="keywordflow">not</span> opt.get(<span class="stringliteral">&#39;model_file&#39;</span>):</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="comment"># double check that we didn&#39;t forget to set model_file on loadable model</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            print(<span class="stringliteral">&#39;WARNING: model_file unset but model has a `load` function.&#39;</span>)</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">return</span> model</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&#39;Need to set `model` argument to use create_agent.&#39;</span>)</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"># Helper functions to create agent/agents given shared parameters</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"># returned from agent.share(). Useful for parallelism, sharing params, etc.</span></div><div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a7eb0ec391b94a2adc51acdf8d2a35a68"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7eb0ec391b94a2adc51acdf8d2a35a68">parlai.core.agents.compare_init_model_opts</a></div><div class="ttdeci">def compare_init_model_opts(opt, curr_opt)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00452">agents.py:452</a></div></div>
<div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a213df46dd21144eb4c056bb58c294c5d"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a213df46dd21144eb4c056bb58c294c5d">parlai.core.agents.load_agent_module</a></div><div class="ttdeci">def load_agent_module(opt)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00520">agents.py:520</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_html_a5fbd3301b67f00d6d146fb01c7cd7626"><div class="ttname"><a href="../../d5/dbb/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0.html#a5fbd3301b67f00d6d146fb01c7cd7626">parlai.agents.legacy_agents.seq2seq.utils_v0.modelzoo_path</a></div><div class="ttdeci">def modelzoo_path(datapath, path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd3/utils__v0_8py_source.html#l00755">utils_v0.py:755</a></div></div>
<div class="ttc" id="namespaceparlai_1_1core_1_1params_html"><div class="ttname"><a href="../../d3/d3f/namespaceparlai_1_1core_1_1params.html">parlai.core.params</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/params_8py_source.html#l00001">params.py:1</a></div></div>
<div class="ttc" id="namespaceparlai_1_1core_1_1params_html_a6d160324f6af84562334fd0698141074"><div class="ttname"><a href="../../d3/d3f/namespaceparlai_1_1core_1_1params.html#a6d160324f6af84562334fd0698141074">parlai.core.params.get_model_name</a></div><div class="ttdeci">def get_model_name(opt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1a/params_8py_source.html#l00104">params.py:104</a></div></div>
<div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
<div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a14a9d134d76ffd0509e50703d0f2c949"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a14a9d134d76ffd0509e50703d0f2c949">parlai.core.agents.get_agent_module</a></div><div class="ttdeci">def get_agent_module(dir_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00606">agents.py:606</a></div></div>
<div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_ad0d54074d4bcc148bb415ab5515a53b5"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#ad0d54074d4bcc148bb415ab5515a53b5">parlai.core.agents.create_agent</a></div><div class="ttdeci">def create_agent(opt, requireModelExists=False)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00696">agents.py:696</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa5af5dd1d2f9da491b60348d479b849f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5af5dd1d2f9da491b60348d479b849f">&#9670;&nbsp;</a></span>create_agent_from_shared()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.agents.create_agent_from_shared </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shared_agent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Instantiate an agent from the default `shared` params.

:param shared_agent:
    should include an `opt` dictionary and agent `class`, along with
    whatever other parameters the agent needs to instantiate.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00758">758</a> of file <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html">agents.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="keyword">def </span><a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#aa5af5dd1d2f9da491b60348d479b849f">create_agent_from_shared</a>(shared_agent):</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="stringliteral">    Instantiate an agent from the default `shared` params.</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="stringliteral">    :param shared_agent:</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="stringliteral">        should include an `opt` dictionary and agent `class`, along with</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="stringliteral">        whatever other parameters the agent needs to instantiate.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    opt = copy.deepcopy(shared_agent[<span class="stringliteral">&#39;opt&#39;</span>])</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    a = shared_agent[<span class="stringliteral">&#39;class&#39;</span>](opt, shared_agent)</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">return</span> a</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_aa5af5dd1d2f9da491b60348d479b849f"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#aa5af5dd1d2f9da491b60348d479b849f">parlai.core.agents.create_agent_from_shared</a></div><div class="ttdeci">def create_agent_from_shared(shared_agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00758">agents.py:758</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5600530545f5e60a79e2d657b5af1d8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5600530545f5e60a79e2d657b5af1d8c">&#9670;&nbsp;</a></span>create_agents_from_shared()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.agents.create_agents_from_shared </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shared</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create agents based on shared data.

:param shared: `list` of `dict` objects created by calling e.g.
    [a.share() for a in agents].

Returns a list of instantiated agents.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00771">771</a> of file <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html">agents.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="keyword">def </span><a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a5600530545f5e60a79e2d657b5af1d8c">create_agents_from_shared</a>(shared):</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="stringliteral">    Create agents based on shared data.</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="stringliteral">    :param shared: `list` of `dict` objects created by calling e.g.</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="stringliteral">        [a.share() for a in agents].</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="stringliteral">    Returns a list of instantiated agents.</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    shared_agents = []</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">for</span> shared_agent <span class="keywordflow">in</span> shared:</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        agent = <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#aa5af5dd1d2f9da491b60348d479b849f">create_agent_from_shared</a>(shared_agent)</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        shared_agents.append(agent)</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">return</span> shared_agents</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a5600530545f5e60a79e2d657b5af1d8c"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a5600530545f5e60a79e2d657b5af1d8c">parlai.core.agents.create_agents_from_shared</a></div><div class="ttdeci">def create_agents_from_shared(shared)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00771">agents.py:771</a></div></div>
<div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_aa5af5dd1d2f9da491b60348d479b849f"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#aa5af5dd1d2f9da491b60348d479b849f">parlai.core.agents.create_agent_from_shared</a></div><div class="ttdeci">def create_agent_from_shared(shared_agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00758">agents.py:758</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab4473fa54af02b5ab385b41b51dacd10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4473fa54af02b5ab385b41b51dacd10">&#9670;&nbsp;</a></span>create_task_agent_from_taskname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.agents.create_task_agent_from_taskname </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create task agent(s) assuming the input ``task_dir:teacher_class``.

e.g. def_string is a shorthand path like ``babi:Task1k:1`` or ``#babi`` or a
complete path like ``parlai.tasks.babi.agents:Task1kTeacher:1``, which essentially
performs ``from parlai.tasks.babi import Task1kTeacher`` with the parameter ``1`` in
``opt['task']`` to be used by the class ``Task1kTeacher``.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00859">859</a> of file <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html">agents.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="keyword">def </span><a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#ab4473fa54af02b5ab385b41b51dacd10">create_task_agent_from_taskname</a>(opt):</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="stringliteral">    Create task agent(s) assuming the input ``task_dir:teacher_class``.</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="stringliteral">    e.g. def_string is a shorthand path like ``babi:Task1k:1`` or ``#babi`` or a</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="stringliteral">    complete path like ``parlai.tasks.babi.agents:Task1kTeacher:1``, which essentially</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="stringliteral">    performs ``from parlai.tasks.babi import Task1kTeacher`` with the parameter ``1`` in</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="stringliteral">    ``opt[&#39;task&#39;]`` to be used by the class ``Task1kTeacher``.</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">if</span> <span class="keywordflow">not</span> (</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        opt.get(<span class="stringliteral">&#39;task&#39;</span>)</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="keywordflow">or</span> opt.get(<span class="stringliteral">&#39;pytorch_teacher_task&#39;</span>)</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="keywordflow">or</span> opt.get(<span class="stringliteral">&#39;pytorch_teacher_dataset&#39;</span>)</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    ):</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">raise</span> RuntimeError(</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            <span class="stringliteral">&#39;No task specified. Please select a task with &#39;</span> + <span class="stringliteral">&#39;--task {task_name}.&#39;</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        )</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> <span class="keywordflow">not</span> opt.get(<span class="stringliteral">&#39;task&#39;</span>):</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        opt[<span class="stringliteral">&#39;task&#39;</span>] = <span class="stringliteral">&#39;pytorch_teacher&#39;</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">if</span> <span class="stringliteral">&#39;,&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> opt[<span class="stringliteral">&#39;task&#39;</span>]:</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="comment"># Single task</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        teacher_class = <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a530b987b67a802a8e9c5fa3c24ae942f">get_task_module</a>(opt[<span class="stringliteral">&#39;task&#39;</span>])</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        _add_task_flags_to_agent_opt(teacher_class, opt, opt[<span class="stringliteral">&#39;task&#39;</span>])</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        task_agents = teacher_class(opt)</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">if</span> <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad5dfae268e23f506da084a9efb72f619">type</a>(task_agents) != list:</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            task_agents = [task_agents]</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">return</span> task_agents</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="comment"># Multitask teacher/agent</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        task_agents = MultiTaskTeacher(opt)</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordflow">if</span> <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad5dfae268e23f506da084a9efb72f619">type</a>(task_agents) != list:</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            task_agents = [task_agents]</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">return</span> task_agents</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a530b987b67a802a8e9c5fa3c24ae942f"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a530b987b67a802a8e9c5fa3c24ae942f">parlai.core.agents.get_task_module</a></div><div class="ttdeci">def get_task_module(taskname)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00787">agents.py:787</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_ad5dfae268e23f506da084a9efb72f619"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad5dfae268e23f506da084a9efb72f619">parlai.agents.tfidf_retriever.build_tfidf.type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00339">build_tfidf.py:339</a></div></div>
<div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_ab4473fa54af02b5ab385b41b51dacd10"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#ab4473fa54af02b5ab385b41b51dacd10">parlai.core.agents.create_task_agent_from_taskname</a></div><div class="ttdeci">def create_task_agent_from_taskname(opt)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00859">agents.py:859</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a14a9d134d76ffd0509e50703d0f2c949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14a9d134d76ffd0509e50703d0f2c949">&#9670;&nbsp;</a></span>get_agent_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.agents.get_agent_module </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dir_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return the module for an agent specified by ``--model``.

Can be formatted in several different ways:

* full: `-m parlai.agents.seq2seq.seq2seq:Seq2seqAgent`
* shorthand: -m seq2seq, which will check both paths
  ``parlai.agents.seq2seq.seq2seq:Seq2seqAgent`` and
  ``parlai.agents.seq2seq.agents:Seq2seqAgent``
* half-shorthand: ``-m seq2seq/variant``, which will check the path
  `parlai.agents.seq2seq.variant:VariantAgent`
* legacy models: ``-m legacy:seq2seq:0``, which will look for the deprecated
  model at ``parlai.agents.legacy_agents.seq2seq.seq2seq_v0:Seq2seqAgent``

The base path to search when using shorthand formats can be changed from
"parlai" to "parlai_internal" by prepending "internal:" to the path, e.g.
"internal:seq2seq".

To use legacy agent versions, you can prepend "legacy:" to model arguments,
e.g. "legacy:seq2seq:0" will translate to ``legacy_agents/seq2seq/seq2seq_v0``.

To use agents in projects, you can prepend "projects:" and the name of the
project folder to model arguments, e.g. "projects:personachat:kvmemnn"
will translate to ``projects/personachat/kvmemnn``.

:param dir_name: path to model class in one of the above formats.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00606">606</a> of file <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html">agents.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="keyword">def </span><a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a14a9d134d76ffd0509e50703d0f2c949">get_agent_module</a>(dir_name):</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="stringliteral">    Return the module for an agent specified by ``--model``.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="stringliteral">    Can be formatted in several different ways:</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="stringliteral">    * full: `-m parlai.agents.seq2seq.seq2seq:Seq2seqAgent`</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="stringliteral">    * shorthand: -m seq2seq, which will check both paths</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="stringliteral">      ``parlai.agents.seq2seq.seq2seq:Seq2seqAgent`` and</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="stringliteral">      ``parlai.agents.seq2seq.agents:Seq2seqAgent``</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="stringliteral">    * half-shorthand: ``-m seq2seq/variant``, which will check the path</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="stringliteral">      `parlai.agents.seq2seq.variant:VariantAgent`</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="stringliteral">    * legacy models: ``-m legacy:seq2seq:0``, which will look for the deprecated</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="stringliteral">      model at ``parlai.agents.legacy_agents.seq2seq.seq2seq_v0:Seq2seqAgent``</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="stringliteral">    The base path to search when using shorthand formats can be changed from</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="stringliteral">    &quot;parlai&quot; to &quot;parlai_internal&quot; by prepending &quot;internal:&quot; to the path, e.g.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="stringliteral">    &quot;internal:seq2seq&quot;.</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="stringliteral">    To use legacy agent versions, you can prepend &quot;legacy:&quot; to model arguments,</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="stringliteral">    e.g. &quot;legacy:seq2seq:0&quot; will translate to ``legacy_agents/seq2seq/seq2seq_v0``.</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="stringliteral">    To use agents in projects, you can prepend &quot;projects:&quot; and the name of the</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="stringliteral">    project folder to model arguments, e.g. &quot;projects:personachat:kvmemnn&quot;</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="stringliteral">    will translate to ``projects/personachat/kvmemnn``.</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="stringliteral">    :param dir_name: path to model class in one of the above formats.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    repo = <span class="stringliteral">&#39;parlai&#39;</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">if</span> dir_name.startswith(<span class="stringliteral">&#39;internal:&#39;</span>):</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="comment"># To switch to local repo, useful for non-public projects</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="comment"># (make a directory called &#39;parlai_internal&#39; with your private agents)</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="comment"># this will follow the same paths but look in parlai_internal instead</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        repo = <span class="stringliteral">&#39;parlai_internal&#39;</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        dir_name = dir_name[9:]</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> dir_name.startswith(<span class="stringliteral">&#39;legacy:&#39;</span>):</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="comment"># e.g. -m legacy:seq2seq:0</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="comment"># will check legacy_agents.seq2seq.seq2seq_v0:Seq2seqAgent</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        s = dir_name.split(<span class="stringliteral">&#39;:&#39;</span>)</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">if</span> len(s) != 3:</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            <span class="keywordflow">raise</span> RuntimeError(</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                <span class="stringliteral">&#39;legacy paths should follow pattern &#39;</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                <span class="stringliteral">&#39;legacy:model:version; you used {}&#39;</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <span class="stringliteral">&#39;&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(dir_name)</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            )</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        model_name = s[1]  <span class="comment"># seq2seq</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        module_name = <span class="stringliteral">&#39;parlai.agents.legacy_agents.{m}.{m}_v{v}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            m=model_name, v=s[2]</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        )</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        class_name = <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7a5f5076b35ce376d8b46bfb362bfc53">name_to_agent_class</a>(model_name)</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">elif</span> dir_name.startswith(<span class="stringliteral">&#39;projects:&#39;</span>):</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="comment"># e.g. -m projects:personachat:kvmemnn</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        s = dir_name.split(<span class="stringliteral">&#39;:&#39;</span>)</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">if</span> len(s) != 3:</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">raise</span> RuntimeError(</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                <span class="stringliteral">&#39;projects paths should follow pattern &#39;</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                <span class="stringliteral">&#39;projects:folder:model; you used {}&#39;</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                <span class="stringliteral">&#39;&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(dir_name)</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            )</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        folder_name = s[1]</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        model_name = s[2]</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        module_name = <span class="stringliteral">&#39;projects.{p}.{m}.{m}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(m=model_name, p=folder_name)</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        class_name = <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7a5f5076b35ce376d8b46bfb362bfc53">name_to_agent_class</a>(model_name)</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">elif</span> <span class="stringliteral">&#39;:&#39;</span> <span class="keywordflow">in</span> dir_name:</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="comment"># e.g. -m &quot;parlai.agents.seq2seq.seq2seq:Seq2seqAgent&quot;</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        s = dir_name.split(<span class="stringliteral">&#39;:&#39;</span>)</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        module_name = s[0]</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        class_name = s[1]</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">elif</span> <span class="stringliteral">&#39;/&#39;</span> <span class="keywordflow">in</span> dir_name:</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="comment"># e.g. -m my_agent/special_variant</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="comment"># will check parlai.agents.my_agent.special_variant:SpecialVariantAgent</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        sp = dir_name.split(<span class="stringliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        module_name = <span class="stringliteral">&quot;%s.agents.%s.%s&quot;</span> % (repo, sp[0], sp[1])</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        class_name = <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7a5f5076b35ce376d8b46bfb362bfc53">name_to_agent_class</a>(sp[1])</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="comment"># e.g. -m seq2seq</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="comment"># will check parlai.agents.seq2seq.agents for Seq2seqAgent first</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="comment"># then check parlai.agents.seq2seq.seq2seq for Seq2seqAgent second</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        class_name = <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7a5f5076b35ce376d8b46bfb362bfc53">name_to_agent_class</a>(dir_name)</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            module_name = <span class="stringliteral">&quot;%s.agents.%s.agents&quot;</span> % (repo, dir_name)</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            importlib.import_module(module_name)  <span class="comment"># check if it&#39;s there</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">except</span> ImportError:</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            module_name = <span class="stringliteral">&quot;%s.agents.%s.%s&quot;</span> % (repo, dir_name, dir_name)</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    my_module = importlib.import_module(module_name)</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    model_class = getattr(my_module, class_name)</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> model_class</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a7a5f5076b35ce376d8b46bfb362bfc53"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7a5f5076b35ce376d8b46bfb362bfc53">parlai.core.agents.name_to_agent_class</a></div><div class="ttdeci">def name_to_agent_class(name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00432">agents.py:432</a></div></div>
<div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
<div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a14a9d134d76ffd0509e50703d0f2c949"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a14a9d134d76ffd0509e50703d0f2c949">parlai.core.agents.get_agent_module</a></div><div class="ttdeci">def get_agent_module(dir_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00606">agents.py:606</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a530b987b67a802a8e9c5fa3c24ae942f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a530b987b67a802a8e9c5fa3c24ae942f">&#9670;&nbsp;</a></span>get_task_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.agents.get_task_module </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>taskname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get the module of the task agent specified by `--task`.

Can be formatted in several different ways:

* full: ``-t parlai.tasks.babi.agents:DefaultTeacher``
* shorthand: ``-t babi``, which will check
    ``parlai.tasks.babi.agents:DefaultTeacher``
* shorthand specific: ``-t babi:task10k``, which will check
    ``parlai.tasks.babi.agents:Task10kTeacher``

The base path to search when using shorthand formats can be changed from
"parlai" to "parlai_internal" by prepending "internal:" to the path, e.g.
"internal:babi".

Options can be sent to the teacher by adding an additional colon,
for example ``-t babi:task10k:1`` directs the babi Task10kTeacher to use
task number 1.

:param taskname: path to task class in one of the above formats.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00787">787</a> of file <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html">agents.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="keyword">def </span><a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a530b987b67a802a8e9c5fa3c24ae942f">get_task_module</a>(taskname):</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="stringliteral">    Get the module of the task agent specified by `--task`.</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="stringliteral">    Can be formatted in several different ways:</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="stringliteral">    * full: ``-t parlai.tasks.babi.agents:DefaultTeacher``</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="stringliteral">    * shorthand: ``-t babi``, which will check</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="stringliteral">        ``parlai.tasks.babi.agents:DefaultTeacher``</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="stringliteral">    * shorthand specific: ``-t babi:task10k``, which will check</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="stringliteral">        ``parlai.tasks.babi.agents:Task10kTeacher``</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="stringliteral">    The base path to search when using shorthand formats can be changed from</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="stringliteral">    &quot;parlai&quot; to &quot;parlai_internal&quot; by prepending &quot;internal:&quot; to the path, e.g.</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="stringliteral">    &quot;internal:babi&quot;.</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="stringliteral">    Options can be sent to the teacher by adding an additional colon,</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="stringliteral">    for example ``-t babi:task10k:1`` directs the babi Task10kTeacher to use</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="stringliteral">    task number 1.</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="stringliteral">    :param taskname: path to task class in one of the above formats.</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    sp = taskname.strip()</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    repo = <span class="stringliteral">&#39;parlai&#39;</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">if</span> sp.startswith(<span class="stringliteral">&#39;internal:&#39;</span>):</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="comment"># To switch to local repo, useful for non-public projects</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="comment"># (make a directory called &#39;parlai_internal&#39; with your private agents)</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        repo = <span class="stringliteral">&#39;parlai_internal&#39;</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        sp = sp[9:]</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    sp = sp.split(<span class="stringliteral">&#39;:&#39;</span>)</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">if</span> <span class="stringliteral">&#39;.&#39;</span> <span class="keywordflow">in</span> sp[0]:</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        module_name = sp[0]</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">elif</span> sp[0] == <span class="stringliteral">&#39;pytorch_teacher&#39;</span>:</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        module_name = <span class="stringliteral">&#39;parlai.core.pytorch_data_teacher&#39;</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        task = sp[0].lower()</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        module_name = <span class="stringliteral">&quot;%s.tasks.%s.agents&quot;</span> % (repo, task)</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">if</span> len(sp) &gt; 1 <span class="keywordflow">and</span> <span class="stringliteral">&#39;=&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> sp[1]:</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        sp[1] = sp[1][0].upper() + sp[1][1:]</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        teacher = sp[1]</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;.&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> sp[0] <span class="keywordflow">and</span> <span class="stringliteral">&#39;Teacher&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> teacher:</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="comment"># Reformat from underscore to CamelCase and append &quot;Teacher&quot; to</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="comment"># class name by default if a complete path is not given.</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            words = teacher.split(<span class="stringliteral">&#39;_&#39;</span>)</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            teacher_name = <span class="stringliteral">&#39;&#39;</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <span class="keywordflow">for</span> w <span class="keywordflow">in</span> words:</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                teacher_name += w[0].upper() + w[1:]</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            teacher = teacher_name + <span class="stringliteral">&quot;Teacher&quot;</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        teacher = <span class="stringliteral">&quot;DefaultTeacher&quot;</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    my_module = importlib.import_module(module_name)</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    teacher_class = getattr(my_module, teacher)</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">return</span> teacher_class</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a530b987b67a802a8e9c5fa3c24ae942f"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a530b987b67a802a8e9c5fa3c24ae942f">parlai.core.agents.get_task_module</a></div><div class="ttdeci">def get_task_module(taskname)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00787">agents.py:787</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a213df46dd21144eb4c056bb58c294c5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a213df46dd21144eb4c056bb58c294c5d">&#9670;&nbsp;</a></span>load_agent_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.agents.load_agent_module </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Load agent options and module from file if opt file exists.

Checks to see if file exists opt['model_file'] + ".opt"; if so, load up the
options from the file and use that to create an agent, loading the model
type from that file and overriding any options specified in that file when
instantiating the agent.

If that file does not exist, return None.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00520">520</a> of file <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html">agents.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="keyword">def </span><a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a213df46dd21144eb4c056bb58c294c5d">load_agent_module</a>(opt):</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="stringliteral">    Load agent options and module from file if opt file exists.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="stringliteral">    Checks to see if file exists opt[&#39;model_file&#39;] + &quot;.opt&quot;; if so, load up the</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="stringliteral">    options from the file and use that to create an agent, loading the model</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="stringliteral">    type from that file and overriding any options specified in that file when</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="stringliteral">    instantiating the agent.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="stringliteral">    If that file does not exist, return None.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    model_file = opt[<span class="stringliteral">&#39;model_file&#39;</span>]</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    optfile = model_file + <span class="stringliteral">&#39;.opt&#39;</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">if</span> os.path.isfile(optfile):</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        new_opt = <a class="code" href="../../d7/db6/namespaceparlai_1_1utils_1_1misc.html#a7c97ef3250327bc549ac652a481be0cf">load_opt_file</a>(optfile)</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="comment"># TODO we need a better way to say these options are never copied...</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;datapath&#39;</span> <span class="keywordflow">in</span> new_opt:</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="comment"># never use the datapath from an opt dump</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            del new_opt[<span class="stringliteral">&#39;datapath&#39;</span>]</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;batchindex&#39;</span> <span class="keywordflow">in</span> new_opt:</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="comment"># This saved variable can cause trouble if we switch to BS=1 at test time</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            del new_opt[<span class="stringliteral">&#39;batchindex&#39;</span>]</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="comment"># only override opts specified in &#39;override&#39; dict</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">if</span> opt.get(<span class="stringliteral">&#39;override&#39;</span>):</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> opt[<span class="stringliteral">&#39;override&#39;</span>].items():</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                <span class="keywordflow">if</span> <a class="code" href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">str</a>(v) != <a class="code" href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">str</a>(new_opt.get(k, <span class="keywordtype">None</span>)):</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                    print(</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                        <span class="stringliteral">&quot;[ warning: overriding opt[&#39;{}&#39;] to {} (&quot;</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                        <span class="stringliteral">&quot;previously: {} )]&quot;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(k, v, new_opt.get(k, <span class="keywordtype">None</span>))</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                    )</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                new_opt[k] = v</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        model_class = <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a14a9d134d76ffd0509e50703d0f2c949">get_agent_module</a>(new_opt[<span class="stringliteral">&#39;model&#39;</span>])</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="comment"># check for model version</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">if</span> hasattr(model_class, <span class="stringliteral">&#39;model_version&#39;</span>):</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            curr_version = new_opt.get(<span class="stringliteral">&#39;model_version&#39;</span>, 0)</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <span class="keywordflow">if</span> curr_version != model_class.model_version():</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                model = new_opt[<span class="stringliteral">&#39;model&#39;</span>]</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                m = (</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                    <span class="stringliteral">&#39;It looks like you are trying to load an older version of&#39;</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                    <span class="stringliteral">&#39; the selected model. Change your model argument to use &#39;</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    <span class="stringliteral">&#39;the old version from parlai/agents/legacy_agents: for &#39;</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    <span class="stringliteral">&#39;example: `-m legacy:{m}:{v}` or &#39;</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    <span class="stringliteral">&#39;`--model parlai.agents.legacy_agents.{m}.{m}_v{v}:{c}`&#39;</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                )</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                <span class="keywordflow">if</span> <span class="stringliteral">&#39;.&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> model:</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                    <span class="comment"># give specific error message if it&#39;s easy</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                    <span class="keywordflow">raise</span> RuntimeError(</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                        m.format(m=model, v=curr_version, c=model_class.__name__)</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                    )</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                    <span class="comment"># otherwise generic one</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                    <span class="keywordflow">raise</span> RuntimeError(</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                        m.format(m=<span class="stringliteral">&#39;modelname&#39;</span>, v=curr_version, c=<span class="stringliteral">&#39;ModelAgent&#39;</span>)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                    )</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">if</span> hasattr(model_class, <span class="stringliteral">&#39;upgrade_opt&#39;</span>):</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            new_opt = model_class.upgrade_opt(new_opt)</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="comment"># add model arguments to new_opt if they aren&#39;t in new_opt already</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> opt.items():</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="keywordflow">if</span> k <span class="keywordflow">not</span> <span class="keywordflow">in</span> new_opt:</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                new_opt[k] = v</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        new_opt[<span class="stringliteral">&#39;model_file&#39;</span>] = model_file</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> new_opt.get(<span class="stringliteral">&#39;dict_file&#39;</span>):</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            new_opt[<span class="stringliteral">&#39;dict_file&#39;</span>] = model_file + <span class="stringliteral">&#39;.dict&#39;</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">elif</span> new_opt.get(<span class="stringliteral">&#39;dict_file&#39;</span>) <span class="keywordflow">and</span> <span class="keywordflow">not</span> os.path.isfile(new_opt[<span class="stringliteral">&#39;dict_file&#39;</span>]):</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            old_dict_file = new_opt[<span class="stringliteral">&#39;dict_file&#39;</span>]</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            new_opt[<span class="stringliteral">&#39;dict_file&#39;</span>] = model_file + <span class="stringliteral">&#39;.dict&#39;</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isfile(new_opt[<span class="stringliteral">&#39;dict_file&#39;</span>]):</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <a class="code" href="../../d7/db6/namespaceparlai_1_1utils_1_1misc.html#acf146e70ea7f6867969a7c2b545d4b4b">warn_once</a>(</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <span class="stringliteral">&#39;WARNING: Neither the specified dict file ({}) nor the &#39;</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                <span class="stringliteral">&#39;`model_file`.dict file ({}) exists, check to make sure either &#39;</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                <span class="stringliteral">&#39;is correct. This may manifest as a shape mismatch later &#39;</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                <span class="stringliteral">&#39;on.&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(old_dict_file, new_opt[<span class="stringliteral">&#39;dict_file&#39;</span>])</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            )</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="comment"># if we want to load weights from --init-model, compare opts with</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="comment"># loaded ones</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7eb0ec391b94a2adc51acdf8d2a35a68">compare_init_model_opts</a>(opt, new_opt)</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">return</span> model_class(new_opt)</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a7eb0ec391b94a2adc51acdf8d2a35a68"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7eb0ec391b94a2adc51acdf8d2a35a68">parlai.core.agents.compare_init_model_opts</a></div><div class="ttdeci">def compare_init_model_opts(opt, curr_opt)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00452">agents.py:452</a></div></div>
<div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a213df46dd21144eb4c056bb58c294c5d"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a213df46dd21144eb4c056bb58c294c5d">parlai.core.agents.load_agent_module</a></div><div class="ttdeci">def load_agent_module(opt)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00520">agents.py:520</a></div></div>
<div class="ttc" id="namespacegenerate__task__READMEs_html_a5b88452ffb87b78c8c85ececebafc09f"><div class="ttname"><a href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">generate_task_READMEs.str</a></div><div class="ttdeci">string str</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d04/generate__task__READMEs_8py_source.html#l00022">generate_task_READMEs.py:22</a></div></div>
<div class="ttc" id="namespaceparlai_1_1utils_1_1misc_html_acf146e70ea7f6867969a7c2b545d4b4b"><div class="ttname"><a href="../../d7/db6/namespaceparlai_1_1utils_1_1misc.html#acf146e70ea7f6867969a7c2b545d4b4b">parlai.utils.misc.warn_once</a></div><div class="ttdeci">def warn_once(msg, warningtype=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/misc_8py_source.html#l01064">misc.py:1064</a></div></div>
<div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
<div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a14a9d134d76ffd0509e50703d0f2c949"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a14a9d134d76ffd0509e50703d0f2c949">parlai.core.agents.get_agent_module</a></div><div class="ttdeci">def get_agent_module(dir_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00606">agents.py:606</a></div></div>
<div class="ttc" id="namespaceparlai_1_1utils_1_1misc_html_a7c97ef3250327bc549ac652a481be0cf"><div class="ttname"><a href="../../d7/db6/namespaceparlai_1_1utils_1_1misc.html#a7c97ef3250327bc549ac652a481be0cf">parlai.utils.misc.load_opt_file</a></div><div class="ttdeci">def load_opt_file(optfile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/misc_8py_source.html#l00175">misc.py:175</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a5f5076b35ce376d8b46bfb362bfc53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a5f5076b35ce376d8b46bfb362bfc53">&#9670;&nbsp;</a></span>name_to_agent_class()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.agents.name_to_agent_class </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convert agent name to class.

This adds "Agent" to the end of the name and uppercases the first letter
and the first letter appearing after each underscore (underscores are
removed).

:param name: name of agent, e.g. local_human

Returns class of agent, e.g. LocalHumanAgent.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00432">432</a> of file <a class="el" href="../../da/d5a/parlai_2core_2agents_8py_source.html">agents.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="keyword">def </span><a class="code" href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7a5f5076b35ce376d8b46bfb362bfc53">name_to_agent_class</a>(name):</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="stringliteral">    Convert agent name to class.</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="stringliteral">    This adds &quot;Agent&quot; to the end of the name and uppercases the first letter</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="stringliteral">    and the first letter appearing after each underscore (underscores are</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="stringliteral">    removed).</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="stringliteral">    :param name: name of agent, e.g. local_human</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="stringliteral">    Returns class of agent, e.g. LocalHumanAgent.</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    words = name.split(<span class="stringliteral">&#39;_&#39;</span>)</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    class_name = <span class="stringliteral">&#39;&#39;</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">for</span> w <span class="keywordflow">in</span> words:</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        class_name += w[0].upper() + w[1:]</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    class_name += <span class="stringliteral">&#39;Agent&#39;</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">return</span> class_name</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1core_1_1agents_html_a7a5f5076b35ce376d8b46bfb362bfc53"><div class="ttname"><a href="../../db/dcf/namespaceparlai_1_1core_1_1agents.html#a7a5f5076b35ce376d8b46bfb362bfc53">parlai.core.agents.name_to_agent_class</a></div><div class="ttdeci">def name_to_agent_class(name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/parlai_2core_2agents_8py_source.html#l00432">agents.py:432</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
