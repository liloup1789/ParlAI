<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParlAI: parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ParlAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d5/d22/namespaceparlai.html">parlai</a></li><li class="navelem"><a class="el" href="../../dd/d61/namespaceparlai_1_1agents.html">agents</a></li><li class="navelem"><a class="el" href="../../d1/dae/namespaceparlai_1_1agents_1_1legacy__agents.html">legacy_agents</a></li><li class="navelem"><a class="el" href="../../d9/dd0/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq.html">seq2seq</a></li><li class="navelem"><a class="el" href="../../df/d46/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1.html">seq2seq_v1</a></li><li class="navelem"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html">Seq2seqAgent</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d9/d8d/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d72/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent__inherit__graph.png" border="0" usemap="#parlai_8agents_8legacy__agents_8seq2seq_8seq2seq__v1_8Seq2seqAgent_inherit__map" alt="Inheritance graph"/></div>
<map name="parlai_8agents_8legacy__agents_8seq2seq_8seq2seq__v1_8Seq2seqAgent_inherit__map" id="parlai_8agents_8legacy__agents_8seq2seq_8seq2seq__v1_8Seq2seqAgent_inherit__map">
<area shape="rect" id="node5" href="../../d9/d12/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1PerplexityEvaluatorAgent.html" title="parlai.agents.legacy\l_agents.seq2seq.seq2seq\l_v1.PerplexityEvaluatorAgent" alt="" coords="5,363,200,419"/>
<area shape="rect" id="node2" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html" title="parlai.agents.legacy\l_agents.seq2seq.torch\l_agent_v1.TorchAgent" alt="" coords="25,155,180,211"/>
<area shape="rect" id="node3" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html" title="parlai.core.agents.Agent" alt="" coords="21,80,184,107"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d76/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent__coll__graph.png" border="0" usemap="#parlai_8agents_8legacy__agents_8seq2seq_8seq2seq__v1_8Seq2seqAgent_coll__map" alt="Collaboration graph"/></div>
<map name="parlai_8agents_8legacy__agents_8seq2seq_8seq2seq__v1_8Seq2seqAgent_coll__map" id="parlai_8agents_8legacy__agents_8seq2seq_8seq2seq__v1_8Seq2seqAgent_coll__map">
<area shape="rect" id="node2" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html" title="parlai.agents.legacy\l_agents.seq2seq.torch\l_agent_v1.TorchAgent" alt="" coords="76,185,231,241"/>
<area shape="rect" id="node3" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html" title="parlai.core.agents.Agent" alt="" coords="5,81,168,108"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2f5c66732d78976428b26b96f14b311b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a2f5c66732d78976428b26b96f14b311b">add_cmdline_args</a> (cls, argparser)</td></tr>
<tr class="separator:a2f5c66732d78976428b26b96f14b311b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5753e8b1090fc88e657ada44492556"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#aea5753e8b1090fc88e657ada44492556">__init__</a> (self, <a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a4e938a91873bd6edde0ac7ed5299bc6a">opt</a>, shared=None)</td></tr>
<tr class="separator:aea5753e8b1090fc88e657ada44492556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e9c4d06f55802308dbfedfea69d0cd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#af2e9c4d06f55802308dbfedfea69d0cd">zero_grad</a> (self)</td></tr>
<tr class="separator:af2e9c4d06f55802308dbfedfea69d0cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fabaacec11534b452a1786d3dd5a6c8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a3fabaacec11534b452a1786d3dd5a6c8">update_params</a> (self)</td></tr>
<tr class="separator:a3fabaacec11534b452a1786d3dd5a6c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a521db011d2188e8e513976af5737c322"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a521db011d2188e8e513976af5737c322">reset_metrics</a> (self)</td></tr>
<tr class="separator:a521db011d2188e8e513976af5737c322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae588ce85bae56791bac9dd744e5414ce"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#ae588ce85bae56791bac9dd744e5414ce">report</a> (self)</td></tr>
<tr class="separator:ae588ce85bae56791bac9dd744e5414ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb99f50cbac1707480d1953163d91018"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#afb99f50cbac1707480d1953163d91018">share</a> (self)</td></tr>
<tr class="separator:afb99f50cbac1707480d1953163d91018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e5663a7879b2704378dfe99ef6d0f4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#ae0e5663a7879b2704378dfe99ef6d0f4">vectorize</a> (self, args, kwargs)</td></tr>
<tr class="separator:ae0e5663a7879b2704378dfe99ef6d0f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb81dee41215c5d402fef970b0bf1931"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#abb81dee41215c5d402fef970b0bf1931">batchify</a> (self, args, kwargs)</td></tr>
<tr class="separator:abb81dee41215c5d402fef970b0bf1931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59a524e15577396e60a1e5f8b6bfe9a7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a59a524e15577396e60a1e5f8b6bfe9a7">train_step</a> (self, batch)</td></tr>
<tr class="separator:a59a524e15577396e60a1e5f8b6bfe9a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6afc143cc0ec59803be416416ce1ec97"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a6afc143cc0ec59803be416416ce1ec97">greedy_search</a> (self, batch)</td></tr>
<tr class="separator:a6afc143cc0ec59803be416416ce1ec97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1e972eb8a41c98486a50baa14700345"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#aa1e972eb8a41c98486a50baa14700345">extend_input</a> (self, batch)</td></tr>
<tr class="separator:aa1e972eb8a41c98486a50baa14700345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4496420685c3cd273920f89b4e82625"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#ae4496420685c3cd273920f89b4e82625">truncate_input</a> (self, batch)</td></tr>
<tr class="separator:ae4496420685c3cd273920f89b4e82625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4567d7a200e20bd09235d4833424bdad"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a4567d7a200e20bd09235d4833424bdad">truncate_output</a> (self, out)</td></tr>
<tr class="separator:a4567d7a200e20bd09235d4833424bdad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad06de7c94ee40c403f792e7b48e0b137"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#ad06de7c94ee40c403f792e7b48e0b137">eval_step</a> (self, batch)</td></tr>
<tr class="separator:ad06de7c94ee40c403f792e7b48e0b137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa6a1efae9091dc0b38af3ce4b49706"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a8aa6a1efae9091dc0b38af3ce4b49706">save</a> (self, path=None)</td></tr>
<tr class="separator:a8aa6a1efae9091dc0b38af3ce4b49706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee5ae38c0e37bcc1e4eb44bae8a3cce"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a3ee5ae38c0e37bcc1e4eb44bae8a3cce">load</a> (self, path)</td></tr>
<tr class="separator:a3ee5ae38c0e37bcc1e4eb44bae8a3cce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent</a></td></tr>
<tr class="memitem:a00701a40d62943dbd887525bf8e8002d inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a00701a40d62943dbd887525bf8e8002d">add_cmdline_args</a> (cls, argparser)</td></tr>
<tr class="separator:a00701a40d62943dbd887525bf8e8002d inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c4eb91757ee23e75edfa957d05db338 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a1c4eb91757ee23e75edfa957d05db338">__init__</a> (self, <a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a4e938a91873bd6edde0ac7ed5299bc6a">opt</a>, shared=None)</td></tr>
<tr class="separator:a1c4eb91757ee23e75edfa957d05db338 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1727b17db185dcc7237d893018c7b76c inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a1727b17db185dcc7237d893018c7b76c">init_optim</a> (self, params, optim_states=None, saved_optim_type=None)</td></tr>
<tr class="separator:a1727b17db185dcc7237d893018c7b76c inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af97699a6b03a17969830db378f09cac4 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#af97699a6b03a17969830db378f09cac4">receive_metrics</a> (self, metrics_dict)</td></tr>
<tr class="separator:af97699a6b03a17969830db378f09cac4 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d922c4a8452c9e44fa2478e6fecdfd1 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a3d922c4a8452c9e44fa2478e6fecdfd1">share</a> (self)</td></tr>
<tr class="separator:a3d922c4a8452c9e44fa2478e6fecdfd1 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a866838e1c81063a3ec18c5609e029f90 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a866838e1c81063a3ec18c5609e029f90">vectorize</a> (self, obs, add_start=True, add_end=True, <a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#ac0286e4dbf6dc71bda0c364851de5f22">truncate</a>=None, split_lines=False)</td></tr>
<tr class="separator:a866838e1c81063a3ec18c5609e029f90 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8b2fa26aabfd9d7e7abb0abbcfe8044 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#ab8b2fa26aabfd9d7e7abb0abbcfe8044">batchify</a> (self, obs_batch, sort=False, is_valid=lambda obs:'text_vec' in obs or 'image' in obs)</td></tr>
<tr class="separator:ab8b2fa26aabfd9d7e7abb0abbcfe8044 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac419cfad0fc5988e7e796c244f3a9f inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#acac419cfad0fc5988e7e796c244f3a9f">match_batch</a> (self, batch_reply, valid_inds, output=None)</td></tr>
<tr class="separator:acac419cfad0fc5988e7e796c244f3a9f inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8984452b8b4e6194625530aeae49b243 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a8984452b8b4e6194625530aeae49b243">get_dialog_history</a> (self, <a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a04fa334c086cf9afa815a44f1948e625">observation</a>, reply=None, <a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a81f970d715f2525ad342330a28703c5c">add_person_tokens</a>=False, add_p1_after_newln=False)</td></tr>
<tr class="separator:a8984452b8b4e6194625530aeae49b243 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf7a50ea0eb319737123d2e46fde4c0f inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#abf7a50ea0eb319737123d2e46fde4c0f">last_reply</a> (self, use_label=True)</td></tr>
<tr class="separator:abf7a50ea0eb319737123d2e46fde4c0f inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4b2346c35e214a8028eb83d1fc5ffd7 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#ae4b2346c35e214a8028eb83d1fc5ffd7">reply_history</a> (self)</td></tr>
<tr class="separator:ae4b2346c35e214a8028eb83d1fc5ffd7 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eb23a78aea413ae4f90ce0628179920 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a0eb23a78aea413ae4f90ce0628179920">observe</a> (self, <a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a04fa334c086cf9afa815a44f1948e625">observation</a>)</td></tr>
<tr class="separator:a0eb23a78aea413ae4f90ce0628179920 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a01defa1d669571f574fcfe021776a8 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a4a01defa1d669571f574fcfe021776a8">save</a> (self, path=None)</td></tr>
<tr class="separator:a4a01defa1d669571f574fcfe021776a8 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d71ad7997e048e4f4f7d957fae64ac5 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a6d71ad7997e048e4f4f7d957fae64ac5">load</a> (self, path)</td></tr>
<tr class="separator:a6d71ad7997e048e4f4f7d957fae64ac5 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e935c0d2d589d8990ff14d6e528c4d inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a93e935c0d2d589d8990ff14d6e528c4d">reset</a> (self)</td></tr>
<tr class="separator:a93e935c0d2d589d8990ff14d6e528c4d inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ab251071823f34358a569c1c2a11bf9 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a3ab251071823f34358a569c1c2a11bf9">act</a> (self)</td></tr>
<tr class="separator:a3ab251071823f34358a569c1c2a11bf9 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3929c1bedc50a48dcf8d1184321f4f5 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#af3929c1bedc50a48dcf8d1184321f4f5">batch_act</a> (self, observations)</td></tr>
<tr class="separator:af3929c1bedc50a48dcf8d1184321f4f5 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff9cc5c105bbf154075aa83e288582ca inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#aff9cc5c105bbf154075aa83e288582ca">train_step</a> (self, batch)</td></tr>
<tr class="separator:aff9cc5c105bbf154075aa83e288582ca inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a801f2b9a359201fd0a395ab61fd61806 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a801f2b9a359201fd0a395ab61fd61806">eval_step</a> (self, batch)</td></tr>
<tr class="separator:a801f2b9a359201fd0a395ab61fd61806 inherit pub_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classparlai_1_1core_1_1agents_1_1Agent')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html">parlai.core.agents.Agent</a></td></tr>
<tr class="memitem:aa7992ab392e2803607937e805ceb176f inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#aa7992ab392e2803607937e805ceb176f">__init__</a> (self, <a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#ab3b45d2754244608c75d4068b90cd051">opt</a>, shared=None)</td></tr>
<tr class="separator:aa7992ab392e2803607937e805ceb176f inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98041e2d186aa81bd5e1649a91f623bc inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a98041e2d186aa81bd5e1649a91f623bc">observe</a> (self, <a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#aedbecc4b4aa7af7413882a0429e0f1db">observation</a>)</td></tr>
<tr class="separator:a98041e2d186aa81bd5e1649a91f623bc inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a8abe0a98dd59bc39c9f12b163072db inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a6a8abe0a98dd59bc39c9f12b163072db">act</a> (self)</td></tr>
<tr class="separator:a6a8abe0a98dd59bc39c9f12b163072db inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e1cdd729ac4236f8bae90b2e66fa04 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a29e1cdd729ac4236f8bae90b2e66fa04">getID</a> (self)</td></tr>
<tr class="separator:a29e1cdd729ac4236f8bae90b2e66fa04 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40157e237ea85d75ebc3fd248c7a1a1b inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a40157e237ea85d75ebc3fd248c7a1a1b">epoch_done</a> (self)</td></tr>
<tr class="separator:a40157e237ea85d75ebc3fd248c7a1a1b inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27cb8206372681605b00dc28b81a7c39 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a27cb8206372681605b00dc28b81a7c39">reset</a> (self)</td></tr>
<tr class="separator:a27cb8206372681605b00dc28b81a7c39 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaefcbd7c61d319b368b3ee13997c8c99 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#aaefcbd7c61d319b368b3ee13997c8c99">reset_metrics</a> (self)</td></tr>
<tr class="separator:aaefcbd7c61d319b368b3ee13997c8c99 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e706e3e5389c9b48c7a1589d97ec99 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a51e706e3e5389c9b48c7a1589d97ec99">save</a> (self, path=None)</td></tr>
<tr class="separator:a51e706e3e5389c9b48c7a1589d97ec99 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2525db5bdd19a3bf5b0669bfa158f9ff inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a2525db5bdd19a3bf5b0669bfa158f9ff">clone</a> (self)</td></tr>
<tr class="separator:a2525db5bdd19a3bf5b0669bfa158f9ff inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbbb06bf0f46ff927c8b186726a68b47 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#afbbb06bf0f46ff927c8b186726a68b47">share</a> (self)</td></tr>
<tr class="separator:afbbb06bf0f46ff927c8b186726a68b47 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a801e5ca2a5e8e96a72f0c04549008e8f inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a801e5ca2a5e8e96a72f0c04549008e8f">shutdown</a> (self)</td></tr>
<tr class="separator:a801e5ca2a5e8e96a72f0c04549008e8f inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a005f62f977e8a7ebf91b9646307153bc inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a005f62f977e8a7ebf91b9646307153bc">upgrade_opt</a> (cls, opt_from_disk)</td></tr>
<tr class="separator:a005f62f977e8a7ebf91b9646307153bc inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a3838eb2d88b4e9f80c9c234e6742fa30"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a3838eb2d88b4e9f80c9c234e6742fa30">model_version</a> ()</td></tr>
<tr class="separator:a3838eb2d88b4e9f80c9c234e6742fa30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58227903fd44e3d436710c06457c8f84"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a58227903fd44e3d436710c06457c8f84">beam_search</a> (<a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#aeea96acec40c7a63d019ca56feca3c73">model</a>, batch, <a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#ab4afd6e6f79d32bd21e60ac11c0d414b">beam_size</a>, start=1, end=2, pad=0, min_length=3, min_n_best=5, max_ts=40, block_ngram=0)</td></tr>
<tr class="separator:a58227903fd44e3d436710c06457c8f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent</a></td></tr>
<tr class="memitem:abc77ad96264e7597c46bc001a9a6af90 inherit pub_static_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#abc77ad96264e7597c46bc001a9a6af90">dictionary_class</a> ()</td></tr>
<tr class="separator:abc77ad96264e7597c46bc001a9a6af90 inherit pub_static_methods_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8636132dae633a66cc34da3a20d9894a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a8636132dae633a66cc34da3a20d9894a">id</a></td></tr>
<tr class="separator:a8636132dae633a66cc34da3a20d9894a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82ff9540ce457658a7a7035055b36f77"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a82ff9540ce457658a7a7035055b36f77">multigpu</a></td></tr>
<tr class="separator:a82ff9540ce457658a7a7035055b36f77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0b1011238f6a71eed46f10ea0300705"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#af0b1011238f6a71eed46f10ea0300705">beam_dot_log</a></td></tr>
<tr class="separator:af0b1011238f6a71eed46f10ea0300705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4afd6e6f79d32bd21e60ac11c0d414b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#ab4afd6e6f79d32bd21e60ac11c0d414b">beam_size</a></td></tr>
<tr class="separator:ab4afd6e6f79d32bd21e60ac11c0d414b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0416c2a28c0efae160d31f755f3b5db9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a0416c2a28c0efae160d31f755f3b5db9">beam_min_n_best</a></td></tr>
<tr class="separator:a0416c2a28c0efae160d31f755f3b5db9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeebfbcecc59779e751869f7df3fcda19"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#aeebfbcecc59779e751869f7df3fcda19">beam_min_length</a></td></tr>
<tr class="separator:aeebfbcecc59779e751869f7df3fcda19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a070849409fda0767b993e13b9096fc29"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a070849409fda0767b993e13b9096fc29">beam_block_ngram</a></td></tr>
<tr class="separator:a070849409fda0767b993e13b9096fc29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeea96acec40c7a63d019ca56feca3c73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#aeea96acec40c7a63d019ca56feca3c73">model</a></td></tr>
<tr class="separator:aeea96acec40c7a63d019ca56feca3c73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a640b76ddf76c70e73c4012f37d4c72b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a640b76ddf76c70e73c4012f37d4c72b7">metrics</a></td></tr>
<tr class="separator:a640b76ddf76c70e73c4012f37d4c72b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa60eebf5d848b1e8b8c15a856456918a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#aa60eebf5d848b1e8b8c15a856456918a">beam_dot_dir</a></td></tr>
<tr class="separator:aa60eebf5d848b1e8b8c15a856456918a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a821dfcf56b6872f4377b0fc8c5ed94de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a821dfcf56b6872f4377b0fc8c5ed94de">criterion</a></td></tr>
<tr class="separator:a821dfcf56b6872f4377b0fc8c5ed94de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4bcab12b2cf1070cc8f712956f886ca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d27/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#ae4bcab12b2cf1070cc8f712956f886ca">buffer_initialized</a></td></tr>
<tr class="separator:ae4bcab12b2cf1070cc8f712956f886ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent')"><img src="../../closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent</a></td></tr>
<tr class="memitem:a91d101db75d3618e8240a44b258f3129 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a91d101db75d3618e8240a44b258f3129">replies</a></td></tr>
<tr class="separator:a91d101db75d3618e8240a44b258f3129 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa0def82ae9760fde7f60c0881b8a138 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#afa0def82ae9760fde7f60c0881b8a138">dict</a></td></tr>
<tr class="separator:afa0def82ae9760fde7f60c0881b8a138 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e938a91873bd6edde0ac7ed5299bc6a inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a4e938a91873bd6edde0ac7ed5299bc6a">opt</a></td></tr>
<tr class="separator:a4e938a91873bd6edde0ac7ed5299bc6a inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8efd385be7532abd27359b5dbbbbb24 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#aa8efd385be7532abd27359b5dbbbbb24">use_cuda</a></td></tr>
<tr class="separator:aa8efd385be7532abd27359b5dbbbbb24 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60d1038c25746d97d791b82a5c8e0492 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a60d1038c25746d97d791b82a5c8e0492">id</a></td></tr>
<tr class="separator:a60d1038c25746d97d791b82a5c8e0492 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaed187f97f489122996e967206a01927 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#aaed187f97f489122996e967206a01927">EMPTY</a></td></tr>
<tr class="separator:aaed187f97f489122996e967206a01927 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e6a5f2f7644a6cc273bfa25eca17df6 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a6e6a5f2f7644a6cc273bfa25eca17df6">NULL_IDX</a></td></tr>
<tr class="separator:a6e6a5f2f7644a6cc273bfa25eca17df6 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37d6429a766547a68f72ffb6c27783db inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a37d6429a766547a68f72ffb6c27783db">START_IDX</a></td></tr>
<tr class="separator:a37d6429a766547a68f72ffb6c27783db inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78932aa1b5886cd03f1592bfa6ed4f5 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#aa78932aa1b5886cd03f1592bfa6ed4f5">END_IDX</a></td></tr>
<tr class="separator:aa78932aa1b5886cd03f1592bfa6ed4f5 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f9045fdfe9f956ee5023de84dd25a06 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a2f9045fdfe9f956ee5023de84dd25a06">random</a></td></tr>
<tr class="separator:a2f9045fdfe9f956ee5023de84dd25a06 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31b5e2e435a70f40ce155dabe831d41c inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a31b5e2e435a70f40ce155dabe831d41c">batch_idx</a></td></tr>
<tr class="separator:a31b5e2e435a70f40ce155dabe831d41c inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add94f2eee8d2a4aba14869587e9dd4d3 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#add94f2eee8d2a4aba14869587e9dd4d3">histsz</a></td></tr>
<tr class="separator:add94f2eee8d2a4aba14869587e9dd4d3 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a858bd7d01a3d6298f2e2f72efcf73953 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a858bd7d01a3d6298f2e2f72efcf73953">history</a></td></tr>
<tr class="separator:a858bd7d01a3d6298f2e2f72efcf73953 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0286e4dbf6dc71bda0c364851de5f22 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#ac0286e4dbf6dc71bda0c364851de5f22">truncate</a></td></tr>
<tr class="separator:ac0286e4dbf6dc71bda0c364851de5f22 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab768649f4b4a30eb9a75fedde5a9935f inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#ab768649f4b4a30eb9a75fedde5a9935f">rank_candidates</a></td></tr>
<tr class="separator:ab768649f4b4a30eb9a75fedde5a9935f inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81f970d715f2525ad342330a28703c5c inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a81f970d715f2525ad342330a28703c5c">add_person_tokens</a></td></tr>
<tr class="separator:a81f970d715f2525ad342330a28703c5c inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99254a4351798f66797e0a5a8ff855d5 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a99254a4351798f66797e0a5a8ff855d5">clip</a></td></tr>
<tr class="separator:a99254a4351798f66797e0a5a8ff855d5 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2524bfb4b01626290e6fa26be52f2a80 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a2524bfb4b01626290e6fa26be52f2a80">optimizer</a></td></tr>
<tr class="separator:a2524bfb4b01626290e6fa26be52f2a80 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea16ae8f9536959afd6e7434d418a719 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#aea16ae8f9536959afd6e7434d418a719">scheduler</a></td></tr>
<tr class="separator:aea16ae8f9536959afd6e7434d418a719 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f1da649c485f406076be7bf84b2d4ee inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a3f1da649c485f406076be7bf84b2d4ee">proj_rp</a></td></tr>
<tr class="separator:a3f1da649c485f406076be7bf84b2d4ee inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04fa334c086cf9afa815a44f1948e625 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a04fa334c086cf9afa815a44f1948e625">observation</a></td></tr>
<tr class="separator:a04fa334c086cf9afa815a44f1948e625 inherit pub_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classparlai_1_1core_1_1agents_1_1Agent')"><img src="../../closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html">parlai.core.agents.Agent</a></td></tr>
<tr class="memitem:ac00c13f4c7dd1263bf9203fa96dd2366 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#ac00c13f4c7dd1263bf9203fa96dd2366">id</a></td></tr>
<tr class="separator:ac00c13f4c7dd1263bf9203fa96dd2366 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b45d2754244608c75d4068b90cd051 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#ab3b45d2754244608c75d4068b90cd051">opt</a></td></tr>
<tr class="separator:ab3b45d2754244608c75d4068b90cd051 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedbecc4b4aa7af7413882a0429e0f1db inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#aedbecc4b4aa7af7413882a0429e0f1db">observation</a></td></tr>
<tr class="separator:aedbecc4b4aa7af7413882a0429e0f1db inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent')"><img src="../../closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent</a></td></tr>
<tr class="memitem:ae574bf3e21ff941060ae0f3dcb284d8d inherit pub_static_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">dictionary&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#ae574bf3e21ff941060ae0f3dcb284d8d">OPTIM_OPTS</a></td></tr>
<tr class="separator:ae574bf3e21ff941060ae0f3dcb284d8d inherit pub_static_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14e0236052fb45181b6717922c517537 inherit pub_static_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a14e0236052fb45181b6717922c517537">P1_TOKEN</a> = '__p1__'</td></tr>
<tr class="separator:a14e0236052fb45181b6717922c517537 inherit pub_static_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50d73f48f3f951684afc094495473ec5 inherit pub_static_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db3/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a50d73f48f3f951684afc094495473ec5">P2_TOKEN</a> = '__p2__'</td></tr>
<tr class="separator:a50d73f48f3f951684afc094495473ec5 inherit pub_static_attribs_classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Agent which takes an input sequence and produces an output sequence.

This model supports encoding the input and decoding the output via one of
several flavors of RNN. It then uses a linear layer (whose weights can
be shared with the embedding layer) to convert RNN output states into
output tokens. This model supports greedy decoding, selecting the
highest probability token at each time step, as well as beam
search.

For more information, see the following papers:
- Neural Machine Translation by Jointly Learning to Align and Translate
  `(Bahdanau et al. 2014) &lt;arxiv.org/abs/1409.0473&gt;`_
- Sequence to Sequence Learning with Neural Networks
  `(Sutskever et al. 2014) &lt;arxiv.org/abs/1409.3215&gt;`_
- Effective Approaches to Attention-based Neural Machine Translation
  `(Luong et al. 2015) &lt;arxiv.org/abs/1508.04025&gt;`_
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00024">24</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aea5753e8b1090fc88e657ada44492556"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea5753e8b1090fc88e657ada44492556">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shared</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set up model.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00199">199</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keyword">def </span>__init__(self, opt, shared=None):</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="stringliteral">        Set up model.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        init_model = <span class="keywordtype">None</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> shared:  <span class="comment"># only do this on first setup</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="comment"># first check load path in case we need to override paths</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="keywordflow">if</span> opt.get(<span class="stringliteral">&#39;init_model&#39;</span>) <span class="keywordflow">and</span> os.path.isfile(opt[<span class="stringliteral">&#39;init_model&#39;</span>]):</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="comment"># check first for &#39;init_model&#39; for loading model from file</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                init_model = opt[<span class="stringliteral">&#39;init_model&#39;</span>]</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">if</span> opt.get(<span class="stringliteral">&#39;model_file&#39;</span>) <span class="keywordflow">and</span> os.path.isfile(opt[<span class="stringliteral">&#39;model_file&#39;</span>]):</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                <span class="comment"># next check for &#39;model_file&#39;, this would override init_model</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                init_model = opt[<span class="stringliteral">&#39;model_file&#39;</span>]</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">if</span> init_model <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="comment"># if we are loading a model, should load its dict too</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <span class="keywordflow">if</span> os.path.isfile(init_model + <span class="stringliteral">&#39;.dict&#39;</span>) <span class="keywordflow">or</span> opt[<span class="stringliteral">&#39;dict_file&#39;</span>] <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                    opt[<span class="stringliteral">&#39;dict_file&#39;</span>] = init_model + <span class="stringliteral">&#39;.dict&#39;</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        super().__init__(opt, shared)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        opt = self.opt</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment"># all instances may need some params</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        self.id = <span class="stringliteral">&#39;Seq2Seq&#39;</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        self.multigpu = (</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            opt.get(<span class="stringliteral">&#39;multigpu&#39;</span>) <span class="keywordflow">and</span> self.use_cuda <span class="keywordflow">and</span> (opt.get(<span class="stringliteral">&#39;batchsize&#39;</span>) &gt; 1)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        )</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        states = {}</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        self.beam_dot_log = opt.get(<span class="stringliteral">&#39;beam_dot_log&#39;</span>, <span class="keyword">False</span>)</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        self.beam_size = opt.get(<span class="stringliteral">&#39;beam_size&#39;</span>, 1)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        self.beam_min_n_best = opt.get(<span class="stringliteral">&#39;beam_min_n_best&#39;</span>, 3)</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        self.beam_min_length = opt.get(<span class="stringliteral">&#39;beam_min_length&#39;</span>, 3)</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        self.beam_block_ngram = opt.get(<span class="stringliteral">&#39;beam_block_ngram&#39;</span>, 0)</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">if</span> shared:</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="comment"># set up shared properties</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            self.model = shared[<span class="stringliteral">&#39;model&#39;</span>]</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            self.metrics = shared[<span class="stringliteral">&#39;metrics&#39;</span>]</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            states = shared.get(<span class="stringliteral">&#39;states&#39;</span>, {})</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            self.metrics = {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="stringliteral">&#39;loss&#39;</span>: 0.0,</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="stringliteral">&#39;num_tokens&#39;</span>: 0,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <span class="stringliteral">&#39;correct_tokens&#39;</span>: 0,</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                <span class="stringliteral">&#39;total_skipped_batches&#39;</span>: 0,</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="comment"># this is not a shared instance of this class, so do full init</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">if</span> self.beam_dot_log:</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                self.beam_dot_dir = tempfile.mkdtemp(</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                    prefix=<span class="stringliteral">&#39;{}-beamdot-beamsize-{}-&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                        os.path.basename(opt.get(<span class="stringliteral">&#39;model_file&#39;</span>)), self.beam_size</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                    )</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                )</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                print(<span class="stringliteral">&#39;[ Saving dot beam logs in {} ]&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(self.beam_dot_dir))</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">if</span> init_model <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="comment"># load model parameters if available</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                print(<span class="stringliteral">&#39;[ Loading existing model params from {} ]&#39;</span> <span class="stringliteral">&#39;&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(init_model))</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                states = self.load(init_model)</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            self._init_model(states=states)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment"># set up criteria</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> opt.get(<span class="stringliteral">&#39;numsoftmax&#39;</span>, 1) &gt; 1:</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            self.criterion = nn.NLLLoss(ignore_index=self.NULL_IDX, size_average=<span class="keyword">False</span>)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            self.criterion = nn.CrossEntropyLoss(</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                ignore_index=self.NULL_IDX, size_average=<span class="keyword">False</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            )</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span> self.use_cuda:</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            self.criterion.cuda()</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;train&#39;</span> <span class="keywordflow">in</span> opt.get(<span class="stringliteral">&#39;datatype&#39;</span>, <span class="stringliteral">&#39;&#39;</span>):</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            self.init_optim(</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                [p <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.model.parameters() <span class="keywordflow">if</span> p.requires_grad],</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                optim_states=states.get(<span class="stringliteral">&#39;optimizer&#39;</span>),</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                saved_optim_type=states.get(<span class="stringliteral">&#39;optimizer_type&#39;</span>),</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            )</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        self.reset()</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2f5c66732d78976428b26b96f14b311b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f5c66732d78976428b26b96f14b311b">&#9670;&nbsp;</a></span>add_cmdline_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.add_cmdline_args </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>argparser</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add command-line arguments specifically for this agent.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00045">45</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keyword">def </span><a class="code" href="../../d3/d7d/namespaceparlai_1_1agents_1_1drqa_1_1config.html#a62fdd5554f1da6be0cba185271058320">add_cmdline_args</a>(cls, argparser):</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="stringliteral">        Add command-line arguments specifically for this agent.</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        agent = argparser.add_argument_group(<span class="stringliteral">&#39;Seq2Seq Arguments&#39;</span>)</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            <span class="stringliteral">&#39;--init-model&#39;</span>,</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            type=str,</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            default=<span class="keywordtype">None</span>,</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            help=<span class="stringliteral">&#39;load dict/model/opts from this path&#39;</span>,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        )</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <span class="stringliteral">&#39;-hs&#39;</span>,</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <span class="stringliteral">&#39;--hiddensize&#39;</span>,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            type=int,</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            default=128,</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            help=<span class="stringliteral">&#39;size of the hidden layers&#39;</span>,</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        )</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="stringliteral">&#39;-esz&#39;</span>,</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <span class="stringliteral">&#39;--embeddingsize&#39;</span>,</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            type=int,</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            default=128,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            help=<span class="stringliteral">&#39;size of the token embeddings&#39;</span>,</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        )</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="stringliteral">&#39;-nl&#39;</span>, <span class="stringliteral">&#39;--numlayers&#39;</span>, type=int, default=2, help=<span class="stringliteral">&#39;number of hidden layers&#39;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        )</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="stringliteral">&#39;-dr&#39;</span>, <span class="stringliteral">&#39;--dropout&#39;</span>, type=float, default=0.1, help=<span class="stringliteral">&#39;dropout rate&#39;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        )</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <span class="stringliteral">&#39;-bi&#39;</span>,</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="stringliteral">&#39;--bidirectional&#39;</span>,</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            type=<span class="stringliteral">&#39;bool&#39;</span>,</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            default=<span class="keyword">False</span>,</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            help=<span class="stringliteral">&#39;whether to encode the context with a &#39;</span> <span class="stringliteral">&#39;bidirectional rnn&#39;</span>,</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        )</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="stringliteral">&#39;-att&#39;</span>,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="stringliteral">&#39;--attention&#39;</span>,</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            default=<span class="stringliteral">&#39;none&#39;</span>,</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            choices=[<span class="stringliteral">&#39;none&#39;</span>, <span class="stringliteral">&#39;concat&#39;</span>, <span class="stringliteral">&#39;general&#39;</span>, <span class="stringliteral">&#39;dot&#39;</span>, <span class="stringliteral">&#39;local&#39;</span>],</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            help=<span class="stringliteral">&#39;Choices: none, concat, general, local. &#39;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="stringliteral">&#39;If set local, also set attention-length. &#39;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="stringliteral">&#39;(see arxiv.org/abs/1508.04025)&#39;</span>,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        )</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="stringliteral">&#39;-attl&#39;</span>,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            <span class="stringliteral">&#39;--attention-length&#39;</span>,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            default=48,</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            type=int,</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            help=<span class="stringliteral">&#39;Length of local attention.&#39;</span>,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        )</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="stringliteral">&#39;--attention-time&#39;</span>,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            default=<span class="stringliteral">&#39;post&#39;</span>,</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            choices=[<span class="stringliteral">&#39;pre&#39;</span>, <span class="stringliteral">&#39;post&#39;</span>],</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            help=<span class="stringliteral">&#39;Whether to apply attention before or after &#39;</span> <span class="stringliteral">&#39;decoding.&#39;</span>,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        )</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="stringliteral">&#39;-rnn&#39;</span>,</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="stringliteral">&#39;--rnn-class&#39;</span>,</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            default=<span class="stringliteral">&#39;lstm&#39;</span>,</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            choices=Seq2seq.RNN_OPTS.keys(),</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            help=<span class="stringliteral">&#39;Choose between different types of RNNs.&#39;</span>,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        )</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="stringliteral">&#39;-dec&#39;</span>,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="stringliteral">&#39;--decoder&#39;</span>,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            default=<span class="stringliteral">&#39;same&#39;</span>,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            choices=[<span class="stringliteral">&#39;same&#39;</span>, <span class="stringliteral">&#39;shared&#39;</span>],</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            help=<span class="stringliteral">&#39;Choose between different decoder modules. &#39;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="stringliteral">&#39;Default &quot;same&quot; uses same class as encoder, &#39;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="stringliteral">&#39;while &quot;shared&quot; also uses the same weights. &#39;</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="stringliteral">&#39;Note that shared disabled some encoder &#39;</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="stringliteral">&#39;options--in particular, bidirectionality.&#39;</span>,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        )</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="stringliteral">&#39;-lt&#39;</span>,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="stringliteral">&#39;--lookuptable&#39;</span>,</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            default=<span class="stringliteral">&#39;unique&#39;</span>,</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            choices=[<span class="stringliteral">&#39;unique&#39;</span>, <span class="stringliteral">&#39;enc_dec&#39;</span>, <span class="stringliteral">&#39;dec_out&#39;</span>, <span class="stringliteral">&#39;all&#39;</span>],</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            help=<span class="stringliteral">&#39;The encoder, decoder, and output modules can &#39;</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="stringliteral">&#39;share weights, or not. &#39;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="stringliteral">&#39;Unique has independent embeddings for each. &#39;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="stringliteral">&#39;Enc_dec shares the embedding for the encoder &#39;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <span class="stringliteral">&#39;and decoder. &#39;</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="stringliteral">&#39;Dec_out shares decoder embedding and output &#39;</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="stringliteral">&#39;weights. &#39;</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="stringliteral">&#39;All shares all three weights.&#39;</span>,</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        )</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="stringliteral">&#39;-soft&#39;</span>,</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="stringliteral">&#39;--numsoftmax&#39;</span>,</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            default=1,</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            type=int,</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            help=<span class="stringliteral">&#39;default 1, if greater then uses mixture of &#39;</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="stringliteral">&#39;softmax (see arxiv.org/abs/1711.03953).&#39;</span>,</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        )</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="stringliteral">&#39;--beam-size&#39;</span>,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            type=int,</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            default=1,</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            help=<span class="stringliteral">&#39;Beam size, if 1 then greedy search&#39;</span>,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        )</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="stringliteral">&#39;--beam-dot-log&#39;</span>,</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            type=<span class="stringliteral">&#39;bool&#39;</span>,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            default=<span class="keyword">False</span>,</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            help=<span class="stringliteral">&#39;Dump beam trees as png dot images into /tmp folder&#39;</span>,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        )</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="stringliteral">&#39;--beam-min-n-best&#39;</span>,</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            type=int,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            default=3,</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            help=<span class="stringliteral">&#39;Minimum number of nbest candidates to achieve &#39;</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="stringliteral">&#39;during the beam search&#39;</span>,</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        )</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="stringliteral">&#39;--beam-min-length&#39;</span>,</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            type=int,</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            default=3,</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            help=<span class="stringliteral">&#39;Minimum length of prediction to be generated by &#39;</span> <span class="stringliteral">&#39;the beam search&#39;</span>,</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        )</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="stringliteral">&#39;-idr&#39;</span>,</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="stringliteral">&#39;--input-dropout&#39;</span>,</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            type=float,</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            default=0.0,</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            help=<span class="stringliteral">&#39;Each token from the input will be masked with&#39;</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="stringliteral">&#39; __unk__ token with this probability.&#39;</span>,</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        )</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="stringliteral">&#39;--beam-block-ngram&#39;</span>,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            type=int,</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            default=0,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            help=<span class="stringliteral">&#39;Block all repeating ngrams up to history length n-1&#39;</span>,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        )</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        TorchAgent.add_cmdline_args(argparser)</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        Seq2seqAgent.dictionary_class().<a class="code" href="../../d3/d7d/namespaceparlai_1_1agents_1_1drqa_1_1config.html#a62fdd5554f1da6be0cba185271058320">add_cmdline_args</a>(argparser)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">return</span> agent</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1drqa_1_1config_html_a62fdd5554f1da6be0cba185271058320"><div class="ttname"><a href="../../d3/d7d/namespaceparlai_1_1agents_1_1drqa_1_1config.html#a62fdd5554f1da6be0cba185271058320">parlai.agents.drqa.config.add_cmdline_args</a></div><div class="ttdeci">def add_cmdline_args(parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/deb/config_8py_source.html#l00010">config.py:10</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abb81dee41215c5d402fef970b0bf1931"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb81dee41215c5d402fef970b0bf1931">&#9670;&nbsp;</a></span>batchify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.batchify </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Override batchify options for seq2seq.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00420">420</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keyword">def </span><a class="code" href="../../d6/d5b/namespaceparlai_1_1agents_1_1drqa_1_1utils.html#aca22dd97c5b6dcda2a7479c1cb22ef1e">batchify</a>(self, *args, **kwargs):</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="stringliteral">        Override batchify options for seq2seq.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        kwargs[<span class="stringliteral">&#39;sort&#39;</span>] = <span class="keyword">True</span>  <span class="comment"># need sorted for pack_padded</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">return</span> super().<a class="code" href="../../d6/d5b/namespaceparlai_1_1agents_1_1drqa_1_1utils.html#aca22dd97c5b6dcda2a7479c1cb22ef1e">batchify</a>(*args, **kwargs)</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1drqa_1_1utils_html_aca22dd97c5b6dcda2a7479c1cb22ef1e"><div class="ttname"><a href="../../d6/d5b/namespaceparlai_1_1agents_1_1drqa_1_1utils.html#aca22dd97c5b6dcda2a7479c1cb22ef1e">parlai.agents.drqa.utils.batchify</a></div><div class="ttdeci">def batchify(batch, null=0, cuda=False)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d52/parlai_2agents_2drqa_2utils_8py_source.html#l00124">utils.py:124</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a58227903fd44e3d436710c06457c8f84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58227903fd44e3d436710c06457c8f84">&#9670;&nbsp;</a></span>beam_search()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.beam_search </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>beam_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>end</em> = <code>2</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pad</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_length</em> = <code>3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_n_best</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_ts</em> = <code>40</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>block_ngram</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Beam search given the model and Batch This function uses model with the
following reqs:

- model.encoder takes input returns tuple (enc_out, enc_hidden, attn_mask)
- model.decoder takes decoder params and returns decoder outputs after attn
- model.output takes decoder outputs and returns distr over dictionary

Function arguments:
model : nn.Module, here defined in modules.py
batch : Batch structure with input and labels
beam_size : Size of each beam during the search
start : start of sequence token
end : end of sequence token
pad : padding token
min_length : minimum length of the decoded sequence
min_n_best : minimum number of completed hypothesis generated from each beam
max_ts: the maximum length of the decoded sequence

Return:
beam_preds_scores : list of tuples (prediction, score) for each sample in Batch
n_best_preds_scores : list of n_best list of tuples (prediction, score) for
              each sample from Batch
beams : list of Beam instances defined in Beam class, can be used for any
following postprocessing, e.g. dot logging.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00538">538</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    ):</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="stringliteral">        Beam search given the model and Batch This function uses model with the</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="stringliteral">        following reqs:</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="stringliteral">        - model.encoder takes input returns tuple (enc_out, enc_hidden, attn_mask)</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="stringliteral">        - model.decoder takes decoder params and returns decoder outputs after attn</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="stringliteral">        - model.output takes decoder outputs and returns distr over dictionary</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="stringliteral">        Function arguments:</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="stringliteral">        model : nn.Module, here defined in modules.py</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="stringliteral">        batch : Batch structure with input and labels</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="stringliteral">        beam_size : Size of each beam during the search</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="stringliteral">        start : start of sequence token</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="stringliteral">        end : end of sequence token</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="stringliteral">        pad : padding token</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="stringliteral">        min_length : minimum length of the decoded sequence</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="stringliteral">        min_n_best : minimum number of completed hypothesis generated from each beam</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="stringliteral">        max_ts: the maximum length of the decoded sequence</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="stringliteral">        Return:</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="stringliteral">        beam_preds_scores : list of tuples (prediction, score) for each sample in Batch</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="stringliteral">        n_best_preds_scores : list of n_best list of tuples (prediction, score) for</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="stringliteral">                              each sample from Batch</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="stringliteral">        beams : list of Beam instances defined in Beam class, can be used for any</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="stringliteral">                following postprocessing, e.g. dot logging.</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        encoder_states = model.encoder(batch.text_vec)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        enc_out = encoder_states[0]</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        enc_hidden = encoder_states[1]</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        attn_mask = encoder_states[2]</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        current_device = encoder_states[0][0].device</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        batch_size = len(batch.text_lengths)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        beams = [</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            Beam(</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                beam_size,</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                min_length=min_length,</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                padding_token=pad,</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                bos_token=start,</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                eos_token=end,</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                min_n_best=min_n_best,</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                cuda=current_device,</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                block_ngram=block_ngram,</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            )</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(batch_size)</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        ]</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        decoder_input = (</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            torch.Tensor([start])</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            .detach()</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            .expand(batch_size, 1)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            .long()</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            .to(current_device)</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        )</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment"># repeat encoder_outputs, hiddens, attn_mask</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        decoder_input = decoder_input.repeat(1, beam_size).view(</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            beam_size * batch_size, -1</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        )</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        enc_out = (</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            enc_out.unsqueeze(1)</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            .<a class="code" href="../../db/d30/namespacerepeat.html">repeat</a>(1, beam_size, 1, 1)</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            .view(batch_size * beam_size, -1, enc_out.size(-1))</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        )</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        attn_mask = (</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            encoder_states[2]</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            .<a class="code" href="../../db/d30/namespacerepeat.html">repeat</a>(1, beam_size)</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            .view(attn_mask.size(0) * beam_size, -1)</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        )</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        repeated_hiddens = []</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">if</span> isinstance(enc_hidden, tuple):  <span class="comment"># LSTM</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(enc_hidden)):</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                repeated_hiddens.append(</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                    enc_hidden[i].unsqueeze(2).<a class="code" href="../../db/d30/namespacerepeat.html">repeat</a>(1, 1, beam_size, 1)</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                )</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            num_layers = enc_hidden[0].size(0)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            hidden_size = enc_hidden[0].size(-1)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            enc_hidden = tuple(</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                [</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                    repeated_hiddens[i].view(</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                        num_layers, batch_size * beam_size, hidden_size</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                    )</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(repeated_hiddens))</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                ]</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            )</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">else</span>:  <span class="comment"># GRU</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            num_layers = enc_hidden.size(0)</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            hidden_size = enc_hidden.size(-1)</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            enc_hidden = (</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                enc_hidden.unsqueeze(2)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                .<a class="code" href="../../db/d30/namespacerepeat.html">repeat</a>(1, 1, beam_size, 1)</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                .view(num_layers, batch_size * beam_size, hidden_size)</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            )</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        hidden = enc_hidden</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">for</span> ts <span class="keywordflow">in</span> range(max_ts):</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <span class="keywordflow">if</span> all((b.done() <span class="keywordflow">for</span> b <span class="keywordflow">in</span> beams)):</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <span class="keywordflow">break</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            output, hidden = model.decoder(decoder_input, hidden, (enc_out, attn_mask))</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            score = model.output(output)</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="comment"># score contains softmax scores for batch_size * beam_size samples</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            score = score.view(batch_size, beam_size, -1)</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            score = F.log_softmax(score, dim=-1)</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">for</span> i, b <span class="keywordflow">in</span> enumerate(beams):</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> b.done():</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                    b.advance(score[i])</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            decoder_input = torch.cat(</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                [b.get_output_from_current_step() <span class="keywordflow">for</span> b <span class="keywordflow">in</span> beams]</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            ).unsqueeze(-1)</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            permute_hidden_idx = torch.cat(</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                [</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                    beam_size * i + b.get_backtrack_from_current_step()</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                    <span class="keywordflow">for</span> i, b <span class="keywordflow">in</span> enumerate(beams)</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                ]</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            )</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <span class="comment"># permute decoder hiddens with respect to chosen hypothesis now</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="keywordflow">if</span> isinstance(hidden, tuple):  <span class="comment"># LSTM</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(hidden)):</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                    hidden[i].data.copy_(</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                        hidden[i].data.index_select(dim=1, index=permute_hidden_idx)</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                    )</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <span class="keywordflow">else</span>:  <span class="comment"># GRU</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                hidden.data.copy_(</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                    hidden.data.index_select(dim=1, index=permute_hidden_idx)</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                )</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">for</span> b <span class="keywordflow">in</span> beams:</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            b.check_finished()</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        beam_preds_scores = [list(b.get_top_hyp()) <span class="keywordflow">for</span> b <span class="keywordflow">in</span> beams]</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">for</span> pair <span class="keywordflow">in</span> beam_preds_scores:</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            pair[0] = Beam.get_pretty_hypothesis(pair[0])</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        n_best_beams = [b.get_rescored_finished(n_best=min_n_best) <span class="keywordflow">for</span> b <span class="keywordflow">in</span> beams]</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        n_best_beam_preds_scores = []</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">for</span> i, beamhyp <span class="keywordflow">in</span> enumerate(n_best_beams):</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            this_beam = []</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <span class="keywordflow">for</span> hyp <span class="keywordflow">in</span> beamhyp:</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                pred = beams[i].get_pretty_hypothesis(</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    beams[i].get_hyp_from_finished(hyp)</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                )</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                score = hyp.score</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                this_beam.append((pred, score))</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            n_best_beam_preds_scores.append(this_beam)</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">return</span> beam_preds_scores, n_best_beam_preds_scores, beams</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="ttc" id="namespacerepeat_html"><div class="ttname"><a href="../../db/d30/namespacerepeat.html">repeat</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dac/repeat_8py_source.html#l00001">repeat.py:1</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad06de7c94ee40c403f792e7b48e0b137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad06de7c94ee40c403f792e7b48e0b137">&#9670;&nbsp;</a></span>eval_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.eval_step </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Evaluate a single batch of examples.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00719">719</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keyword">def </span>eval_step(self, batch):</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="stringliteral">        Evaluate a single batch of examples.</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">if</span> batch.text_vec <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="keywordflow">return</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        orig_batch = batch  <span class="comment"># save for evaluation</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        needs_truncation = self.multigpu <span class="keywordflow">and</span> batch.text_vec.size(0) % 2 != 0</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">if</span> needs_truncation:</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="comment"># for multigpu, we need to split evenly across gpus</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            batch = self.extend_input(batch)</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        self.model.eval()</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        cand_scores = <span class="keywordtype">None</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="keywordflow">if</span> self.beam_size == 1:</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            out, cand_params = self.greedy_search(batch)</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="keywordflow">if</span> needs_truncation:</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                out = self.truncate_output(out)</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                <span class="keywordflow">if</span> cand_params[0] <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                    cand_params = (cand_params[0][:-1], cand_params[1][:-1])</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            scores, cand_scores = out[0], out[1]</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            _, preds = scores.max(2)</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordflow">elif</span> self.beam_size &gt; 1:</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            out = Seq2seqAgent.beam_search(</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                self.model,</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                batch,</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                self.beam_size,</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                start=self.START_IDX,</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                end=self.END_IDX,</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                pad=self.NULL_IDX,</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                min_length=self.beam_min_length,</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                min_n_best=self.beam_min_n_best,</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                block_ngram=self.beam_block_ngram,</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            )</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordflow">if</span> needs_truncation:</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                out = self.truncate_output(out)</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            beam_preds_scores, _, beams = out</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            preds, scores = (</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                [p[0] <span class="keywordflow">for</span> p <span class="keywordflow">in</span> beam_preds_scores],</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                [p[1] <span class="keywordflow">for</span> p <span class="keywordflow">in</span> beam_preds_scores],</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            )</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="keywordflow">if</span> self.beam_dot_log <span class="keywordflow">is</span> <span class="keyword">True</span>:</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                <span class="keywordflow">for</span> i, b <span class="keywordflow">in</span> enumerate(beams):</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                    dot_graph = b.get_beam_dot(dictionary=self.dict, n_best=3)</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                    image_name = (</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                        self._v2t(batch.text_vec[i, -20:])</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                        .replace(<span class="stringliteral">&#39; &#39;</span>, <span class="stringliteral">&#39;-&#39;</span>)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                        .replace(<span class="stringliteral">&#39;__null__&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                    )</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                    dot_graph.write_png(</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                        os.path.join(self.beam_dot_dir, <span class="stringliteral">&quot;{}.png&quot;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(image_name))</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                    )</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">if</span> batch.label_vec <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="comment"># calculate loss on targets with teacher forcing</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            seq_len = <span class="keywordtype">None</span> <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.multigpu <span class="keywordflow">else</span> batch.text_vec.size(1)</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            out = self.model(batch.text_vec, batch.label_vec, seq_len=seq_len)</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="keywordflow">if</span> needs_truncation:</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                out = self.truncate_output(out)</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            f_scores = out[0]  <span class="comment"># forced scores</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            _, f_preds = f_scores.max(2)  <span class="comment"># forced preds</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            score_view = f_scores.view(-1, f_scores.size(-1))</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            loss = self.criterion(score_view, orig_batch.label_vec.view(-1))</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <span class="comment"># save loss to metrics</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            notnull = orig_batch.label_vec.ne(self.NULL_IDX)</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            target_tokens = notnull.long().sum().item()</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            correct = ((orig_batch.label_vec == f_preds) * notnull).sum().item()</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            self.metrics[<span class="stringliteral">&#39;correct_tokens&#39;</span>] += correct</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            self.metrics[<span class="stringliteral">&#39;loss&#39;</span>] += loss.item()</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            self.metrics[<span class="stringliteral">&#39;num_tokens&#39;</span>] += target_tokens</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        cand_choices = <span class="keywordtype">None</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">if</span> cand_scores <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            cand_preds = cand_scores.sort(1, descending=<span class="keyword">True</span>)[1]</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="comment"># now select the text of the cands based on their scores</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            cand_choices = self._pick_cands(</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                cand_preds, cand_params[1], orig_batch.candidates</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            )</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        text = [self._v2t(p) <span class="keywordflow">for</span> p <span class="keywordflow">in</span> preds]</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../db/d30/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1.html#a2689006ea97d09413fb242f984bd8016">Output</a>(text, cand_choices)</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_html_a2689006ea97d09413fb242f984bd8016"><div class="ttname"><a href="../../db/d30/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1.html#a2689006ea97d09413fb242f984bd8016">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.Output</a></div><div class="ttdeci">Output</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddc/torch__agent__v1_8py_source.html#l00107">torch_agent_v1.py:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa1e972eb8a41c98486a50baa14700345"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1e972eb8a41c98486a50baa14700345">&#9670;&nbsp;</a></span>extend_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.extend_input </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00683">683</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keyword">def </span>extend_input(self, batch):</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="comment"># add pad tensor to text vec</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        pad_tensor = torch.zeros(1, batch.text_vec.size(1)).long().cuda()</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        text_vec = torch.cat([batch.text_vec, pad_tensor], 0)</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        batch = batch._replace(text_vec=text_vec)</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">if</span> batch.label_vec <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            <span class="comment"># add pad tensor to label vec</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            pad_tensor = torch.zeros(1, batch.label_vec.size(1)).long().cuda()</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            label_vec = torch.cat([batch.label_vec, pad_tensor], 0)</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            batch = batch._replace(label_vec=label_vec)</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">if</span> batch.candidates <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <span class="comment"># add dummy candidates list</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            dummy_list = [[<span class="stringliteral">&#39;None&#39;</span>] <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(len(batch.candidates[0]))]</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            batch = batch._replace(candidates=batch.candidates + [dummy_list])</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            <span class="comment"># add pad tensor to candidate_vecs</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            new_vecs = batch.candidate_vecs + [</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                [torch.zeros(1).long() <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(len(batch.candidate_vecs[0]))]</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            ]</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            batch = batch._replace(candidate_vecs=new_vecs)</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">return</span> batch</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a6afc143cc0ec59803be416416ce1ec97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6afc143cc0ec59803be416416ce1ec97">&#9670;&nbsp;</a></span>greedy_search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.greedy_search </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00520">520</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keyword">def </span>greedy_search(self, batch):</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        cand_params = self._build_cands(batch)</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        seq_len = <span class="keywordtype">None</span> <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.multigpu <span class="keywordflow">else</span> batch.text_vec.size(1)</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        out = self.model(batch.text_vec, ys=<span class="keywordtype">None</span>, cands=cand_params[0], seq_len=seq_len)</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">return</span> out, cand_params</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a3ee5ae38c0e37bcc1e4eb44bae8a3cce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee5ae38c0e37bcc1e4eb44bae8a3cce">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.load </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return opt and model states.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00822">822</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keyword">def </span>load(self, path):</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="stringliteral">        Return opt and model states.</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        states = torch.load(path, map_location=<span class="keyword">lambda</span> cpu, _: cpu)</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="comment"># check opt file for multigpu</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        with open(path + <span class="stringliteral">&quot;.opt&quot;</span>, <span class="stringliteral">&#39;r&#39;) as handle:</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="stringliteral">            saved_opt = json.load(handle)</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="stringliteral">        </span><span class="keywordflow">if</span> saved_opt.get(<span class="stringliteral">&#39;multigpu&#39;</span>):</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <span class="comment"># create new OrderedDict that does not contain `module.`</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            new_state_dict = OrderedDict()</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> states[<span class="stringliteral">&#39;model&#39;</span>].items():</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                <span class="keywordflow">if</span> k.startswith(<span class="stringliteral">&#39;module&#39;</span>):</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                    name = k[7:]  <span class="comment"># remove `module.`</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                    new_state_dict[name] = v</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            states[<span class="stringliteral">&#39;model&#39;</span>] = new_state_dict</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">return</span> states</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a3838eb2d88b4e9f80c9c234e6742fa30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3838eb2d88b4e9f80c9c234e6742fa30">&#9670;&nbsp;</a></span>model_version()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.model_version </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Return current version of this model, counting up from 0.

Models may not be backwards-compatible with older versions. Version 1 split from
version 0 on Aug 29, 2018. To use version 0, use --model legacy:seq2seq:0
(legacy agent code is located in parlai/agents/legacy_agents).
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00189">189</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keyword">def </span>model_version():</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="stringliteral">        Return current version of this model, counting up from 0.</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="stringliteral">        Models may not be backwards-compatible with older versions. Version 1 split from</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="stringliteral">        version 0 on Aug 29, 2018. To use version 0, use --model legacy:seq2seq:0</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="stringliteral">        (legacy agent code is located in parlai/agents/legacy_agents).</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">return</span> 1</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="ae588ce85bae56791bac9dd744e5414ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae588ce85bae56791bac9dd744e5414ce">&#9670;&nbsp;</a></span>report()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.report </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Report loss and perplexity from model's perspective.

Note that this includes predicting __END__ and __UNK__ tokens and may differ
from a truly independent measurement.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00368">368</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keyword">def </span><a class="code" href="../../db/d1c/namespaceprojects_1_1convai2_1_1eval__f1.html#a01a47b9c08dad189837a51f085defc45">report</a>(self):</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="stringliteral">        Report loss and perplexity from model&#39;s perspective.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="stringliteral">        Note that this includes predicting __END__ and __UNK__ tokens and may differ</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="stringliteral">        from a truly independent measurement.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        m = {}</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        num_tok = self.metrics[<span class="stringliteral">&#39;num_tokens&#39;</span>]</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">if</span> num_tok &gt; 0:</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="keywordflow">if</span> self.metrics[<span class="stringliteral">&#39;correct_tokens&#39;</span>] &gt; 0:</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                m[<span class="stringliteral">&#39;token_acc&#39;</span>] = self.metrics[<span class="stringliteral">&#39;correct_tokens&#39;</span>] / num_tok</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            m[<span class="stringliteral">&#39;loss&#39;</span>] = self.metrics[<span class="stringliteral">&#39;loss&#39;</span>] / num_tok</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                m[<span class="stringliteral">&#39;ppl&#39;</span>] = math.exp(m[<span class="stringliteral">&#39;loss&#39;</span>])</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">except</span> OverflowError:</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                m[<span class="stringliteral">&#39;ppl&#39;</span>] = <a class="code" href="../../d7/dc3/namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset.html#aa2b7207688c641dbc094ab44eca27113">float</a>(<span class="stringliteral">&#39;inf&#39;</span>)</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">if</span> self.metrics[<span class="stringliteral">&#39;total_skipped_batches&#39;</span>] &gt; 0:</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            m[<span class="stringliteral">&#39;total_skipped_batches&#39;</span>] = self.metrics[<span class="stringliteral">&#39;total_skipped_batches&#39;</span>]</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> m.items():</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="comment"># clean up: rounds to sigfigs and converts tensors to floats</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            m[k] = <a class="code" href="../../d5/dbb/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0.html#af377ec61bfc0423461e7b409ffc883b9">round_sigfigs</a>(v, 4)</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">return</span> m</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="ttc" id="namespaceprojects_1_1convai2_1_1eval__f1_html_a01a47b9c08dad189837a51f085defc45"><div class="ttname"><a href="../../db/d1c/namespaceprojects_1_1convai2_1_1eval__f1.html#a01a47b9c08dad189837a51f085defc45">projects.convai2.eval_f1.report</a></div><div class="ttdeci">report</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d61/convai2_2eval__f1_8py_source.html#l00039">eval_f1.py:39</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_html_af377ec61bfc0423461e7b409ffc883b9"><div class="ttname"><a href="../../d5/dbb/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0.html#af377ec61bfc0423461e7b409ffc883b9">parlai.agents.legacy_agents.seq2seq.utils_v0.round_sigfigs</a></div><div class="ttdeci">def round_sigfigs(x, sigfigs=4)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd3/utils__v0_8py_source.html#l00395">utils_v0.py:395</a></div></div>
<div class="ttc" id="namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset_html_aa2b7207688c641dbc094ab44eca27113"><div class="ttname"><a href="../../d7/dc3/namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset.html#aa2b7207688c641dbc094ab44eca27113">projects.controllable_dialogue.make_control_dataset.float</a></div><div class="ttdeci">float</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/make__control__dataset_8py_source.html#l00117">make_control_dataset.py:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a521db011d2188e8e513976af5737c322"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a521db011d2188e8e513976af5737c322">&#9670;&nbsp;</a></span>reset_metrics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.reset_metrics </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Reset metrics for reporting loss and perplexity.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00359">359</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keyword">def </span>reset_metrics(self):</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="stringliteral">        Reset metrics for reporting loss and perplexity.</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        super().reset_metrics()</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        self.metrics[<span class="stringliteral">&#39;loss&#39;</span>] = 0.0</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        self.metrics[<span class="stringliteral">&#39;num_tokens&#39;</span>] = 0</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        self.metrics[<span class="stringliteral">&#39;correct_tokens&#39;</span>] = 0</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a8aa6a1efae9091dc0b38af3ce4b49706"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aa6a1efae9091dc0b38af3ce4b49706">&#9670;&nbsp;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.save </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Save model parameters if model_file is set.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00800">800</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keyword">def </span>save(self, path=None):</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="stringliteral">        Save model parameters if model_file is set.</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        path = self.opt.get(<span class="stringliteral">&#39;model_file&#39;</span>, <span class="keywordtype">None</span>) <span class="keywordflow">if</span> path <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> path</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keywordflow">if</span> path <span class="keywordflow">and</span> hasattr(self, <span class="stringliteral">&#39;model&#39;</span>):</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            model = {}</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            model[<span class="stringliteral">&#39;model&#39;</span>] = self.model.state_dict()</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            model[<span class="stringliteral">&#39;longest_label&#39;</span>] = self.model.longest_label</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            model[<span class="stringliteral">&#39;optimizer&#39;</span>] = self.optimizer.state_dict()</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            model[<span class="stringliteral">&#39;optimizer_type&#39;</span>] = self.opt[<span class="stringliteral">&#39;optimizer&#39;</span>]</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            with open(path, <span class="stringliteral">&#39;wb&#39;</span>) <span class="keyword">as</span> write:</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                torch.save(model, write)</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <span class="comment"># save opt file</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            with open(path + <span class="stringliteral">&#39;.opt&#39;</span>, <span class="stringliteral">&#39;w&#39;</span>) <span class="keyword">as</span> handle:</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                <span class="comment"># save version string</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                self.opt[<span class="stringliteral">&#39;model_version&#39;</span>] = self.model_version()</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                json.dump(self.opt, handle)</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="afb99f50cbac1707480d1953163d91018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb99f50cbac1707480d1953163d91018">&#9670;&nbsp;</a></span>share()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.share </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Share internal states between parent and child instances.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00392">392</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keyword">def </span>share(self):</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="stringliteral">        Share internal states between parent and child instances.</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        shared = super().share()</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        shared[<span class="stringliteral">&#39;model&#39;</span>] = self.model</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span> self.opt.get(<span class="stringliteral">&#39;numthreads&#39;</span>, 1) &gt; 1:</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="comment"># we&#39;re doing hogwild so share the model too</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">if</span> isinstance(self.metrics, dict):</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                <span class="comment"># move metrics and model to shared memory</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                self.metrics = SharedTable(self.metrics)</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                self.model.share_memory()</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            shared[<span class="stringliteral">&#39;states&#39;</span>] = {  <span class="comment"># don&#39;t share optimizer states</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                <span class="stringliteral">&#39;optimizer_type&#39;</span>: self.opt[<span class="stringliteral">&#39;optimizer&#39;</span>]</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        shared[<span class="stringliteral">&#39;metrics&#39;</span>] = self.metrics  <span class="comment"># do after numthreads check</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">if</span> self.beam_dot_log <span class="keywordflow">is</span> <span class="keyword">True</span>:</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            shared[<span class="stringliteral">&#39;beam_dot_dir&#39;</span>] = self.beam_dot_dir</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">return</span> shared</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a59a524e15577396e60a1e5f8b6bfe9a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59a524e15577396e60a1e5f8b6bfe9a7">&#9670;&nbsp;</a></span>train_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.train_step </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Train on a single batch of examples.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00451">451</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keyword">def </span>train_step(self, batch):</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="stringliteral">        Train on a single batch of examples.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        batchsize = batch.text_vec.size(0)</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">if</span> self.multigpu <span class="keywordflow">and</span> batchsize % 2 != 0:</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="comment"># throw out one training example</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            batch = self.truncate_input(batch)</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment"># helps with memory usage</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        self._init_cuda_buffer(</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            self.model, self.criterion, batchsize, self.truncate <span class="keywordflow">or</span> 180</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        )</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        self.model.<a class="code" href="../../d2/d65/namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run.html#a36a5f4f6f9df0611a6818610518d2cf0">train</a>()</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        self.zero_grad()</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            seq_len = <span class="keywordtype">None</span> <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.multigpu <span class="keywordflow">else</span> batch.text_vec.size(1)</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            out = self.model(batch.text_vec, batch.label_vec, seq_len=seq_len)</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="comment"># generated response</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            scores = out[0]</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            _, preds = scores.max(2)</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            score_view = scores.view(-1, scores.size(-1))</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            loss = self.criterion(score_view, batch.label_vec.view(-1))</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="comment"># save loss to metrics</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            notnull = batch.label_vec.ne(self.NULL_IDX)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            target_tokens = notnull.long().sum().item()</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            correct = ((batch.label_vec == preds) * notnull).sum().item()</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            self.metrics[<span class="stringliteral">&#39;correct_tokens&#39;</span>] += correct</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            self.metrics[<span class="stringliteral">&#39;loss&#39;</span>] += loss.item()</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            self.metrics[<span class="stringliteral">&#39;num_tokens&#39;</span>] += target_tokens</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            loss /= target_tokens  <span class="comment"># average loss per token</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            loss.backward()</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            self.update_params()</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">except</span> RuntimeError <span class="keyword">as</span> e:</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="comment"># catch out of memory exceptions during fwd/bck (skip batch)</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">if</span> <span class="stringliteral">&#39;out of memory&#39;</span> <span class="keywordflow">in</span> <a class="code" href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">str</a>(e):</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                print(</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                    <span class="stringliteral">&#39;| WARNING: ran out of memory, skipping batch. &#39;</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    <span class="stringliteral">&#39;if this happens frequently, decrease batchsize or &#39;</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                    <span class="stringliteral">&#39;truncate the inputs to the model.&#39;</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                )</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                self.metrics[<span class="stringliteral">&#39;total_skipped_batches&#39;</span>] += 1</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                <span class="keywordflow">raise</span> e</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="ttc" id="namespacegenerate__task__READMEs_html_a5b88452ffb87b78c8c85ececebafc09f"><div class="ttname"><a href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">generate_task_READMEs.str</a></div><div class="ttdeci">string str</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d04/generate__task__READMEs_8py_source.html#l00022">generate_task_READMEs.py:22</a></div></div>
<div class="ttc" id="namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_html_a36a5f4f6f9df0611a6818610518d2cf0"><div class="ttname"><a href="../../d2/d65/namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run.html#a36a5f4f6f9df0611a6818610518d2cf0">projects.mastering_the_dungeon.mturk.tasks.MTD.run.train</a></div><div class="ttdeci">def train(opt, round_index, machine_index, file_index, train_data, valid_data, valid_weights=None, save_all=True, return_acc_len=False, seq2seq=False)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/projects_2mastering__the__dungeon_2mturk_2tasks_2MTD_2run_8py_source.html#l00182">run.py:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4496420685c3cd273920f89b4e82625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4496420685c3cd273920f89b4e82625">&#9670;&nbsp;</a></span>truncate_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.truncate_input </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00704">704</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keyword">def </span>truncate_input(self, batch):</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="comment"># truncate batch for multigpu</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        text_vec = batch.text_vec[:-1]</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        batch = batch._replace(text_vec=text_vec)</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="keywordflow">if</span> batch.label_vec <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            label_vec = batch.label_vec[:-1]</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            batch = batch._replace(label_vec=label_vec)</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">return</span> batch</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a4567d7a200e20bd09235d4833424bdad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4567d7a200e20bd09235d4833424bdad">&#9670;&nbsp;</a></span>truncate_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.truncate_output </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00713">713</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keyword">def </span>truncate_output(self, out):</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        new_out_0 = out[0][:-1]</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        new_out_1 = <span class="keywordtype">None</span> <span class="keywordflow">if</span> out[1] <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> out[1][:-1]</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        new_out_2 = [vec[:-1] <span class="keywordflow">for</span> vec <span class="keywordflow">in</span> out[2]]</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">return</span> tuple([new_out_0, new_out_1, new_out_2])</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a3fabaacec11534b452a1786d3dd5a6c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fabaacec11534b452a1786d3dd5a6c8">&#9670;&nbsp;</a></span>update_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.update_params </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Do one optimization step.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00351">351</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keyword">def </span>update_params(self):</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="stringliteral">        Do one optimization step.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">if</span> self.clip &gt; 0:</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            torch.nn.utils.clip_grad_norm_(self.model.parameters(), self.clip)</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        self.optimizer.step()</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="ae0e5663a7879b2704378dfe99ef6d0f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e5663a7879b2704378dfe99ef6d0f4">&#9670;&nbsp;</a></span>vectorize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.vectorize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Override vectorize for seq2seq.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00412">412</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keyword">def </span><a class="code" href="../../d6/d5b/namespaceparlai_1_1agents_1_1drqa_1_1utils.html#a5c76cc39e3014c7bcf9199d566dbdc0f">vectorize</a>(self, *args, **kwargs):</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="stringliteral">        Override vectorize for seq2seq.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        kwargs[<span class="stringliteral">&#39;add_start&#39;</span>] = <span class="keyword">False</span>  <span class="comment"># model does this in module code</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        kwargs[<span class="stringliteral">&#39;add_end&#39;</span>] = <span class="keyword">True</span>  <span class="comment"># we do want this</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">return</span> super().<a class="code" href="../../d6/d5b/namespaceparlai_1_1agents_1_1drqa_1_1utils.html#a5c76cc39e3014c7bcf9199d566dbdc0f">vectorize</a>(*args, **kwargs)</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1drqa_1_1utils_html_a5c76cc39e3014c7bcf9199d566dbdc0f"><div class="ttname"><a href="../../d6/d5b/namespaceparlai_1_1agents_1_1drqa_1_1utils.html#a5c76cc39e3014c7bcf9199d566dbdc0f">parlai.agents.drqa.utils.vectorize</a></div><div class="ttdeci">def vectorize(opt, ex, word_dict, feature_dict)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d52/parlai_2agents_2drqa_2utils_8py_source.html#l00070">utils.py:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af2e9c4d06f55802308dbfedfea69d0cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2e9c4d06f55802308dbfedfea69d0cd">&#9670;&nbsp;</a></span>zero_grad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.zero_grad </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Zero out optimizer.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00345">345</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">def </span>zero_grad(self):</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="stringliteral">        Zero out optimizer.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        self.optimizer.zero_grad()</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a070849409fda0767b993e13b9096fc29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a070849409fda0767b993e13b9096fc29">&#9670;&nbsp;</a></span>beam_block_ngram</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.beam_block_ngram</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00231">231</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="aa60eebf5d848b1e8b8c15a856456918a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa60eebf5d848b1e8b8c15a856456918a">&#9670;&nbsp;</a></span>beam_dot_dir</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.beam_dot_dir</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00247">247</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="af0b1011238f6a71eed46f10ea0300705"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0b1011238f6a71eed46f10ea0300705">&#9670;&nbsp;</a></span>beam_dot_log</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.beam_dot_log</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00227">227</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="aeebfbcecc59779e751869f7df3fcda19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeebfbcecc59779e751869f7df3fcda19">&#9670;&nbsp;</a></span>beam_min_length</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.beam_min_length</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00230">230</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="a0416c2a28c0efae160d31f755f3b5db9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0416c2a28c0efae160d31f755f3b5db9">&#9670;&nbsp;</a></span>beam_min_n_best</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.beam_min_n_best</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00229">229</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="ab4afd6e6f79d32bd21e60ac11c0d414b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4afd6e6f79d32bd21e60ac11c0d414b">&#9670;&nbsp;</a></span>beam_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.beam_size</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00228">228</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="ae4bcab12b2cf1070cc8f712956f886ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4bcab12b2cf1070cc8f712956f886ca">&#9670;&nbsp;</a></span>buffer_initialized</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.buffer_initialized</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00439">439</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="a821dfcf56b6872f4377b0fc8c5ed94de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a821dfcf56b6872f4377b0fc8c5ed94de">&#9670;&nbsp;</a></span>criterion</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.criterion</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00262">262</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="a8636132dae633a66cc34da3a20d9894a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8636132dae633a66cc34da3a20d9894a">&#9670;&nbsp;</a></span>id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00221">221</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="a640b76ddf76c70e73c4012f37d4c72b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a640b76ddf76c70e73c4012f37d4c72b7">&#9670;&nbsp;</a></span>metrics</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.metrics</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00236">236</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="aeea96acec40c7a63d019ca56feca3c73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeea96acec40c7a63d019ca56feca3c73">&#9670;&nbsp;</a></span>model</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.model</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00235">235</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<a id="a82ff9540ce457658a7a7035055b36f77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82ff9540ce457658a7a7035055b36f77">&#9670;&nbsp;</a></span>multigpu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.multigpu</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html#l00222">222</a> of file <a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>parlai/agents/legacy_agents/seq2seq/<a class="el" href="../../d1/d42/seq2seq__v1_8py_source.html">seq2seq_v1.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
