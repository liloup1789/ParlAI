<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParlAI: parlai.core.torch_generator_agent.TorchGeneratorAgent Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ParlAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d5/d22/namespaceparlai.html">parlai</a></li><li class="navelem"><a class="el" href="../../d1/d43/namespaceparlai_1_1core.html">core</a></li><li class="navelem"><a class="el" href="../../de/d94/namespaceparlai_1_1core_1_1torch__generator__agent.html">torch_generator_agent</a></li><li class="navelem"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html">TorchGeneratorAgent</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d7/d77/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">parlai.core.torch_generator_agent.TorchGeneratorAgent Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for parlai.core.torch_generator_agent.TorchGeneratorAgent:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d9f/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent__inherit__graph.png" border="0" usemap="#parlai_8core_8torch__generator__agent_8TorchGeneratorAgent_inherit__map" alt="Inheritance graph"/></div>
<map name="parlai_8core_8torch__generator__agent_8TorchGeneratorAgent_inherit__map" id="parlai_8core_8torch__generator__agent_8TorchGeneratorAgent_inherit__map">
<area shape="rect" id="node6" href="../../d6/db2/classparlai_1_1agents_1_1seq2seq_1_1seq2seq_1_1Seq2seqAgent.html" title="parlai.agents.seq2seq.seq2seq.\lSeq2seqAgent" alt="" coords="782,27,989,69"/>
<area shape="rect" id="node7" href="../../d5/d4a/classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerGeneratorAgent.html" title="parlai.agents.transformer.transformer.\lTransformerGeneratorAgent" alt="" coords="765,93,1005,134"/>
<area shape="rect" id="node12" href="../../d2/d60/classtests_1_1test__ta__inheritence_1_1SubClassA.html" title="tests.test_ta_inheritence.\lSubClassA" alt="" coords="801,162,970,203"/>
<area shape="rect" id="node2" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html" title="parlai.core.torch_agent.\lTorchAgent" alt="" coords="321,93,480,134"/>
<area shape="rect" id="node4" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html" title="parlai.core.agents.Agent" alt="" coords="111,125,273,152"/>
<area shape="rect" id="node8" href="../../d9/d0e/classparlai_1_1agents_1_1image__seq2seq_1_1image__seq2seq_1_1ImageSeq2seqAgent.html" title="parlai.agents.image\l_seq2seq.image_seq2seq.Image\lSeq2seqAgent" alt="" coords="1053,5,1267,61"/>
<area shape="rect" id="node9" href="../../d6/d18/classprojects_1_1wizard__of__wikipedia_1_1generator_1_1agents_1_1__GenericWizardAgent.html" title="projects.wizard_of\l_wikipedia.generator.agents.\l_GenericWizardAgent" alt="" coords="1066,85,1254,141"/>
<area shape="rect" id="node10" href="../../d0/d6a/classprojects_1_1wizard__of__wikipedia_1_1generator_1_1agents_1_1EndToEndAgent.html" title="projects.wizard_of\l_wikipedia.generator.agents.\lEndToEndAgent" alt="" coords="1315,45,1503,101"/>
<area shape="rect" id="node11" href="../../d8/d61/classprojects_1_1wizard__of__wikipedia_1_1generator_1_1agents_1_1TwoStageAgent.html" title="projects.wizard_of\l_wikipedia.generator.agents.\lTwoStageAgent" alt="" coords="1315,125,1503,181"/>
<area shape="rect" id="node13" href="../../d1/dd5/classtests_1_1test__ta__inheritence_1_1SubClassB.html" title="tests.test_ta_inheritence.\lSubClassB" alt="" coords="1075,166,1245,207"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for parlai.core.torch_generator_agent.TorchGeneratorAgent:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d12/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent__coll__graph.png" border="0" usemap="#parlai_8core_8torch__generator__agent_8TorchGeneratorAgent_coll__map" alt="Collaboration graph"/></div>
<map name="parlai_8core_8torch__generator__agent_8TorchGeneratorAgent_coll__map" id="parlai_8core_8torch__generator__agent_8TorchGeneratorAgent_coll__map">
<area shape="rect" id="node2" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html" title="parlai.core.torch_agent.\lTorchAgent" alt="" coords="21,155,179,196"/>
<area shape="rect" id="node4" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html" title="parlai.core.agents.Agent" alt="" coords="84,80,247,107"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9b840de6769acee3aac913d25c448a1d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a9b840de6769acee3aac913d25c448a1d">upgrade_opt</a></td></tr>
<tr class="separator:a9b840de6769acee3aac913d25c448a1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2e2f6361e46785d0b79e4c5031e5710"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#ad2e2f6361e46785d0b79e4c5031e5710">add_cmdline_args</a> (cls, argparser)</td></tr>
<tr class="separator:ad2e2f6361e46785d0b79e4c5031e5710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a994ed6de4104aa3135deed2fcba75520"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a994ed6de4104aa3135deed2fcba75520">__init__</a></td></tr>
<tr class="separator:a994ed6de4104aa3135deed2fcba75520"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f8437dd8d0dc44f941dbc6182121284"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a8f8437dd8d0dc44f941dbc6182121284">build_criterion</a> (self)</td></tr>
<tr class="separator:a8f8437dd8d0dc44f941dbc6182121284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a3c13d2b8988d2a0cbb71f44ae81f52"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a8a3c13d2b8988d2a0cbb71f44ae81f52">set_interactive_mode</a> (self, mode, shared=False)</td></tr>
<tr class="separator:a8a3c13d2b8988d2a0cbb71f44ae81f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cac9c087d7357d32a7c3bc8fa74930c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a7cac9c087d7357d32a7c3bc8fa74930c">reset_metrics</a> (self)</td></tr>
<tr class="separator:a7cac9c087d7357d32a7c3bc8fa74930c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad10e64dd33f1add04ba5bcf36b86c2bf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#ad10e64dd33f1add04ba5bcf36b86c2bf">share</a> (self)</td></tr>
<tr class="separator:ad10e64dd33f1add04ba5bcf36b86c2bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ed32722f939a8afd258830b7093fc18"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a3ed32722f939a8afd258830b7093fc18">report</a> (self)</td></tr>
<tr class="separator:a3ed32722f939a8afd258830b7093fc18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f36d7201bc1b9a019d3525a5934cf7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a66f36d7201bc1b9a019d3525a5934cf7">vectorize</a> (self, args, kwargs)</td></tr>
<tr class="separator:a66f36d7201bc1b9a019d3525a5934cf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94808a13bba0d5283613acd98516bd3c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a94808a13bba0d5283613acd98516bd3c">compute_loss</a> (self, batch, return_output=False)</td></tr>
<tr class="separator:a94808a13bba0d5283613acd98516bd3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe2226ddfc838ec27580e3499cc0bae7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#afe2226ddfc838ec27580e3499cc0bae7">train_step</a> (self, batch)</td></tr>
<tr class="separator:afe2226ddfc838ec27580e3499cc0bae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac584268dd08c6fcb0045aa968cad8561"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#ac584268dd08c6fcb0045aa968cad8561">eval_step</a> (self, batch)</td></tr>
<tr class="separator:ac584268dd08c6fcb0045aa968cad8561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html">parlai.core.torch_agent.TorchAgent</a></td></tr>
<tr class="memitem:a9c622b8ed5a811841f30fe98cc297cde inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a9c622b8ed5a811841f30fe98cc297cde">optim_opts</a> (self)</td></tr>
<tr class="separator:a9c622b8ed5a811841f30fe98cc297cde inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bd9118252c602bb9d5a596ecae16717 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a0bd9118252c602bb9d5a596ecae16717">history_class</a> (cls)</td></tr>
<tr class="separator:a0bd9118252c602bb9d5a596ecae16717 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a72bdd07d2cb5ce402d0058140cad0d inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a4a72bdd07d2cb5ce402d0058140cad0d">add_cmdline_args</a> (cls, argparser)</td></tr>
<tr class="separator:a4a72bdd07d2cb5ce402d0058140cad0d inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc9c818413b776a498c2bcc0bfe3c6f7 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#afc9c818413b776a498c2bcc0bfe3c6f7">__init__</a></td></tr>
<tr class="separator:afc9c818413b776a498c2bcc0bfe3c6f7 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab22f61f153b522f429210c61eed2d5af inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#ab22f61f153b522f429210c61eed2d5af">build_history</a> (self)</td></tr>
<tr class="separator:ab22f61f153b522f429210c61eed2d5af inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a233316f9ec2805dd6a08fbf07f3a078a inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a233316f9ec2805dd6a08fbf07f3a078a">build_dictionary</a> (self)</td></tr>
<tr class="separator:a233316f9ec2805dd6a08fbf07f3a078a inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a21fa33fa5b2b928024fbc67826f233 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a9a21fa33fa5b2b928024fbc67826f233">build_model</a> (self)</td></tr>
<tr class="separator:a9a21fa33fa5b2b928024fbc67826f233 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3784f1ddaa6ffad009716910f3f36dd4 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a3784f1ddaa6ffad009716910f3f36dd4">init_optim</a> (self, params, optim_states=None, saved_optim_type=None)</td></tr>
<tr class="separator:a3784f1ddaa6ffad009716910f3f36dd4 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa51ac42dc34e3d2281a01cba78a96151 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#aa51ac42dc34e3d2281a01cba78a96151">build_lr_scheduler</a> (self, states=None, hard_reset=False)</td></tr>
<tr class="separator:aa51ac42dc34e3d2281a01cba78a96151 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac694770cd4022eb047bf6fbb8f46035c inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#ac694770cd4022eb047bf6fbb8f46035c">report</a> (self)</td></tr>
<tr class="separator:ac694770cd4022eb047bf6fbb8f46035c inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02beaaedfa30463f9d0a97ea590b516f inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a02beaaedfa30463f9d0a97ea590b516f">receive_metrics</a> (self, metrics_dict)</td></tr>
<tr class="separator:a02beaaedfa30463f9d0a97ea590b516f inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a373f0e276bf7c9d914a4e3363e9c2712 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a373f0e276bf7c9d914a4e3363e9c2712">share</a> (self)</td></tr>
<tr class="separator:a373f0e276bf7c9d914a4e3363e9c2712 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48bb9b153353a0565ab7253dc1daef99 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a48bb9b153353a0565ab7253dc1daef99">vectorize</a> (self, obs, <a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a0484b0246f0a930adc575899cdef033c">history</a>, add_start=True, add_end=True, <a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#ae3a69ecb5f20ce4f8a09c05c5f6f4376">text_truncate</a>=None, <a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#adbdd7cf2deb2c43d982c57852b83e685">label_truncate</a>=None)</td></tr>
<tr class="separator:a48bb9b153353a0565ab7253dc1daef99 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa491bf2384b017711ad722b5341b405 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#afa491bf2384b017711ad722b5341b405">is_valid</a> (self, obs)</td></tr>
<tr class="separator:afa491bf2384b017711ad722b5341b405 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c5824776df0c6cf995984a5e7a3f433 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a4c5824776df0c6cf995984a5e7a3f433">batchify</a> (self, obs_batch, sort=False)</td></tr>
<tr class="separator:a4c5824776df0c6cf995984a5e7a3f433 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba56b961d929e5c5b5da9cf8bd331502 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#aba56b961d929e5c5b5da9cf8bd331502">match_batch</a> (self, batch_reply, valid_inds, output=None)</td></tr>
<tr class="separator:aba56b961d929e5c5b5da9cf8bd331502 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87b18f0d6ab11be3c49375af072d0d33 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a87b18f0d6ab11be3c49375af072d0d33">observe</a> (self, <a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a4bc525b20568822a042b3bbfa3da3a69">observation</a>)</td></tr>
<tr class="separator:a87b18f0d6ab11be3c49375af072d0d33 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a663cb0d6a276495d03aacdb8b9c79fb0 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a663cb0d6a276495d03aacdb8b9c79fb0">self_observe</a></td></tr>
<tr class="separator:a663cb0d6a276495d03aacdb8b9c79fb0 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f89e606931a4622a5c6a6f6b832235c inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a9f89e606931a4622a5c6a6f6b832235c">state_dict</a> (self)</td></tr>
<tr class="separator:a9f89e606931a4622a5c6a6f6b832235c inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac7ee3db855786e8414e9f35fcb6e46 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#adac7ee3db855786e8414e9f35fcb6e46">save</a> (self, path=None)</td></tr>
<tr class="separator:adac7ee3db855786e8414e9f35fcb6e46 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dcfca62a677f8de97f09ce993258f84 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a5dcfca62a677f8de97f09ce993258f84">load_state_dict</a> (self, <a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a9f89e606931a4622a5c6a6f6b832235c">state_dict</a>)</td></tr>
<tr class="separator:a5dcfca62a677f8de97f09ce993258f84 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac345f2da892d35d9f4921e0acf5594c8 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#ac345f2da892d35d9f4921e0acf5594c8">load</a></td></tr>
<tr class="separator:ac345f2da892d35d9f4921e0acf5594c8 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f568650dd8e245a274671680ebb7587 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a6f568650dd8e245a274671680ebb7587">reset</a> (self)</td></tr>
<tr class="separator:a6f568650dd8e245a274671680ebb7587 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e18955cfd44dd019d0847bc7a46893 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a03e18955cfd44dd019d0847bc7a46893">reset_metrics</a> (self)</td></tr>
<tr class="separator:a03e18955cfd44dd019d0847bc7a46893 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51174dfa508970e3392246b02d0d94b5 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a51174dfa508970e3392246b02d0d94b5">act</a> (self)</td></tr>
<tr class="separator:a51174dfa508970e3392246b02d0d94b5 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7754a74d6c87590f46e71ec486c285a8 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a7754a74d6c87590f46e71ec486c285a8">batch_act</a> (self, observations)</td></tr>
<tr class="separator:a7754a74d6c87590f46e71ec486c285a8 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba9d535736c0af100d00c5e7b02b61b inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a8ba9d535736c0af100d00c5e7b02b61b">train_step</a> (self, batch)</td></tr>
<tr class="separator:a8ba9d535736c0af100d00c5e7b02b61b inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18de0a52aeec4ef721aedbdd6ac06cad inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a18de0a52aeec4ef721aedbdd6ac06cad">eval_step</a> (self, batch)</td></tr>
<tr class="separator:a18de0a52aeec4ef721aedbdd6ac06cad inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a7aff29231816a0f3cade9c72409dfc inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a6a7aff29231816a0f3cade9c72409dfc">set_interactive_mode</a> (self, mode, shared)</td></tr>
<tr class="separator:a6a7aff29231816a0f3cade9c72409dfc inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8df662b1258ec67752b4fc0ad45733f9 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a8df662b1258ec67752b4fc0ad45733f9">backward</a> (self, loss)</td></tr>
<tr class="separator:a8df662b1258ec67752b4fc0ad45733f9 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e2c9e180887397daa6229a0f9700b1c inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a7e2c9e180887397daa6229a0f9700b1c">update_params</a> (self)</td></tr>
<tr class="separator:a7e2c9e180887397daa6229a0f9700b1c inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c163f3e2d39b380095b7083f673b6e inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a91c163f3e2d39b380095b7083f673b6e">zero_grad</a> (self)</td></tr>
<tr class="separator:a91c163f3e2d39b380095b7083f673b6e inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classparlai_1_1core_1_1agents_1_1Agent')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html">parlai.core.agents.Agent</a></td></tr>
<tr class="memitem:ade454c86dc623c46d218ca5544d49596 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#ade454c86dc623c46d218ca5544d49596">__init__</a></td></tr>
<tr class="separator:ade454c86dc623c46d218ca5544d49596 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98041e2d186aa81bd5e1649a91f623bc inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a98041e2d186aa81bd5e1649a91f623bc">observe</a> (self, <a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#aedbecc4b4aa7af7413882a0429e0f1db">observation</a>)</td></tr>
<tr class="separator:a98041e2d186aa81bd5e1649a91f623bc inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a8abe0a98dd59bc39c9f12b163072db inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a6a8abe0a98dd59bc39c9f12b163072db">act</a> (self)</td></tr>
<tr class="separator:a6a8abe0a98dd59bc39c9f12b163072db inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e1cdd729ac4236f8bae90b2e66fa04 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a29e1cdd729ac4236f8bae90b2e66fa04">getID</a> (self)</td></tr>
<tr class="separator:a29e1cdd729ac4236f8bae90b2e66fa04 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40157e237ea85d75ebc3fd248c7a1a1b inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a40157e237ea85d75ebc3fd248c7a1a1b">epoch_done</a> (self)</td></tr>
<tr class="separator:a40157e237ea85d75ebc3fd248c7a1a1b inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27cb8206372681605b00dc28b81a7c39 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a27cb8206372681605b00dc28b81a7c39">reset</a> (self)</td></tr>
<tr class="separator:a27cb8206372681605b00dc28b81a7c39 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaefcbd7c61d319b368b3ee13997c8c99 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#aaefcbd7c61d319b368b3ee13997c8c99">reset_metrics</a> (self)</td></tr>
<tr class="separator:aaefcbd7c61d319b368b3ee13997c8c99 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e706e3e5389c9b48c7a1589d97ec99 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a51e706e3e5389c9b48c7a1589d97ec99">save</a> (self, path=None)</td></tr>
<tr class="separator:a51e706e3e5389c9b48c7a1589d97ec99 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2525db5bdd19a3bf5b0669bfa158f9ff inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a2525db5bdd19a3bf5b0669bfa158f9ff">clone</a> (self)</td></tr>
<tr class="separator:a2525db5bdd19a3bf5b0669bfa158f9ff inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbbb06bf0f46ff927c8b186726a68b47 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#afbbb06bf0f46ff927c8b186726a68b47">share</a> (self)</td></tr>
<tr class="separator:afbbb06bf0f46ff927c8b186726a68b47 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a801e5ca2a5e8e96a72f0c04549008e8f inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#a801e5ca2a5e8e96a72f0c04549008e8f">shutdown</a> (self)</td></tr>
<tr class="separator:a801e5ca2a5e8e96a72f0c04549008e8f inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6e5ea0357c43169d97b329566a33ee5 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#ad6e5ea0357c43169d97b329566a33ee5">upgrade_opt</a></td></tr>
<tr class="separator:ad6e5ea0357c43169d97b329566a33ee5 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:acf02a68b75948cf5bafb24be48813127"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#acf02a68b75948cf5bafb24be48813127">beam_size</a></td></tr>
<tr class="separator:acf02a68b75948cf5bafb24be48813127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63f7f11d4917e843498e95dc87e30eb1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a63f7f11d4917e843498e95dc87e30eb1">beam_min_length</a></td></tr>
<tr class="separator:a63f7f11d4917e843498e95dc87e30eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64484ea8971fc2a665e99f99a60f0653"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a64484ea8971fc2a665e99f99a60f0653">beam_block_ngram</a></td></tr>
<tr class="separator:a64484ea8971fc2a665e99f99a60f0653"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7991351ff26caf7c59e24fe2e36bf6ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a7991351ff26caf7c59e24fe2e36bf6ea">beam_context_block_ngram</a></td></tr>
<tr class="separator:a7991351ff26caf7c59e24fe2e36bf6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6ff17d050234854c4ce34fbff73bf79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#ab6ff17d050234854c4ce34fbff73bf79">output_token_losses</a></td></tr>
<tr class="separator:ab6ff17d050234854c4ce34fbff73bf79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad44b60dfb7bc5576ff108ed5a1d1c227"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#ad44b60dfb7bc5576ff108ed5a1d1c227">compute_tokenized_bleu</a></td></tr>
<tr class="separator:ad44b60dfb7bc5576ff108ed5a1d1c227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dedd6cbd8e87332284d6ef993d02eea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a8dedd6cbd8e87332284d6ef993d02eea">fairseq_bleu_scorer</a></td></tr>
<tr class="separator:a8dedd6cbd8e87332284d6ef993d02eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d87620f983b47787280389465ec61e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a20d87620f983b47787280389465ec61e">ntlk_bleu_scores</a></td></tr>
<tr class="separator:a20d87620f983b47787280389465ec61e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f478c963651331f919fc0ebd44bac3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#aa6f478c963651331f919fc0ebd44bac3">criterion</a></td></tr>
<tr class="separator:aa6f478c963651331f919fc0ebd44bac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b661c0eb6f3e65f061908142819bdc2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a3b661c0eb6f3e65f061908142819bdc2">model</a></td></tr>
<tr class="separator:a3b661c0eb6f3e65f061908142819bdc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a713b4b7ae6d30a664c97c4ea121f8e38"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a713b4b7ae6d30a664c97c4ea121f8e38">skip_generation</a></td></tr>
<tr class="separator:a713b4b7ae6d30a664c97c4ea121f8e38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427057bbe1b2182e5bbd476b7739de31"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a427057bbe1b2182e5bbd476b7739de31">buffer_initialized</a></td></tr>
<tr class="separator:a427057bbe1b2182e5bbd476b7739de31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56e1c7094c455837b9f8976d314d10f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5c/classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a56e1c7094c455837b9f8976d314d10f4">nltk_bleu_scores</a></td></tr>
<tr class="separator:a56e1c7094c455837b9f8976d314d10f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent')"><img src="../../closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html">parlai.core.torch_agent.TorchAgent</a></td></tr>
<tr class="memitem:a10b8d2605e619d5d3dc9f67777cb190a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a10b8d2605e619d5d3dc9f67777cb190a">use_cuda</a></td></tr>
<tr class="separator:a10b8d2605e619d5d3dc9f67777cb190a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f916e01d876679b529a893ad4f52f6 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#aa6f916e01d876679b529a893ad4f52f6">fp16</a></td></tr>
<tr class="separator:aa6f916e01d876679b529a893ad4f52f6 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abebf29c0bb956bbc5ccc02777d2af3dd inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#abebf29c0bb956bbc5ccc02777d2af3dd">dict</a></td></tr>
<tr class="separator:abebf29c0bb956bbc5ccc02777d2af3dd inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785bb920cf8c8afc3e9bf6a8b77e335a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a785bb920cf8c8afc3e9bf6a8b77e335a">opt</a></td></tr>
<tr class="separator:a785bb920cf8c8afc3e9bf6a8b77e335a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe40410d2e3b2565ecd27441266011fc inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#afe40410d2e3b2565ecd27441266011fc">model</a></td></tr>
<tr class="separator:afe40410d2e3b2565ecd27441266011fc inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13d46ae8aed6052679b62c3961a4de62 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a13d46ae8aed6052679b62c3961a4de62">criterion</a></td></tr>
<tr class="separator:a13d46ae8aed6052679b62c3961a4de62 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392ed66573001dfa2846d5042e8fc5a5 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a392ed66573001dfa2846d5042e8fc5a5">metrics</a></td></tr>
<tr class="separator:a392ed66573001dfa2846d5042e8fc5a5 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ac66a09c1c164ea08f4b257c61c38a0 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a4ac66a09c1c164ea08f4b257c61c38a0">id</a></td></tr>
<tr class="separator:a4ac66a09c1c164ea08f4b257c61c38a0 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a80083f0e34d8abc15b50123efec884 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a3a80083f0e34d8abc15b50123efec884">EMPTY</a></td></tr>
<tr class="separator:a3a80083f0e34d8abc15b50123efec884 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95cedd561757c9fc10dbf3a956e7f912 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a95cedd561757c9fc10dbf3a956e7f912">NULL_IDX</a></td></tr>
<tr class="separator:a95cedd561757c9fc10dbf3a956e7f912 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2018afae9938937f80b61475314012cd inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a2018afae9938937f80b61475314012cd">START_IDX</a></td></tr>
<tr class="separator:a2018afae9938937f80b61475314012cd inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31bb7c8bf380660ee4e3822756563599 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a31bb7c8bf380660ee4e3822756563599">END_IDX</a></td></tr>
<tr class="separator:a31bb7c8bf380660ee4e3822756563599 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ca476189900643fab04d1ac0ebfc719 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a1ca476189900643fab04d1ac0ebfc719">random</a></td></tr>
<tr class="separator:a1ca476189900643fab04d1ac0ebfc719 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15cbb1f743c1d341d914ade47e49071b inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a15cbb1f743c1d341d914ade47e49071b">histsz</a></td></tr>
<tr class="separator:a15cbb1f743c1d341d914ade47e49071b inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ae27e9fe68d255a960bcb5180f48a65 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a3ae27e9fe68d255a960bcb5180f48a65">truncate</a></td></tr>
<tr class="separator:a3ae27e9fe68d255a960bcb5180f48a65 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3a69ecb5f20ce4f8a09c05c5f6f4376 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#ae3a69ecb5f20ce4f8a09c05c5f6f4376">text_truncate</a></td></tr>
<tr class="separator:ae3a69ecb5f20ce4f8a09c05c5f6f4376 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbdd7cf2deb2c43d982c57852b83e685 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#adbdd7cf2deb2c43d982c57852b83e685">label_truncate</a></td></tr>
<tr class="separator:adbdd7cf2deb2c43d982c57852b83e685 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0484b0246f0a930adc575899cdef033c inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a0484b0246f0a930adc575899cdef033c">history</a></td></tr>
<tr class="separator:a0484b0246f0a930adc575899cdef033c inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0bd6456c94dfd9afae73b86f05016cf inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#ab0bd6456c94dfd9afae73b86f05016cf">is_training</a></td></tr>
<tr class="separator:ab0bd6456c94dfd9afae73b86f05016cf inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6355b9b0c0ccb24ffe1b5e3d89903cc3 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a6355b9b0c0ccb24ffe1b5e3d89903cc3">rank_candidates</a></td></tr>
<tr class="separator:a6355b9b0c0ccb24ffe1b5e3d89903cc3 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63011fa9bd927de8acc9ffa676caa73a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a63011fa9bd927de8acc9ffa676caa73a">add_person_tokens</a></td></tr>
<tr class="separator:a63011fa9bd927de8acc9ffa676caa73a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9533344de40049bf13209739bc92199d inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a9533344de40049bf13209739bc92199d">optimizer</a></td></tr>
<tr class="separator:a9533344de40049bf13209739bc92199d inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54d8632c546ab621c93c34f13c964726 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a54d8632c546ab621c93c34f13c964726">warmup_scheduler</a></td></tr>
<tr class="separator:a54d8632c546ab621c93c34f13c964726 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0affe6b199275c182a27c9aa07393347 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a0affe6b199275c182a27c9aa07393347">scheduler</a></td></tr>
<tr class="separator:a0affe6b199275c182a27c9aa07393347 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805a9e47552d54d56f5b232ab4d5121f inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a805a9e47552d54d56f5b232ab4d5121f">proj_rp</a></td></tr>
<tr class="separator:a805a9e47552d54d56f5b232ab4d5121f inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bc525b20568822a042b3bbfa3da3a69 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a4bc525b20568822a042b3bbfa3da3a69">observation</a></td></tr>
<tr class="separator:a4bc525b20568822a042b3bbfa3da3a69 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classparlai_1_1core_1_1agents_1_1Agent')"><img src="../../closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html">parlai.core.agents.Agent</a></td></tr>
<tr class="memitem:ac00c13f4c7dd1263bf9203fa96dd2366 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#ac00c13f4c7dd1263bf9203fa96dd2366">id</a></td></tr>
<tr class="separator:ac00c13f4c7dd1263bf9203fa96dd2366 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b45d2754244608c75d4068b90cd051 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#ab3b45d2754244608c75d4068b90cd051">opt</a></td></tr>
<tr class="separator:ab3b45d2754244608c75d4068b90cd051 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedbecc4b4aa7af7413882a0429e0f1db inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4b/classparlai_1_1core_1_1agents_1_1Agent.html#aedbecc4b4aa7af7413882a0429e0f1db">observation</a></td></tr>
<tr class="separator:aedbecc4b4aa7af7413882a0429e0f1db inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html">parlai.core.torch_agent.TorchAgent</a></td></tr>
<tr class="memitem:aea8849fa69a3f5dbd3216c8b06f180ea inherit pub_static_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#aea8849fa69a3f5dbd3216c8b06f180ea">dictionary_class</a> ()</td></tr>
<tr class="separator:aea8849fa69a3f5dbd3216c8b06f180ea inherit pub_static_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent')"><img src="../../closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html">parlai.core.torch_agent.TorchAgent</a></td></tr>
<tr class="memitem:a292c402279f706390ffed9a7af868abf inherit pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a292c402279f706390ffed9a7af868abf">P1_TOKEN</a></td></tr>
<tr class="separator:a292c402279f706390ffed9a7af868abf inherit pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81b5bf5acfa70764e3601c14a8afae85 inherit pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df5/classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a81b5bf5acfa70764e3601c14a8afae85">P2_TOKEN</a></td></tr>
<tr class="separator:a81b5bf5acfa70764e3601c14a8afae85 inherit pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Abstract Generator agent; only meant to be extended.

TorchGeneratorAgent aims to handle much of the bookkeeping and infrastructure work
for any generative models, like seq2seq or transformer. It implements the train_step
and eval_step. The only requirement is that your model *must* implemented the
interface TorchGeneratorModel interface.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00251">251</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a994ed6de4104aa3135deed2fcba75520"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a994ed6de4104aa3135deed2fcba75520">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00343">343</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keyword">def </span>__init__(self, opt: Opt, shared=<span class="keywordtype">None</span>):</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        init_model, is_finetune = self._get_init_model(opt, shared)</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        super().__init__(opt, shared)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        self.beam_size = opt.get(<span class="stringliteral">&#39;beam_size&#39;</span>, 1)</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        self.beam_min_length = opt.get(<span class="stringliteral">&#39;beam_min_length&#39;</span>, 1)</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        self.beam_block_ngram = opt.get(<span class="stringliteral">&#39;beam_block_ngram&#39;</span>, -1)</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        self.beam_context_block_ngram = opt.get(<span class="stringliteral">&#39;beam_context_block_ngram&#39;</span>, -1)</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        self.beam_context_block_ngram = opt.get(<span class="stringliteral">&#39;beam_context_block_ngram&#39;</span>, -1)</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        self.output_token_losses = opt.get(<span class="stringliteral">&#39;verbose&#39;</span>, <span class="keyword">False</span>)</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        self.compute_tokenized_bleu = opt.get(<span class="stringliteral">&#39;compute_tokenized_bleu&#39;</span>, <span class="keyword">False</span>)</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">if</span> shared:</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="comment"># set up shared properties</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            states = shared.get(<span class="stringliteral">&#39;states&#39;</span>, {})</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            self.fairseq_bleu_scorer = shared[<span class="stringliteral">&#39;fairseq_bleu_scorer&#39;</span>]</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            self.ntlk_bleu_scores = shared[<span class="stringliteral">&#39;nltk_bleu_scores&#39;</span>]</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="comment"># Note: we cannot change the type of metrics ahead of time, so you</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="comment"># should correctly initialize to floats or ints here</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            self.metrics[<span class="stringliteral">&#39;nll_loss&#39;</span>] = 0.0</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            self.metrics[<span class="stringliteral">&#39;loss&#39;</span>] = 0.0</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            self.metrics[<span class="stringliteral">&#39;correct_tokens&#39;</span>] = 0</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            self.metrics[<span class="stringliteral">&#39;total_skipped_batches&#39;</span>] = 0</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="comment"># this is not a shared instance of this class, so do full init</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            self.criterion = self.build_criterion()</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            self._init_and_reset_bleu_scorers()</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="comment"># ensure all distributed copies will always be in sync</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            self.model = self.build_model()</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">if</span> self.model <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> self.criterion <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <span class="keywordflow">raise</span> AttributeError(</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <span class="stringliteral">&#39;build_model() and build_criterion() need to return the model or criterion&#39;</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                )</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">if</span> self.use_cuda:</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                self.model.cuda()</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                self.criterion.cuda()</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <a class="code" href="../../dc/de8/namespaceparlai_1_1utils_1_1distributed.html#a47e6d93d849e487d7d3f6e1a83468073">sync_parameters</a>(self.model)</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            print(<span class="stringliteral">&quot;Total parameters: {}&quot;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(self._total_parameters()))</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            print(<span class="stringliteral">&quot;Trainable parameters:  {}&quot;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(self._trainable_parameters()))</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">if</span> self.fp16:</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                self.model = self.model.half()</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">if</span> init_model <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                <span class="comment"># load model parameters if available</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                print(<span class="stringliteral">&#39;[ Loading existing model params from {} ]&#39;</span> <span class="stringliteral">&#39;&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(init_model))</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                states = self.load(init_model)</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                states = {}</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span> (</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="comment"># only build an optimizer if we&#39;re training</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="stringliteral">&#39;train&#39;</span> <span class="keywordflow">in</span> opt.get(<span class="stringliteral">&#39;datatype&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="comment"># and this is the main model, or on every fork if doing hogwild</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">and</span> (shared <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> self.opt.get(<span class="stringliteral">&#39;numthreads&#39;</span>, 1) &gt; 1)</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        ):</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="comment"># do this regardless of share state, but don&#39;t</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            self.init_optim(</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                [p <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.model.parameters() <span class="keywordflow">if</span> p.requires_grad],</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                optim_states=states.get(<span class="stringliteral">&#39;optimizer&#39;</span>),</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                saved_optim_type=states.get(<span class="stringliteral">&#39;optimizer_type&#39;</span>),</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            )</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            self.build_lr_scheduler(states, hard_reset=is_finetune)</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">if</span> shared <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> <a class="code" href="../../dc/de8/namespaceparlai_1_1utils_1_1distributed.html#a023acb5e3b66e1f27e21247c35661279">is_distributed</a>():</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            self.model = torch.nn.parallel.DistributedDataParallel(</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                self.model, device_ids=[self.opt[<span class="stringliteral">&#39;gpu&#39;</span>]], broadcast_buffers=<span class="keyword">False</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            )</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        self.reset()</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1utils_1_1distributed_html_a023acb5e3b66e1f27e21247c35661279"><div class="ttname"><a href="../../dc/de8/namespaceparlai_1_1utils_1_1distributed.html#a023acb5e3b66e1f27e21247c35661279">parlai.utils.distributed.is_distributed</a></div><div class="ttdeci">def is_distributed()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d98/distributed_8py_source.html#l00055">distributed.py:55</a></div></div>
<div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
<div class="ttc" id="namespaceparlai_1_1utils_1_1distributed_html_a47e6d93d849e487d7d3f6e1a83468073"><div class="ttname"><a href="../../dc/de8/namespaceparlai_1_1utils_1_1distributed.html#a47e6d93d849e487d7d3f6e1a83468073">parlai.utils.distributed.sync_parameters</a></div><div class="ttdeci">def sync_parameters</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d98/distributed_8py_source.html#l00233">distributed.py:233</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad2e2f6361e46785d0b79e4c5031e5710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2e2f6361e46785d0b79e4c5031e5710">&#9670;&nbsp;</a></span>add_cmdline_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.add_cmdline_args </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>argparser</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add command line arguments.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00280">280</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keyword">def </span><a class="code" href="../../d3/d7d/namespaceparlai_1_1agents_1_1drqa_1_1config.html#a62fdd5554f1da6be0cba185271058320">add_cmdline_args</a>(cls, argparser):</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="stringliteral">        Add command line arguments.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        agent = argparser.add_argument_group(<span class="stringliteral">&#39;Torch Generator Agent&#39;</span>)</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="stringliteral">&#39;--beam-size&#39;</span>,</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            type=int,</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            default=1,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            help=<span class="stringliteral">&#39;Beam size, if 1 then greedy search&#39;</span>,</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        )</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="stringliteral">&#39;--beam-min-length&#39;</span>,</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            type=int,</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            default=1,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            help=<span class="stringliteral">&#39;Minimum length of prediction to be generated by the beam search&#39;</span>,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        )</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="stringliteral">&#39;--beam-context-block-ngram&#39;</span>,</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            type=int,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            default=-1,</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            help=(</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="stringliteral">&#39;Size n-grams to block in beam search from the context. val &lt;= 0 &#39;</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <span class="stringliteral">&#39;implies no blocking&#39;</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            ),</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        )</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="stringliteral">&#39;--beam-block-ngram&#39;</span>,</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            type=int,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            default=-1,</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            help=<span class="stringliteral">&#39;Size n-grams to block in beam search. val &lt;= 0 implies no blocking&#39;</span>,</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        )</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="stringliteral">&#39;--skip-generation&#39;</span>,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            type=<span class="stringliteral">&#39;bool&#39;</span>,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            default=<span class="keyword">False</span>,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            hidden=<span class="keyword">True</span>,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            help=<span class="stringliteral">&#39;Skip beam search. Useful for speeding up training, &#39;</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="stringliteral">&#39;if perplexity is the validation metric.&#39;</span>,</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        )</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="stringliteral">&#39;--inference&#39;</span>,</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            choices={<span class="stringliteral">&#39;beam&#39;</span>, <span class="stringliteral">&#39;greedy&#39;</span>, <span class="stringliteral">&#39;topk&#39;</span>, <span class="stringliteral">&#39;nucleus&#39;</span>},</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            default=<span class="stringliteral">&#39;greedy&#39;</span>,</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            help=<span class="stringliteral">&#39;Generation algorithm&#39;</span>,</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        )</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="stringliteral">&#39;--topk&#39;</span>, type=int, default=10, help=<span class="stringliteral">&#39;K used in Top K sampling&#39;</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        )</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="stringliteral">&#39;--topp&#39;</span>, type=float, default=0.9, help=<span class="stringliteral">&#39;p used in nucleus sampling&#39;</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        )</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        agent.add_argument(</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="stringliteral">&#39;--compute-tokenized-bleu&#39;</span>,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            type=<span class="stringliteral">&#39;bool&#39;</span>,</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            default=<span class="keyword">False</span>,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            help=<span class="stringliteral">&#39;if true, compute tokenized bleu scores&#39;</span>,</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        )</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        super(TorchGeneratorAgent, cls).<a class="code" href="../../d3/d7d/namespaceparlai_1_1agents_1_1drqa_1_1config.html#a62fdd5554f1da6be0cba185271058320">add_cmdline_args</a>(argparser)</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">return</span> agent</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1drqa_1_1config_html_a62fdd5554f1da6be0cba185271058320"><div class="ttname"><a href="../../d3/d7d/namespaceparlai_1_1agents_1_1drqa_1_1config.html#a62fdd5554f1da6be0cba185271058320">parlai.agents.drqa.config.add_cmdline_args</a></div><div class="ttdeci">def add_cmdline_args(parser)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/deb/config_8py_source.html#l00010">config.py:10</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f8437dd8d0dc44f941dbc6182121284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f8437dd8d0dc44f941dbc6182121284">&#9670;&nbsp;</a></span>build_criterion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.build_criterion </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Construct and return the loss function.

By default torch.nn.CrossEntropyLoss.

If overridden, this model should produce a sum that can be used for a per-token loss.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00419">419</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keyword">def </span>build_criterion(self):</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="stringliteral">        Construct and return the loss function.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="stringliteral">        By default torch.nn.CrossEntropyLoss.</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="stringliteral">        If overridden, this model should produce a sum that can be used for a per-token loss.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">return</span> torch.nn.CrossEntropyLoss(ignore_index=self.NULL_IDX, reduction=<span class="stringliteral">&#39;none&#39;</span>)</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a94808a13bba0d5283613acd98516bd3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94808a13bba0d5283613acd98516bd3c">&#9670;&nbsp;</a></span>compute_loss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.compute_loss </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>return_output</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute and return the loss for the given batch.

Easily overridable for customized loss functions.

If return_output is True, the full output from the call to self.model()
is also returned, via a (loss, model_output) pair.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00597">597</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keyword">def </span>compute_loss(self, batch, return_output=False):</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="stringliteral">        Compute and return the loss for the given batch.</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="stringliteral">        Easily overridable for customized loss functions.</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="stringliteral">        If return_output is True, the full output from the call to self.model()</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="stringliteral">        is also returned, via a (loss, model_output) pair.</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">if</span> batch.label_vec <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Cannot compute loss without a label.&#39;</span>)</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        model_output = self.model(*self._model_input(batch), ys=batch.label_vec)</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        scores, preds, *_ = model_output</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        score_view = scores.view(-1, scores.size(-1))</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        loss = self.criterion(score_view, batch.label_vec.view(-1)).sum()</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="comment"># save loss to metrics</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        notnull = batch.label_vec.ne(self.NULL_IDX)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        target_tokens = notnull.long().sum().item()</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        correct = ((batch.label_vec == preds) * notnull).sum().item()</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        self.metrics[<span class="stringliteral">&#39;correct_tokens&#39;</span>] += correct</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        self.metrics[<span class="stringliteral">&#39;nll_loss&#39;</span>] += loss.item()</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        self.metrics[<span class="stringliteral">&#39;num_tokens&#39;</span>] += target_tokens</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        loss /= target_tokens  <span class="comment"># average loss per token</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">if</span> return_output:</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <span class="keywordflow">return</span> (loss, model_output)</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="keywordflow">return</span> loss</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="ac584268dd08c6fcb0045aa968cad8561"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac584268dd08c6fcb0045aa968cad8561">&#9670;&nbsp;</a></span>eval_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.eval_step </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Evaluate a single batch of examples.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00743">743</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keyword">def </span>eval_step(self, batch):</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="stringliteral">        Evaluate a single batch of examples.</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">if</span> batch.text_vec <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> batch.image <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <span class="keywordflow">return</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">if</span> batch.text_vec <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            bsz = batch.text_vec.size(0)</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            bsz = len(batch.image)</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        self.model.eval()</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        cand_scores = <span class="keywordtype">None</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        token_losses = <span class="keywordtype">None</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">if</span> batch.label_vec <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <span class="comment"># calculate loss on targets with teacher forcing</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            loss, model_output = self.compute_loss(batch, return_output=<span class="keyword">True</span>)</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            self.metrics[<span class="stringliteral">&#39;loss&#39;</span>] += loss.item()</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <span class="keywordflow">if</span> self.output_token_losses:</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                token_losses = self._construct_token_losses(</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                    batch.label_vec, model_output</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                )</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        preds = <span class="keywordtype">None</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordflow">if</span> self.skip_generation:</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            <a class="code" href="../../d7/db6/namespaceparlai_1_1utils_1_1misc.html#a884a3aefa90581f53bc592fa6a78dc43">warn_once</a>(</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                <span class="stringliteral">&quot;--skip-generation does not produce accurate metrics beyond ppl&quot;</span>,</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                RuntimeWarning,</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            )</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            maxlen = self.label_truncate <span class="keywordflow">or</span> 256</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            beam_preds_scores, _ = self._generate(batch, self.beam_size, maxlen)</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            preds, scores = zip(*beam_preds_scores)</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        cand_choices = <span class="keywordtype">None</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="comment"># TODO: abstract out the scoring here</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">if</span> self.rank_candidates:</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="comment"># compute roughly ppl to rank candidates</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            cand_choices = []</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            encoder_states = self.model.encoder(*self._model_input(batch))</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(bsz):</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                num_cands = len(batch.candidate_vecs[i])</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                enc = self.model.reorder_encoder_states(encoder_states, [i] * num_cands)</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                cands, _ = <a class="code" href="../../d7/d87/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1.html#adb5a414ae439f14c54e8c760b91cc4c8">padded_tensor</a>(</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                    batch.candidate_vecs[i], self.NULL_IDX, self.use_cuda</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                )</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                scores, _ = self.model.decode_forced(enc, cands)</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                cand_losses = F.cross_entropy(</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                    scores.view(num_cands * cands.size(1), -1),</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                    cands.view(-1),</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                    reduction=<span class="stringliteral">&#39;none&#39;</span>,</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                ).view(num_cands, cands.size(1))</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                <span class="comment"># now cand_losses is cands x seqlen size, but we still need to</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                <span class="comment"># check padding and such</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                mask = (cands != self.NULL_IDX).<a class="code" href="../../d7/dc3/namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset.html#aa2b7207688c641dbc094ab44eca27113">float</a>()</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                cand_scores = (cand_losses * mask).sum(dim=1) / (mask.sum(dim=1) + 1e-9)</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                _, ordering = cand_scores.sort()</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                cand_choices.append([batch.candidates[i][o] <span class="keywordflow">for</span> o <span class="keywordflow">in</span> ordering])</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        text = [self._v2t(p) <span class="keywordflow">for</span> p <span class="keywordflow">in</span> preds] <span class="keywordflow">if</span> preds <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> <span class="keywordtype">None</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="keywordflow">if</span> text <span class="keywordflow">and</span> self.compute_tokenized_bleu:</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="comment"># compute additional bleu scores</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            self._compute_fairseq_bleu(batch, text)</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            self._compute_nltk_bleu(batch, text)</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../db/d30/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1.html#a2689006ea97d09413fb242f984bd8016">Output</a>(text, cand_choices, token_losses=token_losses)</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1utils_1_1misc_html_a884a3aefa90581f53bc592fa6a78dc43"><div class="ttname"><a href="../../d7/db6/namespaceparlai_1_1utils_1_1misc.html#a884a3aefa90581f53bc592fa6a78dc43">parlai.utils.misc.warn_once</a></div><div class="ttdeci">def warn_once</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/misc_8py_source.html#l00813">misc.py:813</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_html_adb5a414ae439f14c54e8c760b91cc4c8"><div class="ttname"><a href="../../d7/d87/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1.html#adb5a414ae439f14c54e8c760b91cc4c8">parlai.agents.legacy_agents.seq2seq.utils_v1.padded_tensor</a></div><div class="ttdeci">def padded_tensor(items, pad_idx=0, use_cuda=False, left_padded=False, max_len=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd4/utils__v1_8py_source.html#l00041">utils_v1.py:41</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_html_a2689006ea97d09413fb242f984bd8016"><div class="ttname"><a href="../../db/d30/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1.html#a2689006ea97d09413fb242f984bd8016">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.Output</a></div><div class="ttdeci">Output</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddc/torch__agent__v1_8py_source.html#l00107">torch_agent_v1.py:107</a></div></div>
<div class="ttc" id="namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset_html_aa2b7207688c641dbc094ab44eca27113"><div class="ttname"><a href="../../d7/dc3/namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset.html#aa2b7207688c641dbc094ab44eca27113">projects.controllable_dialogue.make_control_dataset.float</a></div><div class="ttdeci">float</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/make__control__dataset_8py_source.html#l00117">make_control_dataset.py:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ed32722f939a8afd258830b7093fc18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ed32722f939a8afd258830b7093fc18">&#9670;&nbsp;</a></span>report()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.report </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Report loss and perplexity from model's perspective.

Note that this includes predicting __END__ and __UNK__ tokens and may differ
from a truly independent measurement.

Additionally report tokenized bleu scores, if desired.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00526">526</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keyword">def </span><a class="code" href="../../db/d1c/namespaceprojects_1_1convai2_1_1eval__f1.html#a01a47b9c08dad189837a51f085defc45">report</a>(self):</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="stringliteral">        Report loss and perplexity from model&#39;s perspective.</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="stringliteral">        Note that this includes predicting __END__ and __UNK__ tokens and may differ</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="stringliteral">        from a truly independent measurement.</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="stringliteral">        Additionally report tokenized bleu scores, if desired.</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        base = super().<a class="code" href="../../db/d1c/namespaceprojects_1_1convai2_1_1eval__f1.html#a01a47b9c08dad189837a51f085defc45">report</a>()</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        m = {}</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        num_tok = self.metrics[<span class="stringliteral">&#39;num_tokens&#39;</span>]</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">if</span> num_tok &gt; 0:</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            m[<span class="stringliteral">&#39;loss&#39;</span>] = self.metrics[<span class="stringliteral">&#39;loss&#39;</span>]</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="keywordflow">if</span> self.metrics[<span class="stringliteral">&#39;correct_tokens&#39;</span>] &gt; 0:</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                m[<span class="stringliteral">&#39;token_acc&#39;</span>] = self.metrics[<span class="stringliteral">&#39;correct_tokens&#39;</span>] / num_tok</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            m[<span class="stringliteral">&#39;nll_loss&#39;</span>] = self.metrics[<span class="stringliteral">&#39;nll_loss&#39;</span>] / num_tok</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                m[<span class="stringliteral">&#39;ppl&#39;</span>] = math.exp(m[<span class="stringliteral">&#39;nll_loss&#39;</span>])</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keywordflow">except</span> OverflowError:</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                m[<span class="stringliteral">&#39;ppl&#39;</span>] = <a class="code" href="../../d7/dc3/namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset.html#aa2b7207688c641dbc094ab44eca27113">float</a>(<span class="stringliteral">&#39;inf&#39;</span>)</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">if</span> self.metrics[<span class="stringliteral">&#39;total_skipped_batches&#39;</span>] &gt; 0:</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            m[<span class="stringliteral">&#39;total_skipped_batches&#39;</span>] = self.metrics[<span class="stringliteral">&#39;total_skipped_batches&#39;</span>]</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> m.items():</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="comment"># clean up: rounds to sigfigs and converts tensors to floats</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            base[k] = <a class="code" href="../../d5/dbb/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0.html#af377ec61bfc0423461e7b409ffc883b9">round_sigfigs</a>(v, 4)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.skip_generation <span class="keywordflow">and</span> self.compute_tokenized_bleu:</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            base.update({<span class="stringliteral">&#39;fairseq_bleu&#39;</span>: <span class="stringliteral">&#39;N/A&#39;</span>, <span class="stringliteral">&#39;nltk_bleu_unnormalized&#39;</span>: <span class="stringliteral">&#39;N/A&#39;</span>})</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="keywordflow">if</span> fairseq_bleu <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                <span class="keywordflow">try</span>:</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                    fairseq_bleu_scores = {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                        k: self.fairseq_bleu_scorer.result_string(order=k)</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> range(1, 5)</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                    }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keywordflow">except</span> ZeroDivisionError:</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                    <span class="comment"># some preds are REAL bad</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    fairseq_bleu_scores = {k: <span class="stringliteral">&#39;= 0,&#39;</span> <span class="keywordflow">for</span> k <span class="keywordflow">in</span> range(1, 5)}</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                base[<span class="stringliteral">&#39;fairseq_bleu&#39;</span>] = {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                    k: <a class="code" href="../../d7/dc3/namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset.html#aa2b7207688c641dbc094ab44eca27113">float</a>(v[v.index(<span class="stringliteral">&#39;= &#39;</span>) + 2 : v.index(<span class="stringliteral">&#39;,&#39;</span>)])</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> fairseq_bleu_scores.items()</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="keywordflow">if</span> nltkbleu <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                base[<span class="stringliteral">&#39;nltk_bleu_unnormalized&#39;</span>] = {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                    k: <a class="code" href="../../d5/dbb/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0.html#af377ec61bfc0423461e7b409ffc883b9">round_sigfigs</a>(v[<span class="stringliteral">&#39;score&#39;</span>] / v[<span class="stringliteral">&#39;cnt&#39;</span>], 4)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> self.nltk_bleu_scores.items()</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">return</span> base</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="ttc" id="namespaceprojects_1_1convai2_1_1eval__f1_html_a01a47b9c08dad189837a51f085defc45"><div class="ttname"><a href="../../db/d1c/namespaceprojects_1_1convai2_1_1eval__f1.html#a01a47b9c08dad189837a51f085defc45">projects.convai2.eval_f1.report</a></div><div class="ttdeci">report</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d61/convai2_2eval__f1_8py_source.html#l00039">eval_f1.py:39</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_html_af377ec61bfc0423461e7b409ffc883b9"><div class="ttname"><a href="../../d5/dbb/namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0.html#af377ec61bfc0423461e7b409ffc883b9">parlai.agents.legacy_agents.seq2seq.utils_v0.round_sigfigs</a></div><div class="ttdeci">def round_sigfigs(x, sigfigs=4)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd3/utils__v0_8py_source.html#l00396">utils_v0.py:396</a></div></div>
<div class="ttc" id="namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset_html_aa2b7207688c641dbc094ab44eca27113"><div class="ttname"><a href="../../d7/dc3/namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset.html#aa2b7207688c641dbc094ab44eca27113">projects.controllable_dialogue.make_control_dataset.float</a></div><div class="ttdeci">float</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/make__control__dataset_8py_source.html#l00117">make_control_dataset.py:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7cac9c087d7357d32a7c3bc8fa74930c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cac9c087d7357d32a7c3bc8fa74930c">&#9670;&nbsp;</a></span>reset_metrics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.reset_metrics </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Reset metrics for reporting loss and perplexity.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00500">500</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">def </span>reset_metrics(self):</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="stringliteral">        Reset metrics for reporting loss and perplexity.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        super().reset_metrics()</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="comment"># Note: we cannot change the type of metrics ahead of time, so you</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="comment"># should correctly initialize to floats or ints here</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        self.metrics[<span class="stringliteral">&#39;loss&#39;</span>] = 0.0</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        self.metrics[<span class="stringliteral">&#39;nll_loss&#39;</span>] = 0.0</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        self.metrics[<span class="stringliteral">&#39;num_tokens&#39;</span>] = 0</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        self.metrics[<span class="stringliteral">&#39;correct_tokens&#39;</span>] = 0</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        self._init_and_reset_bleu_scorers()</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a8a3c13d2b8988d2a0cbb71f44ae81f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a3c13d2b8988d2a0cbb71f44ae81f52">&#9670;&nbsp;</a></span>set_interactive_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.set_interactive_mode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shared</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Turn on interactive mode.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00443">443</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keyword">def </span>set_interactive_mode(self, mode, shared=False):</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="stringliteral">        Turn on interactive mode.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        super().set_interactive_mode(mode, shared)</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">if</span> mode:</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            self.skip_generation = <span class="keyword">False</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            self.skip_generation = self.opt.get(<span class="stringliteral">&#39;skip_generation&#39;</span>, <span class="keyword">False</span>)</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="ad10e64dd33f1add04ba5bcf36b86c2bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad10e64dd33f1add04ba5bcf36b86c2bf">&#9670;&nbsp;</a></span>share()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.share </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Share internal states between parent and child instances.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00513">513</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keyword">def </span>share(self):</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="stringliteral">        Share internal states between parent and child instances.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        shared = super().share()</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">if</span> self.opt.get(<span class="stringliteral">&#39;numthreads&#39;</span>, 1) &gt; 1:</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            shared[<span class="stringliteral">&#39;states&#39;</span>] = {  <span class="comment"># don&#39;t share optimizer states</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <span class="stringliteral">&#39;optimizer_type&#39;</span>: self.opt[<span class="stringliteral">&#39;optimizer&#39;</span>]</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        shared[<span class="stringliteral">&#39;fairseq_bleu_scorer&#39;</span>] = self.fairseq_bleu_scorer</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        shared[<span class="stringliteral">&#39;nltk_bleu_scores&#39;</span>] = self.nltk_bleu_scores</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">return</span> shared</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="afe2226ddfc838ec27580e3499cc0bae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe2226ddfc838ec27580e3499cc0bae7">&#9670;&nbsp;</a></span>train_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.train_step </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Train on a single batch of examples.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00625">625</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keyword">def </span>train_step(self, batch):</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="stringliteral">        Train on a single batch of examples.</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">if</span> batch.text_vec <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            batchsize = batch.text_vec.size(0)</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">elif</span> batch.image <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            batchsize = len(batch.image)</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="comment"># helps with memory usage</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        self._init_cuda_buffer(batchsize, self.truncate <span class="keywordflow">or</span> 256)</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        self.model.<a class="code" href="../../d2/d65/namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run.html#a36a5f4f6f9df0611a6818610518d2cf0">train</a>()</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        self.zero_grad()</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            loss = self.compute_loss(batch)</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            self.metrics[<span class="stringliteral">&#39;loss&#39;</span>] += loss.item()</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            self.backward(loss)</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            self.update_params()</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">except</span> RuntimeError <span class="keyword">as</span> e:</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="comment"># catch out of memory exceptions during fwd/bck (skip batch)</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="keywordflow">if</span> <span class="stringliteral">&#39;out of memory&#39;</span> <span class="keywordflow">in</span> <a class="code" href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">str</a>(e):</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                print(</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    <span class="stringliteral">&#39;| WARNING: ran out of memory, skipping batch. &#39;</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                    <span class="stringliteral">&#39;if this happens frequently, decrease batchsize or &#39;</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                    <span class="stringliteral">&#39;truncate the inputs to the model.&#39;</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                )</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                self.metrics[<span class="stringliteral">&#39;total_skipped_batches&#39;</span>] += 1</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                <span class="comment"># gradients are synced on backward, now this model is going to be</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                <span class="comment"># out of sync! catch up with the other workers</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                self._init_cuda_buffer(8, 8, <span class="keyword">True</span>)</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                <span class="keywordflow">raise</span> e</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="ttc" id="namespacegenerate__task__READMEs_html_a5b88452ffb87b78c8c85ececebafc09f"><div class="ttname"><a href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">generate_task_READMEs.str</a></div><div class="ttdeci">string str</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d04/generate__task__READMEs_8py_source.html#l00023">generate_task_READMEs.py:23</a></div></div>
<div class="ttc" id="namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_html_a36a5f4f6f9df0611a6818610518d2cf0"><div class="ttname"><a href="../../d2/d65/namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run.html#a36a5f4f6f9df0611a6818610518d2cf0">projects.mastering_the_dungeon.mturk.tasks.MTD.run.train</a></div><div class="ttdeci">def train(opt, round_index, machine_index, file_index, train_data, valid_data, valid_weights=None, save_all=True, return_acc_len=False, seq2seq=False)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/projects_2mastering__the__dungeon_2mturk_2tasks_2MTD_2run_8py_source.html#l00182">run.py:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b840de6769acee3aac913d25c448a1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b840de6769acee3aac913d25c448a1d">&#9670;&nbsp;</a></span>upgrade_opt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.upgrade_opt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opt_from_disk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00262">262</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keyword">def </span>upgrade_opt(cls, opt_from_disk: Opt):</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment"># call the parent upgrades</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        opt_from_disk = super(TorchGeneratorAgent, cls).upgrade_opt(opt_from_disk)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment"># 2019-08-18: Adding support for generation other than beam search</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="comment"># Previously, selecting --beam-size &gt; 1 enabled beam search and == 1 was</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="comment"># greedy. New behavior is --inference greedy or --inference beam.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;inference&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> opt_from_disk:</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keyword">assert</span> <span class="stringliteral">&#39;beam_size&#39;</span> <span class="keywordflow">in</span> opt_from_disk</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">if</span> opt_from_disk[<span class="stringliteral">&#39;beam_size&#39;</span>] == 1:</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                method = <span class="stringliteral">&#39;greedy&#39;</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                method = <span class="stringliteral">&#39;beam&#39;</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            opt_from_disk[<span class="stringliteral">&#39;inference&#39;</span>] = method</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <a class="code" href="../../d7/db6/namespaceparlai_1_1utils_1_1misc.html#a884a3aefa90581f53bc592fa6a78dc43">warn_once</a>(f<span class="stringliteral">&#39;Old model inference method inferred as {method}&#39;</span>)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">return</span> opt_from_disk</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1utils_1_1misc_html_a884a3aefa90581f53bc592fa6a78dc43"><div class="ttname"><a href="../../d7/db6/namespaceparlai_1_1utils_1_1misc.html#a884a3aefa90581f53bc592fa6a78dc43">parlai.utils.misc.warn_once</a></div><div class="ttdeci">def warn_once</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/misc_8py_source.html#l00813">misc.py:813</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a66f36d7201bc1b9a019d3525a5934cf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f36d7201bc1b9a019d3525a5934cf7">&#9670;&nbsp;</a></span>vectorize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TorchGeneratorAgent.vectorize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Override vectorize for generative models.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00575">575</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keyword">def </span><a class="code" href="../../d6/d5b/namespaceparlai_1_1agents_1_1drqa_1_1utils.html#a5c76cc39e3014c7bcf9199d566dbdc0f">vectorize</a>(self, *args, **kwargs):</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="stringliteral">        Override vectorize for generative models.</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        kwargs[<span class="stringliteral">&#39;add_start&#39;</span>] = <span class="keyword">False</span>  <span class="comment"># model does this in module code</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        kwargs[<span class="stringliteral">&#39;add_end&#39;</span>] = <span class="keyword">True</span>  <span class="comment"># we do want this</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">return</span> super().<a class="code" href="../../d6/d5b/namespaceparlai_1_1agents_1_1drqa_1_1utils.html#a5c76cc39e3014c7bcf9199d566dbdc0f">vectorize</a>(*args, **kwargs)</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1drqa_1_1utils_html_a5c76cc39e3014c7bcf9199d566dbdc0f"><div class="ttname"><a href="../../d6/d5b/namespaceparlai_1_1agents_1_1drqa_1_1utils.html#a5c76cc39e3014c7bcf9199d566dbdc0f">parlai.agents.drqa.utils.vectorize</a></div><div class="ttdeci">def vectorize(opt, ex, word_dict, feature_dict)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d52/parlai_2agents_2drqa_2utils_8py_source.html#l00070">utils.py:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a64484ea8971fc2a665e99f99a60f0653"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64484ea8971fc2a665e99f99a60f0653">&#9670;&nbsp;</a></span>beam_block_ngram</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.beam_block_ngram</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00349">349</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a7991351ff26caf7c59e24fe2e36bf6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7991351ff26caf7c59e24fe2e36bf6ea">&#9670;&nbsp;</a></span>beam_context_block_ngram</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.beam_context_block_ngram</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00350">350</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a63f7f11d4917e843498e95dc87e30eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f7f11d4917e843498e95dc87e30eb1">&#9670;&nbsp;</a></span>beam_min_length</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.beam_min_length</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00348">348</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="acf02a68b75948cf5bafb24be48813127"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf02a68b75948cf5bafb24be48813127">&#9670;&nbsp;</a></span>beam_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.beam_size</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00347">347</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a427057bbe1b2182e5bbd476b7739de31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a427057bbe1b2182e5bbd476b7739de31">&#9670;&nbsp;</a></span>buffer_initialized</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.buffer_initialized</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00476">476</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="ad44b60dfb7bc5576ff108ed5a1d1c227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad44b60dfb7bc5576ff108ed5a1d1c227">&#9670;&nbsp;</a></span>compute_tokenized_bleu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.compute_tokenized_bleu</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00355">355</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="aa6f478c963651331f919fc0ebd44bac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6f478c963651331f919fc0ebd44bac3">&#9670;&nbsp;</a></span>criterion</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.criterion</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00371">371</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a8dedd6cbd8e87332284d6ef993d02eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dedd6cbd8e87332284d6ef993d02eea">&#9670;&nbsp;</a></span>fairseq_bleu_scorer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.fairseq_bleu_scorer</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00360">360</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a3b661c0eb6f3e65f061908142819bdc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b661c0eb6f3e65f061908142819bdc2">&#9670;&nbsp;</a></span>model</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.model</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00374">374</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a56e1c7094c455837b9f8976d314d10f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56e1c7094c455837b9f8976d314d10f4">&#9670;&nbsp;</a></span>nltk_bleu_scores</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.nltk_bleu_scores</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00496">496</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a20d87620f983b47787280389465ec61e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20d87620f983b47787280389465ec61e">&#9670;&nbsp;</a></span>ntlk_bleu_scores</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.ntlk_bleu_scores</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00361">361</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="ab6ff17d050234854c4ce34fbff73bf79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6ff17d050234854c4ce34fbff73bf79">&#9670;&nbsp;</a></span>output_token_losses</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.output_token_losses</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00354">354</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a713b4b7ae6d30a664c97c4ea121f8e38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a713b4b7ae6d30a664c97c4ea121f8e38">&#9670;&nbsp;</a></span>skip_generation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TorchGeneratorAgent.skip_generation</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00449">449</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>parlai/core/<a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
