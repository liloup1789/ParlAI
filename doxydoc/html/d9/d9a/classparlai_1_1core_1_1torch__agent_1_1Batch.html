<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParlAI: parlai.core.torch_agent.Batch Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ParlAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d5/d22/namespaceparlai.html">parlai</a></li><li class="navelem"><a class="el" href="../../d1/d43/namespaceparlai_1_1core.html">core</a></li><li class="navelem"><a class="el" href="../../d3/d36/namespaceparlai_1_1core_1_1torch__agent.html">torch_agent</a></li><li class="navelem"><a class="el" href="../../d9/d9a/classparlai_1_1core_1_1torch__agent_1_1Batch.html">Batch</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../da/da0/classparlai_1_1core_1_1torch__agent_1_1Batch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">parlai.core.torch_agent.Batch Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for parlai.core.torch_agent.Batch:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d3c/classparlai_1_1core_1_1torch__agent_1_1Batch__inherit__graph.png" border="0" usemap="#parlai_8core_8torch__agent_8Batch_inherit__map" alt="Inheritance graph"/></div>
<map name="parlai_8core_8torch__agent_8Batch_inherit__map" id="parlai_8core_8torch__agent_8Batch_inherit__map">
<area shape="rect" id="node2" href="../../dd/d04/classparlai_1_1utils_1_1misc_1_1AttrDict.html" title="parlai.utils.misc.AttrDict" alt="" coords="5,80,168,107"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for parlai.core.torch_agent.Batch:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d77/classparlai_1_1core_1_1torch__agent_1_1Batch__coll__graph.png" border="0" usemap="#parlai_8core_8torch__agent_8Batch_coll__map" alt="Collaboration graph"/></div>
<map name="parlai_8core_8torch__agent_8Batch_coll__map" id="parlai_8core_8torch__agent_8Batch_coll__map">
<area shape="rect" id="node2" href="../../dd/d04/classparlai_1_1utils_1_1misc_1_1AttrDict.html" title="parlai.utils.misc.AttrDict" alt="" coords="5,80,168,107"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6ef9b406e741e455da515aa8f84c798e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9a/classparlai_1_1core_1_1torch__agent_1_1Batch.html#a6ef9b406e741e455da515aa8f84c798e">__init__</a> (self, text_vec=None, text_lengths=None, label_vec=None, label_lengths=None, labels=None, valid_indices=None, candidates=None, candidate_vecs=None, image=None, observations=None, kwargs)</td></tr>
<tr class="separator:a6ef9b406e741e455da515aa8f84c798e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classparlai_1_1utils_1_1misc_1_1AttrDict"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classparlai_1_1utils_1_1misc_1_1AttrDict')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../dd/d04/classparlai_1_1utils_1_1misc_1_1AttrDict.html">parlai.utils.misc.AttrDict</a></td></tr>
<tr class="memitem:a8a0ed33202adee184fc7ec06cf89a7ba inherit pub_methods_classparlai_1_1utils_1_1misc_1_1AttrDict"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d04/classparlai_1_1utils_1_1misc_1_1AttrDict.html#a8a0ed33202adee184fc7ec06cf89a7ba">__init__</a> (self, args, kwargs)</td></tr>
<tr class="separator:a8a0ed33202adee184fc7ec06cf89a7ba inherit pub_methods_classparlai_1_1utils_1_1misc_1_1AttrDict"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Batch is a namedtuple containing data being sent to an agent.

This is the input type of the train_step and eval_step functions.
Agents can override the batchify function to return an extended namedtuple
with additional fields if they would like, though we recommend calling the
parent function to set up these fields as a base.

:param text_vec:
    bsz x seqlen tensor containing the parsed text data.

:param text_lengths:
    list of length bsz containing the lengths of the text in same order as
    text_vec; necessary for pack_padded_sequence.

:param label_vec:
    bsz x seqlen tensor containing the parsed label (one per batch row).

:param label_lengths:
    list of length bsz containing the lengths of the labels in same order as
    label_vec.

:param labels:
    list of length bsz containing the selected label for each batch row (some
    datasets have multiple labels per input example).

:param valid_indices:
    list of length bsz containing the original indices of each example in the
    batch. we use these to map predictions back to their proper row, since e.g.
    we may sort examples by their length or some examples may be invalid.

:param candidates:
    list of lists of text. outer list has size bsz, inner lists vary in size
    based on the number of candidates for each row in the batch.

:param candidate_vecs:
    list of lists of tensors. outer list has size bsz, inner lists vary in size
    based on the number of candidates for each row in the batch.

:param image:
    list of image features in the format specified by the --image-mode arg.

:param observations:
    the original observations in the batched order
</pre> 
<p class="definition">Definition at line <a class="el" href="../../dd/d9b/torch__agent_8py_source.html#l00047">47</a> of file <a class="el" href="../../dd/d9b/torch__agent_8py_source.html">torch_agent.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6ef9b406e741e455da515aa8f84c798e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ef9b406e741e455da515aa8f84c798e">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_agent.Batch.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text_vec</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text_lengths</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>label_vec</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>label_lengths</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>valid_indices</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>candidates</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>candidate_vecs</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>observations</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d9b/torch__agent_8py_source.html#l00107">107</a> of file <a class="el" href="../../dd/d9b/torch__agent_8py_source.html">torch_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    ):</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        super().__init__(</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            text_vec=text_vec,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            text_lengths=text_lengths,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            label_vec=label_vec,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            label_lengths=label_lengths,</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            labels=labels,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            valid_indices=valid_indices,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            candidates=candidates,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            candidate_vecs=candidate_vecs,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            image=image,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            observations=observations,</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            **kwargs,</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        )</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>parlai/core/<a class="el" href="../../dd/d9b/torch__agent_8py_source.html">torch_agent.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
