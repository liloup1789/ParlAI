<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParlAI: parlai.chat_service.services.messenger.messenger_manager.MessengerManager Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ParlAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d5/d22/namespaceparlai.html">parlai</a></li><li class="navelem"><a class="el" href="../../d3/d54/namespaceparlai_1_1chat__service.html">chat_service</a></li><li class="navelem"><a class="el" href="../../d1/d60/namespaceparlai_1_1chat__service_1_1services.html">services</a></li><li class="navelem"><a class="el" href="../../d7/da4/namespaceparlai_1_1chat__service_1_1services_1_1messenger.html">messenger</a></li><li class="navelem"><a class="el" href="../../d6/dbb/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager.html">messenger_manager</a></li><li class="navelem"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html">MessengerManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d8/d3b/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">parlai.chat_service.services.messenger.messenger_manager.MessengerManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7a9b4068fc428aebd90c38bbe745e45e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a7a9b4068fc428aebd90c38bbe745e45e">__init__</a> (self, <a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a3800447e24df6857bcbdbddf068a8001">opt</a>)</td></tr>
<tr class="separator:a7a9b4068fc428aebd90c38bbe745e45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad67c90bbf632d7bd4e6c6109c89d7c14"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ad67c90bbf632d7bd4e6c6109c89d7c14">add_agent_to_pool</a> (self, agent, world_type='default')</td></tr>
<tr class="separator:ad67c90bbf632d7bd4e6c6109c89d7c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a305c58cba4b22f99274b81a9253a4ca9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a305c58cba4b22f99274b81a9253a4ca9">mark_removed</a> (self, agent_id, pageid)</td></tr>
<tr class="separator:a305c58cba4b22f99274b81a9253a4ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad896b8db2d47d53b82ab052613e58845"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ad896b8db2d47d53b82ab052613e58845">remove_agent_from_pool</a> (self, agent, world_type='default', <a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a305c58cba4b22f99274b81a9253a4ca9">mark_removed</a>=True)</td></tr>
<tr class="separator:ad896b8db2d47d53b82ab052613e58845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade5e639c76e2c48815c079d515ecaf9b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ade5e639c76e2c48815c079d515ecaf9b">after_agent_removed</a> (self, agent_id)</td></tr>
<tr class="separator:ade5e639c76e2c48815c079d515ecaf9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53e1895f0a4ce74663bddb8f6c840aa7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a53e1895f0a4ce74663bddb8f6c840aa7">get_agent_state</a> (self, agent_id)</td></tr>
<tr class="separator:a53e1895f0a4ce74663bddb8f6c840aa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb6559f9e8cca74e2ac94d443f36f9d2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#adb6559f9e8cca74e2ac94d443f36f9d2">setup_server</a> (self)</td></tr>
<tr class="separator:adb6559f9e8cca74e2ac94d443f36f9d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fa4fe590efa528624a0965dbb995683"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a0fa4fe590efa528624a0965dbb995683">get_app_token</a> (self)</td></tr>
<tr class="separator:a0fa4fe590efa528624a0965dbb995683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3762b7362346cdaaf1d1ad0d6372166"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#aa3762b7362346cdaaf1d1ad0d6372166">setup_socket</a> (self)</td></tr>
<tr class="separator:aa3762b7362346cdaaf1d1ad0d6372166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a172def2db5fc015d16f37baca685267c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a172def2db5fc015d16f37baca685267c">init_new_state</a> (self)</td></tr>
<tr class="separator:a172def2db5fc015d16f37baca685267c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76e86a89a5cbcdf013023f06b119039e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a76e86a89a5cbcdf013023f06b119039e">start_new_run</a> (self)</td></tr>
<tr class="separator:a76e86a89a5cbcdf013023f06b119039e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace19c32e618503b0b750f3e0a5641f4d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ace19c32e618503b0b750f3e0a5641f4d">check_timeout_in_pool</a> (self, world_type, <a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#aa8ec05fd465ab10f6516922b9e4e27ca">agent_pool</a>, max_time_in_pool, backup_task=None)</td></tr>
<tr class="separator:ace19c32e618503b0b750f3e0a5641f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd1cf187d6a26e57b22e11800734734"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a6bd1cf187d6a26e57b22e11800734734">start_task</a> (self)</td></tr>
<tr class="separator:a6bd1cf187d6a26e57b22e11800734734"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6879d8a8fd1f897cf3dba904a11c4c0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ab6879d8a8fd1f897cf3dba904a11c4c0">shutdown</a> (self)</td></tr>
<tr class="separator:ab6879d8a8fd1f897cf3dba904a11c4c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab951bfae1eeb05f42e9fa215b2d019a7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ab951bfae1eeb05f42e9fa215b2d019a7">observe_message</a> (self, receiver_id, text, quick_replies=None, persona_id=None)</td></tr>
<tr class="separator:ab951bfae1eeb05f42e9fa215b2d019a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad969bb72a7095bde4f48be0a403e9471"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ad969bb72a7095bde4f48be0a403e9471">observe_payload</a> (self, receiver_id, data, quick_replies=None, persona_id=None)</td></tr>
<tr class="separator:ad969bb72a7095bde4f48be0a403e9471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64b1a7241aecdca1d321efa92134ff96"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a64b1a7241aecdca1d321efa92134ff96">upload_attachment</a> (self, payload)</td></tr>
<tr class="separator:a64b1a7241aecdca1d321efa92134ff96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3800447e24df6857bcbdbddf068a8001"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a3800447e24df6857bcbdbddf068a8001">opt</a></td></tr>
<tr class="separator:a3800447e24df6857bcbdbddf068a8001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70e95421663ad81807980f3461d4b380"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a70e95421663ad81807980f3461d4b380">server_url</a></td></tr>
<tr class="separator:a70e95421663ad81807980f3461d4b380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01f53f843ca041d2033121ef74e0b266"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a01f53f843ca041d2033121ef74e0b266">port</a></td></tr>
<tr class="separator:a01f53f843ca041d2033121ef74e0b266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d6fbc03656166447b54c37017e8a36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a43d6fbc03656166447b54c37017e8a36">agent_pool_change_condition</a></td></tr>
<tr class="separator:a43d6fbc03656166447b54c37017e8a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82126e4a66c02afffc55fd8126f1acc9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a82126e4a66c02afffc55fd8126f1acc9">active_worlds</a></td></tr>
<tr class="separator:a82126e4a66c02afffc55fd8126f1acc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51d9146cf312c860fec57b0ee885e62f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a51d9146cf312c860fec57b0ee885e62f">message_socket</a></td></tr>
<tr class="separator:a51d9146cf312c860fec57b0ee885e62f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10c5e3c603613761b40b3cb122eac730"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a10c5e3c603613761b40b3cb122eac730">message_sender</a></td></tr>
<tr class="separator:a10c5e3c603613761b40b3cb122eac730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa01d925e8811f90031cf8b33a9e6480d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#aa01d925e8811f90031cf8b33a9e6480d">running</a></td></tr>
<tr class="separator:aa01d925e8811f90031cf8b33a9e6480d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2a115bc0c64a9ddc740b9a7637ce954"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ac2a115bc0c64a9ddc740b9a7637ce954">conversation_index</a></td></tr>
<tr class="separator:ac2a115bc0c64a9ddc740b9a7637ce954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a303071bd6737c2770ed156c4242c47"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a8a303071bd6737c2770ed156c4242c47">shutting_down</a></td></tr>
<tr class="separator:a8a303071bd6737c2770ed156c4242c47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55fd652429058668a8290d89d2e1866f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a55fd652429058668a8290d89d2e1866f">bypass_server_setup</a></td></tr>
<tr class="separator:a55fd652429058668a8290d89d2e1866f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33ac779cd2701984bd31ba5ce32374a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a33ac779cd2701984bd31ba5ce32374a9">confirm_message_delivery</a></td></tr>
<tr class="separator:a33ac779cd2701984bd31ba5ce32374a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ebe80b2fe5f933e8d2dd8c98e2d025d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a4ebe80b2fe5f933e8d2dd8c98e2d025d">handle_message_read</a></td></tr>
<tr class="separator:a4ebe80b2fe5f933e8d2dd8c98e2d025d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a742006839000bce2c6ec6bbccd8262f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a742006839000bce2c6ec6bbccd8262f8">handle_bot_read</a></td></tr>
<tr class="separator:a742006839000bce2c6ec6bbccd8262f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a758ca43c22a9efc4508e2d22bcc994f3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a758ca43c22a9efc4508e2d22bcc994f3">config</a></td></tr>
<tr class="separator:a758ca43c22a9efc4508e2d22bcc994f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07127740a04f3473d4d791fd66c6bac5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a07127740a04f3473d4d791fd66c6bac5">overworld</a></td></tr>
<tr class="separator:a07127740a04f3473d4d791fd66c6bac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4083e1b0322a96cb112ce6940d96e51f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a4083e1b0322a96cb112ce6940d96e51f">world_path</a></td></tr>
<tr class="separator:a4083e1b0322a96cb112ce6940d96e51f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a692523fc7dfa4ba3fbb0de988ab0a2fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a692523fc7dfa4ba3fbb0de988ab0a2fd">world_module</a></td></tr>
<tr class="separator:a692523fc7dfa4ba3fbb0de988ab0a2fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa38a212a96bfe00accbbc474c9693ac0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#aa38a212a96bfe00accbbc474c9693ac0">page_id</a></td></tr>
<tr class="separator:aa38a212a96bfe00accbbc474c9693ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab295a8d4f3020633dc4139426b37d1d8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ab295a8d4f3020633dc4139426b37d1d8">task_configs</a></td></tr>
<tr class="separator:ab295a8d4f3020633dc4139426b37d1d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31fe2a92a0c3f3b073488fec70fb85e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a31fe2a92a0c3f3b073488fec70fb85e2">max_workers</a></td></tr>
<tr class="separator:a31fe2a92a0c3f3b073488fec70fb85e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84d004dff84ef9fc543beb2a531ab33f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a84d004dff84ef9fc543beb2a531ab33f">runner_opt</a></td></tr>
<tr class="separator:a84d004dff84ef9fc543beb2a531ab33f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcf0cf9b7d579e7528da833345375750"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#adcf0cf9b7d579e7528da833345375750">world_runner</a></td></tr>
<tr class="separator:adcf0cf9b7d579e7528da833345375750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada5b6cdc7866ba3f87cc0742a95547c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ada5b6cdc7866ba3f87cc0742a95547c6">max_agents_for</a></td></tr>
<tr class="separator:ada5b6cdc7866ba3f87cc0742a95547c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bacca1a1993c53c37c463b18d7032d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a8bacca1a1993c53c37c463b18d7032d1">onboard_map</a></td></tr>
<tr class="separator:a8bacca1a1993c53c37c463b18d7032d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfc4cbe88bedd5145fe9a77b7776c4b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#acfc4cbe88bedd5145fe9a77b7776c4b7">taskworld_map</a></td></tr>
<tr class="separator:acfc4cbe88bedd5145fe9a77b7776c4b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cef66a59364fa94ea8ff77a311ecf63"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a7cef66a59364fa94ea8ff77a311ecf63">server_task_name</a></td></tr>
<tr class="separator:a7cef66a59364fa94ea8ff77a311ecf63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa52ef2280a697896f4d3b5bdb322e553"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#aa52ef2280a697896f4d3b5bdb322e553">app_token</a></td></tr>
<tr class="separator:aa52ef2280a697896f4d3b5bdb322e553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8ec05fd465ab10f6516922b9e4e27ca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#aa8ec05fd465ab10f6516922b9e4e27ca">agent_pool</a></td></tr>
<tr class="separator:aa8ec05fd465ab10f6516922b9e4e27ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a127452d2add303704b15423555429e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a5a127452d2add303704b15423555429e">messenger_agent_states</a></td></tr>
<tr class="separator:a5a127452d2add303704b15423555429e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a579c9ed84b852c9e2f509159c788c987"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a579c9ed84b852c9e2f509159c788c987">task_to_agent_ids</a></td></tr>
<tr class="separator:a579c9ed84b852c9e2f509159c788c987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1e01176d2920dff40fe17e3f7b6145"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#acc1e01176d2920dff40fe17e3f7b6145">agent_id_to_overworld_future</a></td></tr>
<tr class="separator:acc1e01176d2920dff40fe17e3f7b6145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a8a8bd2d11c4d2a04a55d8e36a33b19"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#a8a8a8bd2d11c4d2a04a55d8e36a33b19">run_id</a></td></tr>
<tr class="separator:a8a8a8bd2d11c4d2a04a55d8e36a33b19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1b851c97deec7a81aaa3c0edb3967c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#aa1b851c97deec7a81aaa3c0edb3967c0">task_group_id</a></td></tr>
<tr class="separator:aa1b851c97deec7a81aaa3c0edb3967c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0cc43f26c55b5fd8c6b05897f00af4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/classparlai_1_1chat__service_1_1services_1_1messenger_1_1messenger__manager_1_1MessengerManager.html#ab0cc43f26c55b5fd8c6b05897f00af4f">is_running</a></td></tr>
<tr class="separator:ab0cc43f26c55b5fd8c6b05897f00af4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Manages interactions between agents on messenger as well as direct interactions
between agents and the messenger overworld.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00129">129</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7a9b4068fc428aebd90c38bbe745e45e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a9b4068fc428aebd90c38bbe745e45e">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create an MessengerManager using the given setup options.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00135">135</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">def </span>__init__(self, opt):</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="stringliteral">        Create an MessengerManager using the given setup options.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="comment"># Manager attributes</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        self.opt = opt</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        self.server_url = <span class="keywordtype">None</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        self.port = 443</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        self.agent_pool_change_condition = threading.Condition()</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        self.active_worlds = {}</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        self.message_socket = <span class="keywordtype">None</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        self.message_sender = <span class="keywordtype">None</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        self._init_logs()</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        self.running = <span class="keyword">True</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        self.conversation_index = 0</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        self.shutting_down = <span class="keyword">False</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        self.bypass_server_setup = self.opt.get(<span class="stringliteral">&#39;bypass_server_setup&#39;</span>)</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment"># Messaging interaction functions that determine what to do when</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="comment"># messages are confirmed as delivered, marked as read by a user, and</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment"># noted as read by the bot.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        self.confirm_message_delivery = self._confirm_message_delivery</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        self.handle_message_read = self._handle_message_read</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        self.handle_bot_read = self._handle_bot_read</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment"># Read in Config</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        self._parse_config(opt)</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        self._complete_setup()</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad67c90bbf632d7bd4e6c6109c89d7c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad67c90bbf632d7bd4e6c6109c89d7c14">&#9670;&nbsp;</a></span>add_agent_to_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.add_agent_to_pool </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>world_type</em> = <code>'default'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add the agent to pool.

:param agent:
    MessengerAgent object
:param world_type:
    Name of world whose pool should now contain agent
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00227">227</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keyword">def </span>add_agent_to_pool(self, agent, world_type=&#39;default&#39;):</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="stringliteral">        Add the agent to pool.</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="stringliteral">        :param agent:</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="stringliteral">            MessengerAgent object</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="stringliteral">        :param world_type:</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="stringliteral">            Name of world whose pool should now contain agent</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        with self.agent_pool_change_condition:</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            self._log_debug(<span class="stringliteral">&#39;Adding agent {} to pool...&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(agent.messenger_id))</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="comment"># time agent entered agent_pool</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            agent.time_in_pool.setdefault(world_type, time.time())</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="comment"># add agent to pool</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            self.agent_pool.setdefault(world_type, []).append(agent)</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade5e639c76e2c48815c079d515ecaf9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade5e639c76e2c48815c079d515ecaf9b">&#9670;&nbsp;</a></span>after_agent_removed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.after_agent_removed </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>agent_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Perform any changes to metadata on agent removal.

override if extra bookkeeping must be done when removing agent
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00426">426</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keyword">def </span>after_agent_removed(self, agent_id):</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="stringliteral">        Perform any changes to metadata on agent removal.</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="stringliteral">        override if extra bookkeeping must be done when removing agent</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">pass</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="ace19c32e618503b0b750f3e0a5641f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace19c32e618503b0b750f3e0a5641f4d">&#9670;&nbsp;</a></span>check_timeout_in_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.check_timeout_in_pool </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>world_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>agent_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_time_in_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>backup_task</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check for timed-out agents in pool.

:param world_type:
    string world type
:param agent_pool:
    list of ``AgentState``s
:param max_time_in_pool:
    int maximum time allowed for agent to be in pool
:param backup_task:
    string backup_task to start if we reach a timeout in the original pool
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00657">657</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    ):</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="stringliteral">        Check for timed-out agents in pool.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="stringliteral">        :param world_type:</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="stringliteral">            string world type</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="stringliteral">        :param agent_pool:</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="stringliteral">            list of ``AgentState``s</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="stringliteral">        :param max_time_in_pool:</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="stringliteral">            int maximum time allowed for agent to be in pool</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="stringliteral">        :param backup_task:</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="stringliteral">            string backup_task to start if we reach a timeout in the original pool</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">for</span> agent_state <span class="keywordflow">in</span> agent_pool:</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            time_in_pool = agent_state.time_in_pool.get(world_type)</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <span class="keywordflow">if</span> time_in_pool <span class="keywordflow">and</span> time.time() - time_in_pool &gt; max_time_in_pool:</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                <span class="comment"># remove agent from agent_pool</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                self.remove_agent_from_pool(agent_state, world_type)</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                <span class="comment"># put agent back in overworld</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                agent_state.set_active_agent(agent_state.get_overworld_agent())</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                agent_state.stored_data[<span class="stringliteral">&#39;removed_after_timeout&#39;</span>] = <span class="keyword">True</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                self.after_agent_removed(agent_state.messenger_id)</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                <span class="keywordflow">if</span> backup_task <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    self.add_agent_to_pool(agent_state, backup_task)</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                <span class="comment"># reset wait message state</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                agent_state.stored_data[<span class="stringliteral">&#39;seen_wait_message&#39;</span>] = <span class="keyword">False</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordflow">elif</span> time_in_pool <span class="keywordflow">and</span> time.time() - time_in_pool &gt; 30:</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                <span class="comment"># tell agent that a match is taking longer than</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                <span class="comment"># expected</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                <span class="keywordflow">if</span> (</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                    <span class="keywordflow">not</span> agent_state.stored_data.get(<span class="stringliteral">&#39;seen_wait_message&#39;</span>)</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                    <span class="keywordflow">or</span> <span class="keywordflow">not</span> agent_state.stored_data[<span class="stringliteral">&#39;seen_wait_message&#39;</span>]</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                ):</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                    self.observe_message(</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                        agent_state.messenger_id,</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                        <span class="stringliteral">&#39;Pairing is taking longer than expected. &#39;</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                        <span class="stringliteral">&#39;If you wish to exit, type *EXIT*.&#39;</span>,</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                    )</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                    self.message_sender.typing_on(agent_state.messenger_id)</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                    agent_state.stored_data[<span class="stringliteral">&#39;seen_wait_message&#39;</span>] = <span class="keyword">True</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a53e1895f0a4ce74663bddb8f6c840aa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53e1895f0a4ce74663bddb8f6c840aa7">&#9670;&nbsp;</a></span>get_agent_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.get_agent_state </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>agent_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return agent state.

:param agent_id:
    int agent identifier

:return:
    AgentState object if agent_id is being tracked, else None
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00496">496</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keyword">def </span>get_agent_state(self, agent_id):</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="stringliteral">        Return agent state.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="stringliteral">        :param agent_id:</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="stringliteral">            int agent identifier</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="stringliteral">        :return:</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="stringliteral">            AgentState object if agent_id is being tracked, else None</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">if</span> agent_id <span class="keywordflow">in</span> self.messenger_agent_states:</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">return</span> self.messenger_agent_states[agent_id]</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a0fa4fe590efa528624a0965dbb995683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fa4fe590efa528624a0965dbb995683">&#9670;&nbsp;</a></span>get_app_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.get_app_token </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Find and return an app access token.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00591">591</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keyword">def </span>get_app_token(self):</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="stringliteral">        Find and return an app access token.</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.opt.get(<span class="stringliteral">&#39;force_page_token&#39;</span>):</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.exists(os.path.expanduser(<span class="stringliteral">&#39;~/.parlai/&#39;</span>)):</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                os.makedirs(os.path.expanduser(<span class="stringliteral">&#39;~/.parlai/&#39;</span>))</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            access_token_file_path = <span class="stringliteral">&#39;~/.parlai/messenger_token&#39;</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            expanded_file_path = os.path.expanduser(access_token_file_path)</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            <span class="keywordflow">if</span> os.path.exists(expanded_file_path):</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                with open(expanded_file_path, <span class="stringliteral">&#39;r&#39;) as access_token_file:</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="stringliteral">                    </span><span class="keywordflow">return</span> access_token_file.read()</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        token = <a class="code" href="../../d7/d3a/namespaceparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__full__system.html#a1e1817cd65688fb90f827834d1fb4567">input</a>(</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <span class="stringliteral">&#39;Enter your page\&#39;s access token from the developer page at&#39;</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="stringliteral">&#39;https://developers.facebook.com/apps/&lt;YOUR APP ID&gt;&#39;</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="stringliteral">&#39;/messenger/settings/ to continue setup:&#39;</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        )</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        access_token_file_path = <span class="stringliteral">&#39;~/.parlai/messenger_token&#39;</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        expanded_file_path = os.path.expanduser(access_token_file_path)</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        with open(expanded_file_path, <span class="stringliteral">&#39;w+&#39;</span>) <span class="keyword">as</span> access_token_file:</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            access_token_file.write(token)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">return</span> token</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__full__system_html_a1e1817cd65688fb90f827834d1fb4567"><div class="ttname"><a href="../../d7/d3a/namespaceparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__full__system.html#a1e1817cd65688fb90f827834d1fb4567">parlai.mturk.core.dev.test.test_full_system.input</a></div><div class="ttdeci">input</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/dev_2test_2test__full__system_8py_source.html#l00027">test_full_system.py:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a172def2db5fc015d16f37baca685267c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a172def2db5fc015d16f37baca685267c">&#9670;&nbsp;</a></span>init_new_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.init_new_state </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prepare for new run.

Initialize everything in the agent, task, and thread states
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00637">637</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keyword">def </span>init_new_state(self):</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="stringliteral">        Prepare for new run.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="stringliteral">        Initialize everything in the agent, task, and thread states</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        self.agent_pool = {}</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        self.messenger_agent_states = {}</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        self.task_to_agent_ids = {}</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        self.agent_id_to_overworld_future = {}</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a305c58cba4b22f99274b81a9253a4ca9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a305c58cba4b22f99274b81a9253a4ca9">&#9670;&nbsp;</a></span>mark_removed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.mark_removed </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>agent_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pageid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Mark the agent as removed from the pool.

Can be overriden to change other metadata linked to agent removal.

:param agent_id:
    int agent psid
:param pageid:
    int page id
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00243">243</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keyword">def </span>mark_removed(self, agent_id, pageid):</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="stringliteral">        Mark the agent as removed from the pool.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="stringliteral">        Can be overriden to change other metadata linked to agent removal.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="stringliteral">        :param agent_id:</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="stringliteral">            int agent psid</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="stringliteral">        :param pageid:</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="stringliteral">            int page id</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">pass</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="ab951bfae1eeb05f42e9fa215b2d019a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab951bfae1eeb05f42e9fa215b2d019a7">&#9670;&nbsp;</a></span>observe_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.observe_message </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>receiver_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>quick_replies</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>persona_id</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Send a message through the message manager.

:param receiver_id:
    int identifier for agent to send message to
:param text:
    string text to send
:param quick_replies:
    list of quick replies
:param persona_id:
    identifier of persona
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00826">826</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keyword">def </span>observe_message(self, receiver_id, text, quick_replies=None, persona_id=None):</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="stringliteral">        Send a message through the message manager.</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="stringliteral">        :param receiver_id:</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="stringliteral">            int identifier for agent to send message to</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="stringliteral">        :param text:</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="stringliteral">            string text to send</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="stringliteral">        :param quick_replies:</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="stringliteral">            list of quick replies</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="stringliteral">        :param persona_id:</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="stringliteral">            identifier of persona</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">return</span> self.message_sender.send_fb_message(</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            receiver_id, text, <span class="keyword">True</span>, quick_replies=quick_replies, persona_id=persona_id</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        )</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="ad969bb72a7095bde4f48be0a403e9471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad969bb72a7095bde4f48be0a403e9471">&#9670;&nbsp;</a></span>observe_payload()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.observe_payload </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>receiver_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>quick_replies</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>persona_id</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Send a payload through the message manager.

:param receiver_id:
    int identifier for agent to send message to
:param data:
    object data to send
:param quick_replies:
    list of quick replies
:param persona_id:
    identifier of persona
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00843">843</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keyword">def </span>observe_payload(self, receiver_id, data, quick_replies=None, persona_id=None):</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="stringliteral">        Send a payload through the message manager.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="stringliteral">        :param receiver_id:</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="stringliteral">            int identifier for agent to send message to</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="stringliteral">        :param data:</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="stringliteral">            object data to send</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="stringliteral">        :param quick_replies:</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="stringliteral">            list of quick replies</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="stringliteral">        :param persona_id:</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="stringliteral">            identifier of persona</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keywordflow">return</span> self.message_sender.send_fb_payload(</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            receiver_id, data, quick_replies=quick_replies, persona_id=persona_id</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        )</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="ad896b8db2d47d53b82ab052613e58845"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad896b8db2d47d53b82ab052613e58845">&#9670;&nbsp;</a></span>remove_agent_from_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.remove_agent_from_pool </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>world_type</em> = <code>'default'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mark_removed</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Remove agent from the pool.

:param agent:
    MessengerAgent object
:param world_type:
    string, world name
:param mark_removed:
    bool, whether to mark an agent as removed from the pool
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00256">256</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keyword">def </span>remove_agent_from_pool(self, agent, world_type=&#39;default&#39;, mark_removed=True):</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="stringliteral">        Remove agent from the pool.</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="stringliteral">        :param agent:</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="stringliteral">            MessengerAgent object</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="stringliteral">        :param world_type:</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="stringliteral">            string, world name</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="stringliteral">        :param mark_removed:</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="stringliteral">            bool, whether to mark an agent as removed from the pool</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        with self.agent_pool_change_condition:</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            self._log_debug(<span class="stringliteral">&#39;Removing agent {} from pool...&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(agent.messenger_id))</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span> world_type <span class="keywordflow">in</span> self.agent_pool <span class="keywordflow">and</span> agent <span class="keywordflow">in</span> self.agent_pool[world_type]:</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                self.agent_pool[world_type].remove(agent)</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="comment"># reset agent&#39;s time_in_pool</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="keywordflow">if</span> world_type <span class="keywordflow">in</span> agent.time_in_pool:</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    del agent.time_in_pool[world_type]</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <span class="comment"># maybe mark agent as removed</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                <span class="keywordflow">if</span> mark_removed:</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                    agent.stored_data[<span class="stringliteral">&#39;removed_from_pool&#39;</span>] = <span class="keyword">True</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    <span class="keywordflow">if</span> self.page_id <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                        self.mark_removed(<a class="code" href="../../de/d7c/namespacelanguage__model_1_1eval__ppl.html#a7d12ee00479673c5c8d1f6d01faa272a">int</a>(agent.messenger_id), <a class="code" href="../../de/d7c/namespacelanguage__model_1_1eval__ppl.html#a7d12ee00479673c5c8d1f6d01faa272a">int</a>(self.page_id))</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="ttc" id="namespacelanguage__model_1_1eval__ppl_html_a7d12ee00479673c5c8d1f6d01faa272a"><div class="ttname"><a href="../../de/d7c/namespacelanguage__model_1_1eval__ppl.html#a7d12ee00479673c5c8d1f6d01faa272a">language_model.eval_ppl.int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d84/projects_2convai2_2baselines_2language__model_2eval__ppl_8py_source.html#l00102">eval_ppl.py:102</a></div></div>
<div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adb6559f9e8cca74e2ac94d443f36f9d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb6559f9e8cca74e2ac94d443f36f9d2">&#9670;&nbsp;</a></span>setup_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.setup_server </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prepare the Messenger server for handling messages.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00541">541</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keyword">def </span><a class="code" href="../../de/def/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1server__utils.html#afb56b04206cd0f42384438f1ac6d9cda">setup_server</a>(self):</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="stringliteral">        Prepare the Messenger server for handling messages.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">if</span> self.bypass_server_setup:</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">return</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        shared_utils.print_and_log(</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            logging.INFO,</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="stringliteral">&#39;\nYou are going to allow people on Facebook to be agents in &#39;</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="stringliteral">&#39;ParlAI.\nDuring this process, Internet connection is required, &#39;</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="stringliteral">&#39;and you should turn off your computer\&#39;s auto-sleep &#39;</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="stringliteral">&#39;feature.\n&#39;</span>,</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            should_print=<span class="keyword">True</span>,</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        )</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <a class="code" href="../../d7/d3a/namespaceparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__full__system.html#a1e1817cd65688fb90f827834d1fb4567">input</a>(<span class="stringliteral">&#39;Please press Enter to continue... &#39;</span>)</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        shared_utils.print_and_log(logging.NOTSET, <span class="stringliteral">&#39;&#39;</span>, <span class="keyword">True</span>)</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">if</span> self.opt[<span class="stringliteral">&#39;local&#39;</span>] <span class="keywordflow">is</span> <span class="keyword">True</span>:</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            shared_utils.print_and_log(</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                logging.INFO,</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="stringliteral">&#39;In order to run the server locally, you will need &#39;</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                <span class="stringliteral">&#39;to have a public HTTPS endpoint (SSL signed) running on &#39;</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                <span class="stringliteral">&#39;the server you are currently excecuting ParlAI on. Enter &#39;</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                <span class="stringliteral">&#39;that public URL hostname when prompted and ensure that the &#39;</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                <span class="stringliteral">&#39;port being used by ParlAI (usually 3000) has external &#39;</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <span class="stringliteral">&#39;traffic routed to it.&#39;</span>,</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                should_print=<span class="keyword">True</span>,</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            )</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            <a class="code" href="../../d7/d3a/namespaceparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__full__system.html#a1e1817cd65688fb90f827834d1fb4567">input</a>(<span class="stringliteral">&#39;Please press Enter to continue... &#39;</span>)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        shared_utils.print_and_log(</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            logging.INFO, <span class="stringliteral">&#39;Setting up Messenger webhook...&#39;</span>, should_print=<span class="keyword">True</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        )</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="comment"># Setup the server with a task name related to the current task</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        task_name = <span class="stringliteral">&#39;{}-{}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(<span class="stringliteral">&#39;ParlAI-Messenger&#39;</span>, self.opt[<span class="stringliteral">&#39;task&#39;</span>])</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        self.server_task_name = <span class="stringliteral">&#39;&#39;</span>.join(</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            e <span class="keywordflow">for</span> e <span class="keywordflow">in</span> task_name.lower() <span class="keywordflow">if</span> e.isalnum() <span class="keywordflow">or</span> e == <span class="stringliteral">&#39;-&#39;</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        )</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        self.server_url = server_utils.setup_server(</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            self.server_task_name, local=self.opt[<span class="stringliteral">&#39;local&#39;</span>]</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        )</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        shared_utils.print_and_log(</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            logging.INFO,</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="stringliteral">&#39;Webhook address: {}/webhook&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(self.server_url),</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            should_print=<span class="keyword">True</span>,</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        )</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__full__system_html_a1e1817cd65688fb90f827834d1fb4567"><div class="ttname"><a href="../../d7/d3a/namespaceparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__full__system.html#a1e1817cd65688fb90f827834d1fb4567">parlai.mturk.core.dev.test.test_full_system.input</a></div><div class="ttdeci">input</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db3/dev_2test_2test__full__system_8py_source.html#l00027">test_full_system.py:27</a></div></div>
<div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1server__utils_html_afb56b04206cd0f42384438f1ac6d9cda"><div class="ttname"><a href="../../de/def/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1server__utils.html#afb56b04206cd0f42384438f1ac6d9cda">parlai.chat_service.services.messenger.server_utils.setup_server</a></div><div class="ttdeci">def setup_server(task_name, local=False)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d58/chat__service_2services_2messenger_2server__utils_8py_source.html#l00285">server_utils.py:285</a></div></div>
<div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3762b7362346cdaaf1d1ad0d6372166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3762b7362346cdaaf1d1ad0d6372166">&#9670;&nbsp;</a></span>setup_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.setup_socket </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set up socket to start communicating to workers.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00615">615</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keyword">def </span>setup_socket(self):</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="stringliteral">        Set up socket to start communicating to workers.</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.bypass_server_setup:</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            shared_utils.print_and_log(</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                logging.INFO, <span class="stringliteral">&#39;Local: Setting up WebSocket...&#39;</span>, should_print=<span class="keyword">True</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            )</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        self.app_token = self.get_app_token()</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        self.message_sender = MessageSender(self.app_token)</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="comment"># Set up receive</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.bypass_server_setup:</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            socket_use_url = self.server_url</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            self.message_socket = MessageSocket(</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                socket_use_url, self.port, self._handle_webhook_event</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            )</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        shared_utils.print_and_log(</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            logging.INFO, <span class="stringliteral">&#39;done with websocket&#39;</span>, should_print=<span class="keyword">True</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        )</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="ab6879d8a8fd1f897cf3dba904a11c4c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6879d8a8fd1f897cf3dba904a11c4c0">&#9670;&nbsp;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.shutdown </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Handle any client shutdown cleanup.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00806">806</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keyword">def </span>shutdown(self):</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="stringliteral">        Handle any client shutdown cleanup.</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <span class="comment"># Ensure all threads are cleaned and conversations are handled</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            self.is_running = <span class="keyword">False</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            self.world_runner.shutdown()</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.bypass_server_setup:</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                self.message_socket.keep_running = <span class="keyword">False</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            self._expire_all_conversations()</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">except</span> BaseException <span class="keyword">as</span> e:</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            shared_utils.print_and_log(logging.ERROR, f<span class="stringliteral">&#39;world ended in error: {e}&#39;</span>)</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">finally</span>:</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.bypass_server_setup:</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                server_utils.delete_server(self.server_task_name, self.opt[<span class="stringliteral">&#39;local&#39;</span>])</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a76e86a89a5cbcdf013023f06b119039e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76e86a89a5cbcdf013023f06b119039e">&#9670;&nbsp;</a></span>start_new_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.start_new_run </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Begin new run.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00648">648</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keyword">def </span>start_new_run(self):</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="stringliteral">        Begin new run.</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        self.run_id = <a class="code" href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">str</a>(<a class="code" href="../../de/d7c/namespacelanguage__model_1_1eval__ppl.html#a7d12ee00479673c5c8d1f6d01faa272a">int</a>(time.time()))</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        self.task_group_id = <span class="stringliteral">&#39;{}_{}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(self.opt[<span class="stringliteral">&#39;task&#39;</span>], self.run_id)</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="ttc" id="namespacegenerate__task__READMEs_html_a5b88452ffb87b78c8c85ececebafc09f"><div class="ttname"><a href="../../df/d5f/namespacegenerate__task__READMEs.html#a5b88452ffb87b78c8c85ececebafc09f">generate_task_READMEs.str</a></div><div class="ttdeci">string str</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d04/generate__task__READMEs_8py_source.html#l00022">generate_task_READMEs.py:22</a></div></div>
<div class="ttc" id="namespacelanguage__model_1_1eval__ppl_html_a7d12ee00479673c5c8d1f6d01faa272a"><div class="ttname"><a href="../../de/d7c/namespacelanguage__model_1_1eval__ppl.html#a7d12ee00479673c5c8d1f6d01faa272a">language_model.eval_ppl.int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d84/projects_2convai2_2baselines_2language__model_2eval__ppl_8py_source.html#l00102">eval_ppl.py:102</a></div></div>
<div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6bd1cf187d6a26e57b22e11800734734"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bd1cf187d6a26e57b22e11800734734">&#9670;&nbsp;</a></span>start_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.start_task </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Begin handling task.

Periodically check to see when enough agents are in the agent pool to start an
instance of the task. Continue doing this until the desired number of
conversations is had.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00702">702</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keyword">def </span>start_task(self):</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="stringliteral">        Begin handling task.</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="stringliteral">        Periodically check to see when enough agents are in the agent pool to start an</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="stringliteral">        instance of the task. Continue doing this until the desired number of</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="stringliteral">        conversations is had.</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keyword">def </span>_done_callback(fut):</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="stringliteral">            Log and raise exception of task world, if there is one.</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="stringliteral">            Additionally, set active agent to overworld agent.</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="stringliteral">            &quot;&quot;&quot;</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            e = fut.exception()</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            <span class="keywordflow">if</span> e <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                shared_utils.print_and_log(</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                    logging.ERROR,</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                    <span class="stringliteral">&#39;World {} had error {}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(world_type, repr(e)),</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                    should_print=<span class="keyword">True</span>,</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                )</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                traceback.print_exc(file=sys.stdout)</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                <span class="keywordflow">for</span> agent <span class="keywordflow">in</span> agents:</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                    self.observe_message(</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                        agent.id, <span class="stringliteral">&#39;Sorry, this world closed. Returning to overworld.&#39;</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                    )</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                shared_utils.print_and_log(</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                    logging.INFO,</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                    <span class="stringliteral">&#39;World {} had no error&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(world_type),</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                    should_print=<span class="keyword">True</span>,</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                )</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            self.active_worlds[task_id] = <span class="keywordtype">None</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="keywordflow">for</span> agent <span class="keywordflow">in</span> agents:</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                self.after_agent_removed(agent.id)</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                agent_state = self.get_agent_state(agent.id)</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                agent_state.set_active_agent(agent_state.get_overworld_agent())</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        self.running = <span class="keyword">True</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordflow">while</span> self.running:</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="comment"># Loop forever until the server is shut down</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            with self.agent_pool_change_condition:</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                valid_pools = self._get_unique_pool()</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                <span class="keywordflow">for</span> world_type, agent_pool <span class="keywordflow">in</span> valid_pools.items():</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                    <span class="comment"># check if agent has exceeded max time in pool</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                    world_config = self.task_configs[world_type]</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                    <span class="keywordflow">if</span> world_config.max_time_in_pool <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                        self.check_timeout_in_pool(</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                            world_type,</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                            agent_pool,</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                            world_config.max_time_in_pool,</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                            world_config.backup_task,</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                        )</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                    needed_agents = self.max_agents_for[world_type]</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                    <span class="keywordflow">if</span> len(agent_pool) &gt;= needed_agents:</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                        shared_utils.print_and_log(</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                            logging.INFO, <span class="stringliteral">&#39;starting pool&#39;</span>, should_print=<span class="keyword">True</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                        )</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                        <span class="comment"># enough agents in pool to start new conversation</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                        self.conversation_index += 1</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                        task_id = <span class="stringliteral">&#39;t_{}&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(self.conversation_index)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                        <span class="comment"># Add the required number of valid agents to the conv</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                        agent_states = [w <span class="keywordflow">for</span> w <span class="keywordflow">in</span> agent_pool[:needed_agents]]</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                        agents = []</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                        <span class="keywordflow">for</span> state <span class="keywordflow">in</span> agent_states:</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                            agent = self._create_agent(task_id, state.get_id())</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                            agent.onboard_data = state.onboard_data</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                            state.assign_agent_to_task(agent, task_id)</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                            state.set_active_agent(agent)</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                            agents.append(agent)</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                            <span class="comment"># reset wait message state</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                            state.stored_data[<span class="stringliteral">&#39;seen_wait_message&#39;</span>] = <span class="keyword">False</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                        assign_role_function = shared_utils.get_assign_roles_fn(</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                            self.world_module, self.taskworld_map[world_type]</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                        )</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                        <span class="keywordflow">if</span> assign_role_function <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                            assign_role_function = shared_utils.default_assign_roles_fn</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                        assign_role_function(agents)</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                        <span class="comment"># Allow task creator to filter out workers and run</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                        <span class="comment"># versions of the task that require fewer agents</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                        agents = [a <span class="keywordflow">for</span> a <span class="keywordflow">in</span> agents <span class="keywordflow">if</span> a.disp_id <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>]</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                        <span class="keywordflow">for</span> a <span class="keywordflow">in</span> agents:</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                            <span class="comment"># Remove selected workers from the agent pool</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                            self.remove_agent_from_pool(</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                                self.get_agent_state(a.id),</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                                world_type=world_type,</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                                mark_removed=<span class="keyword">False</span>,</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                            )</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                        <span class="keywordflow">for</span> a <span class="keywordflow">in</span> agents:</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                            partner_list = agents.copy()</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                            partner_list.remove(a)</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                            a.message_partners = partner_list</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                        <span class="comment"># launch task world.</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                        future = self.world_runner.launch_task_world(</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                            task_id, self.taskworld_map[world_type], agents</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                        )</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                        future.add_done_callback(_done_callback)</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                        self.active_worlds[task_id] = future</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            time.sleep(shared_utils.THREAD_MEDIUM_SLEEP)</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a64b1a7241aecdca1d321efa92134ff96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64b1a7241aecdca1d321efa92134ff96">&#9670;&nbsp;</a></span>upload_attachment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.chat_service.services.messenger.messenger_manager.MessengerManager.upload_attachment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Upload an attachment and return an attachment ID.

:param payload:
    dict with the following format:
{'type': &lt;TYPE&gt;, 'url': &lt;URL&gt;} or
{'type': &lt;TYPE&gt;, 'filename': &lt;FILENAME&gt;, 'format': &lt;FILEFORMAT&gt;}.
For example,
{'type': 'image', 'filename': 'test.png', 'format': 'png'}
</pre> 
<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00860">860</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keyword">def </span>upload_attachment(self, payload):</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="stringliteral">        Upload an attachment and return an attachment ID.</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="stringliteral">        :param payload:</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="stringliteral">            dict with the following format:</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="stringliteral">                {&#39;type&#39;: &lt;TYPE&gt;, &#39;url&#39;: &lt;URL&gt;} or</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="stringliteral">                {&#39;type&#39;: &lt;TYPE&gt;, &#39;filename&#39;: &lt;FILENAME&gt;, &#39;format&#39;: &lt;FILEFORMAT&gt;}.</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="stringliteral">                For example,</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="stringliteral">                {&#39;type&#39;: &#39;image&#39;, &#39;filename&#39;: &#39;test.png&#39;, &#39;format&#39;: &#39;png&#39;}</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="keywordflow">return</span> self.message_sender.upload_fb_attachment(payload)</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a82126e4a66c02afffc55fd8126f1acc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82126e4a66c02afffc55fd8126f1acc9">&#9670;&nbsp;</a></span>active_worlds</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.active_worlds</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00144">144</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="acc1e01176d2920dff40fe17e3f7b6145"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc1e01176d2920dff40fe17e3f7b6145">&#9670;&nbsp;</a></span>agent_id_to_overworld_future</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.agent_id_to_overworld_future</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00646">646</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="aa8ec05fd465ab10f6516922b9e4e27ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8ec05fd465ab10f6516922b9e4e27ca">&#9670;&nbsp;</a></span>agent_pool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.agent_pool</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00643">643</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a43d6fbc03656166447b54c37017e8a36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d6fbc03656166447b54c37017e8a36">&#9670;&nbsp;</a></span>agent_pool_change_condition</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.agent_pool_change_condition</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00143">143</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="aa52ef2280a697896f4d3b5bdb322e553"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa52ef2280a697896f4d3b5bdb322e553">&#9670;&nbsp;</a></span>app_token</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.app_token</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00624">624</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a55fd652429058668a8290d89d2e1866f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55fd652429058668a8290d89d2e1866f">&#9670;&nbsp;</a></span>bypass_server_setup</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.bypass_server_setup</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00151">151</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a758ca43c22a9efc4508e2d22bcc994f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a758ca43c22a9efc4508e2d22bcc994f3">&#9670;&nbsp;</a></span>config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.config</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00174">174</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a33ac779cd2701984bd31ba5ce32374a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33ac779cd2701984bd31ba5ce32374a9">&#9670;&nbsp;</a></span>confirm_message_delivery</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.confirm_message_delivery</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00156">156</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="ac2a115bc0c64a9ddc740b9a7637ce954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2a115bc0c64a9ddc740b9a7637ce954">&#9670;&nbsp;</a></span>conversation_index</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.conversation_index</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00149">149</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a742006839000bce2c6ec6bbccd8262f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a742006839000bce2c6ec6bbccd8262f8">&#9670;&nbsp;</a></span>handle_bot_read</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.handle_bot_read</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00158">158</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a4ebe80b2fe5f933e8d2dd8c98e2d025d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ebe80b2fe5f933e8d2dd8c98e2d025d">&#9670;&nbsp;</a></span>handle_message_read</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.handle_message_read</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00157">157</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="ab0cc43f26c55b5fd8c6b05897f00af4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0cc43f26c55b5fd8c6b05897f00af4f">&#9670;&nbsp;</a></span>is_running</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.is_running</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00812">812</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="ada5b6cdc7866ba3f87cc0742a95547c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada5b6cdc7866ba3f87cc0742a95547c6">&#9670;&nbsp;</a></span>max_agents_for</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.max_agents_for</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00193">193</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a31fe2a92a0c3f3b073488fec70fb85e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31fe2a92a0c3f3b073488fec70fb85e2">&#9670;&nbsp;</a></span>max_workers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.max_workers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00186">186</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a10c5e3c603613761b40b3cb122eac730"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10c5e3c603613761b40b3cb122eac730">&#9670;&nbsp;</a></span>message_sender</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.message_sender</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00146">146</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a51d9146cf312c860fec57b0ee885e62f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51d9146cf312c860fec57b0ee885e62f">&#9670;&nbsp;</a></span>message_socket</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.message_socket</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00145">145</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a5a127452d2add303704b15423555429e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a127452d2add303704b15423555429e">&#9670;&nbsp;</a></span>messenger_agent_states</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.messenger_agent_states</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00644">644</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a8bacca1a1993c53c37c463b18d7032d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bacca1a1993c53c37c463b18d7032d1">&#9670;&nbsp;</a></span>onboard_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.onboard_map</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00196">196</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a3800447e24df6857bcbdbddf068a8001"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3800447e24df6857bcbdbddf068a8001">&#9670;&nbsp;</a></span>opt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.opt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00140">140</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a07127740a04f3473d4d791fd66c6bac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07127740a04f3473d4d791fd66c6bac5">&#9670;&nbsp;</a></span>overworld</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.overworld</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00175">175</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="aa38a212a96bfe00accbbc474c9693ac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa38a212a96bfe00accbbc474c9693ac0">&#9670;&nbsp;</a></span>page_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.page_id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00178">178</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a01f53f843ca041d2033121ef74e0b266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01f53f843ca041d2033121ef74e0b266">&#9670;&nbsp;</a></span>port</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.port</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00142">142</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a8a8a8bd2d11c4d2a04a55d8e36a33b19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a8a8bd2d11c4d2a04a55d8e36a33b19">&#9670;&nbsp;</a></span>run_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.run_id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00652">652</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a84d004dff84ef9fc543beb2a531ab33f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84d004dff84ef9fc543beb2a531ab33f">&#9670;&nbsp;</a></span>runner_opt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.runner_opt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00189">189</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="aa01d925e8811f90031cf8b33a9e6480d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa01d925e8811f90031cf8b33a9e6480d">&#9670;&nbsp;</a></span>running</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.running</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00148">148</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a7cef66a59364fa94ea8ff77a311ecf63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cef66a59364fa94ea8ff77a311ecf63">&#9670;&nbsp;</a></span>server_task_name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.server_task_name</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00578">578</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a70e95421663ad81807980f3461d4b380"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70e95421663ad81807980f3461d4b380">&#9670;&nbsp;</a></span>server_url</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.server_url</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00141">141</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a8a303071bd6737c2770ed156c4242c47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a303071bd6737c2770ed156c4242c47">&#9670;&nbsp;</a></span>shutting_down</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.shutting_down</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00150">150</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="ab295a8d4f3020633dc4139426b37d1d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab295a8d4f3020633dc4139426b37d1d8">&#9670;&nbsp;</a></span>task_configs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.task_configs</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00185">185</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="aa1b851c97deec7a81aaa3c0edb3967c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1b851c97deec7a81aaa3c0edb3967c0">&#9670;&nbsp;</a></span>task_group_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.task_group_id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00653">653</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a579c9ed84b852c9e2f509159c788c987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a579c9ed84b852c9e2f509159c788c987">&#9670;&nbsp;</a></span>task_to_agent_ids</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.task_to_agent_ids</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00645">645</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="acfc4cbe88bedd5145fe9a77b7776c4b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfc4cbe88bedd5145fe9a77b7776c4b7">&#9670;&nbsp;</a></span>taskworld_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.taskworld_map</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00199">199</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a692523fc7dfa4ba3fbb0de988ab0a2fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a692523fc7dfa4ba3fbb0de988ab0a2fd">&#9670;&nbsp;</a></span>world_module</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.world_module</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00177">177</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="a4083e1b0322a96cb112ce6940d96e51f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4083e1b0322a96cb112ce6940d96e51f">&#9670;&nbsp;</a></span>world_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.world_path</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00176">176</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<a id="adcf0cf9b7d579e7528da833345375750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcf0cf9b7d579e7528da833345375750">&#9670;&nbsp;</a></span>world_runner</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.chat_service.services.messenger.messenger_manager.MessengerManager.world_runner</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dcd/messenger__manager_8py_source.html#l00190">190</a> of file <a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>parlai/chat_service/services/messenger/<a class="el" href="../../da/dcd/messenger__manager_8py_source.html">messenger_manager.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
