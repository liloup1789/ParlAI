<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParlAI: light_chats.graph.GraphFunction Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ParlAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../de/d97/namespacelight__chats.html">light_chats</a></li><li class="navelem"><a class="el" href="../../d3/d37/namespacelight__chats_1_1graph.html">graph</a></li><li class="navelem"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html">GraphFunction</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="../../d4/d57/classlight__chats_1_1graph_1_1GraphFunction-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">light_chats.graph.GraphFunction Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for light_chats.graph.GraphFunction:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d3e/classlight__chats_1_1graph_1_1GraphFunction__inherit__graph.png" border="0" usemap="#light__chats_8graph_8GraphFunction_inherit__map" alt="Inheritance graph"/></div>
<map name="light__chats_8graph_8GraphFunction_inherit__map" id="light__chats_8graph_8GraphFunction_inherit__map">
<area shape="rect" id="node3" href="../../de/d09/classlight__chats_1_1graph_1_1DropObjectFunction.html" title="light_chats.graph.DropObject\lFunction" alt="" coords="375,5,566,47"/>
<area shape="rect" id="node4" href="../../d5/d95/classlight__chats_1_1graph_1_1EquipObjectFunction.html" title="light_chats.graph.EquipObject\lFunction" alt="" coords="373,71,569,112"/>
<area shape="rect" id="node7" href="../../da/d68/classlight__chats_1_1graph_1_1ExamineFunction.html" title="light_chats.graph.Examine\lFunction" alt="" coords="383,136,559,177"/>
<area shape="rect" id="node8" href="../../dd/dae/classlight__chats_1_1graph_1_1FollowFunction.html" title="light_chats.graph.Follow\lFunction" alt="" coords="389,201,552,243"/>
<area shape="rect" id="node9" href="../../d7/d88/classlight__chats_1_1graph_1_1GetObjectFunction.html" title="light_chats.graph.GetObject\lFunction" alt="" coords="379,267,563,308"/>
<area shape="rect" id="node10" href="../../d1/d80/classlight__chats_1_1graph_1_1GiveObjectFunction.html" title="light_chats.graph.GiveObject\lFunction" alt="" coords="375,332,566,373"/>
<area shape="rect" id="node11" href="../../db/d09/classlight__chats_1_1graph_1_1HitFunction.html" title="light_chats.graph.HitFunction" alt="" coords="375,398,567,425"/>
<area shape="rect" id="node12" href="../../d0/d6e/classlight__chats_1_1graph_1_1HugFunction.html" title="light_chats.graph.HugFunction" alt="" coords="371,449,570,475"/>
<area shape="rect" id="node13" href="../../df/dd3/classlight__chats_1_1graph_1_1IngestFunction.html" title="light_chats.graph.Ingest\lFunction" alt="" coords="390,500,551,541"/>
<area shape="rect" id="node16" href="../../d8/df4/classlight__chats_1_1graph_1_1LockFunction.html" title="light_chats.graph.LockFunction" alt="" coords="369,566,572,593"/>
<area shape="rect" id="node17" href="../../df/de8/classlight__chats_1_1graph_1_1MoveAgentFunction.html" title="light_chats.graph.MoveAgent\lFunction" alt="" coords="375,617,566,659"/>
<area shape="rect" id="node18" href="../../d0/d62/classlight__chats_1_1graph_1_1PutObjectInFunction.html" title="light_chats.graph.PutObject\lInFunction" alt="" coords="379,683,562,724"/>
<area shape="rect" id="node19" href="../../dc/d59/classlight__chats_1_1graph_1_1RemoveObjectFunction.html" title="light_chats.graph.Remove\lObjectFunction" alt="" coords="383,748,558,789"/>
<area shape="rect" id="node20" href="../../db/df3/classlight__chats_1_1graph_1_1SayFunction.html" title="light_chats.graph.SayFunction" alt="" coords="371,814,570,841"/>
<area shape="rect" id="node21" href="../../df/d6d/classlight__chats_1_1graph_1_1SoloFunction.html" title="light_chats.graph.SoloFunction" alt="" coords="370,865,571,891"/>
<area shape="rect" id="node27" href="../../de/d30/classlight__chats_1_1graph_1_1StealObjectFunction.html" title="light_chats.graph.StealObject\lFunction" alt="" coords="374,916,567,957"/>
<area shape="rect" id="node28" href="../../d9/dea/classlight__chats_1_1graph_1_1TellFunction.html" title="light_chats.graph.TellFunction" alt="" coords="373,982,569,1009"/>
<area shape="rect" id="node29" href="../../d9/d19/classlight__chats_1_1graph_1_1UnlockFunction.html" title="light_chats.graph.Unlock\lFunction" alt="" coords="387,1033,554,1075"/>
<area shape="rect" id="node30" href="../../d6/de7/classlight__chats_1_1graph_1_1UseFunction.html" title="light_chats.graph.UseFunction" alt="" coords="371,1099,570,1126"/>
<area shape="rect" id="node5" href="../../dc/d03/classlight__chats_1_1graph_1_1WearObjectFunction.html" title="light_chats.graph.WearObject\lFunction" alt="" coords="626,39,821,80"/>
<area shape="rect" id="node6" href="../../d4/d4d/classlight__chats_1_1graph_1_1WieldObjectFunction.html" title="light_chats.graph.WieldObject\lFunction" alt="" coords="625,104,821,145"/>
<area shape="rect" id="node14" href="../../db/d91/classlight__chats_1_1graph_1_1DrinkFunction.html" title="light_chats.graph.DrinkFunction" alt="" coords="620,482,827,509"/>
<area shape="rect" id="node15" href="../../d6/dbf/classlight__chats_1_1graph_1_1EatFunction.html" title="light_chats.graph.EatFunction" alt="" coords="626,533,821,559"/>
<area shape="rect" id="node22" href="../../d7/dec/classlight__chats_1_1graph_1_1HealthFunction.html" title="light_chats.graph.Health\lFunction" alt="" coords="642,733,805,775"/>
<area shape="rect" id="node23" href="../../da/d36/classlight__chats_1_1graph_1_1InventoryFunction.html" title="light_chats.graph.Inventory\lFunction" alt="" coords="634,799,813,840"/>
<area shape="rect" id="node24" href="../../d2/d65/classlight__chats_1_1graph_1_1LookFunction.html" title="light_chats.graph.LookFunction" alt="" coords="622,865,825,891"/>
<area shape="rect" id="node25" href="../../dd/d44/classlight__chats_1_1graph_1_1UnfollowFunction.html" title="light_chats.graph.Unfollow\lFunction" alt="" coords="635,916,811,957"/>
<area shape="rect" id="node26" href="../../d6/db0/classlight__chats_1_1graph_1_1WaitFunction.html" title="light_chats.graph.WaitFunction" alt="" coords="622,982,825,1009"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for light_chats.graph.GraphFunction:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d69/classlight__chats_1_1graph_1_1GraphFunction__coll__graph.png" border="0" usemap="#light__chats_8graph_8GraphFunction_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afcb6dd9e771c4db34f5af22588e6190e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#afcb6dd9e771c4db34f5af22588e6190e">__init__</a> (self, function_name, <a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a2d40c8aa5303afce9e93be14593fca78">possible_arg_nums</a>, <a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a20251500fbafb95c381e0c0bf9f37376">arg_split_words</a>, <a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a6845a255ccdfcaa58debca3157f7adb7">arg_find_type</a>, <a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a88e5637deee00b7f2f5d682afea0e85d">arg_constraints</a>, <a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a46da34454c8776f43d4102c74a650334">func_constraints</a>, <a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a5fc1640403f59d0358e1dccea3682487">callback_triggers</a>)</td></tr>
<tr class="separator:afcb6dd9e771c4db34f5af22588e6190e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ac297dcadb1e5ec360f55f293dcbfcb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a8ac297dcadb1e5ec360f55f293dcbfcb">valid_args</a> (self, graph, args)</td></tr>
<tr class="separator:a8ac297dcadb1e5ec360f55f293dcbfcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21e2dd1c8eb431b3ee22cce4853e3c15"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a21e2dd1c8eb431b3ee22cce4853e3c15">handle</a> (self, graph, args)</td></tr>
<tr class="separator:a21e2dd1c8eb431b3ee22cce4853e3c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fd67b8cadf1f9be60d4885d21287518"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a9fd67b8cadf1f9be60d4885d21287518">func</a> (self, graph, args)</td></tr>
<tr class="separator:a9fd67b8cadf1f9be60d4885d21287518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8828c59ad0d9f53bfb2234f0b8b37377"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a8828c59ad0d9f53bfb2234f0b8b37377">get_action_observation_format</a> (self, action, descs)</td></tr>
<tr class="separator:a8828c59ad0d9f53bfb2234f0b8b37377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20674b5c6c05a6c5188e51bc991717f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#ab20674b5c6c05a6c5188e51bc991717f">get_failure_action</a> (self, graph, args, spec_fail='failed')</td></tr>
<tr class="separator:ab20674b5c6c05a6c5188e51bc991717f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c89db357c2eb4c4833d7f975df2e85d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a9c89db357c2eb4c4833d7f975df2e85d">get_find_fail_text</a> (self, arg_idx)</td></tr>
<tr class="separator:a9c89db357c2eb4c4833d7f975df2e85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ffab7ed0e956a6bc76e3f61818ab5ff"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a4ffab7ed0e956a6bc76e3f61818ab5ff">get_improper_args_text</a> (self, num_args)</td></tr>
<tr class="separator:a4ffab7ed0e956a6bc76e3f61818ab5ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2110ae09489d9ebc9291a1fd39d8c4cd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a2110ae09489d9ebc9291a1fd39d8c4cd">evaluate_constraint_set</a> (self, graph, args, constraints)</td></tr>
<tr class="separator:a2110ae09489d9ebc9291a1fd39d8c4cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af627ff84086a094b84da04e30a97779e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#af627ff84086a094b84da04e30a97779e">check_possibilites_vs_constraints</a> (self, graph, output_args, arg_idx, possible_ids)</td></tr>
<tr class="separator:af627ff84086a094b84da04e30a97779e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b6764b365baf7471e53651adf83706b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a3b6764b365baf7471e53651adf83706b">parse_text_to_args</a> (self, graph, actor_id, text)</td></tr>
<tr class="separator:a3b6764b365baf7471e53651adf83706b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9769b13542f28f04977e374057bbc017"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a9769b13542f28f04977e374057bbc017">try_callback_override_args</a> (self, graph, args)</td></tr>
<tr class="separator:a9769b13542f28f04977e374057bbc017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33a25a071385ffbd0a222cab65c543d4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a33a25a071385ffbd0a222cab65c543d4">parse_descs_to_args_helper</a> (self, graph, args, output_args, arg_find_idx=None)</td></tr>
<tr class="separator:a33a25a071385ffbd0a222cab65c543d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b76e8a8bb07f75abd081e220683dbd4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a8b76e8a8bb07f75abd081e220683dbd4">parse_descs_to_args</a> (self, graph, args)</td></tr>
<tr class="separator:a8b76e8a8bb07f75abd081e220683dbd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fb123ff0ec87dde23a5ce8a1614bbbe"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a6fb123ff0ec87dde23a5ce8a1614bbbe">get_name</a> (self)</td></tr>
<tr class="separator:a6fb123ff0ec87dde23a5ce8a1614bbbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0994341bec72be122101ce59da936882"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a0994341bec72be122101ce59da936882">get_canonical_form</a> (self, graph, args)</td></tr>
<tr class="separator:a0994341bec72be122101ce59da936882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7929e44e5afafd4d27418c7fe5a2fe0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#aa7929e44e5afafd4d27418c7fe5a2fe0">get_reverse</a> (self, graph, args)</td></tr>
<tr class="separator:aa7929e44e5afafd4d27418c7fe5a2fe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:afb7e1d1d49ff540be034f685f4d1e337"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#afb7e1d1d49ff540be034f685f4d1e337">name</a></td></tr>
<tr class="separator:afb7e1d1d49ff540be034f685f4d1e337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d40c8aa5303afce9e93be14593fca78"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a2d40c8aa5303afce9e93be14593fca78">possible_arg_nums</a></td></tr>
<tr class="separator:a2d40c8aa5303afce9e93be14593fca78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20251500fbafb95c381e0c0bf9f37376"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a20251500fbafb95c381e0c0bf9f37376">arg_split_words</a></td></tr>
<tr class="separator:a20251500fbafb95c381e0c0bf9f37376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6845a255ccdfcaa58debca3157f7adb7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a6845a255ccdfcaa58debca3157f7adb7">arg_find_type</a></td></tr>
<tr class="separator:a6845a255ccdfcaa58debca3157f7adb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88e5637deee00b7f2f5d682afea0e85d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a88e5637deee00b7f2f5d682afea0e85d">arg_constraints</a></td></tr>
<tr class="separator:a88e5637deee00b7f2f5d682afea0e85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46da34454c8776f43d4102c74a650334"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a46da34454c8776f43d4102c74a650334">func_constraints</a></td></tr>
<tr class="separator:a46da34454c8776f43d4102c74a650334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc1640403f59d0358e1dccea3682487"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a5fc1640403f59d0358e1dccea3682487">callback_triggers</a></td></tr>
<tr class="separator:a5fc1640403f59d0358e1dccea3682487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b75544ede241f8635e4d6c99ed6a3b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#aa5b75544ede241f8635e4d6c99ed6a3b">formats</a></td></tr>
<tr class="separator:aa5b75544ede241f8635e4d6c99ed6a3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a40c1214e286a5c8ca375aae48bf36d89"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d79/classlight__chats_1_1graph_1_1GraphFunction.html#a40c1214e286a5c8ca375aae48bf36d89">format_observation</a></td></tr>
<tr class="separator:a40c1214e286a5c8ca375aae48bf36d89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Initial description of function should only contain what the arguments are as set up
by init, establishing a number to type relationship like:

[Actor, item actor is carrying, container in same room as actor]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00087">87</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afcb6dd9e771c4db34f5af22588e6190e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcb6dd9e771c4db34f5af22588e6190e">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>function_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>possible_arg_nums</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arg_split_words</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arg_find_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arg_constraints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func_constraints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>callback_triggers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create a new graph function
args:
function name - name or array of aliases for the function
possible_arg_nums - number or array of valid arg numbers for
    determining if given args are valid or for breaking text into
    a valid number of arguments before they're parsed into descs
arg_split_words - array of words to be used to split input args
arg_find_type - array of args for desc_to_nodes to use to find the
    argument at the given index, following the form
    {'type': &lt;search type&gt;, 'from': &lt;arg idx of reference&gt;}. If a
    list is given for each argument use the same element for each
arg_constraints - constraints on whether or not found arguments are
    valid to be matched during the parsing step. Form is array of
    arrays of constraint types
func_constraints - constraints on whether a function will pass with
    the given args, format is array of constraint types
callback_triggers - callback hook names and argument idxs for making
    calls to callback functions upon completion of this function call
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00104">104</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    ):</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Create a new graph function</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="stringliteral">        args:</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="stringliteral">        function name - name or array of aliases for the function</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="stringliteral">        possible_arg_nums - number or array of valid arg numbers for</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="stringliteral">            determining if given args are valid or for breaking text into</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="stringliteral">            a valid number of arguments before they&#39;re parsed into descs</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="stringliteral">        arg_split_words - array of words to be used to split input args</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="stringliteral">        arg_find_type - array of args for desc_to_nodes to use to find the</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="stringliteral">            argument at the given index, following the form</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="stringliteral">            {&#39;type&#39;: &lt;search type&gt;, &#39;from&#39;: &lt;arg idx of reference&gt;}. If a</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="stringliteral">            list is given for each argument use the same element for each</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="stringliteral">        arg_constraints - constraints on whether or not found arguments are</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="stringliteral">            valid to be matched during the parsing step. Form is array of</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="stringliteral">            arrays of constraint types</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="stringliteral">        func_constraints - constraints on whether a function will pass with</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="stringliteral">            the given args, format is array of constraint types</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="stringliteral">        callback_triggers - callback hook names and argument idxs for making</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="stringliteral">            calls to callback functions upon completion of this function call</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        self.name = function_name</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        self.possible_arg_nums = possible_arg_nums</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        self.arg_split_words = arg_split_words</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        self.arg_find_type = arg_find_type</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        self.arg_constraints = arg_constraints</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        self.func_constraints = func_constraints</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        self.callback_triggers = callback_triggers</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        self.formats = {<span class="stringliteral">&#39;failed&#39;</span>: <span class="stringliteral">&#39;{1} couldn\&#39;t do that&#39;</span>}</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af627ff84086a094b84da04e30a97779e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af627ff84086a094b84da04e30a97779e">&#9670;&nbsp;</a></span>check_possibilites_vs_constraints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.check_possibilites_vs_constraints </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arg_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>possible_ids</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Iterate through the given possible ids for a particular arg index and see if any
match all the constraints for that argument.

Returns (True, valid_ID) on success Returns (False, violator_action) on failure
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00254">254</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    ):</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="stringliteral">        Iterate through the given possible ids for a particular arg index and see if any</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="stringliteral">        match all the constraints for that argument.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="stringliteral">        Returns (True, valid_ID) on success Returns (False, violator_action) on failure</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        constraints = self.arg_constraints[arg_idx]</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        most_constraints = -1</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        final_failure_action = <span class="keywordtype">None</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">for</span> pos_id <span class="keywordflow">in</span> possible_ids:</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            output_args[arg_idx] = pos_id</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            success, cons_passed, failure_action = self.evaluate_constraint_set(</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                graph, output_args, constraints</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            )</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span> success:</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">True</span>, pos_id</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                output_args[arg_idx] = <span class="keywordtype">None</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="keywordflow">if</span> cons_passed &gt; most_constraints:</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                    most_constraints = cons_passed</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                    final_failure_action = failure_action</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span>, final_failure_action</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a2110ae09489d9ebc9291a1fd39d8c4cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2110ae09489d9ebc9291a1fd39d8c4cd">&#9670;&nbsp;</a></span>evaluate_constraint_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.evaluate_constraint_set </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>constraints</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check a particular set of arguments against the given constraints returns (True,
cons_passed, None) if the constraints all pass returns (False, cons_passed,
failure_action) if any constraint fails.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00229">229</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keyword">def </span>evaluate_constraint_set(self, graph, args, constraints):</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="stringliteral">        Check a particular set of arguments against the given constraints returns (True,</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="stringliteral">        cons_passed, None) if the constraints all pass returns (False, cons_passed,</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="stringliteral">        failure_action) if any constraint fails.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        cons_passed = 0</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        failure_action = <span class="keywordtype">None</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">for</span> constraint <span class="keywordflow">in</span> constraints:</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            con_args = [args[i] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> ([0] + constraint[<span class="stringliteral">&#39;in_args&#39;</span>])]</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            con_args += constraint[<span class="stringliteral">&#39;args&#39;</span>]</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            con_obj = CONSTRAINTS[constraint[<span class="stringliteral">&#39;type&#39;</span>]]</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keywordflow">if</span> con_obj.evaluate_constraint(graph, con_args):</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                cons_passed += 1</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                spec_fail = constraint.get(<span class="stringliteral">&#39;spec_fail&#39;</span>, <span class="stringliteral">&#39;failed&#39;</span>)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                failure_action = con_obj.get_failure_action(graph, con_args, spec_fail)</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                <span class="keywordflow">break</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">if</span> failure_action <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">True</span>, cons_passed, <span class="keywordtype">None</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span>, cons_passed, failure_action</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a9fd67b8cadf1f9be60d4885d21287518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fd67b8cadf1f9be60d4885d21287518">&#9670;&nbsp;</a></span>func()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.func </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Execute action on the given graph
Notation for documentation should be in the form of an action with &lt;&gt;'s
around the incoming arguments in the order they are passed in. Optional
arguments can be denoted by putting the clause in []'s.
ex:
&lt;Actor&gt; does thing with &lt;object&gt; [and other &lt;object&gt;]
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00185">185</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">def </span>func(self, graph, args):</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="stringliteral">        Execute action on the given graph</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="stringliteral">        Notation for documentation should be in the form of an action with &lt;&gt;&#39;s</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="stringliteral">        around the incoming arguments in the order they are passed in. Optional</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="stringliteral">        arguments can be denoted by putting the clause in []&#39;s.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="stringliteral">        ex:</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="stringliteral">        &lt;Actor&gt; does thing with &lt;object&gt; [and other &lt;object&gt;]</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">raise</span> NotImplementedError</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a8828c59ad0d9f53bfb2234f0b8b37377"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8828c59ad0d9f53bfb2234f0b8b37377">&#9670;&nbsp;</a></span>get_action_observation_format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.get_action_observation_format </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>descs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Given the action, return text to be filled by the parsed args Allowed to alter
the descriptions if necessary Allowed to use the descriptions to determine the
correct format as well.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00196">196</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">def </span>get_action_observation_format(self, action, descs):</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="stringliteral">        Given the action, return text to be filled by the parsed args Allowed to alter</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="stringliteral">        the descriptions if necessary Allowed to use the descriptions to determine the</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="stringliteral">        correct format as well.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">if</span> action[<span class="stringliteral">&#39;name&#39;</span>] <span class="keywordflow">in</span> self.formats:</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="keywordflow">return</span> self.formats[action[<span class="stringliteral">&#39;name&#39;</span>]]</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">raise</span> NotImplementedError</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a0994341bec72be122101ce59da936882"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0994341bec72be122101ce59da936882">&#9670;&nbsp;</a></span>get_canonical_form()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.get_canonical_form </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get canonical form for the given args on this function.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00447">447</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keyword">def </span>get_canonical_form(self, graph, args):</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="stringliteral">        Get canonical form for the given args on this function.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;ALL&#39;</span> <span class="keywordflow">in</span> self.possible_arg_nums:</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="comment"># All is reserved for functions that take all arguments</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39; &#39;</span>.join(args)</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        loc = graph.location(args[0])</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        text_args = [graph.node_to_desc_raw(i, from_id=loc) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> args]</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">if</span> len(args) == 1:</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordflow">return</span> self.get_name()</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">if</span> len(self.arg_split_words) == 0 <span class="keywordflow">or</span> len(args) == 2:</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">return</span> self.get_name() + <span class="stringliteral">&#39; &#39;</span> + text_args[1]</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">return</span> (</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            self.get_name()</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            + <span class="stringliteral">&#39; &#39;</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            + (<span class="stringliteral">&#39; &#39;</span> + self.arg_split_words[0] + <span class="stringliteral">&#39; &#39;</span>).join(text_args[1:])</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        )</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="ab20674b5c6c05a6c5188e51bc991717f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab20674b5c6c05a6c5188e51bc991717f">&#9670;&nbsp;</a></span>get_failure_action()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.get_failure_action </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>spec_fail</em> = <code>'failed'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns an action for if the resolution of this function fails.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00206">206</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">def </span>get_failure_action(self, graph, args, spec_fail=&#39;failed&#39;):</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="stringliteral">        Returns an action for if the resolution of this function fails.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">return</span> {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="stringliteral">&#39;caller&#39;</span>: self.get_name(),</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="stringliteral">&#39;name&#39;</span>: spec_fail,</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="stringliteral">&#39;actors&#39;</span>: args,</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="stringliteral">&#39;room_id&#39;</span>: graph.location(args[0]),</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a9c89db357c2eb4c4833d7f975df2e85d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c89db357c2eb4c4833d7f975df2e85d">&#9670;&nbsp;</a></span>get_find_fail_text()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.get_find_fail_text </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arg_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Text displayed when an arg find during parse_text_to_args call fails to find
valid targets for the function.

Can be overridden to provide different messages for different failed arguments.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00217">217</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keyword">def </span>get_find_fail_text(self, arg_idx):</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="stringliteral">        Text displayed when an arg find during parse_text_to_args call fails to find</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="stringliteral">        valid targets for the function.</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="stringliteral">        Can be overridden to provide different messages for different failed arguments.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;That isn\&#39;t here&#39;</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a4ffab7ed0e956a6bc76e3f61818ab5ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ffab7ed0e956a6bc76e3f61818ab5ff">&#9670;&nbsp;</a></span>get_improper_args_text()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.get_improper_args_text </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00226">226</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keyword">def </span>get_improper_args_text(self, num_args):</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;Couldn\&#39;t understand that. Try help for help with commands&#39;</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a6fb123ff0ec87dde23a5ce8a1614bbbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fb123ff0ec87dde23a5ce8a1614bbbe">&#9670;&nbsp;</a></span>get_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.get_name </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get the canonical name of this function.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00438">438</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keyword">def </span>get_name(self):</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="stringliteral">        Get the canonical name of this function.</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        name = self.name</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">if</span> <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad5dfae268e23f506da084a9efb72f619">type</a>(name) <span class="keywordflow">is</span> list:</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            name = name[0]</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">return</span> name</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_ad5dfae268e23f506da084a9efb72f619"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad5dfae268e23f506da084a9efb72f619">parlai.agents.tfidf_retriever.build_tfidf.type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00339">build_tfidf.py:339</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7929e44e5afafd4d27418c7fe5a2fe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7929e44e5afafd4d27418c7fe5a2fe0">&#9670;&nbsp;</a></span>get_reverse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.get_reverse </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Function to parse the graph and args and return the reverse function and args.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00466">466</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keyword">def </span>get_reverse(self, graph, args):</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="stringliteral">        Function to parse the graph and args and return the reverse function and args.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">return</span> <span class="keywordtype">None</span>, []</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a21e2dd1c8eb431b3ee22cce4853e3c15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21e2dd1c8eb431b3ee22cce4853e3c15">&#9670;&nbsp;</a></span>handle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.handle </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00154">154</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">def </span>handle(self, graph, args):</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment"># if Callbacks.try_overrides(self, graph, args):</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="comment">#     return True</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        is_constrained, _cons_passed, failure_action = self.evaluate_constraint_set(</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            graph, args, self.func_constraints</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        )</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_constrained:</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            func_failure_action = self.get_failure_action(graph, args)</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="comment"># What failed?</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            graph.send_action(args[0], func_failure_action)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="comment"># Why it failed</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            graph.send_action(args[0], failure_action)</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="comment"># callback_args = deepcopy(args)</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        is_successful = self.func(graph, args)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment"># if is_successful:</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">#     Callbacks.handle_callbacks(self, graph, args)</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="comment">#     # TODO move callbacks call functionality elsewhere so other things</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">#     # can call callbacks</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">#     for trigger in self.callback_triggers:</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="comment">#         for arg in trigger[&#39;args&#39;]:</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="comment">#             if arg &gt;= len(callback_args):</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="comment">#                 break  # Don&#39;t have enough args for this callback</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="comment">#             acting_agent = callback_args[arg]</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">#             callbacks = graph.get_prop(acting_agent, &#39;callbacks&#39;, {})</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="comment">#             if trigger[&#39;action&#39;] in callbacks:</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">#                 use_args = [callback_args[i] for i in trigger[&#39;args&#39;]]</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="comment">#                 Callbacks.handle(graph, callbacks[trigger[&#39;action&#39;]],</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="comment">#                                  use_args)</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">return</span> is_successful</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a8b76e8a8bb07f75abd081e220683dbd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b76e8a8bb07f75abd081e220683dbd4">&#9670;&nbsp;</a></span>parse_descs_to_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.parse_descs_to_args </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">iterates through the args and the constraints, solving dependency order on the
fly.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00395">395</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keyword">def </span>parse_descs_to_args(self, graph, args):</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="stringliteral">        iterates through the args and the constraints, solving dependency order on the</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="stringliteral">        fly.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="comment"># TODO improve performance by instead constructing a dependency graph</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="comment"># at runtime to avoid repeat passes through the loop and to prevent</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="comment"># circular dependencies</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        args = [a.lower() <span class="keywordflow">for</span> a <span class="keywordflow">in</span> args]</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        success, output_args, text_args = self.try_callback_override_args(graph, args)</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">if</span> success:</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="keywordflow">return</span> success, output_args, text_args</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        output_args = [<span class="keywordtype">None</span>] * (len(args))</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        output_args[0] = args[0]</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;ALL&#39;</span> <span class="keywordflow">in</span> self.possible_arg_nums:</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            output_args[1] = <span class="stringliteral">&#39; &#39;</span>.join(args[1:])</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">True</span>, output_args, output_args</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        args = [arg.lower() <span class="keywordflow">for</span> arg <span class="keywordflow">in</span> args]</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="comment"># While there are still arguments to fill</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">if</span> <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad5dfae268e23f506da084a9efb72f619">type</a>(self.arg_find_type[0]) <span class="keywordflow">is</span> list:</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            arg_find_idx = 0</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            success = <span class="keyword">False</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">while</span> arg_find_idx &lt; len(self.arg_find_type[0]) <span class="keywordflow">and</span> <span class="keywordflow">not</span> success:</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                output_args = [<span class="keywordtype">None</span>] * (len(args))</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                output_args[0] = args[0]</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                success, res, output_args = self.parse_descs_to_args_helper(</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    graph, args, output_args, arg_find_idx</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                )</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                arg_find_idx += 1</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            success, res, output_args = self.parse_descs_to_args_helper(</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                graph, args, output_args</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            )</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">if</span> success:</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="comment"># Determine canonical arguments</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            loc = graph.location(output_args[0])</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            text_args = [graph.node_to_desc_raw(i, from_id=loc) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> output_args]</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">True</span>, output_args, text_args</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">return</span> success, res, output_args</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_ad5dfae268e23f506da084a9efb72f619"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad5dfae268e23f506da084a9efb72f619">parlai.agents.tfidf_retriever.build_tfidf.type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00339">build_tfidf.py:339</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33a25a071385ffbd0a222cab65c543d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33a25a071385ffbd0a222cab65c543d4">&#9670;&nbsp;</a></span>parse_descs_to_args_helper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.parse_descs_to_args_helper </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arg_find_idx</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00336">336</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keyword">def </span>parse_descs_to_args_helper(self, graph, args, output_args, arg_find_idx=None):</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        args = [a.lower() <span class="keywordflow">for</span> a <span class="keywordflow">in</span> args]</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">for</span> arg_idx, arg_id <span class="keywordflow">in</span> enumerate(output_args):</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordflow">if</span> arg_id <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:  <span class="comment"># This was processed in an earlier pass</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            arg_find_type = self.arg_find_type[arg_idx]</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">if</span> arg_find_idx <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                arg_find_type = arg_find_type[arg_find_idx]</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            nearby_idx = arg_find_type[<span class="stringliteral">&#39;from&#39;</span>]</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="comment"># we cant process a from when the nearby hasn&#39;t been found</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keywordflow">if</span> output_args[nearby_idx] <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            nearbyid = output_args[nearby_idx]</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="comment"># Make sure we have all the constraints filled</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            constraints = self.arg_constraints[arg_idx]</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            have_all_args = <span class="keyword">True</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">for</span> constraint <span class="keywordflow">in</span> constraints:</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <span class="keywordflow">for</span> alt_id_idx <span class="keywordflow">in</span> constraint[<span class="stringliteral">&#39;in_args&#39;</span>]:</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    <span class="keywordflow">if</span> arg_idx == alt_id_idx:</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                        <span class="keywordflow">continue</span>  <span class="comment"># We plan to fill this slot with a guess</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                    <span class="keywordflow">if</span> output_args[alt_id_idx] <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                        <span class="comment"># We don&#39;t have all the constraints for this</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                        have_all_args = <span class="keyword">False</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> have_all_args:</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="comment"># Get the possible IDs from the graph in the area</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            arg_text = args[arg_idx]</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            possible_ids = graph.desc_to_nodes(</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                arg_text, nearbyid, arg_find_type[<span class="stringliteral">&#39;type&#39;</span>]</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            )</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="comment"># can&#39;t have reflexive actions with the same arg</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordflow">for</span> had_id <span class="keywordflow">in</span> output_args:</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <span class="keywordflow">if</span> had_id <span class="keywordflow">in</span> possible_ids:</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                    possible_ids.remove(had_id)</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            res = <span class="keywordtype">None</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keywordflow">while</span> len(possible_ids) &gt; 0:</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <span class="comment"># See if any match the constraints</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                success, res = self.check_possibilites_vs_constraints(</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    graph, output_args, arg_idx, possible_ids</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                )</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <span class="keywordflow">if</span> success:</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    output_args[arg_idx] = res</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    possible_ids.remove(res)</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                    success_again, res, _args = self.parse_descs_to_args_helper(</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                        graph, args, output_args, arg_find_idx</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    )</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                    <span class="keywordflow">if</span> success_again:</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">True</span>, <span class="keywordtype">None</span>, output_args  <span class="comment"># success!</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                <span class="keywordflow">elif</span> res <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">False</span>, res, args  <span class="comment"># failure case, no matching option</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    <span class="keywordflow">break</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">if</span> res <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">False</span>, res, args  <span class="comment"># failure case, no matching option</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span>, self.get_find_fail_text(arg_idx), <span class="keywordtype">None</span>  <span class="comment"># failed find</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">True</span>, <span class="stringliteral">&#39;&#39;</span>, output_args  <span class="comment"># base case, all filled</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a3b6764b365baf7471e53651adf83706b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b6764b365baf7471e53651adf83706b">&#9670;&nbsp;</a></span>parse_text_to_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.parse_text_to_args </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>actor_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Breaks text into function arguments based on this function's
delimiters
Returns:
(None, display text, None) if parsing failed to find valid candidates
(True, arg_ids, canonical_text_args) if parsing and constraints succeed
(False, Failure action, matched_args)
if parsing succeeds but constraints fail
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00278">278</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keyword">def </span>parse_text_to_args(self, graph, actor_id, text):</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Breaks text into function arguments based on this function&#39;s</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="stringliteral">        delimiters</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="stringliteral">        (None, display text, None) if parsing failed to find valid candidates</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="stringliteral">        (True, arg_ids, canonical_text_args) if parsing and constraints succeed</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="stringliteral">        (False, Failure action, matched_args)</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="stringliteral">                if parsing succeeds but constraints fail</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        actor_id = actor_id.lower()</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        c_arg = []</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        descs = [actor_id]</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">for</span> word <span class="keywordflow">in</span> text:</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">if</span> word.lower() <span class="keywordflow">in</span> self.arg_split_words:</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                descs.append(<span class="stringliteral">&#39; &#39;</span>.join(c_arg))</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                c_arg = []</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                c_arg.append(word)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">if</span> len(c_arg) != 0:</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            descs.append(<span class="stringliteral">&#39; &#39;</span>.join(c_arg))</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">if</span> (</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            len(descs) <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.possible_arg_nums</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">and</span> <span class="stringliteral">&#39;ALL&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.possible_arg_nums</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        ):</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">return</span> (<span class="keywordtype">None</span>, self.get_improper_args_text(len(descs)), <span class="keywordtype">None</span>)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">return</span> self.parse_descs_to_args(graph, descs)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a9769b13542f28f04977e374057bbc017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9769b13542f28f04977e374057bbc017">&#9670;&nbsp;</a></span>try_callback_override_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.try_callback_override_args </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00305">305</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keyword">def </span>try_callback_override_args(self, graph, args):</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        output_args = [<span class="keywordtype">None</span>] * (len(args))</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        output_args[0] = args[0]</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        args = [arg.lower() <span class="keywordflow">for</span> arg <span class="keywordflow">in</span> args]</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="comment"># While there are still arguments to fill</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">while</span> <span class="keywordtype">None</span> <span class="keywordflow">in</span> output_args:</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">for</span> arg_idx, arg_id <span class="keywordflow">in</span> enumerate(output_args):</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="keywordflow">if</span> arg_id <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:  <span class="comment"># This was processed in an earlier pass</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                nearbyid = output_args[0]</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="comment"># Get the possible IDs from the graph in the area</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                arg_text = args[arg_idx]</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                possible_ids = graph.desc_to_nodes(arg_text, nearbyid, <span class="stringliteral">&#39;all+here&#39;</span>)</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <span class="comment"># can&#39;t have reflexive actions with the same arg</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="keywordflow">for</span> had_id <span class="keywordflow">in</span> output_args:</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                    <span class="keywordflow">if</span> had_id <span class="keywordflow">in</span> possible_ids:</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                        possible_ids.remove(had_id)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">if</span> len(possible_ids) == 0:</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    <span class="keywordflow">return</span> <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                output_args[arg_idx] = possible_ids[0]</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="comment"># Determine canonical arguments</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="comment"># if Callbacks.has_valid_override(self, graph, output_args):</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="comment">#     loc = graph.location(output_args[0])</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="comment">#     text_args = \</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="comment">#         [graph.node_to_desc_raw(i, from_id=loc) for i in output_args]</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="comment">#     return True, output_args, text_args</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">return</span> <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a8ac297dcadb1e5ec360f55f293dcbfcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ac297dcadb1e5ec360f55f293dcbfcb">&#9670;&nbsp;</a></span>valid_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def light_chats.graph.GraphFunction.valid_args </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00135">135</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">def </span>valid_args(self, graph, args):</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;ALL&#39;</span> <span class="keywordflow">in</span> self.possible_arg_nums <span class="keywordflow">and</span> len(args) &gt;= 2:</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">True</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span> len(args) <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.possible_arg_nums:</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        args = [a.lower() <span class="keywordflow">for</span> a <span class="keywordflow">in</span> args]</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        loc = graph.location(args[0])</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="comment"># convert the arguments supplied to text form</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        text_args = [graph.node_to_desc_raw(i, from_id=loc).lower() <span class="keywordflow">for</span> i <span class="keywordflow">in</span> args]</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment"># ensure that those are valid from the parser perspective</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        valid, args, _args = self.parse_descs_to_args(graph, text_args)</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> valid:</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="comment"># ensure that they pass the function constraints</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        valid, _cons_passed, _failure = self.evaluate_constraint_set(</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            graph, args, self.func_constraints</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        )</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">return</span> valid</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a88e5637deee00b7f2f5d682afea0e85d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88e5637deee00b7f2f5d682afea0e85d">&#9670;&nbsp;</a></span>arg_constraints</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">light_chats.graph.GraphFunction.arg_constraints</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00128">128</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>

</div>
</div>
<a id="a6845a255ccdfcaa58debca3157f7adb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6845a255ccdfcaa58debca3157f7adb7">&#9670;&nbsp;</a></span>arg_find_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">light_chats.graph.GraphFunction.arg_find_type</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00127">127</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>

</div>
</div>
<a id="a20251500fbafb95c381e0c0bf9f37376"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20251500fbafb95c381e0c0bf9f37376">&#9670;&nbsp;</a></span>arg_split_words</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">light_chats.graph.GraphFunction.arg_split_words</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00126">126</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>

</div>
</div>
<a id="a5fc1640403f59d0358e1dccea3682487"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fc1640403f59d0358e1dccea3682487">&#9670;&nbsp;</a></span>callback_triggers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">light_chats.graph.GraphFunction.callback_triggers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00130">130</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>

</div>
</div>
<a id="a40c1214e286a5c8ca375aae48bf36d89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40c1214e286a5c8ca375aae48bf36d89">&#9670;&nbsp;</a></span>format_observation</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">light_chats.graph.GraphFunction.format_observation</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00133">133</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>

</div>
</div>
<a id="aa5b75544ede241f8635e4d6c99ed6a3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5b75544ede241f8635e4d6c99ed6a3b">&#9670;&nbsp;</a></span>formats</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">light_chats.graph.GraphFunction.formats</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00131">131</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>

</div>
</div>
<a id="a46da34454c8776f43d4102c74a650334"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46da34454c8776f43d4102c74a650334">&#9670;&nbsp;</a></span>func_constraints</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">light_chats.graph.GraphFunction.func_constraints</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00129">129</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>

</div>
</div>
<a id="afb7e1d1d49ff540be034f685f4d1e337"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb7e1d1d49ff540be034f685f4d1e337">&#9670;&nbsp;</a></span>name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">light_chats.graph.GraphFunction.name</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00124">124</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>

</div>
</div>
<a id="a2d40c8aa5303afce9e93be14593fca78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d40c8aa5303afce9e93be14593fca78">&#9670;&nbsp;</a></span>possible_arg_nums</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">light_chats.graph.GraphFunction.possible_arg_nums</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html#l00125">125</a> of file <a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>parlai/mturk/tasks/light/light_chats/<a class="el" href="../../d5/daa/parlai_2mturk_2tasks_2light_2light__chats_2graph_8py_source.html">graph.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
