<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParlAI: parlai.agents.tfidf_retriever.build_tfidf Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ParlAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d5/d22/namespaceparlai.html">parlai</a></li><li class="navelem"><a class="el" href="../../dd/d61/namespaceparlai_1_1agents.html">agents</a></li><li class="navelem"><a class="el" href="../../db/d36/namespaceparlai_1_1agents_1_1tfidf__retriever.html">tfidf_retriever</a></li><li class="navelem"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html">build_tfidf</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">parlai.agents.tfidf_retriever.build_tfidf Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a297d8a6b3ed43b31feccf5707517fee3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a297d8a6b3ed43b31feccf5707517fee3">init</a> (tokenizer_class, db_opts)</td></tr>
<tr class="separator:a297d8a6b3ed43b31feccf5707517fee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f16fdf4641c497d12c19f128ed4647a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a8f16fdf4641c497d12c19f128ed4647a">fetch_text</a> (doc_id)</td></tr>
<tr class="separator:a8f16fdf4641c497d12c19f128ed4647a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fdb457e98eb4e4c26047e229686a616"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a1fdb457e98eb4e4c26047e229686a616">tokenize</a> (text)</td></tr>
<tr class="separator:a1fdb457e98eb4e4c26047e229686a616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bd546d494142d2d7e2772a3d60583f9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a5bd546d494142d2d7e2772a3d60583f9">truncate</a> (data, row, col)</td></tr>
<tr class="separator:a5bd546d494142d2d7e2772a3d60583f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ec5dffcb27b7ce23ea0a0e37ef2398d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a7ec5dffcb27b7ce23ea0a0e37ef2398d">sparse_nonzero</a> (sparse_t)</td></tr>
<tr class="separator:a7ec5dffcb27b7ce23ea0a0e37ef2398d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8852c505db2852b5e39be3468a9c1733"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a8852c505db2852b5e39be3468a9c1733">sparse_sum</a> (sparse_t)</td></tr>
<tr class="separator:a8852c505db2852b5e39be3468a9c1733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89650718966a5b0d1114e8b06b8c0dcc"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a89650718966a5b0d1114e8b06b8c0dcc">sparse_log1p</a> (sparse_t)</td></tr>
<tr class="separator:a89650718966a5b0d1114e8b06b8c0dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af51dc8629608fd04435739ba76b1e8f2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#af51dc8629608fd04435739ba76b1e8f2">live_count_matrix</a> (<a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#aa48318cbcc3882ee8fe371c672cbf941">args</a>, cands)</td></tr>
<tr class="separator:af51dc8629608fd04435739ba76b1e8f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a82e7b8a6efb75fb73be53b55a7787"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#af6a82e7b8a6efb75fb73be53b55a7787">live_count_matrix_t</a> (<a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#aa48318cbcc3882ee8fe371c672cbf941">args</a>, cands)</td></tr>
<tr class="separator:af6a82e7b8a6efb75fb73be53b55a7787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76bae1c966a21d123cb91949d6c8ec20"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a76bae1c966a21d123cb91949d6c8ec20">count_text</a> (ngram, hash_size, doc_id, text=<a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad50f77b70c0e27d3304395c58e9212c4">None</a>)</td></tr>
<tr class="separator:a76bae1c966a21d123cb91949d6c8ec20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fc352c82f4a875b23fec3b046027039"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a7fc352c82f4a875b23fec3b046027039">count</a> (ngram, hash_size, doc_id)</td></tr>
<tr class="separator:a7fc352c82f4a875b23fec3b046027039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac277ce99c037a483df09e82cfdbe4665"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ac277ce99c037a483df09e82cfdbe4665">get_count_matrix_t</a> (<a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#aa48318cbcc3882ee8fe371c672cbf941">args</a>, db_opts)</td></tr>
<tr class="separator:ac277ce99c037a483df09e82cfdbe4665"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d95180be94e232e3ebc748c8aa7b9a0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a0d95180be94e232e3ebc748c8aa7b9a0">get_count_matrix</a> (<a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#aa48318cbcc3882ee8fe371c672cbf941">args</a>, db_opts)</td></tr>
<tr class="separator:a0d95180be94e232e3ebc748c8aa7b9a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd67edc9bfd76a8eeb49add2de75019"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a3cd67edc9bfd76a8eeb49add2de75019">get_tfidf_matrix_t</a> (cnts)</td></tr>
<tr class="separator:a3cd67edc9bfd76a8eeb49add2de75019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acce651a5b40c5a3b4009181f22c69eaa"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#acce651a5b40c5a3b4009181f22c69eaa">get_tfidf_matrix</a> (cnts)</td></tr>
<tr class="separator:acce651a5b40c5a3b4009181f22c69eaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a284d006ecb031c337c64d7debe1407d3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a284d006ecb031c337c64d7debe1407d3">get_doc_freqs_t</a> (cnts)</td></tr>
<tr class="separator:a284d006ecb031c337c64d7debe1407d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6883ed21006848661f6c748f91aff56"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ac6883ed21006848661f6c748f91aff56">get_doc_freqs</a> (cnts)</td></tr>
<tr class="separator:ac6883ed21006848661f6c748f91aff56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d8cca9dbdf0fa23d25e81ec2a96b347"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a0d8cca9dbdf0fa23d25e81ec2a96b347">run</a> (<a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#aa48318cbcc3882ee8fe371c672cbf941">args</a>)</td></tr>
<tr class="separator:a0d8cca9dbdf0fa23d25e81ec2a96b347"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a685888e410b4ff0977b0b750edda9db5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a685888e410b4ff0977b0b750edda9db5">fmt</a></td></tr>
<tr class="separator:a685888e410b4ff0977b0b750edda9db5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5c3818e71ddea3c79328d8a4c423047"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ae5c3818e71ddea3c79328d8a4c423047">PROCESS_TOK</a></td></tr>
<tr class="separator:ae5c3818e71ddea3c79328d8a4c423047"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ac3f448b895f9daae56e01bbf1be70"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a27ac3f448b895f9daae56e01bbf1be70">PROCESS_DB</a></td></tr>
<tr class="separator:a27ac3f448b895f9daae56e01bbf1be70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae004cad36f1e393ce6c158058a526eeb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ae004cad36f1e393ce6c158058a526eeb">MAX_SZ</a></td></tr>
<tr class="separator:ae004cad36f1e393ce6c158058a526eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21ca3f18c69cd5e11f4f9ec6505e0a24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a21ca3f18c69cd5e11f4f9ec6505e0a24">parser</a></td></tr>
<tr class="separator:a21ca3f18c69cd5e11f4f9ec6505e0a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5dfae268e23f506da084a9efb72f619"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad5dfae268e23f506da084a9efb72f619">type</a> = <a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a213e3a3970a4f1423c2cc41e5f31295e">str</a>,</td></tr>
<tr class="separator:ad5dfae268e23f506da084a9efb72f619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57d9eff8ee0e54e71c094de21fc72684"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a57d9eff8ee0e54e71c094de21fc72684">default</a> = <a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad50f77b70c0e27d3304395c58e9212c4">None</a>,</td></tr>
<tr class="separator:a57d9eff8ee0e54e71c094de21fc72684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a078522f7d10d021f5e4855b140fc9666"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a078522f7d10d021f5e4855b140fc9666">help</a> = 'Path to sqlite db holding document texts',</td></tr>
<tr class="separator:a078522f7d10d021f5e4855b140fc9666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a213e3a3970a4f1423c2cc41e5f31295e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a213e3a3970a4f1423c2cc41e5f31295e">str</a></td></tr>
<tr class="separator:a213e3a3970a4f1423c2cc41e5f31295e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad50f77b70c0e27d3304395c58e9212c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad50f77b70c0e27d3304395c58e9212c4">None</a></td></tr>
<tr class="separator:ad50f77b70c0e27d3304395c58e9212c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa48318cbcc3882ee8fe371c672cbf941"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#aa48318cbcc3882ee8fe371c672cbf941">args</a></td></tr>
<tr class="separator:aa48318cbcc3882ee8fe371c672cbf941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe20f2925824bab82a89672734347544"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#afe20f2925824bab82a89672734347544">count_matrix</a></td></tr>
<tr class="separator:afe20f2925824bab82a89672734347544"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c3915a9ffe251347f232647caff959"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a09c3915a9ffe251347f232647caff959">doc_dict</a></td></tr>
<tr class="separator:a09c3915a9ffe251347f232647caff959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a853d823973f2fcc211470e764e29e3d2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a853d823973f2fcc211470e764e29e3d2">tfidf</a></td></tr>
<tr class="separator:a853d823973f2fcc211470e764e29e3d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82fd1621e57caaa8ff7a9c27b0e94125"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a82fd1621e57caaa8ff7a9c27b0e94125">freqs</a></td></tr>
<tr class="separator:a82fd1621e57caaa8ff7a9c27b0e94125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a314a0288fcdf731f21e279e9f7b27a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a0a314a0288fcdf731f21e279e9f7b27a">basename</a></td></tr>
<tr class="separator:a0a314a0288fcdf731f21e279e9f7b27a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcbd4a0d6b9f9e9d88008c66912778cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#afcbd4a0d6b9f9e9d88008c66912778cf">filename</a></td></tr>
<tr class="separator:afcbd4a0d6b9f9e9d88008c66912778cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c62403fcedaf6bc33fc200088621f86"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a8c62403fcedaf6bc33fc200088621f86">metadata</a></td></tr>
<tr class="separator:a8c62403fcedaf6bc33fc200088621f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7fc352c82f4a875b23fec3b046027039"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fc352c82f4a875b23fec3b046027039">&#9670;&nbsp;</a></span>count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.count </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ngram</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>hash_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>doc_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Fetch the text of a document and compute hashed ngrams counts.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00150">150</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a7fc352c82f4a875b23fec3b046027039">count</a>(ngram, hash_size, doc_id):</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="stringliteral">    Fetch the text of a document and compute hashed ngrams counts.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a76bae1c966a21d123cb91949d6c8ec20">count_text</a>(ngram, hash_size, doc_id, text=<a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a8f16fdf4641c497d12c19f128ed4647a">fetch_text</a>(doc_id))</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a8f16fdf4641c497d12c19f128ed4647a"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a8f16fdf4641c497d12c19f128ed4647a">parlai.agents.tfidf_retriever.build_tfidf.fetch_text</a></div><div class="ttdeci">def fetch_text(doc_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00047">build_tfidf.py:47</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a7fc352c82f4a875b23fec3b046027039"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a7fc352c82f4a875b23fec3b046027039">parlai.agents.tfidf_retriever.build_tfidf.count</a></div><div class="ttdeci">def count(ngram, hash_size, doc_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00150">build_tfidf.py:150</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a76bae1c966a21d123cb91949d6c8ec20"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a76bae1c966a21d123cb91949d6c8ec20">parlai.agents.tfidf_retriever.build_tfidf.count_text</a></div><div class="ttdeci">def count_text(ngram, hash_size, doc_id, text=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00129">build_tfidf.py:129</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76bae1c966a21d123cb91949d6c8ec20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76bae1c966a21d123cb91949d6c8ec20">&#9670;&nbsp;</a></span>count_text()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.count_text </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ngram</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>hash_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>doc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text</em> = <code><a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad50f77b70c0e27d3304395c58e9212c4">None</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute hashed ngram counts of text.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00129">129</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a76bae1c966a21d123cb91949d6c8ec20">count_text</a>(ngram, hash_size, doc_id, text=None):</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="stringliteral">    Compute hashed ngram counts of text.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    row, col, data = [], [], []</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment"># Tokenize</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    tokens = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a1fdb457e98eb4e4c26047e229686a616">tokenize</a>(utils.normalize(text))</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment"># Get ngrams from tokens, with stopword/punctuation filtering.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    ngrams = tokens.ngrams(n=ngram, uncased=<span class="keyword">True</span>, filter_fn=utils.filter_ngram)</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment"># Hash ngrams and count occurences</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    counts = Counter([utils.hash(gram, hash_size) <span class="keywordflow">for</span> gram <span class="keywordflow">in</span> ngrams])</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment"># Return in sparse matrix data format.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    row.extend(counts.keys())</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    col.extend([doc_id] * len(counts))</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    data.extend(counts.values())</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> row, col, data</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a1fdb457e98eb4e4c26047e229686a616"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a1fdb457e98eb4e4c26047e229686a616">parlai.agents.tfidf_retriever.build_tfidf.tokenize</a></div><div class="ttdeci">def tokenize(text)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00052">build_tfidf.py:52</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a76bae1c966a21d123cb91949d6c8ec20"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a76bae1c966a21d123cb91949d6c8ec20">parlai.agents.tfidf_retriever.build_tfidf.count_text</a></div><div class="ttdeci">def count_text(ngram, hash_size, doc_id, text=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00129">build_tfidf.py:129</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f16fdf4641c497d12c19f128ed4647a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f16fdf4641c497d12c19f128ed4647a">&#9670;&nbsp;</a></span>fetch_text()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.fetch_text </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>doc_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00047">47</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a8f16fdf4641c497d12c19f128ed4647a">fetch_text</a>(doc_id):</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keyword">global</span> PROCESS_DB</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">return</span> PROCESS_DB.get_doc_text(doc_id)</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a8f16fdf4641c497d12c19f128ed4647a"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a8f16fdf4641c497d12c19f128ed4647a">parlai.agents.tfidf_retriever.build_tfidf.fetch_text</a></div><div class="ttdeci">def fetch_text(doc_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00047">build_tfidf.py:47</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d95180be94e232e3ebc748c8aa7b9a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d95180be94e232e3ebc748c8aa7b9a0">&#9670;&nbsp;</a></span>get_count_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.get_count_matrix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>db_opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Form a sparse word to document count matrix (inverted index).

M[i, j] = # times word i appears in document j.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00197">197</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a0d95180be94e232e3ebc748c8aa7b9a0">get_count_matrix</a>(args, db_opts):</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="stringliteral">    Form a sparse word to document count matrix (inverted index).</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="stringliteral">    M[i, j] = # times word i appears in document j.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">global</span> MAX_SZ</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    with DocDB(**db_opts) <span class="keyword">as</span> doc_db:</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        doc_ids = doc_db.get_doc_ids()</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment"># Setup worker pool</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    tok_class = tokenizers.get_class(args.tokenizer)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    workers = ProcessPool(</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        args.num_workers, initializer=init, initargs=(tok_class, db_opts)</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    )</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment"># Compute the count matrix in steps (to keep in memory)</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    logger.info(<span class="stringliteral">&#39;Mapping...&#39;</span>)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    row, col, data = [], [], []</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    step = max(<a class="code" href="../../de/d7c/namespacelanguage__model_1_1eval__ppl.html#a7d12ee00479673c5c8d1f6d01faa272a">int</a>(len(doc_ids) / 10), 1)</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    batches = [doc_ids[i : i + step] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, len(doc_ids), step)]</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    _count = partial(count, args.ngram, args.hash_size)</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">for</span> i, batch <span class="keywordflow">in</span> enumerate(batches):</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        logger.info(<span class="stringliteral">&#39;-&#39;</span> * 25 + <span class="stringliteral">&#39;Batch %d/%d&#39;</span> % (i + 1, len(batches)) + <span class="stringliteral">&#39;-&#39;</span> * 25)</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">for</span> b_row, b_col, b_data <span class="keywordflow">in</span> workers.imap_unordered(_count, batch):</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            row.extend(b_row)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            col.extend(b_col)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            data.extend(b_data)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordflow">if</span> len(data) &gt; MAX_SZ:</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="keywordflow">break</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">if</span> len(data) &gt; MAX_SZ:</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            logger.info(<span class="stringliteral">&#39;Reached max indexable size, breaking.&#39;</span>)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="keywordflow">break</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    workers.close()</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    workers.join()</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    logger.info(<span class="stringliteral">&#39;Creating sparse matrix...&#39;</span>)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    data, row, col = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a5bd546d494142d2d7e2772a3d60583f9">truncate</a>(data, row, col)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    count_matrix = sp.csr_matrix(</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        (data, (row, col)), shape=(args.hash_size, len(doc_ids) + 1)</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    )</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    count_matrix.sum_duplicates()</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">return</span> count_matrix</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"># Transform count matrix to different forms.</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a5bd546d494142d2d7e2772a3d60583f9"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a5bd546d494142d2d7e2772a3d60583f9">parlai.agents.tfidf_retriever.build_tfidf.truncate</a></div><div class="ttdeci">def truncate(data, row, col)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00064">build_tfidf.py:64</a></div></div>
<div class="ttc" id="namespacelanguage__model_1_1eval__ppl_html_a7d12ee00479673c5c8d1f6d01faa272a"><div class="ttname"><a href="../../de/d7c/namespacelanguage__model_1_1eval__ppl.html#a7d12ee00479673c5c8d1f6d01faa272a">language_model.eval_ppl.int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d84/projects_2convai2_2baselines_2language__model_2eval__ppl_8py_source.html#l00102">eval_ppl.py:102</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a0d95180be94e232e3ebc748c8aa7b9a0"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a0d95180be94e232e3ebc748c8aa7b9a0">parlai.agents.tfidf_retriever.build_tfidf.get_count_matrix</a></div><div class="ttdeci">def get_count_matrix(args, db_opts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00197">build_tfidf.py:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac277ce99c037a483df09e82cfdbe4665"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac277ce99c037a483df09e82cfdbe4665">&#9670;&nbsp;</a></span>get_count_matrix_t()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.get_count_matrix_t </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>db_opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Form a sparse word to document count matrix (inverted index, torch ver).

M[i, j] = # times word i appears in document j.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00157">157</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ac277ce99c037a483df09e82cfdbe4665">get_count_matrix_t</a>(args, db_opts):</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="stringliteral">    Form a sparse word to document count matrix (inverted index, torch ver).</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="stringliteral">    M[i, j] = # times word i appears in document j.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keyword">global</span> MAX_SZ</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    with DocDB(**db_opts) <span class="keyword">as</span> doc_db:</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        doc_ids = doc_db.get_doc_ids()</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment"># Setup worker pool</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    tok_class = tokenizers.get_class(args.tokenizer)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    workers = ProcessPool(</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        args.num_workers, initializer=init, initargs=(tok_class, db_opts)</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    )</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment"># Compute the count matrix in steps (to keep in memory)</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    logger.info(<span class="stringliteral">&#39;Mapping...&#39;</span>)</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    row, col, data = [], [], []</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    step = max(<a class="code" href="../../de/d7c/namespacelanguage__model_1_1eval__ppl.html#a7d12ee00479673c5c8d1f6d01faa272a">int</a>(len(doc_ids) / 10), 1)</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    batches = [doc_ids[i : i + step] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, len(doc_ids), step)]</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    _count = partial(count, args.ngram, args.hash_size)</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">for</span> i, batch <span class="keywordflow">in</span> enumerate(batches):</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        logger.info(<span class="stringliteral">&#39;-&#39;</span> * 25 + <span class="stringliteral">&#39;Batch %d/%d&#39;</span> % (i + 1, len(batches)) + <span class="stringliteral">&#39;-&#39;</span> * 25)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">for</span> b_row, b_col, b_data <span class="keywordflow">in</span> workers.imap_unordered(_count, batch):</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            row.extend(b_row)</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            col.extend(b_col)</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            data.extend(b_data)</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    workers.close()</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    workers.join()</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    logger.info(<span class="stringliteral">&#39;Creating sparse matrix...&#39;</span>)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    count_matrix = torch.sparse.FloatTensor(</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        torch.LongTensor([row, col]),</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        torch.FloatTensor(data),</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        torch.Size([args.hash_size, len(doc_ids) + 1]),</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    ).coalesce()</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">return</span> count_matrix</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_ac277ce99c037a483df09e82cfdbe4665"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ac277ce99c037a483df09e82cfdbe4665">parlai.agents.tfidf_retriever.build_tfidf.get_count_matrix_t</a></div><div class="ttdeci">def get_count_matrix_t(args, db_opts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00157">build_tfidf.py:157</a></div></div>
<div class="ttc" id="namespacelanguage__model_1_1eval__ppl_html_a7d12ee00479673c5c8d1f6d01faa272a"><div class="ttname"><a href="../../de/d7c/namespacelanguage__model_1_1eval__ppl.html#a7d12ee00479673c5c8d1f6d01faa272a">language_model.eval_ppl.int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d84/projects_2convai2_2baselines_2language__model_2eval__ppl_8py_source.html#l00102">eval_ppl.py:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6883ed21006848661f6c748f91aff56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6883ed21006848661f6c748f91aff56">&#9670;&nbsp;</a></span>get_doc_freqs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.get_doc_freqs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cnts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return word --&gt; # of docs it appears in.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00296">296</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ac6883ed21006848661f6c748f91aff56">get_doc_freqs</a>(cnts):</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="stringliteral">    Return word --&gt; # of docs it appears in.</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    binary = (cnts &gt; 0).astype(int)</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    freqs = np.array(binary.sum(1)).squeeze()</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> freqs</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"># Main.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"># ------------------------------------------------------------------------------</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_ac6883ed21006848661f6c748f91aff56"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ac6883ed21006848661f6c748f91aff56">parlai.agents.tfidf_retriever.build_tfidf.get_doc_freqs</a></div><div class="ttdeci">def get_doc_freqs(cnts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00296">build_tfidf.py:296</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a284d006ecb031c337c64d7debe1407d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a284d006ecb031c337c64d7debe1407d3">&#9670;&nbsp;</a></span>get_doc_freqs_t()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.get_doc_freqs_t </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cnts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return word --&gt; # of docs it appears in (torch version).
</pre> 
<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00287">287</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a284d006ecb031c337c64d7debe1407d3">get_doc_freqs_t</a>(cnts):</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="stringliteral">    Return word --&gt; # of docs it appears in (torch version).</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> torch.histc(</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        cnts._indices()[0].<a class="code" href="../../d7/dc3/namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset.html#aa2b7207688c641dbc094ab44eca27113">float</a>(), bins=cnts.size(0), min=0, max=cnts.size(0)</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    )</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a284d006ecb031c337c64d7debe1407d3"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a284d006ecb031c337c64d7debe1407d3">parlai.agents.tfidf_retriever.build_tfidf.get_doc_freqs_t</a></div><div class="ttdeci">def get_doc_freqs_t(cnts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00287">build_tfidf.py:287</a></div></div>
<div class="ttc" id="namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset_html_aa2b7207688c641dbc094ab44eca27113"><div class="ttname"><a href="../../d7/dc3/namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset.html#aa2b7207688c641dbc094ab44eca27113">projects.controllable_dialogue.make_control_dataset.float</a></div><div class="ttdeci">float</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/make__control__dataset_8py_source.html#l00117">make_control_dataset.py:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acce651a5b40c5a3b4009181f22c69eaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acce651a5b40c5a3b4009181f22c69eaa">&#9670;&nbsp;</a></span>get_tfidf_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.get_tfidf_matrix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cnts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convert the word count matrix into tfidf one.

tfidf = log(tf + 1) * log((N - Nt + 0.5) / (Nt + 0.5))
* tf = term frequency in document
* N = number of documents
* Nt = number of occurences of term in all documents
</pre> 
<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00268">268</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#acce651a5b40c5a3b4009181f22c69eaa">get_tfidf_matrix</a>(cnts):</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="stringliteral">    Convert the word count matrix into tfidf one.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="stringliteral">    tfidf = log(tf + 1) * log((N - Nt + 0.5) / (Nt + 0.5))</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="stringliteral">    * tf = term frequency in document</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="stringliteral">    * N = number of documents</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="stringliteral">    * Nt = number of occurences of term in all documents</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    Nt = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ac6883ed21006848661f6c748f91aff56">get_doc_freqs</a>(cnts)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    idfs = np.log((cnts.shape[1] - Nt + 0.5) / (Nt + 0.5))</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    idfs[idfs &lt; 0] = 0</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    idfs = sp.diags(idfs, 0)</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    tfs = cnts.log1p()</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    tfidfs = idfs.dot(tfs)</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">return</span> tfidfs</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_ac6883ed21006848661f6c748f91aff56"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ac6883ed21006848661f6c748f91aff56">parlai.agents.tfidf_retriever.build_tfidf.get_doc_freqs</a></div><div class="ttdeci">def get_doc_freqs(cnts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00296">build_tfidf.py:296</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_acce651a5b40c5a3b4009181f22c69eaa"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#acce651a5b40c5a3b4009181f22c69eaa">parlai.agents.tfidf_retriever.build_tfidf.get_tfidf_matrix</a></div><div class="ttdeci">def get_tfidf_matrix(cnts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00268">build_tfidf.py:268</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3cd67edc9bfd76a8eeb49add2de75019"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cd67edc9bfd76a8eeb49add2de75019">&#9670;&nbsp;</a></span>get_tfidf_matrix_t()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.get_tfidf_matrix_t </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cnts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convert the word count matrix into tfidf one (torch version).

tfidf = log(tf + 1) * log((N - Nt + 0.5) / (Nt + 0.5))
* tf = term frequency in document
* N = number of documents
* Nt = number of occurences of term in all documents
</pre> 
<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00248">248</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a3cd67edc9bfd76a8eeb49add2de75019">get_tfidf_matrix_t</a>(cnts):</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="stringliteral">    Convert the word count matrix into tfidf one (torch version).</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="stringliteral">    tfidf = log(tf + 1) * log((N - Nt + 0.5) / (Nt + 0.5))</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="stringliteral">    * tf = term frequency in document</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="stringliteral">    * N = number of documents</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="stringliteral">    * Nt = number of occurences of term in all documents</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    Nt = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a284d006ecb031c337c64d7debe1407d3">get_doc_freqs_t</a>(cnts)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    idft = ((cnts.size(1) - Nt + 0.5) / (Nt + 0.5)).log()</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    idft[idft &lt; 0] = 0</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    tft = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a89650718966a5b0d1114e8b06b8c0dcc">sparse_log1p</a>(cnts)</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    inds, vals = tft._indices(), tft._values()</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">for</span> i, ind <span class="keywordflow">in</span> enumerate(inds[0]):</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        vals[i] *= idft[ind]</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    tfidft = tft</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> tfidft</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a284d006ecb031c337c64d7debe1407d3"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a284d006ecb031c337c64d7debe1407d3">parlai.agents.tfidf_retriever.build_tfidf.get_doc_freqs_t</a></div><div class="ttdeci">def get_doc_freqs_t(cnts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00287">build_tfidf.py:287</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a89650718966a5b0d1114e8b06b8c0dcc"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a89650718966a5b0d1114e8b06b8c0dcc">parlai.agents.tfidf_retriever.build_tfidf.sparse_log1p</a></div><div class="ttdeci">def sparse_log1p(sparse_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00087">build_tfidf.py:87</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a3cd67edc9bfd76a8eeb49add2de75019"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a3cd67edc9bfd76a8eeb49add2de75019">parlai.agents.tfidf_retriever.build_tfidf.get_tfidf_matrix_t</a></div><div class="ttdeci">def get_tfidf_matrix_t(cnts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00248">build_tfidf.py:248</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a297d8a6b3ed43b31feccf5707517fee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a297d8a6b3ed43b31feccf5707517fee3">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.init </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tokenizer_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>db_opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00039">39</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a297d8a6b3ed43b31feccf5707517fee3">init</a>(tokenizer_class, db_opts):</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keyword">global</span> PROCESS_TOK, PROCESS_DB</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    PROCESS_TOK = tokenizer_class()</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    Finalize(PROCESS_TOK, PROCESS_TOK.shutdown, exitpriority=100)</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    PROCESS_DB = DocDB(**db_opts)</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    Finalize(PROCESS_DB, PROCESS_DB.close, exitpriority=100)</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a297d8a6b3ed43b31feccf5707517fee3"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a297d8a6b3ed43b31feccf5707517fee3">parlai.agents.tfidf_retriever.build_tfidf.init</a></div><div class="ttdeci">def init(tokenizer_class, db_opts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00039">build_tfidf.py:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af51dc8629608fd04435739ba76b1e8f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af51dc8629608fd04435739ba76b1e8f2">&#9670;&nbsp;</a></span>live_count_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.live_count_matrix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cands</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00093">93</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#af51dc8629608fd04435739ba76b1e8f2">live_count_matrix</a>(args, cands):</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keyword">global</span> PROCESS_TOK</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">if</span> PROCESS_TOK <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        PROCESS_TOK = tokenizers.get_class(args.tokenizer)()</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    row, col, data = [], [], []</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">for</span> i, c <span class="keywordflow">in</span> enumerate(cands):</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        cur_row, cur_col, cur_data = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a76bae1c966a21d123cb91949d6c8ec20">count_text</a>(args.ngram, args.hash_size, i, c)</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        row += cur_row</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        col += cur_col</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        data += cur_data</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    data, row, col = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a5bd546d494142d2d7e2772a3d60583f9">truncate</a>(data, row, col)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    count_matrix = sp.csr_matrix((data, (row, col)), shape=(args.hash_size, len(cands)))</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    count_matrix.sum_duplicates()</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span> count_matrix</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_af51dc8629608fd04435739ba76b1e8f2"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#af51dc8629608fd04435739ba76b1e8f2">parlai.agents.tfidf_retriever.build_tfidf.live_count_matrix</a></div><div class="ttdeci">def live_count_matrix(args, cands)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00093">build_tfidf.py:93</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a5bd546d494142d2d7e2772a3d60583f9"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a5bd546d494142d2d7e2772a3d60583f9">parlai.agents.tfidf_retriever.build_tfidf.truncate</a></div><div class="ttdeci">def truncate(data, row, col)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00064">build_tfidf.py:64</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a76bae1c966a21d123cb91949d6c8ec20"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a76bae1c966a21d123cb91949d6c8ec20">parlai.agents.tfidf_retriever.build_tfidf.count_text</a></div><div class="ttdeci">def count_text(ngram, hash_size, doc_id, text=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00129">build_tfidf.py:129</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6a82e7b8a6efb75fb73be53b55a7787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6a82e7b8a6efb75fb73be53b55a7787">&#9670;&nbsp;</a></span>live_count_matrix_t()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.live_count_matrix_t </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cands</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00110">110</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#af6a82e7b8a6efb75fb73be53b55a7787">live_count_matrix_t</a>(args, cands):</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keyword">global</span> PROCESS_TOK</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">if</span> PROCESS_TOK <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        PROCESS_TOK = tokenizers.get_class(args.tokenizer)()</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    row, col, data = [], [], []</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">for</span> i, c <span class="keywordflow">in</span> enumerate(cands):</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        cur_row, cur_col, cur_data = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a76bae1c966a21d123cb91949d6c8ec20">count_text</a>(args.ngram, args.hash_size, i, c)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        row += cur_row</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        col += cur_col</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        data += cur_data</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    count_matrix = torch.sparse.FloatTensor(</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        torch.LongTensor([row, col]),</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        torch.FloatTensor(data),</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        torch.Size([args.hash_size, len(cands)]),</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    ).coalesce()</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> count_matrix</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_af6a82e7b8a6efb75fb73be53b55a7787"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#af6a82e7b8a6efb75fb73be53b55a7787">parlai.agents.tfidf_retriever.build_tfidf.live_count_matrix_t</a></div><div class="ttdeci">def live_count_matrix_t(args, cands)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00110">build_tfidf.py:110</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a76bae1c966a21d123cb91949d6c8ec20"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a76bae1c966a21d123cb91949d6c8ec20">parlai.agents.tfidf_retriever.build_tfidf.count_text</a></div><div class="ttdeci">def count_text(ngram, hash_size, doc_id, text=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00129">build_tfidf.py:129</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d8cca9dbdf0fa23d25e81ec2a96b347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d8cca9dbdf0fa23d25e81ec2a96b347">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.run </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00310">310</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a0d8cca9dbdf0fa23d25e81ec2a96b347">run</a>(args):</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment"># ParlAI version of run method, modified slightly</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    logger.info(<span class="stringliteral">&#39;Counting words...&#39;</span>)</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    count_matrix = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a0d95180be94e232e3ebc748c8aa7b9a0">get_count_matrix</a>(args, {<span class="stringliteral">&#39;db_path&#39;</span>: args.db_path})</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    logger.info(<span class="stringliteral">&#39;Making tfidf vectors...&#39;</span>)</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    tfidf = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#acce651a5b40c5a3b4009181f22c69eaa">get_tfidf_matrix</a>(count_matrix)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    logger.info(<span class="stringliteral">&#39;Getting word-doc frequencies...&#39;</span>)</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    freqs = <a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ac6883ed21006848661f6c748f91aff56">get_doc_freqs</a>(count_matrix)</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    filename = args.out_dir</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    logger.info(<span class="stringliteral">&#39;Saving to %s&#39;</span> % filename)</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    metadata = {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="stringliteral">&#39;doc_freqs&#39;</span>: freqs,</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="stringliteral">&#39;tokenizer&#39;</span>: args.tokenizer,</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="stringliteral">&#39;hash_size&#39;</span>: args.hash_size,</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="stringliteral">&#39;ngram&#39;</span>: args.ngram,</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    utils.save_sparse_csr(filename, tfidf, metadata)</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_ac6883ed21006848661f6c748f91aff56"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ac6883ed21006848661f6c748f91aff56">parlai.agents.tfidf_retriever.build_tfidf.get_doc_freqs</a></div><div class="ttdeci">def get_doc_freqs(cnts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00296">build_tfidf.py:296</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a0d8cca9dbdf0fa23d25e81ec2a96b347"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a0d8cca9dbdf0fa23d25e81ec2a96b347">parlai.agents.tfidf_retriever.build_tfidf.run</a></div><div class="ttdeci">def run(args)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00310">build_tfidf.py:310</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_acce651a5b40c5a3b4009181f22c69eaa"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#acce651a5b40c5a3b4009181f22c69eaa">parlai.agents.tfidf_retriever.build_tfidf.get_tfidf_matrix</a></div><div class="ttdeci">def get_tfidf_matrix(cnts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00268">build_tfidf.py:268</a></div></div>
<div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a0d95180be94e232e3ebc748c8aa7b9a0"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a0d95180be94e232e3ebc748c8aa7b9a0">parlai.agents.tfidf_retriever.build_tfidf.get_count_matrix</a></div><div class="ttdeci">def get_count_matrix(args, db_opts)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00197">build_tfidf.py:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89650718966a5b0d1114e8b06b8c0dcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89650718966a5b0d1114e8b06b8c0dcc">&#9670;&nbsp;</a></span>sparse_log1p()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.sparse_log1p </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sparse_t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00087">87</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a89650718966a5b0d1114e8b06b8c0dcc">sparse_log1p</a>(sparse_t):</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    t = sparse_t.coalesce()</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    t._values().log1p_()</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> t</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a89650718966a5b0d1114e8b06b8c0dcc"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a89650718966a5b0d1114e8b06b8c0dcc">parlai.agents.tfidf_retriever.build_tfidf.sparse_log1p</a></div><div class="ttdeci">def sparse_log1p(sparse_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00087">build_tfidf.py:87</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7ec5dffcb27b7ce23ea0a0e37ef2398d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ec5dffcb27b7ce23ea0a0e37ef2398d">&#9670;&nbsp;</a></span>sparse_nonzero()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.sparse_nonzero </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sparse_t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00079">79</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a7ec5dffcb27b7ce23ea0a0e37ef2398d">sparse_nonzero</a>(sparse_t):</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">return</span> sparse_t.coalesce()._indices()</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a7ec5dffcb27b7ce23ea0a0e37ef2398d"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a7ec5dffcb27b7ce23ea0a0e37ef2398d">parlai.agents.tfidf_retriever.build_tfidf.sparse_nonzero</a></div><div class="ttdeci">def sparse_nonzero(sparse_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00079">build_tfidf.py:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8852c505db2852b5e39be3468a9c1733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8852c505db2852b5e39be3468a9c1733">&#9670;&nbsp;</a></span>sparse_sum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.sparse_sum </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sparse_t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00083">83</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a8852c505db2852b5e39be3468a9c1733">sparse_sum</a>(sparse_t):</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> sparse_t._values().sum()</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a8852c505db2852b5e39be3468a9c1733"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a8852c505db2852b5e39be3468a9c1733">parlai.agents.tfidf_retriever.build_tfidf.sparse_sum</a></div><div class="ttdeci">def sparse_sum(sparse_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00083">build_tfidf.py:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1fdb457e98eb4e4c26047e229686a616"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fdb457e98eb4e4c26047e229686a616">&#9670;&nbsp;</a></span>tokenize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.tokenize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00052">52</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a1fdb457e98eb4e4c26047e229686a616">tokenize</a>(text):</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">global</span> PROCESS_TOK</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> PROCESS_TOK.tokenize(text)</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a1fdb457e98eb4e4c26047e229686a616"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a1fdb457e98eb4e4c26047e229686a616">parlai.agents.tfidf_retriever.build_tfidf.tokenize</a></div><div class="ttdeci">def tokenize(text)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00052">build_tfidf.py:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5bd546d494142d2d7e2772a3d60583f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bd546d494142d2d7e2772a3d60583f9">&#9670;&nbsp;</a></span>truncate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.agents.tfidf_retriever.build_tfidf.truncate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00064">64</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">def </span><a class="code" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a5bd546d494142d2d7e2772a3d60583f9">truncate</a>(data, row, col):</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">global</span> MAX_SZ</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> len(data) &gt; MAX_SZ:</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        over = len(data) - MAX_SZ</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        pct = over / len(data)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        logger.info(</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <span class="stringliteral">&#39;Data size is too large for scipy to index all of it. &#39;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="stringliteral">&#39;Throwing out {} entries ({}%% of data).&#39;</span>.<a class="code" href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">format</a>(over, pct)</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        )</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        data = data[:MAX_SZ]</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        row = row[:MAX_SZ]</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        col = col[:MAX_SZ]</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">return</span> data, row, col</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_html_a5bd546d494142d2d7e2772a3d60583f9"><div class="ttname"><a href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a5bd546d494142d2d7e2772a3d60583f9">parlai.agents.tfidf_retriever.build_tfidf.truncate</a></div><div class="ttdeci">def truncate(data, row, col)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de8/build__tfidf_8py_source.html#l00064">build_tfidf.py:64</a></div></div>
<div class="ttc" id="namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_html_a32e2e2022b824fbaf80c747160b52a76"><div class="ttname"><a href="../../d4/d94/namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils.html#a32e2e2022b824fbaf80c747160b52a76">parlai.chat_service.services.messenger.shared_utils.format</a></div><div class="ttdeci">format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/chat__service_2services_2messenger_2shared__utils_8py_source.html#l00029">shared_utils.py:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa48318cbcc3882ee8fe371c672cbf941"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa48318cbcc3882ee8fe371c672cbf941">&#9670;&nbsp;</a></span>args</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.args</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00370">370</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a0a314a0288fcdf731f21e279e9f7b27a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a314a0288fcdf731f21e279e9f7b27a">&#9670;&nbsp;</a></span>basename</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.basename</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00381">381</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="afe20f2925824bab82a89672734347544"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe20f2925824bab82a89672734347544">&#9670;&nbsp;</a></span>count_matrix</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.count_matrix</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00373">373</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a57d9eff8ee0e54e71c094de21fc72684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57d9eff8ee0e54e71c094de21fc72684">&#9670;&nbsp;</a></span>default</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string parlai.agents.tfidf_retriever.build_tfidf.default = <a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#ad50f77b70c0e27d3304395c58e9212c4">None</a>,</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00340">340</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a09c3915a9ffe251347f232647caff959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09c3915a9ffe251347f232647caff959">&#9670;&nbsp;</a></span>doc_dict</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.doc_dict</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00373">373</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="afcbd4a0d6b9f9e9d88008c66912778cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcbd4a0d6b9f9e9d88008c66912778cf">&#9670;&nbsp;</a></span>filename</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.filename</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00387">387</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a685888e410b4ff0977b0b750edda9db5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a685888e410b4ff0977b0b750edda9db5">&#9670;&nbsp;</a></span>fmt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.fmt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00029">29</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a82fd1621e57caaa8ff7a9c27b0e94125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82fd1621e57caaa8ff7a9c27b0e94125">&#9670;&nbsp;</a></span>freqs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.freqs</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00379">379</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a078522f7d10d021f5e4855b140fc9666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a078522f7d10d021f5e4855b140fc9666">&#9670;&nbsp;</a></span>help</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string parlai.agents.tfidf_retriever.build_tfidf.help = 'Path to sqlite db holding document texts',</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00341">341</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="ae004cad36f1e393ce6c158058a526eeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae004cad36f1e393ce6c158058a526eeb">&#9670;&nbsp;</a></span>MAX_SZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.MAX_SZ</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00057">57</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a8c62403fcedaf6bc33fc200088621f86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c62403fcedaf6bc33fc200088621f86">&#9670;&nbsp;</a></span>metadata</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.metadata</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00390">390</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="ad50f77b70c0e27d3304395c58e9212c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad50f77b70c0e27d3304395c58e9212c4">&#9670;&nbsp;</a></span>None</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.None</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00344">344</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a21ca3f18c69cd5e11f4f9ec6505e0a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21ca3f18c69cd5e11f4f9ec6505e0a24">&#9670;&nbsp;</a></span>parser</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.parser</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00336">336</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a27ac3f448b895f9daae56e01bbf1be70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27ac3f448b895f9daae56e01bbf1be70">&#9670;&nbsp;</a></span>PROCESS_DB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.PROCESS_DB</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00036">36</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="ae5c3818e71ddea3c79328d8a4c423047"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5c3818e71ddea3c79328d8a4c423047">&#9670;&nbsp;</a></span>PROCESS_TOK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.PROCESS_TOK</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00035">35</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a213e3a3970a4f1423c2cc41e5f31295e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a213e3a3970a4f1423c2cc41e5f31295e">&#9670;&nbsp;</a></span>str</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.str</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00344">344</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="a853d823973f2fcc211470e764e29e3d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a853d823973f2fcc211470e764e29e3d2">&#9670;&nbsp;</a></span>tfidf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.tfidf</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00376">376</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
<a id="ad5dfae268e23f506da084a9efb72f619"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5dfae268e23f506da084a9efb72f619">&#9670;&nbsp;</a></span>type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.agents.tfidf_retriever.build_tfidf.type = <a class="el" href="../../d4/da3/namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf.html#a213e3a3970a4f1423c2cc41e5f31295e">str</a>,</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de8/build__tfidf_8py_source.html#l00339">339</a> of file <a class="el" href="../../df/de8/build__tfidf_8py_source.html">build_tfidf.py</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
