<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParlAI: parlai.core.torch_generator_agent.TreeSearch Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ParlAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d5/d22/namespaceparlai.html">parlai</a></li><li class="navelem"><a class="el" href="../../d1/d43/namespaceparlai_1_1core.html">core</a></li><li class="navelem"><a class="el" href="../../de/d94/namespaceparlai_1_1core_1_1torch__generator__agent.html">torch_generator_agent</a></li><li class="navelem"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html">TreeSearch</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="../../dd/d19/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">parlai.core.torch_generator_agent.TreeSearch Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for parlai.core.torch_generator_agent.TreeSearch:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/dc8/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch__inherit__graph.png" border="0" usemap="#parlai_8core_8torch__generator__agent_8TreeSearch_inherit__map" alt="Inheritance graph"/></div>
<map name="parlai_8core_8torch__generator__agent_8TreeSearch_inherit__map" id="parlai_8core_8torch__generator__agent_8TreeSearch_inherit__map">
<area shape="rect" id="node3" href="../../dd/d7e/classparlai_1_1core_1_1torch__generator__agent_1_1BeamSearch.html" title="parlai.core.torch_generator\l_agent.BeamSearch" alt="" coords="335,5,511,47"/>
<area shape="rect" id="node4" href="../../d9/dd3/classparlai_1_1core_1_1torch__generator__agent_1_1GreedySearch.html" title="parlai.core.torch_generator\l_agent.GreedySearch" alt="" coords="335,71,511,112"/>
<area shape="rect" id="node5" href="../../d3/d36/classparlai_1_1core_1_1torch__generator__agent_1_1NucleusSampling.html" title="parlai.core.torch_generator\l_agent.NucleusSampling" alt="" coords="335,136,511,177"/>
<area shape="rect" id="node6" href="../../d4/d74/classparlai_1_1core_1_1torch__generator__agent_1_1TopKSampling.html" title="parlai.core.torch_generator\l_agent.TopKSampling" alt="" coords="335,201,511,243"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for parlai.core.torch_generator_agent.TreeSearch:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d27/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch__coll__graph.png" border="0" usemap="#parlai_8core_8torch__generator__agent_8TreeSearch_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3462e30fc27b2a215773a38cf09f6b46"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a3462e30fc27b2a215773a38cf09f6b46">__init__</a> (self, <a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a2381c33e5233a5f5c1e50c65ab0ee572">beam_size</a>, <a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a6b27ba18a5e343345ab7319f2ead843d">block_ngram</a>=-1, <a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#ab1411b1cb22d74f4682213c487d23898">context_block_ngram</a>=-1, padding_token=0, bos_token=1, eos_token=2, <a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a71d6802f40cf025cd5c0242070d78b62">min_length</a>=3, <a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a37b3f7f827909e3aa2d8e35c32c41e81">device</a>='cpu')</td></tr>
<tr class="separator:a3462e30fc27b2a215773a38cf09f6b46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4706cbec7117a8a2696774c044fc0729"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a4706cbec7117a8a2696774c044fc0729">set_context</a></td></tr>
<tr class="separator:a4706cbec7117a8a2696774c044fc0729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a929ecbf60f149968caae5a0a6908d67a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a929ecbf60f149968caae5a0a6908d67a">get_output_from_current_step</a> (self)</td></tr>
<tr class="separator:a929ecbf60f149968caae5a0a6908d67a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aced42f37b580f876286b5075ba188b2a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#aced42f37b580f876286b5075ba188b2a">get_backtrack_from_current_step</a> (self)</td></tr>
<tr class="separator:aced42f37b580f876286b5075ba188b2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a004609539d0428a9351a991168eb370b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a004609539d0428a9351a991168eb370b">select_paths</a> (self, logprobs, prior_scores)</td></tr>
<tr class="separator:a004609539d0428a9351a991168eb370b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f371e57095af5b22ff5eae4c57326c8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a9f371e57095af5b22ff5eae4c57326c8">advance</a> (self, logprobs)</td></tr>
<tr class="separator:a9f371e57095af5b22ff5eae4c57326c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a3cbfe2df2d02bb46f7e492657afa5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a35a3cbfe2df2d02bb46f7e492657afa5">is_done</a> (self)</td></tr>
<tr class="separator:a35a3cbfe2df2d02bb46f7e492657afa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b70f85eec7d81b3a0e1afaea5b09332"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a4b70f85eec7d81b3a0e1afaea5b09332">get_rescored_finished</a> (self, n_best=None)</td></tr>
<tr class="separator:a4b70f85eec7d81b3a0e1afaea5b09332"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a2381c33e5233a5f5c1e50c65ab0ee572"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a2381c33e5233a5f5c1e50c65ab0ee572">beam_size</a></td></tr>
<tr class="separator:a2381c33e5233a5f5c1e50c65ab0ee572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b27ba18a5e343345ab7319f2ead843d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a6b27ba18a5e343345ab7319f2ead843d">block_ngram</a></td></tr>
<tr class="separator:a6b27ba18a5e343345ab7319f2ead843d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71d6802f40cf025cd5c0242070d78b62"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a71d6802f40cf025cd5c0242070d78b62">min_length</a></td></tr>
<tr class="separator:a71d6802f40cf025cd5c0242070d78b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51a1164086e9033c942b3c7ab3d6a194"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a51a1164086e9033c942b3c7ab3d6a194">eos</a></td></tr>
<tr class="separator:a51a1164086e9033c942b3c7ab3d6a194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef8214c017d387336317a37f395df3c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#aaef8214c017d387336317a37f395df3c">bos</a></td></tr>
<tr class="separator:aaef8214c017d387336317a37f395df3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa00f03954e2bf737b13d1b43a609fb00"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#aa00f03954e2bf737b13d1b43a609fb00">pad</a></td></tr>
<tr class="separator:aa00f03954e2bf737b13d1b43a609fb00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6617873218cb0975d7e5f04f09379ac6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a6617873218cb0975d7e5f04f09379ac6">context</a></td></tr>
<tr class="separator:a6617873218cb0975d7e5f04f09379ac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1411b1cb22d74f4682213c487d23898"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#ab1411b1cb22d74f4682213c487d23898">context_block_ngram</a></td></tr>
<tr class="separator:ab1411b1cb22d74f4682213c487d23898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b3f7f827909e3aa2d8e35c32c41e81"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a37b3f7f827909e3aa2d8e35c32c41e81">device</a></td></tr>
<tr class="separator:a37b3f7f827909e3aa2d8e35c32c41e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07cf31c1808301e5b4d1d0ef128c5948"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a07cf31c1808301e5b4d1d0ef128c5948">scores</a></td></tr>
<tr class="separator:a07cf31c1808301e5b4d1d0ef128c5948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9e79a3effa48d2e35ac879620cd639e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#ac9e79a3effa48d2e35ac879620cd639e">all_scores</a></td></tr>
<tr class="separator:ac9e79a3effa48d2e35ac879620cd639e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f1f3da5f6079f5043d28e72b2a6fdfa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a1f1f3da5f6079f5043d28e72b2a6fdfa">bookkeep</a></td></tr>
<tr class="separator:a1f1f3da5f6079f5043d28e72b2a6fdfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae65afe3c0c8855e9a54ba44bf7209ce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#aae65afe3c0c8855e9a54ba44bf7209ce">outputs</a></td></tr>
<tr class="separator:aae65afe3c0c8855e9a54ba44bf7209ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2d79d6023881123b8960356243692d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#ab2d79d6023881123b8960356243692d9">finished</a></td></tr>
<tr class="separator:ab2d79d6023881123b8960356243692d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b7078c44965d7a9d54250149d164c8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a5b7078c44965d7a9d54250149d164c8f">eos_top</a></td></tr>
<tr class="separator:a5b7078c44965d7a9d54250149d164c8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a1eb3fae74a9b2edbb54cc4162878af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a0a1eb3fae74a9b2edbb54cc4162878af">eos_top_ts</a></td></tr>
<tr class="separator:a0a1eb3fae74a9b2edbb54cc4162878af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b64a54420c470d50e389cdaacde4933"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a2b64a54420c470d50e389cdaacde4933">n_best_counter</a></td></tr>
<tr class="separator:a2b64a54420c470d50e389cdaacde4933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a159f5589fdfea9a040c4c1ca5c14ea2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a159f5589fdfea9a040c4c1ca5c14ea2c">partial_hyps</a></td></tr>
<tr class="separator:a159f5589fdfea9a040c4c1ca5c14ea2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:aeeed17550050be7b86c9e238b9df66e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#aeeed17550050be7b86c9e238b9df66e5">source_</a></td></tr>
<tr class="separator:aeeed17550050be7b86c9e238b9df66e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9b00008fefdb77e7701ddbfc1865919"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#aa9b00008fefdb77e7701ddbfc1865919">ngrams</a></td></tr>
<tr class="separator:aa9b00008fefdb77e7701ddbfc1865919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2845139bf44df2fa8428565cd7558ce2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch.html#a2845139bf44df2fa8428565cd7558ce2">prefix</a></td></tr>
<tr class="separator:a2845139bf44df2fa8428565cd7558ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Abstract Tree Search class.

It keeps information about beam_size concurrent, developing hypotheses. Concrete
implementations make choices about which token to explore next at each point in the
tree. Different choices result in different generation algorithms.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l00990">990</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3462e30fc27b2a215773a38cf09f6b46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3462e30fc27b2a215773a38cf09f6b46">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TreeSearch.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>beam_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>block_ngram</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>context_block_ngram</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>padding_token</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bos_token</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>eos_token</em> = <code>2</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_length</em> = <code>3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>device</em> = <code>'cpu'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Instantiate Beam object.

:param beam_size:
    number of hypothesis in the beam
:param block_ngram:
    size of ngrams to block.
:param context_block_ngram:
    size of context ngrams to block
:param context_block_ngram:
    size of context ngrams to block

:param padding_token:
    padding token ID
:param bos_token:
    beginning of sentence token ID
:param eos_token:
    end of sentence token ID
:param min_length:
    minimum length of the predicted sequence
:param device:
    What device to use for computations
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01010">1010</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    ):</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="stringliteral">        Instantiate Beam object.</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="stringliteral">        :param beam_size:</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="stringliteral">            number of hypothesis in the beam</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="stringliteral">        :param block_ngram:</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="stringliteral">            size of ngrams to block.</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="stringliteral">        :param context_block_ngram:</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="stringliteral">            size of context ngrams to block</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="stringliteral">        :param context_block_ngram:</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="stringliteral">            size of context ngrams to block</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="stringliteral">        :param padding_token:</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="stringliteral">            padding token ID</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="stringliteral">        :param bos_token:</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="stringliteral">            beginning of sentence token ID</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="stringliteral">        :param eos_token:</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="stringliteral">            end of sentence token ID</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="stringliteral">        :param min_length:</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="stringliteral">            minimum length of the predicted sequence</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="stringliteral">        :param device:</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="stringliteral">            What device to use for computations</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        self.beam_size = beam_size</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        self.block_ngram = block_ngram</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        self.min_length = min_length</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        self.eos = eos_token</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        self.bos = bos_token</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        self.pad = padding_token</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        self.context = <span class="keywordtype">None</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        self.context_block_ngram = context_block_ngram</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        self.device = device</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="comment"># recent score for each hypo in the beam</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        self.scores = <span class="keywordtype">None</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <span class="comment"># self.scores values per each time step</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        self.all_scores = [torch.Tensor([0.0] * beam_size).to(self.device)]</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="comment"># backtracking id to hypothesis at previous time step</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        self.bookkeep = []</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="comment"># output tokens at each time step</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        self.outputs = [</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            torch.Tensor(self.beam_size).long().fill_(self.bos).to(self.device)</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        ]</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <span class="comment"># keeps tuples (score, time_step, hyp_id)</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        self.finished = []</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        self.eos_top = <span class="keyword">False</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        self.eos_top_ts = <span class="keywordtype">None</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        self.n_best_counter = 0</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        self.partial_hyps = [[self.bos] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(beam_size)]</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9f371e57095af5b22ff5eae4c57326c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f371e57095af5b22ff5eae4c57326c8">&#9670;&nbsp;</a></span>advance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TreeSearch.advance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logprobs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Advance the beam one step.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01138">1138</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keyword">def </span>advance(self, logprobs):</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="stringliteral">        Advance the beam one step.</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        current_length = len(self.all_scores) - 1</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="keywordflow">if</span> current_length &lt; self.min_length:</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            <span class="comment"># penalize all eos probs to make it decode longer</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            <span class="keywordflow">for</span> hyp_id <span class="keywordflow">in</span> range(logprobs.size(0)):</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                logprobs[hyp_id][self.eos] = <a class="code" href="../../da/dd4/namespaceparlai_1_1utils_1_1torch.html#a6c6e25115353dba479cd72dc31dc76ae">neginf</a>(logprobs.dtype)</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="keywordflow">if</span> self.scores <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            self.scores = torch.zeros(1).type_as(logprobs).to(logprobs.device)</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="comment"># penalize hypotheses ending in EOS on the prior scores (self.scores) level</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="comment"># this is related to search which uses prior scores (self.scores) (e.g. beam)</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="keywordflow">for</span> hyp_id, token <span class="keywordflow">in</span> enumerate(self.outputs[-1]):</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            <span class="keywordflow">if</span> token == self.eos:</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                self.scores[hyp_id] = <a class="code" href="../../da/dd4/namespaceparlai_1_1utils_1_1torch.html#a6c6e25115353dba479cd72dc31dc76ae">neginf</a>(self.scores.dtype)</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="comment"># beam blocking</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="keywordflow">if</span> self.block_ngram &gt; 0:</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            logprobs = self._block_ngrams(self.block_ngram, logprobs, <span class="keywordtype">None</span>)</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="keywordflow">if</span> self.context_block_ngram &gt; 0:</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <span class="keywordflow">if</span> self.context <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                <span class="keywordflow">raise</span> ValueError(</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                    <span class="stringliteral">&quot;Must use TreeSearch.set_context to use context blocking.&quot;</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                )</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            logprobs = self._block_ngrams(</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                self.context_block_ngram, logprobs, self.context</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            )</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            <span class="keywordflow">for</span> beam_id, hyp <span class="keywordflow">in</span> enumerate(self.partial_hyps):</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                <span class="keywordflow">if</span> len(hyp) &lt; self.block_ngram - 1:</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                ngrams = self._find_ngrams(hyp, self.block_ngram)</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                prefix = hyp[-(self.block_ngram - 1) :]</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                <span class="keywordflow">for</span> ngram <span class="keywordflow">in</span> ngrams:</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                    <span class="keywordflow">if</span> prefix == list(ngram[:-1]) <span class="keywordflow">or</span> self.block_ngram == 1:</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                        logprobs[beam_id][ngram[-1]] = <a class="code" href="../../da/dd4/namespaceparlai_1_1utils_1_1torch.html#a6c6e25115353dba479cd72dc31dc76ae">neginf</a>(logprobs.dtype)</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        hyp_ids, tok_ids, self.scores = self.select_paths(logprobs, self.scores)</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        <span class="comment"># use clone() here to ensure that self.all_scores will not be changed</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        <span class="comment"># later due to any penalties to self.scores</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        self.all_scores.append(self.scores.clone())</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        self.outputs.append(tok_ids)</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        self.bookkeep.append(hyp_ids)</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        self.partial_hyps = [</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            self.partial_hyps[hyp_ids[i]] + [tok_ids[i].item()]</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(self.beam_size)</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        ]</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <span class="comment">#  check new hypos for eos label, if we have some, add to finished</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <span class="keywordflow">for</span> hypid <span class="keywordflow">in</span> range(self.beam_size):</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            <span class="keywordflow">if</span> self.outputs[-1][hypid] == self.eos:</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                <span class="keywordflow">if</span> self.scores[hypid] == <a class="code" href="../../da/dd4/namespaceparlai_1_1utils_1_1torch.html#a6c6e25115353dba479cd72dc31dc76ae">neginf</a>(self.scores.dtype):</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                    <span class="keywordflow">continue</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                <span class="comment">#  this is finished hypo, adding to finished</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                eostail = _HypothesisTail(</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                    timestep=len(self.outputs) - 1,</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                    hypid=hypid,</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                    score=self.all_scores[-1][hypid],</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                    tokenid=self.eos,</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                )</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                self.finished.append(eostail)</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                self.n_best_counter += 1</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="keywordflow">if</span> self.outputs[-1][0] == self.eos:</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            self.eos_top = <span class="keyword">True</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            <span class="keywordflow">if</span> self.eos_top_ts <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                self.eos_top_ts = len(self.outputs) - 1</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="ttc" id="namespaceparlai_1_1utils_1_1torch_html_a6c6e25115353dba479cd72dc31dc76ae"><div class="ttname"><a href="../../da/dd4/namespaceparlai_1_1utils_1_1torch.html#a6c6e25115353dba479cd72dc31dc76ae">parlai.utils.torch.neginf</a></div><div class="ttdeci">def neginf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d80/torch_8py_source.html#l00024">torch.py:24</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aced42f37b580f876286b5075ba188b2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aced42f37b580f876286b5075ba188b2a">&#9670;&nbsp;</a></span>get_backtrack_from_current_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TreeSearch.get_backtrack_from_current_step </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get the backtrack at the current step.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01080">1080</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keyword">def </span>get_backtrack_from_current_step(self):</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="stringliteral">        Get the backtrack at the current step.</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">return</span> self.bookkeep[-1]</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a929ecbf60f149968caae5a0a6908d67a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a929ecbf60f149968caae5a0a6908d67a">&#9670;&nbsp;</a></span>get_output_from_current_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TreeSearch.get_output_from_current_step </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get the outputput at the current step.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01074">1074</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keyword">def </span>get_output_from_current_step(self):</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="stringliteral">        Get the outputput at the current step.</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">return</span> self.outputs[-1]</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a4b70f85eec7d81b3a0e1afaea5b09332"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b70f85eec7d81b3a0e1afaea5b09332">&#9670;&nbsp;</a></span>get_rescored_finished()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TreeSearch.get_rescored_finished </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_best</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return finished hypotheses according to adjusted scores.

Score adjustment is done according to the Google NMT paper, which
penalizes long utterances.

:param n_best:
    number of finalized hypotheses to return

:return:
    list of (tokens, score) pairs, in sorted order, where:
      - tokens is a tensor of token ids
      - score is the adjusted log probability of the entire utterance
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01258">1258</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keyword">def </span>get_rescored_finished(self, n_best=None):</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="stringliteral">        Return finished hypotheses according to adjusted scores.</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="stringliteral">        Score adjustment is done according to the Google NMT paper, which</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="stringliteral">        penalizes long utterances.</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="stringliteral">        :param n_best:</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="stringliteral">            number of finalized hypotheses to return</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="stringliteral">        :return:</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="stringliteral">            list of (tokens, score) pairs, in sorted order, where:</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="stringliteral">              - tokens is a tensor of token ids</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="stringliteral">              - score is the adjusted log probability of the entire utterance</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <span class="comment"># if we never actually finished, force one</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.finished:</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            self.outputs[-1][0] = self.eos</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            self.finished.append(</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                _HypothesisTail(</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                    timestep=len(self.outputs) - 1,</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                    hypid=0,</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                    score=self.all_scores[-1][0],</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                    tokenid=self.outputs[-1][0],</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                )</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            )</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        rescored_finished = []</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <span class="keywordflow">for</span> finished_item <span class="keywordflow">in</span> self.finished:</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            current_length = finished_item.timestep + 1</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <span class="comment"># these weights are from Google NMT paper</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            length_penalty = math.pow((1 + current_length) / 6, 0.65)</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            rescored_finished.append(</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                _HypothesisTail(</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                    timestep=finished_item.timestep,</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                    hypid=finished_item.hypid,</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                    score=finished_item.score / length_penalty,</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                    tokenid=finished_item.tokenid,</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                )</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            )</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="comment"># Note: beam size is almost always pretty small, so sorting is cheap enough</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        srted = sorted(rescored_finished, key=attrgetter(<span class="stringliteral">&#39;score&#39;</span>), reverse=<span class="keyword">True</span>)</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <span class="keywordflow">if</span> n_best <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            srted = srted[:n_best]</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        n_best_list = [</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            (self._get_pretty_hypothesis(self._get_hyp_from_finished(hyp)), hyp.score)</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            <span class="keywordflow">for</span> hyp <span class="keywordflow">in</span> srted</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        ]</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="comment"># check that there is at least one finished candidate</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="comment"># and assert that each of them contains only one EOS</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keyword">assert</span> (</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            len(n_best_list) &gt;= 1</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        ), f<span class="stringliteral">&#39;TreeSearch returned {len(n_best_list)} candidates, must be &gt;= 1&#39;</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">for</span> (pred, score) <span class="keywordflow">in</span> n_best_list:</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            <span class="keyword">assert</span> (</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                pred == self.eos</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            ).sum() == 1, f<span class="stringliteral">&#39;TreeSearch returned a finalized hypo with multiple end tokens \</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="stringliteral">            with score {score.item():.2f}&#39;</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <span class="keywordflow">return</span> n_best_list</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a35a3cbfe2df2d02bb46f7e492657afa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35a3cbfe2df2d02bb46f7e492657afa5">&#9670;&nbsp;</a></span>is_done()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TreeSearch.is_done </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return whether beam search is complete.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01212">1212</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keyword">def </span>is_done(self):</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="stringliteral">        Return whether beam search is complete.</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="keywordflow">return</span> self.eos_top <span class="keywordflow">and</span> self.n_best_counter &gt;= self.beam_size</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a004609539d0428a9351a991168eb370b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a004609539d0428a9351a991168eb370b">&#9670;&nbsp;</a></span>select_paths()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TreeSearch.select_paths </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logprobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prior_scores</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Select the next vocabulary item in these beams.

:param logprobs:
    a (beamsize x vocab) tensor of log probabilities. If this is the first
    turn in the dialogue, it will be a (1 x vocab) tensor.
:param prior_scores:
    a (beamsize) tensor of weights with the cumulative running
    log-probability of each beam. If the first turn, it will be a (1) tensor.

:return:
    a (hypothesis_ids, token_id, scores) tuple, where:

    - hypothesis_ids is a LongTensor of hypotheses we're extending. May have
      repeats, but should always be (beamsize) long.
    - token_ids is a (beamsize) LongTensor of next-token choices for
      each of the hypotheses.
    - scores is a (beamsize) Tensor with the updated cumulative log-probs
      of each beam.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01087">1087</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keyword">def </span>select_paths(self, logprobs, prior_scores):</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="stringliteral">        Select the next vocabulary item in these beams.</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="stringliteral">        :param logprobs:</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="stringliteral">            a (beamsize x vocab) tensor of log probabilities. If this is the first</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="stringliteral">            turn in the dialogue, it will be a (1 x vocab) tensor.</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="stringliteral">        :param prior_scores:</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="stringliteral">            a (beamsize) tensor of weights with the cumulative running</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="stringliteral">            log-probability of each beam. If the first turn, it will be a (1) tensor.</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="stringliteral">        :return:</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="stringliteral">            a (hypothesis_ids, token_id, scores) tuple, where:</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="stringliteral">            - hypothesis_ids is a LongTensor of hypotheses we&#39;re extending. May have</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="stringliteral">              repeats, but should always be (beamsize) long.</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="stringliteral">            - token_ids is a (beamsize) LongTensor of next-token choices for</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="stringliteral">              each of the hypotheses.</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="stringliteral">            - scores is a (beamsize) Tensor with the updated cumulative log-probs</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="stringliteral">              of each beam.</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">pass</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a4706cbec7117a8a2696774c044fc0729"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4706cbec7117a8a2696774c044fc0729">&#9670;&nbsp;</a></span>set_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_generator_agent.TreeSearch.set_context </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01062">1062</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>
<div class="fragment"><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keyword">def </span>set_context(self: TSType, context: torch.LongTensor) -&gt; TSType:</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="stringliteral">        Set the internal context representation and return self.</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="stringliteral">        :param context:</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="stringliteral">            a LongTensor representing the input context; used for context</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="stringliteral">            ngram blocking, if supplied</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        self.context = context.tolist()</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">return</span> self</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac9e79a3effa48d2e35ac879620cd639e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9e79a3effa48d2e35ac879620cd639e">&#9670;&nbsp;</a></span>all_scores</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.all_scores</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01047">1047</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a2381c33e5233a5f5c1e50c65ab0ee572"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2381c33e5233a5f5c1e50c65ab0ee572">&#9670;&nbsp;</a></span>beam_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.beam_size</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01034">1034</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a6b27ba18a5e343345ab7319f2ead843d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b27ba18a5e343345ab7319f2ead843d">&#9670;&nbsp;</a></span>block_ngram</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.block_ngram</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01035">1035</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a1f1f3da5f6079f5043d28e72b2a6fdfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f1f3da5f6079f5043d28e72b2a6fdfa">&#9670;&nbsp;</a></span>bookkeep</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.bookkeep</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01049">1049</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="aaef8214c017d387336317a37f395df3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaef8214c017d387336317a37f395df3c">&#9670;&nbsp;</a></span>bos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.bos</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01038">1038</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a6617873218cb0975d7e5f04f09379ac6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6617873218cb0975d7e5f04f09379ac6">&#9670;&nbsp;</a></span>context</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.context</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01040">1040</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="ab1411b1cb22d74f4682213c487d23898"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1411b1cb22d74f4682213c487d23898">&#9670;&nbsp;</a></span>context_block_ngram</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.context_block_ngram</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01041">1041</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a37b3f7f827909e3aa2d8e35c32c41e81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37b3f7f827909e3aa2d8e35c32c41e81">&#9670;&nbsp;</a></span>device</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.device</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01043">1043</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a51a1164086e9033c942b3c7ab3d6a194"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51a1164086e9033c942b3c7ab3d6a194">&#9670;&nbsp;</a></span>eos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.eos</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01037">1037</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a5b7078c44965d7a9d54250149d164c8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b7078c44965d7a9d54250149d164c8f">&#9670;&nbsp;</a></span>eos_top</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.eos_top</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01056">1056</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a0a1eb3fae74a9b2edbb54cc4162878af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a1eb3fae74a9b2edbb54cc4162878af">&#9670;&nbsp;</a></span>eos_top_ts</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.eos_top_ts</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01057">1057</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="ab2d79d6023881123b8960356243692d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2d79d6023881123b8960356243692d9">&#9670;&nbsp;</a></span>finished</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.finished</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01055">1055</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a71d6802f40cf025cd5c0242070d78b62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71d6802f40cf025cd5c0242070d78b62">&#9670;&nbsp;</a></span>min_length</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.min_length</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01036">1036</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a2b64a54420c470d50e389cdaacde4933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b64a54420c470d50e389cdaacde4933">&#9670;&nbsp;</a></span>n_best_counter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.n_best_counter</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01058">1058</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="aa9b00008fefdb77e7701ddbfc1865919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9b00008fefdb77e7701ddbfc1865919">&#9670;&nbsp;</a></span>ngrams</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.ngrams</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01130">1130</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="aae65afe3c0c8855e9a54ba44bf7209ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae65afe3c0c8855e9a54ba44bf7209ce">&#9670;&nbsp;</a></span>outputs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.outputs</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01051">1051</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="aa00f03954e2bf737b13d1b43a609fb00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa00f03954e2bf737b13d1b43a609fb00">&#9670;&nbsp;</a></span>pad</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.pad</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01039">1039</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a159f5589fdfea9a040c4c1ca5c14ea2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a159f5589fdfea9a040c4c1ca5c14ea2c">&#9670;&nbsp;</a></span>partial_hyps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.partial_hyps</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01059">1059</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a2845139bf44df2fa8428565cd7558ce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2845139bf44df2fa8428565cd7558ce2">&#9670;&nbsp;</a></span>prefix</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.prefix</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01131">1131</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="a07cf31c1808301e5b4d1d0ef128c5948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07cf31c1808301e5b4d1d0ef128c5948">&#9670;&nbsp;</a></span>scores</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.scores</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01045">1045</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<a id="aeeed17550050be7b86c9e238b9df66e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeed17550050be7b86c9e238b9df66e5">&#9670;&nbsp;</a></span>source_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">parlai.core.torch_generator_agent.TreeSearch.source_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html#l01129">1129</a> of file <a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>parlai/core/<a class="el" href="../../d5/d19/torch__generator__agent_8py_source.html">torch_generator_agent.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
