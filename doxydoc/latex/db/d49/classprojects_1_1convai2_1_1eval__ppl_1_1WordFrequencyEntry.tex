\hypertarget{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry}{}\section{projects.\+convai2.\+eval\+\_\+ppl.\+Word\+Frequency\+Entry Class Reference}
\label{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry}\index{projects.\+convai2.\+eval\+\_\+ppl.\+Word\+Frequency\+Entry@{projects.\+convai2.\+eval\+\_\+ppl.\+Word\+Frequency\+Entry}}


Inheritance diagram for projects.\+convai2.\+eval\+\_\+ppl.\+Word\+Frequency\+Entry\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=210pt]{d6/d94/classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for projects.\+convai2.\+eval\+\_\+ppl.\+Word\+Frequency\+Entry\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=210pt]{d4/d3e/classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_a3dfd58c2bf262228339cf3728b6b0caa}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1agents_1_1Agent_ab3b45d2754244608c75d4068b90cd051}{opt}, shared=None)
\item 
def \hyperlink{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_a5abf8443347e45742e911d441a8b9c10}{share} (self)
\item 
def \hyperlink{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_abc7d4ea01f82e42e8a18794e620de005}{next\+\_\+word\+\_\+probability} (self, partial\+\_\+out)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_af518e0d344e66f8ec7eede1bb6359e7e}{dict}
\item 
\hyperlink{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_a63fd68257eda4fc1560e4b58f858312c}{freqs}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}This is an example entry which tries to use the RepeatLabelAgent. Since no labels
are given to the model, it will guess something useless.

It builds the official dictionary first, so that it can provide a minimum probablity
for each word as well as use the official tokenizer.
\end{DoxyVerb}
 

Definition at line 59 of file eval\+\_\+ppl.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_a3dfd58c2bf262228339cf3728b6b0caa}\label{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_a3dfd58c2bf262228339cf3728b6b0caa}} 
\index{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry@{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry@{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def projects.\+convai2.\+eval\+\_\+ppl.\+Word\+Frequency\+Entry.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 68 of file eval\+\_\+ppl.\+py.


\begin{DoxyCode}
68     \textcolor{keyword}{def }\_\_init\_\_(self, opt, shared=None):
69         super().\_\_init\_\_(opt, shared)
70         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} shared:
71             \textcolor{comment}{# build official eval dictionary}
72             self.dict = \hyperlink{namespacebuild__dict}{build\_dict}()
73         \textcolor{keywordflow}{else}:
74             \textcolor{comment}{# only build dict once}
75             self.dict = shared[\textcolor{stringliteral}{'dict'}]
76         max\_freq = self.dict.max\_freq()
77         \textcolor{comment}{# set probability of each word, skipping the invalid words like \_\_NULL\_\_}
78         \textcolor{comment}{# (which have frequency more than max\_freq)}
79         self.freqs = \{k: f \textcolor{keywordflow}{for} k, f \textcolor{keywordflow}{in} self.dict.\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_abb3607652abdd76d57a6ae90e19e3828}{freqs}().items() \textcolor{keywordflow}{if} f <= max\_freq\}
80 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_abc7d4ea01f82e42e8a18794e620de005}\label{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_abc7d4ea01f82e42e8a18794e620de005}} 
\index{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry@{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry}!next\+\_\+word\+\_\+probability@{next\+\_\+word\+\_\+probability}}
\index{next\+\_\+word\+\_\+probability@{next\+\_\+word\+\_\+probability}!projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry@{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry}}
\subsubsection{\texorpdfstring{next\+\_\+word\+\_\+probability()}{next\_word\_probability()}}
{\footnotesize\ttfamily def projects.\+convai2.\+eval\+\_\+ppl.\+Word\+Frequency\+Entry.\+next\+\_\+word\+\_\+probability (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{partial\+\_\+out }\end{DoxyParamCaption})}

\begin{DoxyVerb}Example implementation of next word probability.
\end{DoxyVerb}
 

Definition at line 87 of file eval\+\_\+ppl.\+py.


\begin{DoxyCode}
87     \textcolor{keyword}{def }next\_word\_probability(self, partial\_out):
88         \textcolor{stringliteral}{"""}
89 \textcolor{stringliteral}{        Example implementation of next word probability.}
90 \textcolor{stringliteral}{        """}
91         obs = self.observation
92         \textcolor{comment}{# initialize probabilities with inverse word frequency}
93         freqs = self.freqs.copy()
94 
95         \textcolor{comment}{# increase likelihood of predicting input words}
96         tokens = self.dict.\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(obs.get(\textcolor{stringliteral}{'text'}, \textcolor{stringliteral}{''}))
97         \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} tokens:
98             \textcolor{keywordflow}{if} t \textcolor{keywordflow}{in} freqs:
99                 freqs[t] += 10000
100         \textcolor{keywordflow}{return} freqs
101 
102 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_a5abf8443347e45742e911d441a8b9c10}\label{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_a5abf8443347e45742e911d441a8b9c10}} 
\index{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry@{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry}!share@{share}}
\index{share@{share}!projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry@{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry}}
\subsubsection{\texorpdfstring{share()}{share()}}
{\footnotesize\ttfamily def projects.\+convai2.\+eval\+\_\+ppl.\+Word\+Frequency\+Entry.\+share (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 81 of file eval\+\_\+ppl.\+py.


\begin{DoxyCode}
81     \textcolor{keyword}{def }share(self):
82         shared = super().share()
83         \textcolor{comment}{# share dict with other threads instead of rebuilding in each}
84         shared[\textcolor{stringliteral}{'dict'}] = self.dict
85         \textcolor{keywordflow}{return} shared
86 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_af518e0d344e66f8ec7eede1bb6359e7e}\label{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_af518e0d344e66f8ec7eede1bb6359e7e}} 
\index{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry@{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry}!dict@{dict}}
\index{dict@{dict}!projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry@{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry}}
\subsubsection{\texorpdfstring{dict}{dict}}
{\footnotesize\ttfamily projects.\+convai2.\+eval\+\_\+ppl.\+Word\+Frequency\+Entry.\+dict}



Definition at line 72 of file eval\+\_\+ppl.\+py.

\mbox{\Hypertarget{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_a63fd68257eda4fc1560e4b58f858312c}\label{classprojects_1_1convai2_1_1eval__ppl_1_1WordFrequencyEntry_a63fd68257eda4fc1560e4b58f858312c}} 
\index{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry@{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry}!freqs@{freqs}}
\index{freqs@{freqs}!projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry@{projects\+::convai2\+::eval\+\_\+ppl\+::\+Word\+Frequency\+Entry}}
\subsubsection{\texorpdfstring{freqs}{freqs}}
{\footnotesize\ttfamily projects.\+convai2.\+eval\+\_\+ppl.\+Word\+Frequency\+Entry.\+freqs}



Definition at line 79 of file eval\+\_\+ppl.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
projects/convai2/\hyperlink{projects_2convai2_2eval__ppl_8py}{eval\+\_\+ppl.\+py}\end{DoxyCompactItemize}
