\hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows}{}\section{parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows Class Reference}
\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows}\index{parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows@{parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows}}


Inheritance diagram for parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{d9/da1/classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{db/d2c/classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ab361c63be767de8fd43419409a0b5b6e}{set\+Up} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a96dc5bc96ad19bebc578320da3423944}{tear\+Down} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_addc7b32cde25acc733e8363e2d91d04e}{onboard\+\_\+agent} (self, worker)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0441bae10079f6823a36126581caba48}{run\+\_\+conversation} (self, \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a839a3a790373427e3b343211171a67c5}{mturk\+\_\+manager}, \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a6e01485f42a084dde205f2c2a1973d49}{opt}, workers)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a3647aaf9288745bbceaf873fbbea9301}{alive\+\_\+agent} (self, agent)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a296f430cd647d9d0f8f5dd600edd6d36}{test\+\_\+successful\+\_\+convo} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ac0466657a3df17ee6bb334696ee27d20}{test\+\_\+disconnect\+\_\+end} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5301ddab598be8dd5efc3231e6f0ae75}{test\+\_\+expire\+\_\+onboarding} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_acec734d4011e2e2815dcfa36846c5007}{test\+\_\+reconnect\+\_\+complete} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_aa9c54fd5422ab76b88b4ad9ec7c3fa43}{test\+\_\+attempt\+\_\+break\+\_\+unique} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a7bb327cdbf5f8266b384e619fbe28cd9}{test\+\_\+break\+\_\+multi\+\_\+convo} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a9b6327cbeb64e4ddfb0154001660bede}{test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8df04134623a7f640044c410742eab5f}{test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8a9534a104611205c284286617d4f729}{server\+\_\+utils}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ad8a38778eb818919df721821f65ff09c}{mturk\+\_\+utils}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a163889950d1b5b09877f5346022f6eba}{onboarding\+\_\+agents}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a59b5d95ba6e3f38d3f5eb92445dbb73f}{worlds\+\_\+agents}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0f72ef4f16147cd568d57bc59fec3459}{fake\+\_\+socket}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a6e01485f42a084dde205f2c2a1973d49}{opt}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5aa97409076eb69e4386d9478a122868}{mturk\+\_\+agent\+\_\+ids}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a839a3a790373427e3b343211171a67c5}{mturk\+\_\+manager}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a10818ca4dc156255151ae726ec198b9c}{task\+\_\+thread}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_af75fab9da29a7a7adedfa49fb6c7efe4}{agent\+\_\+1}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_abb425b9d16b6be8629cd7be30cbf7807}{agent\+\_\+1\+\_\+2}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a2c51ad339f5b08a7ea9761d5660c1583}{agent\+\_\+2}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Various test cases to replicate a whole mturk workflow.
\end{DoxyVerb}
 

Definition at line 332 of file test\+\_\+full\+\_\+system.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a3647aaf9288745bbceaf873fbbea9301}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a3647aaf9288745bbceaf873fbbea9301}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!alive\+\_\+agent@{alive\+\_\+agent}}
\index{alive\+\_\+agent@{alive\+\_\+agent}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{alive\+\_\+agent()}{alive\_agent()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+alive\+\_\+agent (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent }\end{DoxyParamCaption})}



Definition at line 451 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
451     \textcolor{keyword}{def }alive\_agent(self, agent):
452         agent.register\_to\_socket(self.fake\_socket)
453         agent.wait\_for\_alive()
454         agent.send\_heartbeat()
455 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_addc7b32cde25acc733e8363e2d91d04e}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_addc7b32cde25acc733e8363e2d91d04e}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!onboard\+\_\+agent@{onboard\+\_\+agent}}
\index{onboard\+\_\+agent@{onboard\+\_\+agent}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{onboard\+\_\+agent()}{onboard\_agent()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+onboard\+\_\+agent (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{worker }\end{DoxyParamCaption})}



Definition at line 434 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
434     \textcolor{keyword}{def }onboard\_agent(self, worker):
435         self.onboarding\_agents[worker.worker\_id] = \textcolor{keyword}{False}
436         \textcolor{keywordflow}{while} (worker.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents) \textcolor{keywordflow}{and} (
437             self.onboarding\_agents[worker.worker\_id] \textcolor{keywordflow}{is} \textcolor{keyword}{False}
438         ):
439             time.sleep(0.05)
440         \textcolor{keywordflow}{return}
441 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0441bae10079f6823a36126581caba48}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0441bae10079f6823a36126581caba48}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!run\+\_\+conversation@{run\+\_\+conversation}}
\index{run\+\_\+conversation@{run\+\_\+conversation}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{run\+\_\+conversation()}{run\_conversation()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+run\+\_\+conversation (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{mturk\+\_\+manager,  }\item[{}]{opt,  }\item[{}]{workers }\end{DoxyParamCaption})}



Definition at line 442 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
442     \textcolor{keyword}{def }run\_conversation(self, mturk\_manager, opt, workers):
443         \textcolor{keywordflow}{for} worker \textcolor{keywordflow}{in} workers:
444             self.worlds\_agents[worker.worker\_id] = \textcolor{keyword}{False}
445         \textcolor{keywordflow}{for} worker \textcolor{keywordflow}{in} workers:
446             \textcolor{keywordflow}{while} self.worlds\_agents[worker.worker\_id] \textcolor{keywordflow}{is} \textcolor{keyword}{False}:
447                 time.sleep(0.05)
448         \textcolor{keywordflow}{for} worker \textcolor{keywordflow}{in} workers:
449             worker.shutdown(timeout=-1)
450 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ab361c63be767de8fd43419409a0b5b6e}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ab361c63be767de8fd43419409a0b5b6e}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!set\+Up@{set\+Up}}
\index{set\+Up@{set\+Up}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{set\+Up()}{setUp()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+set\+Up (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 337 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
337     \textcolor{keyword}{def }setUp(self):
338         \textcolor{comment}{# Mock functions that hit external APIs and such}
339         self.server\_utils = MTurkManagerFile.server\_utils
340         self.mturk\_utils = MTurkManagerFile.mturk\_utils
341         self.server\_utils.setup\_server = mock.MagicMock(
342             return\_value=\textcolor{stringliteral}{'https://127.0.0.1'}
343         )
344         self.server\_utils.setup\_legacy\_server = mock.MagicMock(
345             return\_value=\textcolor{stringliteral}{'https://127.0.0.1'}
346         )
347         self.server\_utils.delete\_server = mock.MagicMock()
348         self.mturk\_utils.setup\_aws\_credentials = mock.MagicMock()
349         self.mturk\_utils.calculate\_mturk\_cost = mock.MagicMock(return\_value=1)
350         self.mturk\_utils.check\_mturk\_balance = mock.MagicMock(return\_value=\textcolor{keyword}{True})
351         self.mturk\_utils.create\_hit\_config = mock.MagicMock()
352         self.mturk\_utils.setup\_sns\_topic = mock.MagicMock(return\_value=TOPIC\_ARN)
353         self.mturk\_utils.delete\_sns\_topic = mock.MagicMock()
354         self.mturk\_utils.delete\_qualification = mock.MagicMock()
355         self.mturk\_utils.find\_or\_create\_qualification = mock.MagicMock(
356             return\_value=QUALIFICATION\_ID
357         )
358         self.mturk\_utils.find\_qualification = mock.MagicMock(
359             return\_value=QUALIFICATION\_ID
360         )
361         self.mturk\_utils.give\_worker\_qualification = mock.MagicMock()
362         self.mturk\_utils.remove\_worker\_qualification = mock.MagicMock()
363         self.mturk\_utils.create\_hit\_type = mock.MagicMock(return\_value=HIT\_TYPE\_ID)
364         self.mturk\_utils.subscribe\_to\_hits = mock.MagicMock()
365         self.mturk\_utils.create\_hit\_with\_hit\_type = mock.MagicMock(
366             return\_value=(MTURK\_PAGE\_URL, FAKE\_HIT\_ID, \textcolor{stringliteral}{'MTURK\_HIT\_DATA'})
367         )
368         self.mturk\_utils.get\_mturk\_client = mock.MagicMock(
369             return\_value=mock.MagicMock()
370         )
371 
372         self.onboarding\_agents = \{\}
373         self.worlds\_agents = \{\}
374 
375         \textcolor{comment}{# Set up an MTurk Manager and get it ready for accepting workers}
376         self.fake\_socket = MockSocket()
377         time.sleep(0.1)
378         argparser = ParlaiParser(\textcolor{keyword}{False}, \textcolor{keyword}{False})
379         argparser.add\_parlai\_data\_path()
380         argparser.add\_mturk\_args()
381         self.opt = argparser.parse\_args(print\_args=\textcolor{keyword}{False})
382         self.opt[\textcolor{stringliteral}{'task'}] = \textcolor{stringliteral}{'unittest'}
383         self.opt[\textcolor{stringliteral}{'assignment\_duration\_in\_seconds'}] = 1
384         self.opt[\textcolor{stringliteral}{'hit\_title'}] = \textcolor{stringliteral}{'test\_hit\_title'}
385         self.opt[\textcolor{stringliteral}{'hit\_description'}] = \textcolor{stringliteral}{'test\_hit\_description'}
386         self.opt[\textcolor{stringliteral}{'task\_description'}] = \textcolor{stringliteral}{'test\_task\_description'}
387         self.opt[\textcolor{stringliteral}{'hit\_keywords'}] = \textcolor{stringliteral}{'test\_hit\_keywords'}
388         self.opt[\textcolor{stringliteral}{'reward'}] = 0.1
389         self.opt[\textcolor{stringliteral}{'is\_debug'}] = \textcolor{keyword}{True}
390         self.opt[\textcolor{stringliteral}{'log\_level'}] = 0
391         self.opt[\textcolor{stringliteral}{'num\_conversations'}] = 1
392         self.mturk\_agent\_ids = [\textcolor{stringliteral}{'mturk\_agent\_1'}, \textcolor{stringliteral}{'mturk\_agent\_2'}]
393         self.mturk\_manager = MTurkManager(
394             opt=self.opt, mturk\_agent\_ids=self.mturk\_agent\_ids, is\_test=\textcolor{keyword}{True}
395         )
396         self.mturk\_manager.port = self.fake\_socket.port
397         self.mturk\_manager.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1server__utils_afb56b04206cd0f42384438f1ac6d9cda}{setup\_server}()
398         self.mturk\_manager.start\_new\_run()
399         self.mturk\_manager.ready\_to\_accept\_workers()
400         self.mturk\_manager.set\_onboard\_function(self.onboard\_agent)
401         self.mturk\_manager.create\_hits()
402 
403         \textcolor{keyword}{def }assign\_worker\_roles(workers):
404             workers[0].id = \textcolor{stringliteral}{'mturk\_agent\_1'}
405             workers[1].id = \textcolor{stringliteral}{'mturk\_agent\_2'}
406 
407         \textcolor{keyword}{def }run\_task\_wait():
408             self.mturk\_manager.start\_task(
409                 \textcolor{keyword}{lambda} w: \textcolor{keyword}{True}, assign\_worker\_roles, self.run\_conversation
410             )
411 
412         self.task\_thread = threading.Thread(target=run\_task\_wait)
413         self.task\_thread.start()
414 
415         self.agent\_1 = MockAgent(
416             TEST\_HIT\_ID\_1, TEST\_ASSIGNMENT\_ID\_1, TEST\_WORKER\_ID\_1, TASK\_GROUP\_ID\_1
417         )
418         self.agent\_1\_2 = MockAgent(
419             TEST\_HIT\_ID\_1, TEST\_ASSIGNMENT\_ID\_3, TEST\_WORKER\_ID\_1, TASK\_GROUP\_ID\_1
420         )
421         self.agent\_2 = MockAgent(
422             TEST\_HIT\_ID\_2, TEST\_ASSIGNMENT\_ID\_2, TEST\_WORKER\_ID\_2, TASK\_GROUP\_ID\_1
423         )
424 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a96dc5bc96ad19bebc578320da3423944}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a96dc5bc96ad19bebc578320da3423944}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!tear\+Down@{tear\+Down}}
\index{tear\+Down@{tear\+Down}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{tear\+Down()}{tearDown()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+tear\+Down (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 425 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
425     \textcolor{keyword}{def }tearDown(self):
426         self.agent\_1.always\_beat = \textcolor{keyword}{False}
427         self.agent\_2.always\_beat = \textcolor{keyword}{False}
428         \textcolor{keywordflow}{for} key \textcolor{keywordflow}{in} self.worlds\_agents.keys():
429             self.worlds\_agents[key] = \textcolor{keyword}{True}
430         self.mturk\_manager.shutdown()
431         self.fake\_socket.close()
432         self.task\_thread.join()
433 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_aa9c54fd5422ab76b88b4ad9ec7c3fa43}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_aa9c54fd5422ab76b88b4ad9ec7c3fa43}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+attempt\+\_\+break\+\_\+unique@{test\+\_\+attempt\+\_\+break\+\_\+unique}}
\index{test\+\_\+attempt\+\_\+break\+\_\+unique@{test\+\_\+attempt\+\_\+break\+\_\+unique}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+attempt\+\_\+break\+\_\+unique()}{test\_attempt\_break\_unique()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+attempt\+\_\+break\+\_\+unique (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 726 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
726     \textcolor{keyword}{def }test\_attempt\_break\_unique(self):
727         manager = self.mturk\_manager
728         unique\_worker\_qual = \textcolor{stringliteral}{'is\_unique\_qual'}
729         manager.is\_unique = \textcolor{keyword}{True}
730         manager.opt[\textcolor{stringliteral}{'unique\_qual\_name'}] = unique\_worker\_qual
731         manager.unique\_qual\_name = unique\_worker\_qual
732 
733         \textcolor{comment}{# Alive first agent}
734         agent\_1 = self.agent\_1
735         self.alive\_agent(agent\_1)
736         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
737         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
738             agent\_1.assignment\_id
739         )
740         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
741         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
742         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
743         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
744 
745         \textcolor{comment}{# Alive second agent}
746         agent\_2 = self.agent\_2
747         self.alive\_agent(agent\_2)
748         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
749         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
750             agent\_2.assignment\_id
751         )
752         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
753         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
754         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
755         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
756 
757         \textcolor{comment}{# Assert agents move to task}
758         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
759         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.worlds\_agents, \textcolor{keyword}{True}, 2)
760         self.assertIn(agent\_1.worker\_id, self.worlds\_agents)
761 
762         \textcolor{comment}{# Complete agents}
763         self.worlds\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
764         self.worlds\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
765         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_DONE, 2)
766         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_DONE, 2)
767 
768         \textcolor{comment}{# Assert conversation is complete for manager and agents}
769         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: manager.completed\_conversations, 1, 2)
770         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
771             \textcolor{keyword}{lambda}: len(
772                 [
773                     p
774                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
775                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
776                 ]
777             ),
778             1,
779             2,
780         )
781         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
782             \textcolor{keyword}{lambda}: len(
783                 [
784                     p
785                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
786                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
787                 ]
788             ),
789             1,
790             2,
791         )
792 
793         \textcolor{comment}{# Assert sockets are closed}
794         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
795             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 2, 2
796         )
797 
798         \textcolor{comment}{# ensure qualification was 'granted'}
799         self.mturk\_utils.find\_qualification.assert\_called\_with(
800             unique\_worker\_qual, manager.is\_sandbox
801         )
802         self.mturk\_utils.give\_worker\_qualification.assert\_any\_call(
803             agent\_1.worker\_id, QUALIFICATION\_ID, \textcolor{keywordtype}{None}, manager.is\_sandbox
804         )
805         self.mturk\_utils.give\_worker\_qualification.assert\_any\_call(
806             agent\_2.worker\_id, QUALIFICATION\_ID, \textcolor{keywordtype}{None}, manager.is\_sandbox
807         )
808 
809         \textcolor{comment}{# Try to alive with the first agent a second time}
810         agent\_1\_2 = self.agent\_1\_2
811         self.alive\_agent(agent\_1\_2)
812         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
813         agent\_1\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
814             agent\_1\_2.assignment\_id
815         )
816 
817         \textcolor{comment}{# No worker should be created for a unique task}
818         self.assertIsNone(agent\_1\_2\_object)
819 
820         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
821             \textcolor{keyword}{lambda}: len(
822                 [
823                     p
824                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1\_2.message\_packet
825                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_EXPIRE\_HIT
826                 ]
827             ),
828             1,
829             2,
830         )
831 
832         \textcolor{comment}{# Assert sockets are closed}
833         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
834             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 3, 2
835         )
836 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a7bb327cdbf5f8266b384e619fbe28cd9}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a7bb327cdbf5f8266b384e619fbe28cd9}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+break\+\_\+multi\+\_\+convo@{test\+\_\+break\+\_\+multi\+\_\+convo}}
\index{test\+\_\+break\+\_\+multi\+\_\+convo@{test\+\_\+break\+\_\+multi\+\_\+convo}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+break\+\_\+multi\+\_\+convo()}{test\_break\_multi\_convo()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+break\+\_\+multi\+\_\+convo (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 837 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
837     \textcolor{keyword}{def }test\_break\_multi\_convo(self):
838         manager = self.mturk\_manager
839         manager.opt[\textcolor{stringliteral}{'allowed\_conversations'}] = 1
840 
841         \textcolor{comment}{# Alive first agent}
842         agent\_1 = self.agent\_1
843         self.alive\_agent(agent\_1)
844         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
845         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
846             agent\_1.assignment\_id
847         )
848         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
849         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
850         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
851         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
852 
853         \textcolor{comment}{# Alive second agent}
854         agent\_2 = self.agent\_2
855         self.alive\_agent(agent\_2)
856         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
857         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
858             agent\_2.assignment\_id
859         )
860         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
861         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
862         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
863         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
864 
865         \textcolor{comment}{# Assert agents move to task}
866         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
867         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.worlds\_agents, \textcolor{keyword}{True}, 2)
868         self.assertIn(agent\_1.worker\_id, self.worlds\_agents)
869 
870         \textcolor{comment}{# Attempt to start a new conversation with duplicate worker 1}
871         agent\_1\_2 = self.agent\_1\_2
872         self.alive\_agent(agent\_1\_2)
873         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
874         agent\_1\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
875             agent\_1\_2.assignment\_id
876         )
877 
878         \textcolor{comment}{# No worker should be created for a unique task}
879         self.assertIsNone(agent\_1\_2\_object)
880 
881         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
882             \textcolor{keyword}{lambda}: len(
883                 [
884                     p
885                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1\_2.message\_packet
886                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_EXPIRE\_HIT
887                 ]
888             ),
889             1,
890             2,
891         )
892 
893         \textcolor{comment}{# Assert sockets are closed}
894         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
895             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 1, 2
896         )
897 
898         \textcolor{comment}{# Complete agents}
899         self.worlds\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
900         self.worlds\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
901         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_DONE, 2)
902         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_DONE, 2)
903 
904         \textcolor{comment}{# Assert conversation is complete for manager and agents}
905         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
906             \textcolor{keyword}{lambda}: len(
907                 [
908                     p
909                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
910                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
911                 ]
912             ),
913             1,
914             2,
915         )
916         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
917             \textcolor{keyword}{lambda}: len(
918                 [
919                     p
920                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
921                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
922                 ]
923             ),
924             1,
925             2,
926         )
927         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: manager.completed\_conversations, 1, 2)
928 
929         \textcolor{comment}{# Assert sockets are closed}
930         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
931             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 3, 2
932         )
933 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ac0466657a3df17ee6bb334696ee27d20}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ac0466657a3df17ee6bb334696ee27d20}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+disconnect\+\_\+end@{test\+\_\+disconnect\+\_\+end}}
\index{test\+\_\+disconnect\+\_\+end@{test\+\_\+disconnect\+\_\+end}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+disconnect\+\_\+end()}{test\_disconnect\_end()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+disconnect\+\_\+end (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 524 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
524     \textcolor{keyword}{def }test\_disconnect\_end(self):
525         manager = self.mturk\_manager
526 
527         \textcolor{comment}{# Alive first agent}
528         agent\_1 = self.agent\_1
529         self.alive\_agent(agent\_1)
530         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
531         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
532             agent\_1.assignment\_id
533         )
534         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
535         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
536         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
537         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
538 
539         \textcolor{comment}{# Alive second agent}
540         agent\_2 = self.agent\_2
541         self.alive\_agent(agent\_2)
542         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
543         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
544             agent\_2.assignment\_id
545         )
546         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
547         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
548         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
549         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
550 
551         \textcolor{comment}{# Assert agents move to task}
552         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
553         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.worlds\_agents, \textcolor{keyword}{True}, 2)
554         self.assertIn(agent\_1.worker\_id, self.worlds\_agents)
555 
556         \textcolor{comment}{# Disconnect agent}
557         agent\_2.always\_beat = \textcolor{keyword}{False}
558         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
559             agent\_1\_object.get\_status, AssignState.STATUS\_PARTNER\_DISCONNECT, 3
560         )
561         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_DISCONNECT, 3)
562         self.worlds\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
563         self.worlds\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
564         agent\_2.always\_beat = \textcolor{keyword}{True}
565         agent\_2.send\_alive()
566 
567         \textcolor{comment}{# Assert workers get the correct command}
568         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
569             \textcolor{keyword}{lambda}: len(
570                 [
571                     p
572                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
573                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_INACTIVE\_DONE
574                 ]
575             ),
576             1,
577             2,
578         )
579         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
580             \textcolor{keyword}{lambda}: len(
581                 [
582                     p
583                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
584                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_INACTIVE\_HIT
585                 ]
586             ),
587             1,
588             2,
589         )
590 
591         \textcolor{comment}{# assert conversation not marked as complete}
592         self.assertEqual(manager.completed\_conversations, 0)
593 
594         \textcolor{comment}{# Assert sockets are closed}
595         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
596             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 2, 2
597         )
598 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5301ddab598be8dd5efc3231e6f0ae75}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5301ddab598be8dd5efc3231e6f0ae75}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+expire\+\_\+onboarding@{test\+\_\+expire\+\_\+onboarding}}
\index{test\+\_\+expire\+\_\+onboarding@{test\+\_\+expire\+\_\+onboarding}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+expire\+\_\+onboarding()}{test\_expire\_onboarding()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+expire\+\_\+onboarding (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 599 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
599     \textcolor{keyword}{def }test\_expire\_onboarding(self):
600         manager = self.mturk\_manager
601 
602         \textcolor{comment}{# Alive first agent}
603         agent\_1 = self.agent\_1
604         self.alive\_agent(agent\_1)
605         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 10)
606         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
607             agent\_1.assignment\_id
608         )
609         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
610         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
611 
612         manager.\_expire\_onboarding\_pool()
613 
614         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
615             \textcolor{keyword}{lambda}: len(
616                 [
617                     p
618                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
619                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_EXPIRE\_HIT
620                 ]
621             ),
622             1,
623             10,
624         )
625 
626         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
627 
628         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_EXPIRED)
629 
630         \textcolor{comment}{# Assert sockets are closed}
631         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
632             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]),
633             1,
634             10,
635         )
636 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a9b6327cbeb64e4ddfb0154001660bede}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a9b6327cbeb64e4ddfb0154001660bede}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting@{test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting}}
\index{test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting@{test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting()}{test\_no\_onboard\_expire\_waiting()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 934 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
934     \textcolor{keyword}{def }test\_no\_onboard\_expire\_waiting(self):
935         manager = self.mturk\_manager
936         manager.set\_onboard\_function(\textcolor{keywordtype}{None})
937 
938         \textcolor{comment}{# Alive first agent}
939         agent\_1 = self.agent\_1
940         self.alive\_agent(agent\_1)
941         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
942             agent\_1.assignment\_id
943         )
944         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
945 
946         manager.\_expire\_agent\_pool()
947 
948         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
949             \textcolor{keyword}{lambda}: len(
950                 [
951                     p
952                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
953                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_EXPIRE\_HIT
954                 ]
955             ),
956             1,
957             2,
958         )
959 
960         \textcolor{comment}{# Assert sockets are closed}
961         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
962             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 1, 2
963         )
964 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_acec734d4011e2e2815dcfa36846c5007}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_acec734d4011e2e2815dcfa36846c5007}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+reconnect\+\_\+complete@{test\+\_\+reconnect\+\_\+complete}}
\index{test\+\_\+reconnect\+\_\+complete@{test\+\_\+reconnect\+\_\+complete}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+reconnect\+\_\+complete()}{test\_reconnect\_complete()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+reconnect\+\_\+complete (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 637 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
637     \textcolor{keyword}{def }test\_reconnect\_complete(self):
638         manager = self.mturk\_manager
639 
640         \textcolor{comment}{# Alive first agent}
641         agent\_1 = self.agent\_1
642         self.alive\_agent(agent\_1)
643         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
644         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
645             agent\_1.assignment\_id
646         )
647         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
648         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
649         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
650         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
651 
652         \textcolor{comment}{# Alive second agent}
653         agent\_2 = self.agent\_2
654         self.alive\_agent(agent\_2)
655         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
656         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
657             agent\_2.assignment\_id
658         )
659         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
660         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
661         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
662         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
663 
664         \textcolor{comment}{# Assert agents move to task}
665         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
666         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.worlds\_agents, \textcolor{keyword}{True}, 2)
667         self.assertIn(agent\_1.worker\_id, self.worlds\_agents)
668 
669         \textcolor{comment}{# Simulate reconnect to task}
670         stored\_conv\_id = agent\_2.conversation\_id
671         stored\_agent\_id = agent\_2.id
672         agent\_2.conversation\_id = \textcolor{keywordtype}{None}
673         agent\_2.id = \textcolor{keywordtype}{None}
674         agent\_2.send\_alive()
675 
676         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
677             \textcolor{keyword}{lambda}: len(
678                 [
679                     p
680                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
681                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_RESTORE\_STATE
682                 ]
683             ),
684             1,
685             4,
686         )
687         self.assertEqual(agent\_2.id, stored\_agent\_id)
688         self.assertEqual(agent\_2.conversation\_id, stored\_conv\_id)
689 
690         \textcolor{comment}{# Complete agents}
691         self.worlds\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
692         self.worlds\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
693         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_DONE, 2)
694         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_DONE, 2)
695 
696         \textcolor{comment}{# Assert conversation is complete for manager and agents}
697         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: manager.completed\_conversations, 1, 2)
698         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
699             \textcolor{keyword}{lambda}: len(
700                 [
701                     p
702                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
703                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
704                 ]
705             ),
706             1,
707             2,
708         )
709         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
710             \textcolor{keyword}{lambda}: len(
711                 [
712                     p
713                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
714                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
715                 ]
716             ),
717             1,
718             2,
719         )
720 
721         \textcolor{comment}{# Assert sockets are closed}
722         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
723             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 2, 2
724         )
725 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8df04134623a7f640044c410742eab5f}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8df04134623a7f640044c410742eab5f}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start@{test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start}}
\index{test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start@{test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start()}{test\_return\_to\_waiting\_on\_world\_start()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 965 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
965     \textcolor{keyword}{def }test\_return\_to\_waiting\_on\_world\_start(self):
966         manager = self.mturk\_manager
967 
968         \textcolor{comment}{# Alive first agent}
969         agent\_1 = self.agent\_1
970         self.alive\_agent(agent\_1)
971         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
972         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
973             agent\_1.assignment\_id
974         )
975         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
976         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
977         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
978         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
979 
980         \textcolor{comment}{# Make agent\_1 no longer respond to change\_conversation\_requests}
981         \textcolor{keyword}{def }replace\_on\_msg(packet):
982             agent\_1.message\_packet.append(packet)
983 
984         agent\_1.on\_msg = replace\_on\_msg
985 
986         \textcolor{comment}{# Alive second agent}
987         agent\_2 = self.agent\_2
988         self.alive\_agent(agent\_2)
989         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
990         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
991             agent\_2.assignment\_id
992         )
993         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
994         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
995         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
996         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
997 
998         \textcolor{comment}{# Assert agents attempt to move to task, but then move back to waiting}
999         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
1000         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 3)
1001         agent\_1.always\_beat = \textcolor{keyword}{False}
1002 
1003         \textcolor{comment}{# Assert no world ever started}
1004         self.assertNotIn(agent\_2.worker\_id, self.worlds\_agents)
1005 
1006         \textcolor{comment}{# Expire everything}
1007         manager.shutdown()
1008 
1009         \textcolor{comment}{# Assert sockets are closed}
1010         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
1011             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 2, 2
1012         )
1013 
1014 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a296f430cd647d9d0f8f5dd600edd6d36}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a296f430cd647d9d0f8f5dd600edd6d36}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+successful\+\_\+convo@{test\+\_\+successful\+\_\+convo}}
\index{test\+\_\+successful\+\_\+convo@{test\+\_\+successful\+\_\+convo}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+successful\+\_\+convo()}{test\_successful\_convo()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+successful\+\_\+convo (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 456 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
456     \textcolor{keyword}{def }test\_successful\_convo(self):
457         manager = self.mturk\_manager
458 
459         \textcolor{comment}{# Alive first agent}
460         agent\_1 = self.agent\_1
461         self.alive\_agent(agent\_1)
462         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
463         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
464             agent\_1.assignment\_id
465         )
466         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
467         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
468         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
469         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
470 
471         \textcolor{comment}{# Alive second agent}
472         agent\_2 = self.agent\_2
473         self.alive\_agent(agent\_2)
474         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
475         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
476             agent\_2.assignment\_id
477         )
478         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
479         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
480         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
481         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
482 
483         \textcolor{comment}{# Assert agents move to task}
484         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
485         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.worlds\_agents, \textcolor{keyword}{True}, 2)
486         self.assertIn(agent\_1.worker\_id, self.worlds\_agents)
487 
488         \textcolor{comment}{# Complete agents}
489         self.worlds\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
490         self.worlds\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
491         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_DONE, 2)
492         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_DONE, 2)
493 
494         \textcolor{comment}{# Assert conversation is complete for manager and agents}
495         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: manager.completed\_conversations, 1, 2)
496         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
497             \textcolor{keyword}{lambda}: len(
498                 [
499                     p
500                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
501                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
502                 ]
503             ),
504             1,
505             2,
506         )
507         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
508             \textcolor{keyword}{lambda}: len(
509                 [
510                     p
511                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
512                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
513                 ]
514             ),
515             1,
516             2,
517         )
518 
519         \textcolor{comment}{# Assert sockets are closed}
520         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
521             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 2, 2
522         )
523 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_af75fab9da29a7a7adedfa49fb6c7efe4}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_af75fab9da29a7a7adedfa49fb6c7efe4}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!agent\+\_\+1@{agent\+\_\+1}}
\index{agent\+\_\+1@{agent\+\_\+1}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{agent\+\_\+1}{agent\_1}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+agent\+\_\+1}



Definition at line 415 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_abb425b9d16b6be8629cd7be30cbf7807}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_abb425b9d16b6be8629cd7be30cbf7807}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!agent\+\_\+1\+\_\+2@{agent\+\_\+1\+\_\+2}}
\index{agent\+\_\+1\+\_\+2@{agent\+\_\+1\+\_\+2}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{agent\+\_\+1\+\_\+2}{agent\_1\_2}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+agent\+\_\+1\+\_\+2}



Definition at line 418 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a2c51ad339f5b08a7ea9761d5660c1583}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a2c51ad339f5b08a7ea9761d5660c1583}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!agent\+\_\+2@{agent\+\_\+2}}
\index{agent\+\_\+2@{agent\+\_\+2}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{agent\+\_\+2}{agent\_2}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+agent\+\_\+2}



Definition at line 421 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0f72ef4f16147cd568d57bc59fec3459}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0f72ef4f16147cd568d57bc59fec3459}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!fake\+\_\+socket@{fake\+\_\+socket}}
\index{fake\+\_\+socket@{fake\+\_\+socket}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{fake\+\_\+socket}{fake\_socket}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+fake\+\_\+socket}



Definition at line 376 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5aa97409076eb69e4386d9478a122868}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5aa97409076eb69e4386d9478a122868}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!mturk\+\_\+agent\+\_\+ids@{mturk\+\_\+agent\+\_\+ids}}
\index{mturk\+\_\+agent\+\_\+ids@{mturk\+\_\+agent\+\_\+ids}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{mturk\+\_\+agent\+\_\+ids}{mturk\_agent\_ids}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+mturk\+\_\+agent\+\_\+ids}



Definition at line 392 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a839a3a790373427e3b343211171a67c5}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a839a3a790373427e3b343211171a67c5}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!mturk\+\_\+manager@{mturk\+\_\+manager}}
\index{mturk\+\_\+manager@{mturk\+\_\+manager}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{mturk\+\_\+manager}{mturk\_manager}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+mturk\+\_\+manager}



Definition at line 393 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ad8a38778eb818919df721821f65ff09c}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ad8a38778eb818919df721821f65ff09c}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!mturk\+\_\+utils@{mturk\+\_\+utils}}
\index{mturk\+\_\+utils@{mturk\+\_\+utils}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{mturk\+\_\+utils}{mturk\_utils}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+mturk\+\_\+utils}



Definition at line 340 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a163889950d1b5b09877f5346022f6eba}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a163889950d1b5b09877f5346022f6eba}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!onboarding\+\_\+agents@{onboarding\+\_\+agents}}
\index{onboarding\+\_\+agents@{onboarding\+\_\+agents}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{onboarding\+\_\+agents}{onboarding\_agents}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+onboarding\+\_\+agents}



Definition at line 372 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a6e01485f42a084dde205f2c2a1973d49}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a6e01485f42a084dde205f2c2a1973d49}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!opt@{opt}}
\index{opt@{opt}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+opt}



Definition at line 381 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8a9534a104611205c284286617d4f729}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8a9534a104611205c284286617d4f729}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!server\+\_\+utils@{server\+\_\+utils}}
\index{server\+\_\+utils@{server\+\_\+utils}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{server\+\_\+utils}{server\_utils}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+server\+\_\+utils}



Definition at line 339 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a10818ca4dc156255151ae726ec198b9c}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a10818ca4dc156255151ae726ec198b9c}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!task\+\_\+thread@{task\+\_\+thread}}
\index{task\+\_\+thread@{task\+\_\+thread}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{task\+\_\+thread}{task\_thread}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+task\+\_\+thread}



Definition at line 412 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a59b5d95ba6e3f38d3f5eb92445dbb73f}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a59b5d95ba6e3f38d3f5eb92445dbb73f}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!worlds\+\_\+agents@{worlds\+\_\+agents}}
\index{worlds\+\_\+agents@{worlds\+\_\+agents}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{worlds\+\_\+agents}{worlds\_agents}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+worlds\+\_\+agents}



Definition at line 373 of file test\+\_\+full\+\_\+system.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/core/legacy\+\_\+2018/test/\hyperlink{legacy__2018_2test_2test__full__system_8py}{test\+\_\+full\+\_\+system.\+py}\end{DoxyCompactItemize}
