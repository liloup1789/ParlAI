\hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows}{}\section{parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows Class Reference}
\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows}\index{parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows@{parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows}}


Inheritance diagram for parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{d9/da1/classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{db/d2c/classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ab361c63be767de8fd43419409a0b5b6e}{set\+Up} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a96dc5bc96ad19bebc578320da3423944}{tear\+Down} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_addc7b32cde25acc733e8363e2d91d04e}{onboard\+\_\+agent} (self, worker)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0441bae10079f6823a36126581caba48}{run\+\_\+conversation} (self, \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a839a3a790373427e3b343211171a67c5}{mturk\+\_\+manager}, \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a6e01485f42a084dde205f2c2a1973d49}{opt}, workers)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a3647aaf9288745bbceaf873fbbea9301}{alive\+\_\+agent} (self, agent)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a296f430cd647d9d0f8f5dd600edd6d36}{test\+\_\+successful\+\_\+convo} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ac0466657a3df17ee6bb334696ee27d20}{test\+\_\+disconnect\+\_\+end} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5301ddab598be8dd5efc3231e6f0ae75}{test\+\_\+expire\+\_\+onboarding} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_acec734d4011e2e2815dcfa36846c5007}{test\+\_\+reconnect\+\_\+complete} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_aa9c54fd5422ab76b88b4ad9ec7c3fa43}{test\+\_\+attempt\+\_\+break\+\_\+unique} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a7bb327cdbf5f8266b384e619fbe28cd9}{test\+\_\+break\+\_\+multi\+\_\+convo} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a9b6327cbeb64e4ddfb0154001660bede}{test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8df04134623a7f640044c410742eab5f}{test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8a9534a104611205c284286617d4f729}{server\+\_\+utils}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ad8a38778eb818919df721821f65ff09c}{mturk\+\_\+utils}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a163889950d1b5b09877f5346022f6eba}{onboarding\+\_\+agents}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a59b5d95ba6e3f38d3f5eb92445dbb73f}{worlds\+\_\+agents}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0f72ef4f16147cd568d57bc59fec3459}{fake\+\_\+socket}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a6e01485f42a084dde205f2c2a1973d49}{opt}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5aa97409076eb69e4386d9478a122868}{mturk\+\_\+agent\+\_\+ids}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a839a3a790373427e3b343211171a67c5}{mturk\+\_\+manager}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a10818ca4dc156255151ae726ec198b9c}{task\+\_\+thread}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_af75fab9da29a7a7adedfa49fb6c7efe4}{agent\+\_\+1}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_abb425b9d16b6be8629cd7be30cbf7807}{agent\+\_\+1\+\_\+2}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a2c51ad339f5b08a7ea9761d5660c1583}{agent\+\_\+2}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Various test cases to replicate a whole mturk workflow.
\end{DoxyVerb}
 

Definition at line 331 of file test\+\_\+full\+\_\+system.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a3647aaf9288745bbceaf873fbbea9301}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a3647aaf9288745bbceaf873fbbea9301}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!alive\+\_\+agent@{alive\+\_\+agent}}
\index{alive\+\_\+agent@{alive\+\_\+agent}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{alive\+\_\+agent()}{alive\_agent()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+alive\+\_\+agent (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent }\end{DoxyParamCaption})}



Definition at line 453 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
453     \textcolor{keyword}{def }alive\_agent(self, agent):
454         agent.register\_to\_socket(self.fake\_socket)
455         agent.wait\_for\_alive()
456         agent.send\_heartbeat()
457 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_addc7b32cde25acc733e8363e2d91d04e}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_addc7b32cde25acc733e8363e2d91d04e}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!onboard\+\_\+agent@{onboard\+\_\+agent}}
\index{onboard\+\_\+agent@{onboard\+\_\+agent}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{onboard\+\_\+agent()}{onboard\_agent()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+onboard\+\_\+agent (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{worker }\end{DoxyParamCaption})}



Definition at line 436 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
436     \textcolor{keyword}{def }onboard\_agent(self, worker):
437         self.onboarding\_agents[worker.worker\_id] = \textcolor{keyword}{False}
438         \textcolor{keywordflow}{while} (worker.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents) \textcolor{keywordflow}{and} (
439             self.onboarding\_agents[worker.worker\_id] \textcolor{keywordflow}{is} \textcolor{keyword}{False}
440         ):
441             time.sleep(0.05)
442         \textcolor{keywordflow}{return}
443 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0441bae10079f6823a36126581caba48}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0441bae10079f6823a36126581caba48}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!run\+\_\+conversation@{run\+\_\+conversation}}
\index{run\+\_\+conversation@{run\+\_\+conversation}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{run\+\_\+conversation()}{run\_conversation()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+run\+\_\+conversation (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{mturk\+\_\+manager,  }\item[{}]{opt,  }\item[{}]{workers }\end{DoxyParamCaption})}



Definition at line 444 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
444     \textcolor{keyword}{def }run\_conversation(self, mturk\_manager, opt, workers):
445         \textcolor{keywordflow}{for} worker \textcolor{keywordflow}{in} workers:
446             self.worlds\_agents[worker.worker\_id] = \textcolor{keyword}{False}
447         \textcolor{keywordflow}{for} worker \textcolor{keywordflow}{in} workers:
448             \textcolor{keywordflow}{while} self.worlds\_agents[worker.worker\_id] \textcolor{keywordflow}{is} \textcolor{keyword}{False}:
449                 time.sleep(0.05)
450         \textcolor{keywordflow}{for} worker \textcolor{keywordflow}{in} workers:
451             worker.shutdown(timeout=-1)
452 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ab361c63be767de8fd43419409a0b5b6e}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ab361c63be767de8fd43419409a0b5b6e}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!set\+Up@{set\+Up}}
\index{set\+Up@{set\+Up}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{set\+Up()}{setUp()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+set\+Up (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 336 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
336     \textcolor{keyword}{def }setUp(self):
337         patcher = mock.patch(\textcolor{stringliteral}{'builtins.input'}, return\_value=\textcolor{stringliteral}{'y'})
338         self.addCleanup(patcher.stop)
339         patcher.start()
340         \textcolor{comment}{# Mock functions that hit external APIs and such}
341         self.server\_utils = MTurkManagerFile.server\_utils
342         self.mturk\_utils = MTurkManagerFile.mturk\_utils
343         self.server\_utils.setup\_server = mock.MagicMock(
344             return\_value=\textcolor{stringliteral}{'https://127.0.0.1'}
345         )
346         self.server\_utils.setup\_legacy\_server = mock.MagicMock(
347             return\_value=\textcolor{stringliteral}{'https://127.0.0.1'}
348         )
349         self.server\_utils.delete\_server = mock.MagicMock()
350         self.mturk\_utils.setup\_aws\_credentials = mock.MagicMock()
351         self.mturk\_utils.calculate\_mturk\_cost = mock.MagicMock(return\_value=1)
352         self.mturk\_utils.check\_mturk\_balance = mock.MagicMock(return\_value=\textcolor{keyword}{True})
353         self.mturk\_utils.create\_hit\_config = mock.MagicMock()
354         self.mturk\_utils.setup\_sns\_topic = mock.MagicMock(return\_value=TOPIC\_ARN)
355         self.mturk\_utils.delete\_sns\_topic = mock.MagicMock()
356         self.mturk\_utils.delete\_qualification = mock.MagicMock()
357         self.mturk\_utils.find\_or\_create\_qualification = mock.MagicMock(
358             return\_value=QUALIFICATION\_ID
359         )
360         self.mturk\_utils.find\_qualification = mock.MagicMock(
361             return\_value=QUALIFICATION\_ID
362         )
363         self.mturk\_utils.give\_worker\_qualification = mock.MagicMock()
364         self.mturk\_utils.remove\_worker\_qualification = mock.MagicMock()
365         self.mturk\_utils.create\_hit\_type = mock.MagicMock(return\_value=HIT\_TYPE\_ID)
366         self.mturk\_utils.subscribe\_to\_hits = mock.MagicMock()
367         self.mturk\_utils.create\_hit\_with\_hit\_type = mock.MagicMock(
368             return\_value=(MTURK\_PAGE\_URL, FAKE\_HIT\_ID, \textcolor{stringliteral}{'MTURK\_HIT\_DATA'})
369         )
370         self.mturk\_utils.get\_mturk\_client = mock.MagicMock(
371             return\_value=mock.MagicMock()
372         )
373 
374         self.onboarding\_agents = \{\}
375         self.worlds\_agents = \{\}
376 
377         \textcolor{comment}{# Set up an MTurk Manager and get it ready for accepting workers}
378         self.fake\_socket = MockSocket()
379         time.sleep(0.1)
380         argparser = ParlaiParser(\textcolor{keyword}{False}, \textcolor{keyword}{False})
381         argparser.add\_parlai\_data\_path()
382         argparser.add\_mturk\_args()
383         self.opt = argparser.parse\_args(print\_args=\textcolor{keyword}{False})
384         self.opt[\textcolor{stringliteral}{'task'}] = \textcolor{stringliteral}{'unittest'}
385         self.opt[\textcolor{stringliteral}{'assignment\_duration\_in\_seconds'}] = 1
386         self.opt[\textcolor{stringliteral}{'hit\_title'}] = \textcolor{stringliteral}{'test\_hit\_title'}
387         self.opt[\textcolor{stringliteral}{'hit\_description'}] = \textcolor{stringliteral}{'test\_hit\_description'}
388         self.opt[\textcolor{stringliteral}{'task\_description'}] = \textcolor{stringliteral}{'test\_task\_description'}
389         self.opt[\textcolor{stringliteral}{'hit\_keywords'}] = \textcolor{stringliteral}{'test\_hit\_keywords'}
390         self.opt[\textcolor{stringliteral}{'reward'}] = 0.1
391         self.opt[\textcolor{stringliteral}{'is\_debug'}] = \textcolor{keyword}{True}
392         self.opt[\textcolor{stringliteral}{'log\_level'}] = 0
393         self.opt[\textcolor{stringliteral}{'num\_conversations'}] = 1
394         self.mturk\_agent\_ids = [\textcolor{stringliteral}{'mturk\_agent\_1'}, \textcolor{stringliteral}{'mturk\_agent\_2'}]
395         self.mturk\_manager = MTurkManager(
396             opt=self.opt, mturk\_agent\_ids=self.mturk\_agent\_ids, is\_test=\textcolor{keyword}{True}
397         )
398         self.mturk\_manager.port = self.fake\_socket.port
399         self.mturk\_manager.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1server__utils_afb56b04206cd0f42384438f1ac6d9cda}{setup\_server}()
400         self.mturk\_manager.start\_new\_run()
401         self.mturk\_manager.ready\_to\_accept\_workers()
402         self.mturk\_manager.set\_onboard\_function(self.onboard\_agent)
403         self.mturk\_manager.create\_hits()
404 
405         \textcolor{keyword}{def }assign\_worker\_roles(workers):
406             workers[0].id = \textcolor{stringliteral}{'mturk\_agent\_1'}
407             workers[1].id = \textcolor{stringliteral}{'mturk\_agent\_2'}
408 
409         \textcolor{keyword}{def }run\_task\_wait():
410             self.mturk\_manager.start\_task(
411                 \textcolor{keyword}{lambda} w: \textcolor{keyword}{True}, assign\_worker\_roles, self.run\_conversation
412             )
413 
414         self.task\_thread = threading.Thread(target=run\_task\_wait)
415         self.task\_thread.start()
416 
417         self.agent\_1 = MockAgent(
418             TEST\_HIT\_ID\_1, TEST\_ASSIGNMENT\_ID\_1, TEST\_WORKER\_ID\_1, TASK\_GROUP\_ID\_1
419         )
420         self.agent\_1\_2 = MockAgent(
421             TEST\_HIT\_ID\_1, TEST\_ASSIGNMENT\_ID\_3, TEST\_WORKER\_ID\_1, TASK\_GROUP\_ID\_1
422         )
423         self.agent\_2 = MockAgent(
424             TEST\_HIT\_ID\_2, TEST\_ASSIGNMENT\_ID\_2, TEST\_WORKER\_ID\_2, TASK\_GROUP\_ID\_1
425         )
426 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a96dc5bc96ad19bebc578320da3423944}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a96dc5bc96ad19bebc578320da3423944}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!tear\+Down@{tear\+Down}}
\index{tear\+Down@{tear\+Down}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{tear\+Down()}{tearDown()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+tear\+Down (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 427 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
427     \textcolor{keyword}{def }tearDown(self):
428         self.agent\_1.always\_beat = \textcolor{keyword}{False}
429         self.agent\_2.always\_beat = \textcolor{keyword}{False}
430         \textcolor{keywordflow}{for} key \textcolor{keywordflow}{in} self.worlds\_agents.keys():
431             self.worlds\_agents[key] = \textcolor{keyword}{True}
432         self.mturk\_manager.shutdown()
433         self.fake\_socket.close()
434         self.task\_thread.join()
435 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_aa9c54fd5422ab76b88b4ad9ec7c3fa43}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_aa9c54fd5422ab76b88b4ad9ec7c3fa43}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+attempt\+\_\+break\+\_\+unique@{test\+\_\+attempt\+\_\+break\+\_\+unique}}
\index{test\+\_\+attempt\+\_\+break\+\_\+unique@{test\+\_\+attempt\+\_\+break\+\_\+unique}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+attempt\+\_\+break\+\_\+unique()}{test\_attempt\_break\_unique()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+attempt\+\_\+break\+\_\+unique (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 728 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
728     \textcolor{keyword}{def }test\_attempt\_break\_unique(self):
729         manager = self.mturk\_manager
730         unique\_worker\_qual = \textcolor{stringliteral}{'is\_unique\_qual'}
731         manager.is\_unique = \textcolor{keyword}{True}
732         manager.opt[\textcolor{stringliteral}{'unique\_qual\_name'}] = unique\_worker\_qual
733         manager.unique\_qual\_name = unique\_worker\_qual
734 
735         \textcolor{comment}{# Alive first agent}
736         agent\_1 = self.agent\_1
737         self.alive\_agent(agent\_1)
738         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
739         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
740             agent\_1.assignment\_id
741         )
742         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
743         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
744         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
745         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
746 
747         \textcolor{comment}{# Alive second agent}
748         agent\_2 = self.agent\_2
749         self.alive\_agent(agent\_2)
750         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
751         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
752             agent\_2.assignment\_id
753         )
754         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
755         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
756         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
757         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
758 
759         \textcolor{comment}{# Assert agents move to task}
760         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
761         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.worlds\_agents, \textcolor{keyword}{True}, 2)
762         self.assertIn(agent\_1.worker\_id, self.worlds\_agents)
763 
764         \textcolor{comment}{# Complete agents}
765         self.worlds\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
766         self.worlds\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
767         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_DONE, 2)
768         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_DONE, 2)
769 
770         \textcolor{comment}{# Assert conversation is complete for manager and agents}
771         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: manager.completed\_conversations, 1, 2)
772         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
773             \textcolor{keyword}{lambda}: len(
774                 [
775                     p
776                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
777                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
778                 ]
779             ),
780             1,
781             2,
782         )
783         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
784             \textcolor{keyword}{lambda}: len(
785                 [
786                     p
787                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
788                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
789                 ]
790             ),
791             1,
792             2,
793         )
794 
795         \textcolor{comment}{# Assert sockets are closed}
796         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
797             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 2, 2
798         )
799 
800         \textcolor{comment}{# ensure qualification was 'granted'}
801         self.mturk\_utils.find\_qualification.assert\_called\_with(
802             unique\_worker\_qual, manager.is\_sandbox
803         )
804         self.mturk\_utils.give\_worker\_qualification.assert\_any\_call(
805             agent\_1.worker\_id, QUALIFICATION\_ID, \textcolor{keywordtype}{None}, manager.is\_sandbox
806         )
807         self.mturk\_utils.give\_worker\_qualification.assert\_any\_call(
808             agent\_2.worker\_id, QUALIFICATION\_ID, \textcolor{keywordtype}{None}, manager.is\_sandbox
809         )
810 
811         \textcolor{comment}{# Try to alive with the first agent a second time}
812         agent\_1\_2 = self.agent\_1\_2
813         self.alive\_agent(agent\_1\_2)
814         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
815         agent\_1\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
816             agent\_1\_2.assignment\_id
817         )
818 
819         \textcolor{comment}{# No worker should be created for a unique task}
820         self.assertIsNone(agent\_1\_2\_object)
821 
822         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
823             \textcolor{keyword}{lambda}: len(
824                 [
825                     p
826                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1\_2.message\_packet
827                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_EXPIRE\_HIT
828                 ]
829             ),
830             1,
831             2,
832         )
833 
834         \textcolor{comment}{# Assert sockets are closed}
835         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
836             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 3, 2
837         )
838 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a7bb327cdbf5f8266b384e619fbe28cd9}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a7bb327cdbf5f8266b384e619fbe28cd9}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+break\+\_\+multi\+\_\+convo@{test\+\_\+break\+\_\+multi\+\_\+convo}}
\index{test\+\_\+break\+\_\+multi\+\_\+convo@{test\+\_\+break\+\_\+multi\+\_\+convo}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+break\+\_\+multi\+\_\+convo()}{test\_break\_multi\_convo()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+break\+\_\+multi\+\_\+convo (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 839 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
839     \textcolor{keyword}{def }test\_break\_multi\_convo(self):
840         manager = self.mturk\_manager
841         manager.opt[\textcolor{stringliteral}{'allowed\_conversations'}] = 1
842 
843         \textcolor{comment}{# Alive first agent}
844         agent\_1 = self.agent\_1
845         self.alive\_agent(agent\_1)
846         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
847         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
848             agent\_1.assignment\_id
849         )
850         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
851         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
852         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
853         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
854 
855         \textcolor{comment}{# Alive second agent}
856         agent\_2 = self.agent\_2
857         self.alive\_agent(agent\_2)
858         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
859         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
860             agent\_2.assignment\_id
861         )
862         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
863         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
864         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
865         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
866 
867         \textcolor{comment}{# Assert agents move to task}
868         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
869         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.worlds\_agents, \textcolor{keyword}{True}, 2)
870         self.assertIn(agent\_1.worker\_id, self.worlds\_agents)
871 
872         \textcolor{comment}{# Attempt to start a new conversation with duplicate worker 1}
873         agent\_1\_2 = self.agent\_1\_2
874         self.alive\_agent(agent\_1\_2)
875         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
876         agent\_1\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
877             agent\_1\_2.assignment\_id
878         )
879 
880         \textcolor{comment}{# No worker should be created for a unique task}
881         self.assertIsNone(agent\_1\_2\_object)
882 
883         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
884             \textcolor{keyword}{lambda}: len(
885                 [
886                     p
887                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1\_2.message\_packet
888                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_EXPIRE\_HIT
889                 ]
890             ),
891             1,
892             2,
893         )
894 
895         \textcolor{comment}{# Assert sockets are closed}
896         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
897             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 1, 2
898         )
899 
900         \textcolor{comment}{# Complete agents}
901         self.worlds\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
902         self.worlds\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
903         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_DONE, 2)
904         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_DONE, 2)
905 
906         \textcolor{comment}{# Assert conversation is complete for manager and agents}
907         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
908             \textcolor{keyword}{lambda}: len(
909                 [
910                     p
911                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
912                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
913                 ]
914             ),
915             1,
916             2,
917         )
918         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
919             \textcolor{keyword}{lambda}: len(
920                 [
921                     p
922                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
923                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
924                 ]
925             ),
926             1,
927             2,
928         )
929         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: manager.completed\_conversations, 1, 2)
930 
931         \textcolor{comment}{# Assert sockets are closed}
932         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
933             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 3, 2
934         )
935 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ac0466657a3df17ee6bb334696ee27d20}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ac0466657a3df17ee6bb334696ee27d20}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+disconnect\+\_\+end@{test\+\_\+disconnect\+\_\+end}}
\index{test\+\_\+disconnect\+\_\+end@{test\+\_\+disconnect\+\_\+end}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+disconnect\+\_\+end()}{test\_disconnect\_end()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+disconnect\+\_\+end (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 526 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
526     \textcolor{keyword}{def }test\_disconnect\_end(self):
527         manager = self.mturk\_manager
528 
529         \textcolor{comment}{# Alive first agent}
530         agent\_1 = self.agent\_1
531         self.alive\_agent(agent\_1)
532         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
533         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
534             agent\_1.assignment\_id
535         )
536         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
537         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
538         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
539         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
540 
541         \textcolor{comment}{# Alive second agent}
542         agent\_2 = self.agent\_2
543         self.alive\_agent(agent\_2)
544         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
545         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
546             agent\_2.assignment\_id
547         )
548         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
549         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
550         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
551         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
552 
553         \textcolor{comment}{# Assert agents move to task}
554         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
555         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.worlds\_agents, \textcolor{keyword}{True}, 2)
556         self.assertIn(agent\_1.worker\_id, self.worlds\_agents)
557 
558         \textcolor{comment}{# Disconnect agent}
559         agent\_2.always\_beat = \textcolor{keyword}{False}
560         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
561             agent\_1\_object.get\_status, AssignState.STATUS\_PARTNER\_DISCONNECT, 3
562         )
563         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_DISCONNECT, 3)
564         self.worlds\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
565         self.worlds\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
566         agent\_2.always\_beat = \textcolor{keyword}{True}
567         agent\_2.send\_alive()
568 
569         \textcolor{comment}{# Assert workers get the correct command}
570         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
571             \textcolor{keyword}{lambda}: len(
572                 [
573                     p
574                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
575                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_INACTIVE\_DONE
576                 ]
577             ),
578             1,
579             2,
580         )
581         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
582             \textcolor{keyword}{lambda}: len(
583                 [
584                     p
585                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
586                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_INACTIVE\_HIT
587                 ]
588             ),
589             1,
590             2,
591         )
592 
593         \textcolor{comment}{# assert conversation not marked as complete}
594         self.assertEqual(manager.completed\_conversations, 0)
595 
596         \textcolor{comment}{# Assert sockets are closed}
597         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
598             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 2, 2
599         )
600 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5301ddab598be8dd5efc3231e6f0ae75}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5301ddab598be8dd5efc3231e6f0ae75}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+expire\+\_\+onboarding@{test\+\_\+expire\+\_\+onboarding}}
\index{test\+\_\+expire\+\_\+onboarding@{test\+\_\+expire\+\_\+onboarding}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+expire\+\_\+onboarding()}{test\_expire\_onboarding()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+expire\+\_\+onboarding (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 601 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
601     \textcolor{keyword}{def }test\_expire\_onboarding(self):
602         manager = self.mturk\_manager
603 
604         \textcolor{comment}{# Alive first agent}
605         agent\_1 = self.agent\_1
606         self.alive\_agent(agent\_1)
607         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 10)
608         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
609             agent\_1.assignment\_id
610         )
611         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
612         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
613 
614         manager.\_expire\_onboarding\_pool()
615 
616         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
617             \textcolor{keyword}{lambda}: len(
618                 [
619                     p
620                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
621                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_EXPIRE\_HIT
622                 ]
623             ),
624             1,
625             10,
626         )
627 
628         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
629 
630         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_EXPIRED)
631 
632         \textcolor{comment}{# Assert sockets are closed}
633         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
634             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]),
635             1,
636             10,
637         )
638 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a9b6327cbeb64e4ddfb0154001660bede}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a9b6327cbeb64e4ddfb0154001660bede}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting@{test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting}}
\index{test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting@{test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting()}{test\_no\_onboard\_expire\_waiting()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+no\+\_\+onboard\+\_\+expire\+\_\+waiting (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 936 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
936     \textcolor{keyword}{def }test\_no\_onboard\_expire\_waiting(self):
937         manager = self.mturk\_manager
938         manager.set\_onboard\_function(\textcolor{keywordtype}{None})
939 
940         \textcolor{comment}{# Alive first agent}
941         agent\_1 = self.agent\_1
942         self.alive\_agent(agent\_1)
943         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
944             agent\_1.assignment\_id
945         )
946         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
947 
948         manager.\_expire\_agent\_pool()
949 
950         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
951             \textcolor{keyword}{lambda}: len(
952                 [
953                     p
954                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
955                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_EXPIRE\_HIT
956                 ]
957             ),
958             1,
959             2,
960         )
961 
962         \textcolor{comment}{# Assert sockets are closed}
963         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
964             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 1, 2
965         )
966 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_acec734d4011e2e2815dcfa36846c5007}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_acec734d4011e2e2815dcfa36846c5007}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+reconnect\+\_\+complete@{test\+\_\+reconnect\+\_\+complete}}
\index{test\+\_\+reconnect\+\_\+complete@{test\+\_\+reconnect\+\_\+complete}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+reconnect\+\_\+complete()}{test\_reconnect\_complete()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+reconnect\+\_\+complete (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 639 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
639     \textcolor{keyword}{def }test\_reconnect\_complete(self):
640         manager = self.mturk\_manager
641 
642         \textcolor{comment}{# Alive first agent}
643         agent\_1 = self.agent\_1
644         self.alive\_agent(agent\_1)
645         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
646         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
647             agent\_1.assignment\_id
648         )
649         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
650         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
651         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
652         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
653 
654         \textcolor{comment}{# Alive second agent}
655         agent\_2 = self.agent\_2
656         self.alive\_agent(agent\_2)
657         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
658         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
659             agent\_2.assignment\_id
660         )
661         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
662         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
663         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
664         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
665 
666         \textcolor{comment}{# Assert agents move to task}
667         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
668         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.worlds\_agents, \textcolor{keyword}{True}, 2)
669         self.assertIn(agent\_1.worker\_id, self.worlds\_agents)
670 
671         \textcolor{comment}{# Simulate reconnect to task}
672         stored\_conv\_id = agent\_2.conversation\_id
673         stored\_agent\_id = agent\_2.id
674         agent\_2.conversation\_id = \textcolor{keywordtype}{None}
675         agent\_2.id = \textcolor{keywordtype}{None}
676         agent\_2.send\_alive()
677 
678         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
679             \textcolor{keyword}{lambda}: len(
680                 [
681                     p
682                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
683                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_RESTORE\_STATE
684                 ]
685             ),
686             1,
687             4,
688         )
689         self.assertEqual(agent\_2.id, stored\_agent\_id)
690         self.assertEqual(agent\_2.conversation\_id, stored\_conv\_id)
691 
692         \textcolor{comment}{# Complete agents}
693         self.worlds\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
694         self.worlds\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
695         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_DONE, 2)
696         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_DONE, 2)
697 
698         \textcolor{comment}{# Assert conversation is complete for manager and agents}
699         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: manager.completed\_conversations, 1, 2)
700         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
701             \textcolor{keyword}{lambda}: len(
702                 [
703                     p
704                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
705                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
706                 ]
707             ),
708             1,
709             2,
710         )
711         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
712             \textcolor{keyword}{lambda}: len(
713                 [
714                     p
715                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
716                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
717                 ]
718             ),
719             1,
720             2,
721         )
722 
723         \textcolor{comment}{# Assert sockets are closed}
724         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
725             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 2, 2
726         )
727 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8df04134623a7f640044c410742eab5f}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8df04134623a7f640044c410742eab5f}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start@{test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start}}
\index{test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start@{test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start()}{test\_return\_to\_waiting\_on\_world\_start()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+return\+\_\+to\+\_\+waiting\+\_\+on\+\_\+world\+\_\+start (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 967 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
967     \textcolor{keyword}{def }test\_return\_to\_waiting\_on\_world\_start(self):
968         manager = self.mturk\_manager
969 
970         \textcolor{comment}{# Alive first agent}
971         agent\_1 = self.agent\_1
972         self.alive\_agent(agent\_1)
973         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
974         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
975             agent\_1.assignment\_id
976         )
977         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
978         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
979         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
980         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
981 
982         \textcolor{comment}{# Make agent\_1 no longer respond to change\_conversation\_requests}
983         \textcolor{keyword}{def }replace\_on\_msg(packet):
984             agent\_1.message\_packet.append(packet)
985 
986         agent\_1.on\_msg = replace\_on\_msg
987 
988         \textcolor{comment}{# Alive second agent}
989         agent\_2 = self.agent\_2
990         self.alive\_agent(agent\_2)
991         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
992         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
993             agent\_2.assignment\_id
994         )
995         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
996         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
997         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
998         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
999 
1000         \textcolor{comment}{# Assert agents attempt to move to task, but then move back to waiting}
1001         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
1002         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 3)
1003         agent\_1.always\_beat = \textcolor{keyword}{False}
1004 
1005         \textcolor{comment}{# Assert no world ever started}
1006         self.assertNotIn(agent\_2.worker\_id, self.worlds\_agents)
1007 
1008         \textcolor{comment}{# Expire everything}
1009         manager.shutdown()
1010 
1011         \textcolor{comment}{# Assert sockets are closed}
1012         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
1013             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 2, 2
1014         )
1015 
1016 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a296f430cd647d9d0f8f5dd600edd6d36}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a296f430cd647d9d0f8f5dd600edd6d36}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!test\+\_\+successful\+\_\+convo@{test\+\_\+successful\+\_\+convo}}
\index{test\+\_\+successful\+\_\+convo@{test\+\_\+successful\+\_\+convo}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{test\+\_\+successful\+\_\+convo()}{test\_successful\_convo()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+test\+\_\+successful\+\_\+convo (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 458 of file test\+\_\+full\+\_\+system.\+py.


\begin{DoxyCode}
458     \textcolor{keyword}{def }test\_successful\_convo(self):
459         manager = self.mturk\_manager
460 
461         \textcolor{comment}{# Alive first agent}
462         agent\_1 = self.agent\_1
463         self.alive\_agent(agent\_1)
464         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_1.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
465         agent\_1\_object = manager.worker\_manager.get\_agent\_for\_assignment(
466             agent\_1.assignment\_id
467         )
468         self.assertFalse(self.onboarding\_agents[agent\_1.worker\_id])
469         self.assertEqual(agent\_1\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
470         self.onboarding\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
471         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_WAITING, 2)
472 
473         \textcolor{comment}{# Alive second agent}
474         agent\_2 = self.agent\_2
475         self.alive\_agent(agent\_2)
476         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.onboarding\_agents, \textcolor{keyword}{True}, 2)
477         agent\_2\_object = manager.worker\_manager.get\_agent\_for\_assignment(
478             agent\_2.assignment\_id
479         )
480         self.assertFalse(self.onboarding\_agents[agent\_2.worker\_id])
481         self.assertEqual(agent\_2\_object.get\_status(), AssignState.STATUS\_ONBOARDING)
482         self.onboarding\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
483         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_WAITING, 2)
484 
485         \textcolor{comment}{# Assert agents move to task}
486         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_IN\_TASK, 2)
487         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: agent\_2.worker\_id \textcolor{keywordflow}{in} self.worlds\_agents, \textcolor{keyword}{True}, 2)
488         self.assertIn(agent\_1.worker\_id, self.worlds\_agents)
489 
490         \textcolor{comment}{# Complete agents}
491         self.worlds\_agents[agent\_1.worker\_id] = \textcolor{keyword}{True}
492         self.worlds\_agents[agent\_2.worker\_id] = \textcolor{keyword}{True}
493         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_1\_object.get\_status, AssignState.STATUS\_DONE, 2)
494         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(agent\_2\_object.get\_status, AssignState.STATUS\_DONE, 2)
495 
496         \textcolor{comment}{# Assert conversation is complete for manager and agents}
497         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(\textcolor{keyword}{lambda}: manager.completed\_conversations, 1, 2)
498         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
499             \textcolor{keyword}{lambda}: len(
500                 [
501                     p
502                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_1.message\_packet
503                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
504                 ]
505             ),
506             1,
507             2,
508         )
509         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
510             \textcolor{keyword}{lambda}: len(
511                 [
512                     p
513                     \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} agent\_2.message\_packet
514                     \textcolor{keywordflow}{if} p.data[\textcolor{stringliteral}{'text'}] == data\_model.COMMAND\_SHOW\_DONE\_BUTTON
515                 ]
516             ),
517             1,
518             2,
519         )
520 
521         \textcolor{comment}{# Assert sockets are closed}
522         \hyperlink{namespaceparlai_1_1mturk_1_1core_1_1test_1_1test__full__system_a0b463246d35658a2e422010f13dcf819}{assert\_equal\_by}(
523             \textcolor{keyword}{lambda}: len([x \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} manager.socket\_manager.run.values() \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} x]), 2, 2
524         )
525 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_af75fab9da29a7a7adedfa49fb6c7efe4}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_af75fab9da29a7a7adedfa49fb6c7efe4}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!agent\+\_\+1@{agent\+\_\+1}}
\index{agent\+\_\+1@{agent\+\_\+1}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{agent\+\_\+1}{agent\_1}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+agent\+\_\+1}



Definition at line 417 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_abb425b9d16b6be8629cd7be30cbf7807}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_abb425b9d16b6be8629cd7be30cbf7807}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!agent\+\_\+1\+\_\+2@{agent\+\_\+1\+\_\+2}}
\index{agent\+\_\+1\+\_\+2@{agent\+\_\+1\+\_\+2}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{agent\+\_\+1\+\_\+2}{agent\_1\_2}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+agent\+\_\+1\+\_\+2}



Definition at line 420 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a2c51ad339f5b08a7ea9761d5660c1583}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a2c51ad339f5b08a7ea9761d5660c1583}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!agent\+\_\+2@{agent\+\_\+2}}
\index{agent\+\_\+2@{agent\+\_\+2}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{agent\+\_\+2}{agent\_2}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+agent\+\_\+2}



Definition at line 423 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0f72ef4f16147cd568d57bc59fec3459}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a0f72ef4f16147cd568d57bc59fec3459}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!fake\+\_\+socket@{fake\+\_\+socket}}
\index{fake\+\_\+socket@{fake\+\_\+socket}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{fake\+\_\+socket}{fake\_socket}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+fake\+\_\+socket}



Definition at line 378 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5aa97409076eb69e4386d9478a122868}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a5aa97409076eb69e4386d9478a122868}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!mturk\+\_\+agent\+\_\+ids@{mturk\+\_\+agent\+\_\+ids}}
\index{mturk\+\_\+agent\+\_\+ids@{mturk\+\_\+agent\+\_\+ids}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{mturk\+\_\+agent\+\_\+ids}{mturk\_agent\_ids}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+mturk\+\_\+agent\+\_\+ids}



Definition at line 394 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a839a3a790373427e3b343211171a67c5}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a839a3a790373427e3b343211171a67c5}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!mturk\+\_\+manager@{mturk\+\_\+manager}}
\index{mturk\+\_\+manager@{mturk\+\_\+manager}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{mturk\+\_\+manager}{mturk\_manager}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+mturk\+\_\+manager}



Definition at line 395 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ad8a38778eb818919df721821f65ff09c}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_ad8a38778eb818919df721821f65ff09c}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!mturk\+\_\+utils@{mturk\+\_\+utils}}
\index{mturk\+\_\+utils@{mturk\+\_\+utils}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{mturk\+\_\+utils}{mturk\_utils}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+mturk\+\_\+utils}



Definition at line 342 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a163889950d1b5b09877f5346022f6eba}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a163889950d1b5b09877f5346022f6eba}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!onboarding\+\_\+agents@{onboarding\+\_\+agents}}
\index{onboarding\+\_\+agents@{onboarding\+\_\+agents}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{onboarding\+\_\+agents}{onboarding\_agents}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+onboarding\+\_\+agents}



Definition at line 374 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a6e01485f42a084dde205f2c2a1973d49}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a6e01485f42a084dde205f2c2a1973d49}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!opt@{opt}}
\index{opt@{opt}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+opt}



Definition at line 383 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8a9534a104611205c284286617d4f729}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a8a9534a104611205c284286617d4f729}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!server\+\_\+utils@{server\+\_\+utils}}
\index{server\+\_\+utils@{server\+\_\+utils}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{server\+\_\+utils}{server\_utils}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+server\+\_\+utils}



Definition at line 341 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a10818ca4dc156255151ae726ec198b9c}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a10818ca4dc156255151ae726ec198b9c}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!task\+\_\+thread@{task\+\_\+thread}}
\index{task\+\_\+thread@{task\+\_\+thread}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{task\+\_\+thread}{task\_thread}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+task\+\_\+thread}



Definition at line 414 of file test\+\_\+full\+\_\+system.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a59b5d95ba6e3f38d3f5eb92445dbb73f}\label{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1test_1_1test__full__system_1_1TestMTurkManagerWorkflows_a59b5d95ba6e3f38d3f5eb92445dbb73f}} 
\index{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}!worlds\+\_\+agents@{worlds\+\_\+agents}}
\index{worlds\+\_\+agents@{worlds\+\_\+agents}!parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows@{parlai\+::mturk\+::core\+::legacy\+\_\+2018\+::test\+::test\+\_\+full\+\_\+system\+::\+Test\+M\+Turk\+Manager\+Workflows}}
\subsubsection{\texorpdfstring{worlds\+\_\+agents}{worlds\_agents}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+legacy\+\_\+2018.\+test.\+test\+\_\+full\+\_\+system.\+Test\+M\+Turk\+Manager\+Workflows.\+worlds\+\_\+agents}



Definition at line 375 of file test\+\_\+full\+\_\+system.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/core/legacy\+\_\+2018/test/\hyperlink{legacy__2018_2test_2test__full__system_8py}{test\+\_\+full\+\_\+system.\+py}\end{DoxyCompactItemize}
