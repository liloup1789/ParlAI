\hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018}{}\section{parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018 Namespace Reference}
\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018}\index{parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018@{parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018}}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classparlai_1_1tasks_1_1opensubtitles_1_1build__2018_1_1DataProcessor}{Data\+Processor}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a6f66d00bdef41302d4c072958f8758a2}{get\+\_\+movie\+\_\+id} (filename\+\_\+path)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a9e74d36a72b56738f45b2dda7a867d46}{get\+\_\+list\+\_\+of\+\_\+files} (top\+\_\+path)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aed965b1234c5fdc4749b646a69b58f8e}{parse\+\_\+xml} (filepath)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ae4802978106d19e628d0024c8404cab6}{normalize\+\_\+whitespaces} (sentence)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a37607fa72082c0a8d4606157840496a7}{normalize\+\_\+apostrophe} (sentence)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a1bee89083b3ee54e034611194dd4e8ae}{clean\+\_\+text} (words)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aadc6244a9ec9fec904b712f932ec8b40}{parse\+\_\+time\+\_\+str} (time\+\_\+value\+\_\+str)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a7d8f1a916c145086bed432195a8ce504}{extract\+\_\+data\+\_\+from\+\_\+xml} (xml\+\_\+object)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a92813c751d7444e5d4023d8266dcd534}{conversation\+\_\+to\+\_\+fb\+\_\+format} (conversation)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ad28df42fcd131de2466bf5659703b14a}{conversation\+\_\+to\+\_\+basic\+\_\+format} (conversation)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a94026ef98d87f9598f74647cda960c6f}{create\+\_\+fb\+\_\+format} (inpath, outpath, use\+\_\+history)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a2a3e9dd46ca9629e1540e3a67104340b}{build} (datapath, use\+\_\+history)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a50834457c930da8ab48f04b3d8714c44}{R\+E\+S\+O\+U\+R\+C\+ES}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a4064cdac9a1bb68b7ad91ce505ffc880}{N\+U\+M\+\_\+\+M\+O\+V\+I\+E\+\_\+\+F\+O\+L\+D\+E\+RS}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a4a60deac50983a7e7c563eb7f9cf4a13}{N\+U\+M\+\_\+\+S\+U\+B\+T\+I\+T\+L\+E\+S\+\_\+\+F\+I\+L\+ES}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a7759d70d3602a5eb39d02232fb2a90dd}{M\+A\+X\+\_\+\+T\+I\+M\+E\+\_\+\+D\+I\+F\+F\+E\+R\+E\+N\+C\+E\+\_\+S}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a85a2759dc8c6e9a00879b1ec6dca6fae}{M\+I\+N\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_adf363645fe71bbaa48f08f659ed90bcb}{M\+A\+X\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aa6c0d72c5f5b4f7959fa467bf88ad85c}{C\+L\+E\+A\+N\+\_\+\+B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+R\+E\+G\+EX}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a93ce9ab977245a9c031341ace0c14905}{B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+C\+H\+A\+R\+A\+C\+T\+E\+RS}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a5c1b6cbec3209a9a71111847ff7244f4}{M\+U\+L\+T\+I\+\_\+\+W\+H\+I\+T\+E\+S\+P\+A\+C\+E\+S\+\_\+\+R\+E\+G\+EX}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a2585527b7bffd95ec9d874f5dd3e8326}{A\+P\+O\+S\+T\+R\+O\+P\+H\+E\+\_\+\+R\+E\+P\+L\+A\+C\+E\+M\+E\+N\+T\+\_\+\+R\+E\+G\+EX}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ada494d52f1f479a2ec92022fec1cf298}{C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+G\+E\+X\+\_\+\+R\+U\+L\+ES}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a775b1aaa8a41b1e2b37ee72ae9bc7f26}{C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+P\+L\+A\+C\+E\+\_\+\+R\+U\+L\+ES}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a2a3e9dd46ca9629e1540e3a67104340b}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a2a3e9dd46ca9629e1540e3a67104340b}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!build@{build}}
\index{build@{build}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{build()}{build()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+build (\begin{DoxyParamCaption}\item[{}]{datapath,  }\item[{}]{use\+\_\+history }\end{DoxyParamCaption})}



Definition at line 323 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
323 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a2a3e9dd46ca9629e1540e3a67104340b}{build}(datapath, use\_history):
324     dpath = os.path.join(datapath, \textcolor{stringliteral}{'OpenSubtitles2018'})
325     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} use\_history:
326         dpath += \textcolor{stringliteral}{'\_no\_history'}
327     version = \textcolor{stringliteral}{'1'}
328 
329     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} build\_data.built(dpath, version\_string=version):
330         print(\textcolor{stringliteral}{'[building data: '} + dpath + \textcolor{stringliteral}{']'})
331         \textcolor{keywordflow}{if} build\_data.built(dpath):
332             \textcolor{comment}{# An older version exists, so remove these outdated files.}
333             build\_data.remove\_dir(dpath)
334         build\_data.make\_dir(dpath)
335 
336         untar\_path = os.path.join(dpath, \textcolor{stringliteral}{'OpenSubtitles'}, \textcolor{stringliteral}{'xml'}, \textcolor{stringliteral}{'en'})
337 
338         \textcolor{keywordflow}{if} len(glob.glob(untar\_path + \textcolor{stringliteral}{'/*/*/*.xml'})) != NUM\_SUBTITLES\_FILES:
339             \textcolor{comment}{# Download the data.}
340             \textcolor{keywordflow}{for} downloadable\_file \textcolor{keywordflow}{in} RESOURCES:
341                 downloadable\_file.download\_file(dpath)
342 
343         \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a94026ef98d87f9598f74647cda960c6f}{create\_fb\_format}(untar\_path, dpath, use\_history)
344 
345         \textcolor{comment}{# Mark the data as built.}
346         build\_data.mark\_done(dpath, version\_string=version)
347     \textcolor{keywordflow}{return} dpath
348 \end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a1bee89083b3ee54e034611194dd4e8ae}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a1bee89083b3ee54e034611194dd4e8ae}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!clean\+\_\+text@{clean\+\_\+text}}
\index{clean\+\_\+text@{clean\+\_\+text}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{clean\+\_\+text()}{clean\_text()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+clean\+\_\+text (\begin{DoxyParamCaption}\item[{}]{words }\end{DoxyParamCaption})}



Definition at line 122 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
122 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a1bee89083b3ee54e034611194dd4e8ae}{clean\_text}(words):
123     \textcolor{keywordflow}{if} len(words) > 0 \textcolor{keywordflow}{and} words[-1] == \textcolor{stringliteral}{':'}:
124         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
125     sentence = \textcolor{stringliteral}{' '}.join(words).strip(\textcolor{stringliteral}{' -'}).lower()
126 
127     sentence = CLEAN\_BRACKETS\_REGEX.sub(\textcolor{stringliteral}{''}, sentence)
128     \textcolor{keywordflow}{if} len([ch \textcolor{keywordflow}{for} ch \textcolor{keywordflow}{in} BRACKETS\_CHARACTERS \textcolor{keywordflow}{if} ch \textcolor{keywordflow}{in} sentence]) > 0:
129         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
130 
131     sentence = sentence.replace(\textcolor{stringliteral}{'\(\backslash\)\(\backslash\)\(\backslash\)''}, \textcolor{stringliteral}{'\(\backslash\)''})
132     \textcolor{keywordflow}{if} sentence.count(\textcolor{stringliteral}{'"'}) % 2 == 1:
133         \textcolor{comment}{# There are unmatched double-quotes.}
134         \textcolor{comment}{# Usually, it means a quote got splitted into separate utterances,}
135         \textcolor{comment}{# so it's bad example of a dialog}
136         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
137 
138     sentence = \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a37607fa72082c0a8d4606157840496a7}{normalize\_apostrophe}(sentence)
139 
140     \textcolor{keywordflow}{for} (regex, replacement) \textcolor{keywordflow}{in} CLEANUP\_REGEX\_RULES:
141         sentence = regex.sub(replacement, sentence)
142     \textcolor{keywordflow}{for} (pattern, replacement) \textcolor{keywordflow}{in} CLEANUP\_REPLACE\_RULES:
143         sentence = sentence.replace(pattern, replacement)
144 
145     words = \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ae4802978106d19e628d0024c8404cab6}{normalize\_whitespaces}(sentence).split()
146 
147     \textcolor{keywordflow}{if} (
148         len(words) > 0
149         \textcolor{keywordflow}{and} any(map(\textcolor{keyword}{lambda} k: re.search(\textcolor{stringliteral}{r'\(\backslash\)w'}, k) \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}, words))
150         \textcolor{keywordflow}{and} len(words) >= MIN\_WORD\_LENGTH
151         \textcolor{keywordflow}{and} len(words) <= MAX\_WORD\_LENGTH
152     ):
153         \textcolor{keywordflow}{return} \textcolor{stringliteral}{' '}.join(words)
154     \textcolor{keywordflow}{else}:
155         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
156 
157 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ad28df42fcd131de2466bf5659703b14a}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ad28df42fcd131de2466bf5659703b14a}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!conversation\+\_\+to\+\_\+basic\+\_\+format@{conversation\+\_\+to\+\_\+basic\+\_\+format}}
\index{conversation\+\_\+to\+\_\+basic\+\_\+format@{conversation\+\_\+to\+\_\+basic\+\_\+format}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{conversation\+\_\+to\+\_\+basic\+\_\+format()}{conversation\_to\_basic\_format()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+conversation\+\_\+to\+\_\+basic\+\_\+format (\begin{DoxyParamCaption}\item[{}]{conversation }\end{DoxyParamCaption})}



Definition at line 244 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
244 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ad28df42fcd131de2466bf5659703b14a}{conversation\_to\_basic\_format}(conversation):
245     \textcolor{keyword}{assert} len(conversation) > 1
246     lines = []
247     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(conversation)):
248         \textcolor{keywordflow}{if} i + 1 < len(conversation):
249             lines.append(\textcolor{stringliteral}{'1 %s\(\backslash\)t%s'} % (conversation[i], conversation[i + 1]))
250     \textcolor{keywordflow}{return} \textcolor{stringliteral}{'\(\backslash\)n'}.join(lines)
251 
252 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a92813c751d7444e5d4023d8266dcd534}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a92813c751d7444e5d4023d8266dcd534}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!conversation\+\_\+to\+\_\+fb\+\_\+format@{conversation\+\_\+to\+\_\+fb\+\_\+format}}
\index{conversation\+\_\+to\+\_\+fb\+\_\+format@{conversation\+\_\+to\+\_\+fb\+\_\+format}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{conversation\+\_\+to\+\_\+fb\+\_\+format()}{conversation\_to\_fb\_format()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+conversation\+\_\+to\+\_\+fb\+\_\+format (\begin{DoxyParamCaption}\item[{}]{conversation }\end{DoxyParamCaption})}



Definition at line 231 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
231 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a92813c751d7444e5d4023d8266dcd534}{conversation\_to\_fb\_format}(conversation):
232     \textcolor{keyword}{assert} len(conversation) > 1
233     lines = []
234     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(0, len(conversation), 2):
235         \textcolor{keywordflow}{if} i + 1 < len(conversation):
236             lines.append(
237                 \textcolor{stringliteral}{'%d %s\(\backslash\)t%s'} % (i / 2 + 1, conversation[i], conversation[i + 1])
238             )
239         \textcolor{keywordflow}{else}:
240             lines.append(\textcolor{stringliteral}{'%d %s'} % (i / 2 + 1, conversation[i]))
241     \textcolor{keywordflow}{return} \textcolor{stringliteral}{'\(\backslash\)n'}.join(lines)
242 
243 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a94026ef98d87f9598f74647cda960c6f}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a94026ef98d87f9598f74647cda960c6f}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!create\+\_\+fb\+\_\+format@{create\+\_\+fb\+\_\+format}}
\index{create\+\_\+fb\+\_\+format@{create\+\_\+fb\+\_\+format}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{create\+\_\+fb\+\_\+format()}{create\_fb\_format()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+create\+\_\+fb\+\_\+format (\begin{DoxyParamCaption}\item[{}]{inpath,  }\item[{}]{outpath,  }\item[{}]{use\+\_\+history }\end{DoxyParamCaption})}



Definition at line 282 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
282 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a94026ef98d87f9598f74647cda960c6f}{create\_fb\_format}(inpath, outpath, use\_history):
283     print(\textcolor{stringliteral}{'[building fbformat]'})
284     start\_time = time.time()
285 
286     ftrain = open(os.path.join(outpath, \textcolor{stringliteral}{'train.txt'}), \textcolor{stringliteral}{'w'})
287     fvalid = open(os.path.join(outpath, \textcolor{stringliteral}{'valid.txt'}), \textcolor{stringliteral}{'w'})
288     ftest = open(os.path.join(outpath, \textcolor{stringliteral}{'test.txt'}), \textcolor{stringliteral}{'w'})
289 
290     movie\_dirs = \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a9e74d36a72b56738f45b2dda7a867d46}{get\_list\_of\_files}(inpath)
291     total\_movie\_dirs = len(movie\_dirs)
292     total\_files = sum([len(l) \textcolor{keywordflow}{for} l \textcolor{keywordflow}{in} movie\_dirs.values()])
293     print(
294         \textcolor{stringliteral}{'[Found %d movie folders and %d subtitles within %s in %d seconds]'}
295         % (total\_movie\_dirs, total\_files, inpath, time.time() - start\_time)
296     )
297 
298     \textcolor{keyword}{assert} total\_movie\_dirs == NUM\_MOVIE\_FOLDERS, \textcolor{stringliteral}{'Incorrect number of movies'}
299     \textcolor{keyword}{assert} total\_files == NUM\_SUBTITLES\_FILES, \textcolor{stringliteral}{'Incorrect number of files'}
300 
301     processor = DataProcessor(use\_history)
302 
303     with multiprocessing.Pool(processes=os.cpu\_count()) \textcolor{keyword}{as} pool:
304         \textcolor{keywordflow}{for} i, s \textcolor{keywordflow}{in} enumerate(pool.imap(processor, tqdm.tqdm(movie\_dirs.items()))):
305             handle = ftrain
306             \textcolor{comment}{# TODO: Shall we use smaller valid/test sets? Even 10% is A LOT here}
307             \textcolor{keywordflow}{if} i % 10 == 0:
308                 handle = ftest
309             \textcolor{keywordflow}{if} i % 10 == 1:
310                 handle = fvalid
311             handle.write(s)
312 
313     ftrain.close()
314     fvalid.close()
315     ftest.close()
316 
317     print(
318         \textcolor{stringliteral}{'[Data has been successfully extracted in %d seconds]'}
319         % (time.time() - start\_time,)
320     )
321 
322 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a7d8f1a916c145086bed432195a8ce504}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a7d8f1a916c145086bed432195a8ce504}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!extract\+\_\+data\+\_\+from\+\_\+xml@{extract\+\_\+data\+\_\+from\+\_\+xml}}
\index{extract\+\_\+data\+\_\+from\+\_\+xml@{extract\+\_\+data\+\_\+from\+\_\+xml}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{extract\+\_\+data\+\_\+from\+\_\+xml()}{extract\_data\_from\_xml()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+extract\+\_\+data\+\_\+from\+\_\+xml (\begin{DoxyParamCaption}\item[{}]{xml\+\_\+object }\end{DoxyParamCaption})}



Definition at line 177 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
177 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a7d8f1a916c145086bed432195a8ce504}{extract\_data\_from\_xml}(xml\_object):
178     previous\_end\_time = -1000
179     conversation = []
180     \textcolor{keywordflow}{for} sentence\_node \textcolor{keywordflow}{in} xml\_object.getroot():
181         \textcolor{keywordflow}{if} sentence\_node.tag != \textcolor{stringliteral}{'s'}:
182             \textcolor{keywordflow}{continue}
183 
184         words = []
185         start\_time, end\_time = \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}
186 
187         \textcolor{keywordflow}{for} node \textcolor{keywordflow}{in} sentence\_node:
188             \textcolor{keywordflow}{if} node.tag == \textcolor{stringliteral}{'time'}:
189                 time\_value = \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aadc6244a9ec9fec904b712f932ec8b40}{parse\_time\_str}(node.get(\textcolor{stringliteral}{'value'}))
190                 \textcolor{keywordflow}{if} time\_value \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
191                     \textcolor{keywordflow}{continue}
192                 \textcolor{keywordflow}{if} node.get(\textcolor{stringliteral}{'id'})[-1] == \textcolor{stringliteral}{'S'}:
193                     start\_time = (
194                         time\_value
195                         \textcolor{keywordflow}{if} start\_time \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}
196                         \textcolor{keywordflow}{else} min(time\_value, start\_time)
197                     )
198                 \textcolor{keywordflow}{elif} node.get(\textcolor{stringliteral}{'id'})[-1] == \textcolor{stringliteral}{'E'}:
199                     end\_time = (
200                         time\_value \textcolor{keywordflow}{if} end\_time \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} max(time\_value, end\_time)
201                     )
202                 \textcolor{keywordflow}{else}:
203                     \textcolor{keywordflow}{raise} Exception(\textcolor{stringliteral}{'Unknown time-id for node: %s'} % node)
204             \textcolor{keywordflow}{elif} node.tag == \textcolor{stringliteral}{'w'}:
205                 \textcolor{keywordflow}{if} node.text \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None} \textcolor{keywordflow}{and} len(node.text) > 0:
206                     words.append(node.text)
207             \textcolor{keywordflow}{else}:
208                 \textcolor{keywordflow}{pass}
209 
210         sentence = \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a1bee89083b3ee54e034611194dd4e8ae}{clean\_text}(words)
211 
212         start\_time = start\_time \textcolor{keywordflow}{or} previous\_end\_time
213         end\_time = end\_time \textcolor{keywordflow}{or} previous\_end\_time
214         \textcolor{comment}{# add to the conversation}
215         \textcolor{comment}{# flush and start new conversation}
216         \textcolor{keywordflow}{if} (
217             sentence \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}
218             \textcolor{keywordflow}{and} start\_time - previous\_end\_time <= MAX\_TIME\_DIFFERENCE\_S
219         ):
220             conversation.append(sentence)
221         \textcolor{keywordflow}{else}:
222             \textcolor{keywordflow}{if} len(conversation) > 1:
223                 \textcolor{keywordflow}{yield} conversation
224             conversation = []
225             \textcolor{keywordflow}{if} sentence \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
226                 conversation.append(sentence)
227 
228         previous\_end\_time = max(start\_time, end\_time)
229 
230 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a9e74d36a72b56738f45b2dda7a867d46}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a9e74d36a72b56738f45b2dda7a867d46}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!get\+\_\+list\+\_\+of\+\_\+files@{get\+\_\+list\+\_\+of\+\_\+files}}
\index{get\+\_\+list\+\_\+of\+\_\+files@{get\+\_\+list\+\_\+of\+\_\+files}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{get\+\_\+list\+\_\+of\+\_\+files()}{get\_list\_of\_files()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+get\+\_\+list\+\_\+of\+\_\+files (\begin{DoxyParamCaption}\item[{}]{top\+\_\+path }\end{DoxyParamCaption})}



Definition at line 88 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
88 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a9e74d36a72b56738f45b2dda7a867d46}{get\_list\_of\_files}(top\_path):
89     result = \{\}
90     \textcolor{keywordflow}{for} path, \_dirs, files \textcolor{keywordflow}{in} os.walk(top\_path):
91         \textcolor{keywordflow}{for} filename \textcolor{keywordflow}{in} files:
92             \textcolor{keywordflow}{if} filename.endswith(\textcolor{stringliteral}{'.xml'}):
93                 full\_filename = os.path.realpath(os.path.join(path, filename))
94                 \textcolor{keyword}{assert} os.path.isfile(full\_filename), \textcolor{stringliteral}{'Bad file '} + full\_filename
95                 movie\_id = \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a6f66d00bdef41302d4c072958f8758a2}{get\_movie\_id}(full\_filename)
96                 \textcolor{keywordflow}{if} movie\_id \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} result:
97                     result[movie\_id] = []
98                 result[movie\_id].append(full\_filename)
99     \textcolor{keywordflow}{return} result
100 
101 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a6f66d00bdef41302d4c072958f8758a2}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a6f66d00bdef41302d4c072958f8758a2}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!get\+\_\+movie\+\_\+id@{get\+\_\+movie\+\_\+id}}
\index{get\+\_\+movie\+\_\+id@{get\+\_\+movie\+\_\+id}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{get\+\_\+movie\+\_\+id()}{get\_movie\_id()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+get\+\_\+movie\+\_\+id (\begin{DoxyParamCaption}\item[{}]{filename\+\_\+path }\end{DoxyParamCaption})}



Definition at line 78 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
78 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a6f66d00bdef41302d4c072958f8758a2}{get\_movie\_id}(filename\_path):
79     dirpath, filename = os.path.split(filename\_path)
80     \_, movie\_id\_str = os.path.split(dirpath)
81     \textcolor{keywordflow}{return} \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(movie\_id\_str)
82 
83 
84 \textcolor{comment}{# OpenSubtitles2016 contains have several subtitles per movie,}
85 \textcolor{comment}{# stored in a separate folders.}
86 \textcolor{comment}{# We gather all subtitles files based on the movie they correspond to}
87 \textcolor{comment}{# and apply deduplication for the extracted replicas}
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a37607fa72082c0a8d4606157840496a7}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a37607fa72082c0a8d4606157840496a7}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!normalize\+\_\+apostrophe@{normalize\+\_\+apostrophe}}
\index{normalize\+\_\+apostrophe@{normalize\+\_\+apostrophe}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{normalize\+\_\+apostrophe()}{normalize\_apostrophe()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+normalize\+\_\+apostrophe (\begin{DoxyParamCaption}\item[{}]{sentence }\end{DoxyParamCaption})}



Definition at line 115 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
115 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a37607fa72082c0a8d4606157840496a7}{normalize\_apostrophe}(sentence):
116     sentence = \hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ae4802978106d19e628d0024c8404cab6}{normalize\_whitespaces}(sentence)
117     \textcolor{keywordflow}{for} rule \textcolor{keywordflow}{in} APOSTROPHE\_REPLACEMENT\_REGEX:
118         sentence = rule[0].sub(rule[1], sentence)
119     \textcolor{keywordflow}{return} sentence
120 
121 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ae4802978106d19e628d0024c8404cab6}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ae4802978106d19e628d0024c8404cab6}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!normalize\+\_\+whitespaces@{normalize\+\_\+whitespaces}}
\index{normalize\+\_\+whitespaces@{normalize\+\_\+whitespaces}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{normalize\+\_\+whitespaces()}{normalize\_whitespaces()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+normalize\+\_\+whitespaces (\begin{DoxyParamCaption}\item[{}]{sentence }\end{DoxyParamCaption})}



Definition at line 111 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
111 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ae4802978106d19e628d0024c8404cab6}{normalize\_whitespaces}(sentence):
112     \textcolor{keywordflow}{return} MULTI\_WHITESPACES\_REGEX.sub(\textcolor{stringliteral}{' '}, sentence).strip()
113 
114 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aadc6244a9ec9fec904b712f932ec8b40}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aadc6244a9ec9fec904b712f932ec8b40}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!parse\+\_\+time\+\_\+str@{parse\+\_\+time\+\_\+str}}
\index{parse\+\_\+time\+\_\+str@{parse\+\_\+time\+\_\+str}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{parse\+\_\+time\+\_\+str()}{parse\_time\_str()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+parse\+\_\+time\+\_\+str (\begin{DoxyParamCaption}\item[{}]{time\+\_\+value\+\_\+str }\end{DoxyParamCaption})}



Definition at line 158 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
158 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aadc6244a9ec9fec904b712f932ec8b40}{parse\_time\_str}(time\_value\_str):
159     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} (
160         time\_value\_str \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}
161         \textcolor{keywordflow}{and} len(time\_value\_str) == 12
162         \textcolor{keywordflow}{and} time\_value\_str[2] == \textcolor{stringliteral}{':'}
163         \textcolor{keywordflow}{and} time\_value\_str[5] == \textcolor{stringliteral}{':'}
164         \textcolor{keywordflow}{and} time\_value\_str[8] == \textcolor{stringliteral}{','}
165     ):
166         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
167     \textcolor{keywordflow}{try}:
168         \textcolor{keywordflow}{return} (
169             \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(time\_value\_str[0:2]) * 3600
170             + \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(time\_value\_str[3:5]) * 60
171             + \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(time\_value\_str[6:8])
172         )
173     \textcolor{keywordflow}{except} ValueError:
174         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
175 
176 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aed965b1234c5fdc4749b646a69b58f8e}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aed965b1234c5fdc4749b646a69b58f8e}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!parse\+\_\+xml@{parse\+\_\+xml}}
\index{parse\+\_\+xml@{parse\+\_\+xml}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{parse\+\_\+xml()}{parse\_xml()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+parse\+\_\+xml (\begin{DoxyParamCaption}\item[{}]{filepath }\end{DoxyParamCaption})}



Definition at line 102 of file build\+\_\+2018.\+py.


\begin{DoxyCode}
102 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aed965b1234c5fdc4749b646a69b58f8e}{parse\_xml}(filepath):
103     extension = os.path.splitext(filepath)[1]
104     \textcolor{keywordflow}{if} extension == \textcolor{stringliteral}{'.gz'}:
105         with gzip.open(filepath, \textcolor{stringliteral}{'r') as f:}
106 \textcolor{stringliteral}{            }\textcolor{keywordflow}{return} ET.parse(f)
107     \textcolor{keywordflow}{else}:
108         \textcolor{keywordflow}{return} ET.parse(filepath)
109 
110 
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a2585527b7bffd95ec9d874f5dd3e8326}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a2585527b7bffd95ec9d874f5dd3e8326}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!A\+P\+O\+S\+T\+R\+O\+P\+H\+E\+\_\+\+R\+E\+P\+L\+A\+C\+E\+M\+E\+N\+T\+\_\+\+R\+E\+G\+EX@{A\+P\+O\+S\+T\+R\+O\+P\+H\+E\+\_\+\+R\+E\+P\+L\+A\+C\+E\+M\+E\+N\+T\+\_\+\+R\+E\+G\+EX}}
\index{A\+P\+O\+S\+T\+R\+O\+P\+H\+E\+\_\+\+R\+E\+P\+L\+A\+C\+E\+M\+E\+N\+T\+\_\+\+R\+E\+G\+EX@{A\+P\+O\+S\+T\+R\+O\+P\+H\+E\+\_\+\+R\+E\+P\+L\+A\+C\+E\+M\+E\+N\+T\+\_\+\+R\+E\+G\+EX}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{A\+P\+O\+S\+T\+R\+O\+P\+H\+E\+\_\+\+R\+E\+P\+L\+A\+C\+E\+M\+E\+N\+T\+\_\+\+R\+E\+G\+EX}{APOSTROPHE\_REPLACEMENT\_REGEX}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+A\+P\+O\+S\+T\+R\+O\+P\+H\+E\+\_\+\+R\+E\+P\+L\+A\+C\+E\+M\+E\+N\+T\+\_\+\+R\+E\+G\+EX}



Definition at line 46 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a93ce9ab977245a9c031341ace0c14905}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a93ce9ab977245a9c031341ace0c14905}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+C\+H\+A\+R\+A\+C\+T\+E\+RS@{B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+C\+H\+A\+R\+A\+C\+T\+E\+RS}}
\index{B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+C\+H\+A\+R\+A\+C\+T\+E\+RS@{B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+C\+H\+A\+R\+A\+C\+T\+E\+RS}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+C\+H\+A\+R\+A\+C\+T\+E\+RS}{BRACKETS\_CHARACTERS}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+C\+H\+A\+R\+A\+C\+T\+E\+RS}



Definition at line 41 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aa6c0d72c5f5b4f7959fa467bf88ad85c}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_aa6c0d72c5f5b4f7959fa467bf88ad85c}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!C\+L\+E\+A\+N\+\_\+\+B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+R\+E\+G\+EX@{C\+L\+E\+A\+N\+\_\+\+B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+R\+E\+G\+EX}}
\index{C\+L\+E\+A\+N\+\_\+\+B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+R\+E\+G\+EX@{C\+L\+E\+A\+N\+\_\+\+B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+R\+E\+G\+EX}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{C\+L\+E\+A\+N\+\_\+\+B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+R\+E\+G\+EX}{CLEAN\_BRACKETS\_REGEX}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+C\+L\+E\+A\+N\+\_\+\+B\+R\+A\+C\+K\+E\+T\+S\+\_\+\+R\+E\+G\+EX}



Definition at line 36 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ada494d52f1f479a2ec92022fec1cf298}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_ada494d52f1f479a2ec92022fec1cf298}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+G\+E\+X\+\_\+\+R\+U\+L\+ES@{C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+G\+E\+X\+\_\+\+R\+U\+L\+ES}}
\index{C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+G\+E\+X\+\_\+\+R\+U\+L\+ES@{C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+G\+E\+X\+\_\+\+R\+U\+L\+ES}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+G\+E\+X\+\_\+\+R\+U\+L\+ES}{CLEANUP\_REGEX\_RULES}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+G\+E\+X\+\_\+\+R\+U\+L\+ES}



Definition at line 60 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a775b1aaa8a41b1e2b37ee72ae9bc7f26}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a775b1aaa8a41b1e2b37ee72ae9bc7f26}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+P\+L\+A\+C\+E\+\_\+\+R\+U\+L\+ES@{C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+P\+L\+A\+C\+E\+\_\+\+R\+U\+L\+ES}}
\index{C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+P\+L\+A\+C\+E\+\_\+\+R\+U\+L\+ES@{C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+P\+L\+A\+C\+E\+\_\+\+R\+U\+L\+ES}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+P\+L\+A\+C\+E\+\_\+\+R\+U\+L\+ES}{CLEANUP\_REPLACE\_RULES}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+C\+L\+E\+A\+N\+U\+P\+\_\+\+R\+E\+P\+L\+A\+C\+E\+\_\+\+R\+U\+L\+ES}



Definition at line 69 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a7759d70d3602a5eb39d02232fb2a90dd}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a7759d70d3602a5eb39d02232fb2a90dd}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!M\+A\+X\+\_\+\+T\+I\+M\+E\+\_\+\+D\+I\+F\+F\+E\+R\+E\+N\+C\+E\+\_\+S@{M\+A\+X\+\_\+\+T\+I\+M\+E\+\_\+\+D\+I\+F\+F\+E\+R\+E\+N\+C\+E\+\_\+S}}
\index{M\+A\+X\+\_\+\+T\+I\+M\+E\+\_\+\+D\+I\+F\+F\+E\+R\+E\+N\+C\+E\+\_\+S@{M\+A\+X\+\_\+\+T\+I\+M\+E\+\_\+\+D\+I\+F\+F\+E\+R\+E\+N\+C\+E\+\_\+S}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{M\+A\+X\+\_\+\+T\+I\+M\+E\+\_\+\+D\+I\+F\+F\+E\+R\+E\+N\+C\+E\+\_\+S}{MAX\_TIME\_DIFFERENCE\_S}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+M\+A\+X\+\_\+\+T\+I\+M\+E\+\_\+\+D\+I\+F\+F\+E\+R\+E\+N\+C\+E\+\_\+S}



Definition at line 31 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_adf363645fe71bbaa48f08f659ed90bcb}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_adf363645fe71bbaa48f08f659ed90bcb}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!M\+A\+X\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH@{M\+A\+X\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH}}
\index{M\+A\+X\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH@{M\+A\+X\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{M\+A\+X\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH}{MAX\_WORD\_LENGTH}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+M\+A\+X\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH}



Definition at line 33 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a85a2759dc8c6e9a00879b1ec6dca6fae}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a85a2759dc8c6e9a00879b1ec6dca6fae}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!M\+I\+N\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH@{M\+I\+N\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH}}
\index{M\+I\+N\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH@{M\+I\+N\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{M\+I\+N\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH}{MIN\_WORD\_LENGTH}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+M\+I\+N\+\_\+\+W\+O\+R\+D\+\_\+\+L\+E\+N\+G\+TH}



Definition at line 32 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a5c1b6cbec3209a9a71111847ff7244f4}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a5c1b6cbec3209a9a71111847ff7244f4}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!M\+U\+L\+T\+I\+\_\+\+W\+H\+I\+T\+E\+S\+P\+A\+C\+E\+S\+\_\+\+R\+E\+G\+EX@{M\+U\+L\+T\+I\+\_\+\+W\+H\+I\+T\+E\+S\+P\+A\+C\+E\+S\+\_\+\+R\+E\+G\+EX}}
\index{M\+U\+L\+T\+I\+\_\+\+W\+H\+I\+T\+E\+S\+P\+A\+C\+E\+S\+\_\+\+R\+E\+G\+EX@{M\+U\+L\+T\+I\+\_\+\+W\+H\+I\+T\+E\+S\+P\+A\+C\+E\+S\+\_\+\+R\+E\+G\+EX}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{M\+U\+L\+T\+I\+\_\+\+W\+H\+I\+T\+E\+S\+P\+A\+C\+E\+S\+\_\+\+R\+E\+G\+EX}{MULTI\_WHITESPACES\_REGEX}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+M\+U\+L\+T\+I\+\_\+\+W\+H\+I\+T\+E\+S\+P\+A\+C\+E\+S\+\_\+\+R\+E\+G\+EX}



Definition at line 43 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a4064cdac9a1bb68b7ad91ce505ffc880}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a4064cdac9a1bb68b7ad91ce505ffc880}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!N\+U\+M\+\_\+\+M\+O\+V\+I\+E\+\_\+\+F\+O\+L\+D\+E\+RS@{N\+U\+M\+\_\+\+M\+O\+V\+I\+E\+\_\+\+F\+O\+L\+D\+E\+RS}}
\index{N\+U\+M\+\_\+\+M\+O\+V\+I\+E\+\_\+\+F\+O\+L\+D\+E\+RS@{N\+U\+M\+\_\+\+M\+O\+V\+I\+E\+\_\+\+F\+O\+L\+D\+E\+RS}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{N\+U\+M\+\_\+\+M\+O\+V\+I\+E\+\_\+\+F\+O\+L\+D\+E\+RS}{NUM\_MOVIE\_FOLDERS}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+N\+U\+M\+\_\+\+M\+O\+V\+I\+E\+\_\+\+F\+O\+L\+D\+E\+RS}



Definition at line 28 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a4a60deac50983a7e7c563eb7f9cf4a13}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a4a60deac50983a7e7c563eb7f9cf4a13}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!N\+U\+M\+\_\+\+S\+U\+B\+T\+I\+T\+L\+E\+S\+\_\+\+F\+I\+L\+ES@{N\+U\+M\+\_\+\+S\+U\+B\+T\+I\+T\+L\+E\+S\+\_\+\+F\+I\+L\+ES}}
\index{N\+U\+M\+\_\+\+S\+U\+B\+T\+I\+T\+L\+E\+S\+\_\+\+F\+I\+L\+ES@{N\+U\+M\+\_\+\+S\+U\+B\+T\+I\+T\+L\+E\+S\+\_\+\+F\+I\+L\+ES}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{N\+U\+M\+\_\+\+S\+U\+B\+T\+I\+T\+L\+E\+S\+\_\+\+F\+I\+L\+ES}{NUM\_SUBTITLES\_FILES}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+N\+U\+M\+\_\+\+S\+U\+B\+T\+I\+T\+L\+E\+S\+\_\+\+F\+I\+L\+ES}



Definition at line 29 of file build\+\_\+2018.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a50834457c930da8ab48f04b3d8714c44}\label{namespaceparlai_1_1tasks_1_1opensubtitles_1_1build__2018_a50834457c930da8ab48f04b3d8714c44}} 
\index{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}!R\+E\+S\+O\+U\+R\+C\+ES@{R\+E\+S\+O\+U\+R\+C\+ES}}
\index{R\+E\+S\+O\+U\+R\+C\+ES@{R\+E\+S\+O\+U\+R\+C\+ES}!parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018@{parlai\+::tasks\+::opensubtitles\+::build\+\_\+2018}}
\subsubsection{\texorpdfstring{R\+E\+S\+O\+U\+R\+C\+ES}{RESOURCES}}
{\footnotesize\ttfamily parlai.\+tasks.\+opensubtitles.\+build\+\_\+2018.\+R\+E\+S\+O\+U\+R\+C\+ES}



Definition at line 20 of file build\+\_\+2018.\+py.

