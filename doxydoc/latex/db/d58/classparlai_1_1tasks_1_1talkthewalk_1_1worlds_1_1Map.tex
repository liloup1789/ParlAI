\hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map}{}\section{parlai.\+tasks.\+talkthewalk.\+worlds.\+Map Class Reference}
\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map}\index{parlai.\+tasks.\+talkthewalk.\+worlds.\+Map@{parlai.\+tasks.\+talkthewalk.\+worlds.\+Map}}


Inheritance diagram for parlai.\+tasks.\+talkthewalk.\+worlds.\+Map\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=253pt]{d8/dbc/classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+tasks.\+talkthewalk.\+worlds.\+Map\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=253pt]{da/de2/classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a09c659a2c010b978fb69b4f578088e3b}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_afdf228371d0f141ece9b3889faabe095}{data\+\_\+dir}, \hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a8d069664effce0d3bf691ff46e6e76fc}{include\+\_\+empty\+\_\+corners}=True)
\item 
def \hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a2d84b1c786b7ed2dede242e909375711}{transform\+\_\+map\+\_\+coordinates} (self, landmark)
\item 
def \hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_abb0b69a2cbaa77c9e422c0a7dc039974}{get} (self, neighborhood, x, y)
\item 
def \hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_af080964b1e6043ad8d6e1634932c82ca}{get\+\_\+landmarks} (self, neighborhood, boundaries, target\+\_\+loc)
\item 
def \hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_adc7aa565cd5b7e90f6741e1b90632b92}{get\+\_\+unprocessed\+\_\+landmarks} (self, neighborhood, boundaries)
\item 
def \hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a3c59a7fa515ceefb772da1f807021b85}{step\+\_\+aware} (self, action, loc, boundaries)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_af3a12a8efd0afe26740e2b9b7a362614}{coord\+\_\+to\+\_\+landmarks}
\item 
\hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a8d069664effce0d3bf691ff46e6e76fc}{include\+\_\+empty\+\_\+corners}
\item 
\hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_afdf228371d0f141ece9b3889faabe095}{data\+\_\+dir}
\item 
\hyperlink{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a11ed4a0cac5c44b1a61dc702378e5b9f}{landmarks}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Map with landmarks.
\end{DoxyVerb}
 

Definition at line 185 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a09c659a2c010b978fb69b4f578088e3b}\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a09c659a2c010b978fb69b4f578088e3b}} 
\index{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+talkthewalk.\+worlds.\+Map.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{data\+\_\+dir,  }\item[{}]{include\+\_\+empty\+\_\+corners = {\ttfamily True} }\end{DoxyParamCaption})}



Definition at line 190 of file worlds.\+py.


\begin{DoxyCode}
190     \textcolor{keyword}{def }\_\_init\_\_(self, data\_dir, include\_empty\_corners=True):
191         super().\_\_init\_\_()
192         self.coord\_to\_landmarks = dict()
193         self.include\_empty\_corners = include\_empty\_corners
194         self.data\_dir = data\_dir
195         self.landmarks = dict()
196 
197         \textcolor{keywordflow}{for} neighborhood \textcolor{keywordflow}{in} BOUNDARIES.keys():
198             self.coord\_to\_landmarks[neighborhood] = [
199                 [[] \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(BOUNDARIES[neighborhood][1] * 2 + 4)]
200                 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(BOUNDARIES[neighborhood][0] * 2 + 4)
201             ]
202             self.landmarks[neighborhood] = json.load(
203                 open(os.path.join(data\_dir, neighborhood, \textcolor{stringliteral}{"map.json"}))
204             )
205             \textcolor{keywordflow}{for} landmark \textcolor{keywordflow}{in} self.landmarks[neighborhood]:
206                 coord = self.transform\_map\_coordinates(landmark)
207                 self.coord\_to\_landmarks[neighborhood][coord[0]][coord[1]].append(
208                     landmark[\textcolor{stringliteral}{'type'}]
209                 )
210 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_abb0b69a2cbaa77c9e422c0a7dc039974}\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_abb0b69a2cbaa77c9e422c0a7dc039974}} 
\index{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}!get@{get}}
\index{get@{get}!parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}}
\subsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+talkthewalk.\+worlds.\+Map.\+get (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{neighborhood,  }\item[{}]{x,  }\item[{}]{y }\end{DoxyParamCaption})}



Definition at line 221 of file worlds.\+py.


\begin{DoxyCode}
221     \textcolor{keyword}{def }get(self, neighborhood, x, y):
222         landmarks = self.coord\_to\_landmarks[neighborhood][x][y]
223         \textcolor{keywordflow}{if} self.include\_empty\_corners \textcolor{keywordflow}{and} len(landmarks) == 0:
224             \textcolor{keywordflow}{return} [\textcolor{stringliteral}{'Empty'}]
225         \textcolor{keywordflow}{return} landmarks
226 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_af080964b1e6043ad8d6e1634932c82ca}\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_af080964b1e6043ad8d6e1634932c82ca}} 
\index{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}!get\+\_\+landmarks@{get\+\_\+landmarks}}
\index{get\+\_\+landmarks@{get\+\_\+landmarks}!parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}}
\subsubsection{\texorpdfstring{get\+\_\+landmarks()}{get\_landmarks()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+talkthewalk.\+worlds.\+Map.\+get\+\_\+landmarks (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{neighborhood,  }\item[{}]{boundaries,  }\item[{}]{target\+\_\+loc }\end{DoxyParamCaption})}



Definition at line 227 of file worlds.\+py.


\begin{DoxyCode}
227     \textcolor{keyword}{def }get\_landmarks(self, neighborhood, boundaries, target\_loc):
228         landmarks = [[[] \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(4)] \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(4)]
229         label\_index = (target\_loc[0] - boundaries[0], target\_loc[1] - boundaries[1])
230         \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} range(4):
231             \textcolor{keywordflow}{for} y \textcolor{keywordflow}{in} range(4):
232                 landmarks[x][y] = self.get(
233                     neighborhood, boundaries[0] + x, boundaries[1] + y
234                 )
235 
236         \textcolor{keyword}{assert} 0 <= label\_index[0] < 4
237         \textcolor{keyword}{assert} 0 <= label\_index[1] < 4
238 
239         \textcolor{keywordflow}{return} landmarks, label\_index
240 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_adc7aa565cd5b7e90f6741e1b90632b92}\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_adc7aa565cd5b7e90f6741e1b90632b92}} 
\index{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}!get\+\_\+unprocessed\+\_\+landmarks@{get\+\_\+unprocessed\+\_\+landmarks}}
\index{get\+\_\+unprocessed\+\_\+landmarks@{get\+\_\+unprocessed\+\_\+landmarks}!parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}}
\subsubsection{\texorpdfstring{get\+\_\+unprocessed\+\_\+landmarks()}{get\_unprocessed\_landmarks()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+talkthewalk.\+worlds.\+Map.\+get\+\_\+unprocessed\+\_\+landmarks (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{neighborhood,  }\item[{}]{boundaries }\end{DoxyParamCaption})}



Definition at line 241 of file worlds.\+py.


\begin{DoxyCode}
241     \textcolor{keyword}{def }get\_unprocessed\_landmarks(self, neighborhood, boundaries):
242         landmark\_list = []
243         \textcolor{keywordflow}{for} landmark \textcolor{keywordflow}{in} self.landmarks[neighborhood]:
244             coord = self.transform\_map\_coordinates(landmark)
245             \textcolor{keywordflow}{if} (
246                 boundaries[0] <= coord[0] <= boundaries[2]
247                 \textcolor{keywordflow}{and} boundaries[1] <= coord[1] <= boundaries[3]
248             ):
249                 landmark\_list.append(landmark)
250         \textcolor{keywordflow}{return} landmark\_list
251 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a3c59a7fa515ceefb772da1f807021b85}\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a3c59a7fa515ceefb772da1f807021b85}} 
\index{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}!step\+\_\+aware@{step\+\_\+aware}}
\index{step\+\_\+aware@{step\+\_\+aware}!parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}}
\subsubsection{\texorpdfstring{step\+\_\+aware()}{step\_aware()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+talkthewalk.\+worlds.\+Map.\+step\+\_\+aware (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{action,  }\item[{}]{loc,  }\item[{}]{boundaries }\end{DoxyParamCaption})}



Definition at line 252 of file worlds.\+py.


\begin{DoxyCode}
252     \textcolor{keyword}{def }step\_aware(self, action, loc, boundaries):
253         orientations = [\textcolor{stringliteral}{'N'}, \textcolor{stringliteral}{'E'}, \textcolor{stringliteral}{'S'}, \textcolor{stringliteral}{'W'}]
254         steps = dict()
255         steps[\textcolor{stringliteral}{'N'}] = [0, 1]
256         steps[\textcolor{stringliteral}{'E'}] = [1, 0]
257         steps[\textcolor{stringliteral}{'S'}] = [0, -1]
258         steps[\textcolor{stringliteral}{'W'}] = [-1, 0]
259 
260         new\_loc = copy.deepcopy(loc)
261         \textcolor{keywordflow}{if} action == \textcolor{stringliteral}{'ACTION:TURNLEFT'}:
262             \textcolor{comment}{# turn left}
263             new\_loc[2] = (new\_loc[2] - 1) % 4
264 
265         \textcolor{keywordflow}{if} action == \textcolor{stringliteral}{'ACTION:TURNRIGHT'}:
266             \textcolor{comment}{# turn right}
267             new\_loc[2] = (new\_loc[2] + 1) % 4
268 
269         \textcolor{keywordflow}{if} action == \textcolor{stringliteral}{'ACTION:FORWARD'}:
270             \textcolor{comment}{# move forward}
271             orientation = orientations[loc[2]]
272             new\_loc[0] = new\_loc[0] + steps[orientation][0]
273             new\_loc[1] = new\_loc[1] + steps[orientation][1]
274 
275             new\_loc[0] = min(max(new\_loc[0], boundaries[0]), boundaries[2])
276             new\_loc[1] = min(max(new\_loc[1], boundaries[1]), boundaries[3])
277         \textcolor{keywordflow}{return} new\_loc
278 
279 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a2d84b1c786b7ed2dede242e909375711}\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a2d84b1c786b7ed2dede242e909375711}} 
\index{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}!transform\+\_\+map\+\_\+coordinates@{transform\+\_\+map\+\_\+coordinates}}
\index{transform\+\_\+map\+\_\+coordinates@{transform\+\_\+map\+\_\+coordinates}!parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}}
\subsubsection{\texorpdfstring{transform\+\_\+map\+\_\+coordinates()}{transform\_map\_coordinates()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+talkthewalk.\+worlds.\+Map.\+transform\+\_\+map\+\_\+coordinates (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{landmark }\end{DoxyParamCaption})}



Definition at line 211 of file worlds.\+py.


\begin{DoxyCode}
211     \textcolor{keyword}{def }transform\_map\_coordinates(self, landmark):
212         x\_offset = \{\textcolor{stringliteral}{"NW"}: 0, \textcolor{stringliteral}{"SW"}: 0, \textcolor{stringliteral}{"NE"}: 1, \textcolor{stringliteral}{"SE"}: 1\}
213         y\_offset = \{\textcolor{stringliteral}{"NW"}: 1, \textcolor{stringliteral}{"SW"}: 0, \textcolor{stringliteral}{"NE"}: 1, \textcolor{stringliteral}{"SE"}: 0\}
214 
215         coord = (
216             landmark[\textcolor{stringliteral}{'x'}] * 2 + x\_offset[landmark[\textcolor{stringliteral}{'orientation'}]],
217             landmark[\textcolor{stringliteral}{'y'}] * 2 + y\_offset[landmark[\textcolor{stringliteral}{'orientation'}]],
218         )
219         \textcolor{keywordflow}{return} coord
220 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_af3a12a8efd0afe26740e2b9b7a362614}\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_af3a12a8efd0afe26740e2b9b7a362614}} 
\index{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}!coord\+\_\+to\+\_\+landmarks@{coord\+\_\+to\+\_\+landmarks}}
\index{coord\+\_\+to\+\_\+landmarks@{coord\+\_\+to\+\_\+landmarks}!parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}}
\subsubsection{\texorpdfstring{coord\+\_\+to\+\_\+landmarks}{coord\_to\_landmarks}}
{\footnotesize\ttfamily parlai.\+tasks.\+talkthewalk.\+worlds.\+Map.\+coord\+\_\+to\+\_\+landmarks}



Definition at line 192 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_afdf228371d0f141ece9b3889faabe095}\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_afdf228371d0f141ece9b3889faabe095}} 
\index{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}!data\+\_\+dir@{data\+\_\+dir}}
\index{data\+\_\+dir@{data\+\_\+dir}!parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}}
\subsubsection{\texorpdfstring{data\+\_\+dir}{data\_dir}}
{\footnotesize\ttfamily parlai.\+tasks.\+talkthewalk.\+worlds.\+Map.\+data\+\_\+dir}



Definition at line 194 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a8d069664effce0d3bf691ff46e6e76fc}\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a8d069664effce0d3bf691ff46e6e76fc}} 
\index{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}!include\+\_\+empty\+\_\+corners@{include\+\_\+empty\+\_\+corners}}
\index{include\+\_\+empty\+\_\+corners@{include\+\_\+empty\+\_\+corners}!parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}}
\subsubsection{\texorpdfstring{include\+\_\+empty\+\_\+corners}{include\_empty\_corners}}
{\footnotesize\ttfamily parlai.\+tasks.\+talkthewalk.\+worlds.\+Map.\+include\+\_\+empty\+\_\+corners}



Definition at line 193 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a11ed4a0cac5c44b1a61dc702378e5b9f}\label{classparlai_1_1tasks_1_1talkthewalk_1_1worlds_1_1Map_a11ed4a0cac5c44b1a61dc702378e5b9f}} 
\index{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}!landmarks@{landmarks}}
\index{landmarks@{landmarks}!parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map@{parlai\+::tasks\+::talkthewalk\+::worlds\+::\+Map}}
\subsubsection{\texorpdfstring{landmarks}{landmarks}}
{\footnotesize\ttfamily parlai.\+tasks.\+talkthewalk.\+worlds.\+Map.\+landmarks}



Definition at line 195 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/tasks/talkthewalk/\hyperlink{parlai_2tasks_2talkthewalk_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
