\hypertarget{namespaceparlai_1_1tasks_1_1convai2_1_1worlds}{}\section{parlai.\+tasks.\+convai2.\+worlds Namespace Reference}
\label{namespaceparlai_1_1tasks_1_1convai2_1_1worlds}\index{parlai.\+tasks.\+convai2.\+worlds@{parlai.\+tasks.\+convai2.\+worlds}}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveSelfchatWorld}{Interactive\+Selfchat\+World}
\item 
class \hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld}{Interactive\+World}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1convai2_1_1worlds_a61a758b7cb43183397d002f7f203f586}{load\+\_\+personas} (opt)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1convai2_1_1worlds_a61a758b7cb43183397d002f7f203f586}\label{namespaceparlai_1_1tasks_1_1convai2_1_1worlds_a61a758b7cb43183397d002f7f203f586}} 
\index{parlai\+::tasks\+::convai2\+::worlds@{parlai\+::tasks\+::convai2\+::worlds}!load\+\_\+personas@{load\+\_\+personas}}
\index{load\+\_\+personas@{load\+\_\+personas}!parlai\+::tasks\+::convai2\+::worlds@{parlai\+::tasks\+::convai2\+::worlds}}
\subsubsection{\texorpdfstring{load\+\_\+personas()}{load\_personas()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+convai2.\+worlds.\+load\+\_\+personas (\begin{DoxyParamCaption}\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 17 of file worlds.\+py.


\begin{DoxyCode}
17 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1convai2_1_1worlds_a61a758b7cb43183397d002f7f203f586}{load\_personas}(opt):
18     print(\textcolor{stringliteral}{'[ loading personas.. ]'})
19     \textcolor{comment}{# Create ConvAI2 data so we can assign personas.}
20     convai2\_opt = opt.copy()
21     convai2\_opt[\textcolor{stringliteral}{'task'}] = \textcolor{stringliteral}{'convai2:both'}
22     \textcolor{keywordflow}{if} convai2\_opt[\textcolor{stringliteral}{'datatype'}].startswith(\textcolor{stringliteral}{'train'}):
23         convai2\_opt[\textcolor{stringliteral}{'datatype'}] = \textcolor{stringliteral}{'train:evalmode'}
24     convai2\_opt[\textcolor{stringliteral}{'interactive\_task'}] = \textcolor{keyword}{False}
25     convai2\_agent = RepeatLabelAgent(convai2\_opt)
26     convai2\_world = \hyperlink{namespaceparlai_1_1core_1_1worlds_a79969c7ba76d4b3c500f5bb776444dc6}{create\_task}(convai2\_opt, convai2\_agent)
27     personas = set()
28     \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} convai2\_world.epoch\_done():
29         convai2\_world.parley()
30         msg = convai2\_world.get\_acts()[0]
31         \textcolor{comment}{# Find a new episode}
32         \textcolor{keywordflow}{if} msg.get(\textcolor{stringliteral}{'episode\_done'}, \textcolor{keyword}{False}) \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} convai2\_world.epoch\_done():
33             convai2\_world.parley()
34             msg = convai2\_world.get\_acts()[0]
35             txt = msg.get(\textcolor{stringliteral}{'text'}, \textcolor{stringliteral}{''}).split(\textcolor{stringliteral}{'\(\backslash\)n'})
36             a1\_persona = \textcolor{stringliteral}{""}
37             a2\_persona = \textcolor{stringliteral}{""}
38             \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} txt:
39                 \textcolor{keywordflow}{if} t.startswith(\textcolor{stringliteral}{"partner's persona:"}):
40                     a1\_persona += (
41                         t.replace(\textcolor{stringliteral}{"partner's persona:"}, \textcolor{stringliteral}{'your persona:'}) + \textcolor{stringliteral}{'\(\backslash\)n'}
42                     )
43                 \textcolor{keywordflow}{if} t.startswith(\textcolor{stringliteral}{'your persona:'}):
44                     a2\_persona += t + \textcolor{stringliteral}{'\(\backslash\)n'}
45             personas.add(a1\_persona)
46             personas.add(a2\_persona)
47     print(\textcolor{stringliteral}{'[ loaded '} + \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(len(personas)) + \textcolor{stringliteral}{' personas ]'})
48     \textcolor{keywordflow}{return} list(personas)
49 
50 
\end{DoxyCode}
