\hypertarget{namespaceparlai_1_1tasks_1_1convai2_1_1worlds}{}\section{parlai.\+tasks.\+convai2.\+worlds Namespace Reference}
\label{namespaceparlai_1_1tasks_1_1convai2_1_1worlds}\index{parlai.\+tasks.\+convai2.\+worlds@{parlai.\+tasks.\+convai2.\+worlds}}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveSelfchatWorld}{Interactive\+Selfchat\+World}
\item 
class \hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld}{Interactive\+World}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1convai2_1_1worlds_a61a758b7cb43183397d002f7f203f586}{load\+\_\+personas} (opt)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1convai2_1_1worlds_a61a758b7cb43183397d002f7f203f586}\label{namespaceparlai_1_1tasks_1_1convai2_1_1worlds_a61a758b7cb43183397d002f7f203f586}} 
\index{parlai\+::tasks\+::convai2\+::worlds@{parlai\+::tasks\+::convai2\+::worlds}!load\+\_\+personas@{load\+\_\+personas}}
\index{load\+\_\+personas@{load\+\_\+personas}!parlai\+::tasks\+::convai2\+::worlds@{parlai\+::tasks\+::convai2\+::worlds}}
\subsubsection{\texorpdfstring{load\+\_\+personas()}{load\_personas()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+convai2.\+worlds.\+load\+\_\+personas (\begin{DoxyParamCaption}\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 16 of file worlds.\+py.


\begin{DoxyCode}
16 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1convai2_1_1worlds_a61a758b7cb43183397d002f7f203f586}{load\_personas}(opt):
17     print(\textcolor{stringliteral}{'[ loading personas.. ]'})
18     \textcolor{comment}{# Create ConvAI2 data so we can assign personas.}
19     convai2\_opt = opt.copy()
20     convai2\_opt[\textcolor{stringliteral}{'task'}] = \textcolor{stringliteral}{'convai2:both'}
21     \textcolor{keywordflow}{if} convai2\_opt[\textcolor{stringliteral}{'datatype'}].startswith(\textcolor{stringliteral}{'train'}):
22         convai2\_opt[\textcolor{stringliteral}{'datatype'}] = \textcolor{stringliteral}{'train:evalmode'}
23     convai2\_opt[\textcolor{stringliteral}{'interactive\_task'}] = \textcolor{keyword}{False}
24     convai2\_agent = RepeatLabelAgent(convai2\_opt)
25     convai2\_world = \hyperlink{namespaceparlai_1_1core_1_1worlds_a11923c10b545c7ecc1b08fe2242d9c2c}{create\_task}(convai2\_opt, convai2\_agent)
26     personas = set()
27     \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} convai2\_world.epoch\_done():
28         convai2\_world.parley()
29         msg = convai2\_world.get\_acts()[0]
30         \textcolor{comment}{# Find a new episode}
31         \textcolor{keywordflow}{if} msg.get(\textcolor{stringliteral}{'episode\_done'}, \textcolor{keyword}{False}) \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} convai2\_world.epoch\_done():
32             convai2\_world.parley()
33             msg = convai2\_world.get\_acts()[0]
34             txt = msg.get(\textcolor{stringliteral}{'text'}, \textcolor{stringliteral}{''}).split(\textcolor{stringliteral}{'\(\backslash\)n'})
35             a1\_persona = \textcolor{stringliteral}{""}
36             a2\_persona = \textcolor{stringliteral}{""}
37             \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} txt:
38                 \textcolor{keywordflow}{if} t.startswith(\textcolor{stringliteral}{"partner's persona:"}):
39                     a1\_persona += (
40                         t.replace(\textcolor{stringliteral}{"partner's persona:"}, \textcolor{stringliteral}{'your persona:'}) + \textcolor{stringliteral}{'\(\backslash\)n'}
41                     )
42                 \textcolor{keywordflow}{if} t.startswith(\textcolor{stringliteral}{'your persona:'}):
43                     a2\_persona += t + \textcolor{stringliteral}{'\(\backslash\)n'}
44             personas.add(a1\_persona)
45             personas.add(a2\_persona)
46     print(\textcolor{stringliteral}{'[ loaded '} + \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(len(personas)) + \textcolor{stringliteral}{' personas ]'})
47     \textcolor{keywordflow}{return} list(personas)
48 
49 
\end{DoxyCode}
