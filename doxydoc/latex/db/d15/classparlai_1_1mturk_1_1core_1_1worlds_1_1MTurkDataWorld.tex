\hypertarget{classparlai_1_1mturk_1_1core_1_1worlds_1_1MTurkDataWorld}{}\section{parlai.\+mturk.\+core.\+worlds.\+M\+Turk\+Data\+World Class Reference}
\label{classparlai_1_1mturk_1_1core_1_1worlds_1_1MTurkDataWorld}\index{parlai.\+mturk.\+core.\+worlds.\+M\+Turk\+Data\+World@{parlai.\+mturk.\+core.\+worlds.\+M\+Turk\+Data\+World}}


Inheritance diagram for parlai.\+mturk.\+core.\+worlds.\+M\+Turk\+Data\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{db/dd2/classparlai_1_1mturk_1_1core_1_1worlds_1_1MTurkDataWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+core.\+worlds.\+M\+Turk\+Data\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{dd/d4a/classparlai_1_1mturk_1_1core_1_1worlds_1_1MTurkDataWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1worlds_1_1MTurkDataWorld_a13f5b85f9694627df2e181267588d4dc}{prep\+\_\+save\+\_\+data} (self, workers)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1worlds_1_1MTurkDataWorld_a9aefd4525fc9b34aa6f7309e78a8e231}{get\+\_\+custom\+\_\+task\+\_\+data} (self)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 10 of file worlds.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1worlds_1_1MTurkDataWorld_a9aefd4525fc9b34aa6f7309e78a8e231}\label{classparlai_1_1mturk_1_1core_1_1worlds_1_1MTurkDataWorld_a9aefd4525fc9b34aa6f7309e78a8e231}} 
\index{parlai\+::mturk\+::core\+::worlds\+::\+M\+Turk\+Data\+World@{parlai\+::mturk\+::core\+::worlds\+::\+M\+Turk\+Data\+World}!get\+\_\+custom\+\_\+task\+\_\+data@{get\+\_\+custom\+\_\+task\+\_\+data}}
\index{get\+\_\+custom\+\_\+task\+\_\+data@{get\+\_\+custom\+\_\+task\+\_\+data}!parlai\+::mturk\+::core\+::worlds\+::\+M\+Turk\+Data\+World@{parlai\+::mturk\+::core\+::worlds\+::\+M\+Turk\+Data\+World}}
\subsubsection{\texorpdfstring{get\+\_\+custom\+\_\+task\+\_\+data()}{get\_custom\_task\_data()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+worlds.\+M\+Turk\+Data\+World.\+get\+\_\+custom\+\_\+task\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}This function should take the contents of whatever was collected during this
task that should be saved and return it in some format, preferrably a dict
containing acts.

If data needs pickling, put it in a field named 'needs-pickle'
\end{DoxyVerb}
 

Definition at line 41 of file worlds.\+py.


\begin{DoxyCode}
41     \textcolor{keyword}{def }get\_custom\_task\_data(self):
42         \textcolor{stringliteral}{"""}
43 \textcolor{stringliteral}{        This function should take the contents of whatever was collected during this}
44 \textcolor{stringliteral}{        task that should be saved and return it in some format, preferrably a dict}
45 \textcolor{stringliteral}{        containing acts.}
46 \textcolor{stringliteral}{}
47 \textcolor{stringliteral}{        If data needs pickling, put it in a field named 'needs-pickle'}
48 \textcolor{stringliteral}{        """}
49         \textcolor{comment}{# return \{}
50         \textcolor{comment}{#     'acts': [self.important\_turn1, self.important\_turn2]}
51         \textcolor{comment}{#     'context': self.some\_context\_data\_of\_importance}
52         \textcolor{comment}{#     'needs-pickle': self.json\_incompatible\_object}
53         \textcolor{comment}{# \}}
54         \textcolor{keywordflow}{pass}
55 
56 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1worlds_1_1MTurkDataWorld_a13f5b85f9694627df2e181267588d4dc}\label{classparlai_1_1mturk_1_1core_1_1worlds_1_1MTurkDataWorld_a13f5b85f9694627df2e181267588d4dc}} 
\index{parlai\+::mturk\+::core\+::worlds\+::\+M\+Turk\+Data\+World@{parlai\+::mturk\+::core\+::worlds\+::\+M\+Turk\+Data\+World}!prep\+\_\+save\+\_\+data@{prep\+\_\+save\+\_\+data}}
\index{prep\+\_\+save\+\_\+data@{prep\+\_\+save\+\_\+data}!parlai\+::mturk\+::core\+::worlds\+::\+M\+Turk\+Data\+World@{parlai\+::mturk\+::core\+::worlds\+::\+M\+Turk\+Data\+World}}
\subsubsection{\texorpdfstring{prep\+\_\+save\+\_\+data()}{prep\_save\_data()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+worlds.\+M\+Turk\+Data\+World.\+prep\+\_\+save\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{workers }\end{DoxyParamCaption})}

\begin{DoxyVerb}This prepares data to be saved for later review, including chats from individual
worker perspectives.
\end{DoxyVerb}
 

Definition at line 11 of file worlds.\+py.


\begin{DoxyCode}
11     \textcolor{keyword}{def }prep\_save\_data(self, workers):
12         \textcolor{stringliteral}{"""}
13 \textcolor{stringliteral}{        This prepares data to be saved for later review, including chats from individual}
14 \textcolor{stringliteral}{        worker perspectives.}
15 \textcolor{stringliteral}{        """}
16         custom\_data = self.get\_custom\_task\_data()
17         save\_data = \{\textcolor{stringliteral}{'custom\_data'}: custom\_data, \textcolor{stringliteral}{'worker\_data'}: \{\}\}
18 
19         \textcolor{keywordflow}{for} agent \textcolor{keywordflow}{in} workers:
20             messages = agent.get\_messages()
21             \textcolor{comment}{# filter out peer feedback}
22             save\_messages = [m \textcolor{keywordflow}{for} m \textcolor{keywordflow}{in} messages \textcolor{keywordflow}{if} m.get(\textcolor{stringliteral}{'text'}) != \textcolor{stringliteral}{'[PEER\_REVIEW]'}]
23             save\_data[\textcolor{stringliteral}{'worker\_data'}][agent.worker\_id] = \{
24                 \textcolor{stringliteral}{'worker\_id'}: agent.worker\_id,
25                 \textcolor{stringliteral}{'agent\_id'}: agent.id,
26                 \textcolor{stringliteral}{'assignment\_id'}: agent.assignment\_id,
27                 \textcolor{stringliteral}{'messages'}: save\_messages,
28                 \textcolor{stringliteral}{'given\_feedback'}: agent.feedback,
29             \}
30 
31         \textcolor{comment}{# In simple pairing case, attach the feedback right here}
32         \textcolor{keywordflow}{if} len(workers) == 2:
33             data = save\_data[\textcolor{stringliteral}{'worker\_data'}]
34             a\_0 = workers[0]
35             a\_1 = workers[1]
36             data[a\_0.worker\_id][\textcolor{stringliteral}{'received\_feedback'}] = a\_1.feedback
37             data[a\_1.worker\_id][\textcolor{stringliteral}{'received\_feedback'}] = a\_0.feedback
38 
39         \textcolor{keywordflow}{return} save\_data
40 
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/core/\hyperlink{parlai_2mturk_2core_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
