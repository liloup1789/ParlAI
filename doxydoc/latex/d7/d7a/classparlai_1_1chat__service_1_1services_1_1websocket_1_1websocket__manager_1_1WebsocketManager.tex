\hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager}{}\section{parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager Class Reference}
\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager}\index{parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager@{parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager}}


Inheritance diagram for parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=319pt]{d0/d91/classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=319pt]{d6/d77/classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager__coll__graph}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_1_1MessageSender}{Message\+Sender}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ae44392cd364b3041420877e4f281261e}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a48a72c535cb36615ba3f698446ab4aef}{opt})
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab5ae0fc35ee7b4c2015954814b8b60de}{parse\+\_\+additional\+\_\+args} (self, \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a48a72c535cb36615ba3f698446ab4aef}{opt})
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a79bfe4b1d87644284affbe3963c8decd}{start\+\_\+task} (self)
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a50a3ee9e3306b49c38eb1c480aa03734}{shutdown} (self)
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab4710951b0d3ac7e00836c15760edf4a}{observe\+\_\+message} (self, socket\+\_\+id, message, quick\+\_\+replies=None)
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a71ce917832632d10f3aafd6e8644d3f5}{observe\+\_\+payload} (self, socket\+\_\+id, payload, quick\+\_\+replies=None)
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab50f384331aea23175f690642717958a}{restructure\+\_\+message} (self)
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_abd3815e2b102c46a68be1f907749cd05}{setup\+\_\+server} (self)
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_adc9f886e43d7bf42941cf95914468817}{setup\+\_\+socket} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a48a72c535cb36615ba3f698446ab4aef}{opt}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a24209c4d4fbd8acd5ee3b6d63ec29c19}{port}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a89a1816e6035c7e789810a08100e0ce5}{subs}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a71065b9e5d530f60780af7b8660ceb52}{app}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab98c26b91f25cc4ad9c4a57fd1b8b11a}{debug}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a93e3771f4904648d8cadf3cb55f04db1}{message\+\_\+sender}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a8a5868424a1fbfd28f9b7d4e3aad54af}{service\+\_\+reference\+\_\+id}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a17271334fddaa0bcba758be991e943bb}{agent\+\_\+pool}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ad48a83af2f74f9b1190a2fbfd3b51214}{messenger\+\_\+agent\+\_\+states}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_aad050a466d1dd808cc0c70343aac86e4}{agent\+\_\+id\+\_\+to\+\_\+overworld\+\_\+future}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_aac263b0f74f414ea4c52f02db0655857}{task\+\_\+to\+\_\+agent\+\_\+ids}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a4e6b4a6adc4ac27976c9a0799cdce2d1}{running}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Manages interactions between agents on a websocket as well as direct interactions
between agents and an overworld.
\end{DoxyVerb}
 

Definition at line 26 of file websocket\+\_\+manager.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ae44392cd364b3041420877e4f281261e}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ae44392cd364b3041420877e4f281261e}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}

\begin{DoxyVerb}Create a WebsocketManager using the given setup options.
\end{DoxyVerb}
 

Definition at line 39 of file websocket\+\_\+manager.\+py.


\begin{DoxyCode}
39     \textcolor{keyword}{def }\_\_init\_\_(self, opt):
40         \textcolor{stringliteral}{"""}
41 \textcolor{stringliteral}{        Create a WebsocketManager using the given setup options.}
42 \textcolor{stringliteral}{        """}
43         super().\_\_init\_\_(opt)
44         self.opt = opt
45         self.port = opt.get(\textcolor{stringliteral}{'port'})
46         self.subs = []
47 
48         self.app = \textcolor{keywordtype}{None}
49         self.debug = opt.get(\textcolor{stringliteral}{'is\_debug'}, \textcolor{keyword}{False})
50 
51         self.message\_sender = WebsocketManager.MessageSender()
52 
53         self.service\_reference\_id = \textcolor{keywordtype}{None}
54 
55         self.\_parse\_config(opt)
56         self.\_complete\_setup()
57 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab4710951b0d3ac7e00836c15760edf4a}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab4710951b0d3ac7e00836c15760edf4a}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!observe\+\_\+message@{observe\+\_\+message}}
\index{observe\+\_\+message@{observe\+\_\+message}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{observe\+\_\+message()}{observe\_message()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+observe\+\_\+message (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{socket\+\_\+id,  }\item[{}]{message,  }\item[{}]{quick\+\_\+replies = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Send a message through the message manager.

:param socket_id:
    int identifier for agent socket to send message to
:param message:
    (str) message to send through the socket.
:param quick_replies:
    (list) list of strings to send as quick replies.

Returns a tornado future for tracking the `write_message` action.
\end{DoxyVerb}
 

Definition at line 236 of file websocket\+\_\+manager.\+py.


\begin{DoxyCode}
236     \textcolor{keyword}{def }observe\_message(self, socket\_id, message, quick\_replies=None):
237         \textcolor{stringliteral}{"""}
238 \textcolor{stringliteral}{        Send a message through the message manager.}
239 \textcolor{stringliteral}{}
240 \textcolor{stringliteral}{        :param socket\_id:}
241 \textcolor{stringliteral}{            int identifier for agent socket to send message to}
242 \textcolor{stringliteral}{        :param message:}
243 \textcolor{stringliteral}{            (str) message to send through the socket.}
244 \textcolor{stringliteral}{        :param quick\_replies:}
245 \textcolor{stringliteral}{            (list) list of strings to send as quick replies.}
246 \textcolor{stringliteral}{}
247 \textcolor{stringliteral}{        Returns a tornado future for tracking the `write\_message` action.}
248 \textcolor{stringliteral}{        """}
249         \textcolor{keywordflow}{if} quick\_replies \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
250             quick\_replies = list(quick\_replies)
251 
252         message = json.dumps(
253             \{\textcolor{stringliteral}{'text'}: message.replace(\textcolor{stringliteral}{'\(\backslash\)n'}, \textcolor{stringliteral}{'<br />'}), \textcolor{stringliteral}{'quick\_replies'}: quick\_replies\}
254         )
255 
256         asyncio.set\_event\_loop(asyncio.new\_event\_loop())
257         \textcolor{keywordflow}{if} socket\_id \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} MessageSocketHandler.subs:
258             self.agent\_id\_to\_overworld\_future[socket\_id].cancel()
259             \textcolor{keywordflow}{return}
260         \textcolor{keywordflow}{return} MessageSocketHandler.subs[socket\_id].write\_message(message)
261 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a71ce917832632d10f3aafd6e8644d3f5}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a71ce917832632d10f3aafd6e8644d3f5}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!observe\+\_\+payload@{observe\+\_\+payload}}
\index{observe\+\_\+payload@{observe\+\_\+payload}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{observe\+\_\+payload()}{observe\_payload()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+observe\+\_\+payload (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{socket\+\_\+id,  }\item[{}]{payload,  }\item[{}]{quick\+\_\+replies = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Send a message through the message manager.

:param socket_id:
    int identifier for agent socket to send message to
:param payload:
    (dict) payload to send through the socket. The mandatory keys are:
    'type': (str) Type of the payload (e.g. 'image')
    'data': str. base64 encoded content
    If 'type' is 'image', the 'mime_type' (str) key can be provided
    to specify the Mime type of the image

Returns a tornado future for tracking the `write_message` action.
\end{DoxyVerb}
 

Definition at line 262 of file websocket\+\_\+manager.\+py.


\begin{DoxyCode}
262     \textcolor{keyword}{def }observe\_payload(self, socket\_id, payload, quick\_replies=None):
263         \textcolor{stringliteral}{"""}
264 \textcolor{stringliteral}{        Send a message through the message manager.}
265 \textcolor{stringliteral}{}
266 \textcolor{stringliteral}{        :param socket\_id:}
267 \textcolor{stringliteral}{            int identifier for agent socket to send message to}
268 \textcolor{stringliteral}{        :param payload:}
269 \textcolor{stringliteral}{            (dict) payload to send through the socket. The mandatory keys are:}
270 \textcolor{stringliteral}{                    'type': (str) Type of the payload (e.g. 'image')}
271 \textcolor{stringliteral}{                    'data': str. base64 encoded content}
272 \textcolor{stringliteral}{                    If 'type' is 'image', the 'mime\_type' (str) key can be provided}
273 \textcolor{stringliteral}{                    to specify the Mime type of the image}
274 \textcolor{stringliteral}{}
275 \textcolor{stringliteral}{        Returns a tornado future for tracking the `write\_message` action.}
276 \textcolor{stringliteral}{        """}
277         message = \{\textcolor{stringliteral}{'text'}: \textcolor{stringliteral}{''}, \textcolor{stringliteral}{'payload'}: payload, \textcolor{stringliteral}{'quick\_replies'}: quick\_replies\}
278         payload = json.dumps(message)
279 
280         asyncio.set\_event\_loop(asyncio.new\_event\_loop())
281         \textcolor{keywordflow}{if} socket\_id \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} MessageSocketHandler.subs:
282             self.agent\_id\_to\_overworld\_future[socket\_id].cancel()
283             \textcolor{keywordflow}{return}
284         \textcolor{keywordflow}{return} MessageSocketHandler.subs[socket\_id].write\_message(message)
285 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab5ae0fc35ee7b4c2015954814b8b60de}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab5ae0fc35ee7b4c2015954814b8b60de}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!parse\+\_\+additional\+\_\+args@{parse\+\_\+additional\+\_\+args}}
\index{parse\+\_\+additional\+\_\+args@{parse\+\_\+additional\+\_\+args}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{parse\+\_\+additional\+\_\+args()}{parse\_additional\_args()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+parse\+\_\+additional\+\_\+args (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 58 of file websocket\+\_\+manager.\+py.


\begin{DoxyCode}
58     \textcolor{keyword}{def }parse\_additional\_args(self, opt):
59         \textcolor{keywordflow}{pass}
60 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab50f384331aea23175f690642717958a}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab50f384331aea23175f690642717958a}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!restructure\+\_\+message@{restructure\+\_\+message}}
\index{restructure\+\_\+message@{restructure\+\_\+message}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{restructure\+\_\+message()}{restructure\_message()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+restructure\+\_\+message (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}This is to restructure a new message to conform to the message structure defined
in the `chat_service` README.
\end{DoxyVerb}
 

Definition at line 286 of file websocket\+\_\+manager.\+py.


\begin{DoxyCode}
286     \textcolor{keyword}{def }restructure\_message(self):
287         \textcolor{stringliteral}{"""}
288 \textcolor{stringliteral}{        This is to restructure a new message to conform to the message structure defined}
289 \textcolor{stringliteral}{        in the `chat\_service` README.}
290 \textcolor{stringliteral}{        """}
291         \textcolor{keywordflow}{pass}
292 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_abd3815e2b102c46a68be1f907749cd05}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_abd3815e2b102c46a68be1f907749cd05}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!setup\+\_\+server@{setup\+\_\+server}}
\index{setup\+\_\+server@{setup\+\_\+server}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{setup\+\_\+server()}{setup\_server()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+setup\+\_\+server (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 299 of file websocket\+\_\+manager.\+py.


\begin{DoxyCode}
299     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1server__utils_afb56b04206cd0f42384438f1ac6d9cda}{setup\_server}(self):
300         \textcolor{keywordflow}{pass}
301 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_adc9f886e43d7bf42941cf95914468817}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_adc9f886e43d7bf42941cf95914468817}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!setup\+\_\+socket@{setup\+\_\+socket}}
\index{setup\+\_\+socket@{setup\+\_\+socket}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{setup\+\_\+socket()}{setup\_socket()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+setup\+\_\+socket (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 302 of file websocket\+\_\+manager.\+py.


\begin{DoxyCode}
302     \textcolor{keyword}{def }setup\_socket(self):
303         \textcolor{keywordflow}{pass}
304 \end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a50a3ee9e3306b49c38eb1c480aa03734}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a50a3ee9e3306b49c38eb1c480aa03734}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Defined to shutown the tornado application.
\end{DoxyVerb}
 

Definition at line 192 of file websocket\+\_\+manager.\+py.


\begin{DoxyCode}
192     \textcolor{keyword}{def }shutdown(self):
193         \textcolor{stringliteral}{"""}
194 \textcolor{stringliteral}{        Defined to shutown the tornado application.}
195 \textcolor{stringliteral}{        """}
196         \textcolor{keywordflow}{try}:
197             self.world\_runner.shutdown()
198             self.\_expire\_all\_conversations()
199         \textcolor{keywordflow}{finally}:
200             \textcolor{keywordflow}{pass}
201         tornado.ioloop.IOLoop.current().stop()
202 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a79bfe4b1d87644284affbe3963c8decd}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a79bfe4b1d87644284affbe3963c8decd}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!start\+\_\+task@{start\+\_\+task}}
\index{start\+\_\+task@{start\+\_\+task}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{start\+\_\+task()}{start\_task()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+start\+\_\+task (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Begin handling task.
\end{DoxyVerb}
 

Definition at line 178 of file websocket\+\_\+manager.\+py.


\begin{DoxyCode}
178     \textcolor{keyword}{def }start\_task(self):
179         \textcolor{stringliteral}{"""}
180 \textcolor{stringliteral}{        Begin handling task.}
181 \textcolor{stringliteral}{        """}
182         self.running = \textcolor{keyword}{True}
183         self.app = self.\_make\_app()
184         self.app.listen(self.port)
185         \textcolor{comment}{# Must use a tornado callback to run the main loop}
186         callback\_time = shared\_utils.THREAD\_MEDIUM\_SLEEP * 1000
187         tornado.ioloop.PeriodicCallback(
188             callback=self.\_manager\_loop\_fn, callback\_time=callback\_time
189         ).start()
190         tornado.ioloop.IOLoop.current().start()
191 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_aad050a466d1dd808cc0c70343aac86e4}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_aad050a466d1dd808cc0c70343aac86e4}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!agent\+\_\+id\+\_\+to\+\_\+overworld\+\_\+future@{agent\+\_\+id\+\_\+to\+\_\+overworld\+\_\+future}}
\index{agent\+\_\+id\+\_\+to\+\_\+overworld\+\_\+future@{agent\+\_\+id\+\_\+to\+\_\+overworld\+\_\+future}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{agent\+\_\+id\+\_\+to\+\_\+overworld\+\_\+future}{agent\_id\_to\_overworld\_future}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+agent\+\_\+id\+\_\+to\+\_\+overworld\+\_\+future}



Definition at line 67 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a17271334fddaa0bcba758be991e943bb}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a17271334fddaa0bcba758be991e943bb}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!agent\+\_\+pool@{agent\+\_\+pool}}
\index{agent\+\_\+pool@{agent\+\_\+pool}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{agent\+\_\+pool}{agent\_pool}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+agent\+\_\+pool}



Definition at line 65 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a71065b9e5d530f60780af7b8660ceb52}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a71065b9e5d530f60780af7b8660ceb52}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!app@{app}}
\index{app@{app}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{app}{app}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+app}



Definition at line 48 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab98c26b91f25cc4ad9c4a57fd1b8b11a}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ab98c26b91f25cc4ad9c4a57fd1b8b11a}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!debug@{debug}}
\index{debug@{debug}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{debug}{debug}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+debug}



Definition at line 49 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a93e3771f4904648d8cadf3cb55f04db1}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a93e3771f4904648d8cadf3cb55f04db1}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!message\+\_\+sender@{message\+\_\+sender}}
\index{message\+\_\+sender@{message\+\_\+sender}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{message\+\_\+sender}{message\_sender}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+message\+\_\+sender}



Definition at line 51 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ad48a83af2f74f9b1190a2fbfd3b51214}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_ad48a83af2f74f9b1190a2fbfd3b51214}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!messenger\+\_\+agent\+\_\+states@{messenger\+\_\+agent\+\_\+states}}
\index{messenger\+\_\+agent\+\_\+states@{messenger\+\_\+agent\+\_\+states}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{messenger\+\_\+agent\+\_\+states}{messenger\_agent\_states}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+messenger\+\_\+agent\+\_\+states}



Definition at line 66 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a48a72c535cb36615ba3f698446ab4aef}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a48a72c535cb36615ba3f698446ab4aef}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!opt@{opt}}
\index{opt@{opt}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+opt}



Definition at line 44 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a24209c4d4fbd8acd5ee3b6d63ec29c19}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a24209c4d4fbd8acd5ee3b6d63ec29c19}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!port@{port}}
\index{port@{port}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{port}{port}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+port}



Definition at line 45 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a4e6b4a6adc4ac27976c9a0799cdce2d1}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a4e6b4a6adc4ac27976c9a0799cdce2d1}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!running@{running}}
\index{running@{running}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{running}{running}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+running}



Definition at line 182 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a8a5868424a1fbfd28f9b7d4e3aad54af}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a8a5868424a1fbfd28f9b7d4e3aad54af}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!service\+\_\+reference\+\_\+id@{service\+\_\+reference\+\_\+id}}
\index{service\+\_\+reference\+\_\+id@{service\+\_\+reference\+\_\+id}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{service\+\_\+reference\+\_\+id}{service\_reference\_id}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+service\+\_\+reference\+\_\+id}



Definition at line 53 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a89a1816e6035c7e789810a08100e0ce5}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_a89a1816e6035c7e789810a08100e0ce5}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!subs@{subs}}
\index{subs@{subs}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{subs}{subs}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+subs}



Definition at line 46 of file websocket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_aac263b0f74f414ea4c52f02db0655857}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1websocket__manager_1_1WebsocketManager_aac263b0f74f414ea4c52f02db0655857}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}!task\+\_\+to\+\_\+agent\+\_\+ids@{task\+\_\+to\+\_\+agent\+\_\+ids}}
\index{task\+\_\+to\+\_\+agent\+\_\+ids@{task\+\_\+to\+\_\+agent\+\_\+ids}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::websocket\+\_\+manager\+::\+Websocket\+Manager}}
\subsubsection{\texorpdfstring{task\+\_\+to\+\_\+agent\+\_\+ids}{task\_to\_agent\_ids}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+websocket\+\_\+manager.\+Websocket\+Manager.\+task\+\_\+to\+\_\+agent\+\_\+ids}



Definition at line 68 of file websocket\+\_\+manager.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/chat\+\_\+service/services/websocket/\hyperlink{websocket__manager_8py}{websocket\+\_\+manager.\+py}\end{DoxyCompactItemize}
