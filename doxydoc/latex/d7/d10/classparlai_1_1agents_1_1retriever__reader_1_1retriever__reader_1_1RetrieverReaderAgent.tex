\hypertarget{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent}{}\section{parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent Class Reference}
\label{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent}\index{parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent@{parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent}}


Inheritance diagram for parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=242pt]{d2/d39/classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=242pt]{d2/d8f/classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a7777973d732eccc4a630116d8a9462f1}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1agents_1_1Agent_ab3b45d2754244608c75d4068b90cd051}{opt}, shared=None)
\item 
def \hyperlink{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a093b0a679a2cc8a09ed3a4ae314362b1}{observe} (self, obs)
\item 
def \hyperlink{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a26f155f699b7a345b3f995b09e049a97}{act} (self)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_aa2c30c066bf3cf8413fd7fbc4d7de0e1}{add\+\_\+cmdline\+\_\+args} (argparser)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_ad509b6894625808427a677995488c385}{id}
\item 
\hyperlink{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a5695be3aea22476bb07b09c4a76e5b5d}{retriever}
\item 
\hyperlink{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a5ebf10c780f576b8e6b481a207a3b6ce}{reader}
\item 
\hyperlink{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_ab93ead9cf1fcab11b471b9e025b5652c}{observation}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 18 of file retriever\+\_\+reader.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a7777973d732eccc4a630116d8a9462f1}\label{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a7777973d732eccc4a630116d8a9462f1}} 
\index{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 19 of file retriever\+\_\+reader.\+py.


\begin{DoxyCode}
19     \textcolor{keyword}{def }\_\_init\_\_(self, opt, shared=None):
20         super().\_\_init\_\_(opt)
21         self.id = \textcolor{stringliteral}{'RetrieverReaderAgent'}
22 
23         \textcolor{comment}{# Create retriever}
24         retriever\_opt = \{\textcolor{stringliteral}{'model\_file'}: opt[\textcolor{stringliteral}{'retriever\_model\_file'}]\}
25         self.retriever = \hyperlink{namespaceparlai_1_1core_1_1agents_a00d77a7e26fb89e8bd900f7b2a02982a}{create\_agent}(retriever\_opt)
26 
27         \textcolor{comment}{# Create reader}
28         reader\_opt = \{\textcolor{stringliteral}{'model\_file'}: opt[\textcolor{stringliteral}{'reader\_model\_file'}]\}
29         self.reader = \hyperlink{namespaceparlai_1_1core_1_1agents_a00d77a7e26fb89e8bd900f7b2a02982a}{create\_agent}(reader\_opt)
30 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a26f155f699b7a345b3f995b09e049a97}\label{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a26f155f699b7a345b3f995b09e049a97}} 
\index{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}!act@{act}}
\index{act@{act}!parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}}
\subsubsection{\texorpdfstring{act()}{act()}}
{\footnotesize\ttfamily def parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent.\+act (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 79 of file retriever\+\_\+reader.\+py.


\begin{DoxyCode}
79     \textcolor{keyword}{def }act(self):
80         act\_retriever = self.retriever.act()
81         obs = self.observation
82         obs[\textcolor{stringliteral}{'episode\_done'}] = \textcolor{keyword}{True}
83         retrieved\_txt = act\_retriever.get(\textcolor{stringliteral}{'text'}, \textcolor{stringliteral}{''})
84         cands = act\_retriever.get(\textcolor{stringliteral}{'text\_candidates'}, [])
85         \textcolor{keywordflow}{if} len(cands) > 0:
86             retrieved\_txts = cands[: self.opt[\textcolor{stringliteral}{'num\_retrieved'}]]
87         \textcolor{keywordflow}{else}:
88             retrieved\_txts = [retrieved\_txt]
89         text = obs[\textcolor{stringliteral}{'text'}]
90         reader\_acts = []
91         retrieved\_txts = [r \textcolor{keywordflow}{for} r \textcolor{keywordflow}{in} retrieved\_txts \textcolor{keywordflow}{if} r != \textcolor{stringliteral}{''}]
92         \textcolor{keywordflow}{for} ret\_txt \textcolor{keywordflow}{in} retrieved\_txts:
93             \textcolor{keywordflow}{if} self.opt.get(\textcolor{stringliteral}{'split\_paragraphs'}, \textcolor{keyword}{False}):
94                 paragraphs = self.\_split\_doc(ret\_txt)
95             \textcolor{keywordflow}{else}:
96                 paragraphs = [ret\_txt]
97             \textcolor{keywordflow}{for} para \textcolor{keywordflow}{in} paragraphs:
98                 obs[\textcolor{stringliteral}{'text'}] = para + \textcolor{stringliteral}{'\(\backslash\)n'} + text
99                 self.reader.observe(obs)
100                 act\_reader = self.reader.act()
101                 act\_reader[\textcolor{stringliteral}{'paragraph'}] = para
102                 reader\_acts.append(act\_reader)
103         \textcolor{keywordflow}{if} len(reader\_acts) > 0:
104             best\_act = max(reader\_acts, key=\textcolor{keyword}{lambda} x: x[\textcolor{stringliteral}{'candidate\_scores'}][0])
105         \textcolor{keywordflow}{else}:
106             best\_act = \{\textcolor{stringliteral}{'id'}: self.getID()\}
107 
108         \textcolor{keywordflow}{return} best\_act
109 \end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_aa2c30c066bf3cf8413fd7fbc4d7de0e1}\label{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_aa2c30c066bf3cf8413fd7fbc4d7de0e1}} 
\index{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}!add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}}
\index{add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}!parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}}
\subsubsection{\texorpdfstring{add\+\_\+cmdline\+\_\+args()}{add\_cmdline\_args()}}
{\footnotesize\ttfamily def parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent.\+add\+\_\+cmdline\+\_\+args (\begin{DoxyParamCaption}\item[{}]{argparser }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Add command-line arguments specifically for this agent.
\end{DoxyVerb}
 

Definition at line 32 of file retriever\+\_\+reader.\+py.


\begin{DoxyCode}
32     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1drqa_1_1config_a62fdd5554f1da6be0cba185271058320}{add\_cmdline\_args}(argparser):
33         \textcolor{stringliteral}{"""}
34 \textcolor{stringliteral}{        Add command-line arguments specifically for this agent.}
35 \textcolor{stringliteral}{        """}
36         agent = argparser.add\_argument\_group(\textcolor{stringliteral}{'RetrieverReader Arguments'})
37         agent.add\_argument(\textcolor{stringliteral}{'--retriever-model-file'}, type=str, default=\textcolor{keywordtype}{None})
38         agent.add\_argument(\textcolor{stringliteral}{'--reader-model-file'}, type=str, default=\textcolor{keywordtype}{None})
39         agent.add\_argument(
40             \textcolor{stringliteral}{'--num-retrieved'}, type=int, default=5, help=\textcolor{stringliteral}{'how many passages to retrieve'}
41         )
42         agent.add\_argument(
43             \textcolor{stringliteral}{'--split-paragraphs'},
44             type=\textcolor{stringliteral}{'bool'},
45             default=\textcolor{keyword}{True},
46             help=\textcolor{stringliteral}{'Whether to split the retrieved passages into '} \textcolor{stringliteral}{'paragraphs'},
47         )
48         \textcolor{keywordflow}{return} agent
49 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a093b0a679a2cc8a09ed3a4ae314362b1}\label{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a093b0a679a2cc8a09ed3a4ae314362b1}} 
\index{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}!observe@{observe}}
\index{observe@{observe}!parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}}
\subsubsection{\texorpdfstring{observe()}{observe()}}
{\footnotesize\ttfamily def parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent.\+observe (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{obs }\end{DoxyParamCaption})}



Definition at line 50 of file retriever\+\_\+reader.\+py.


\begin{DoxyCode}
50     \textcolor{keyword}{def }observe(self, obs):
51         self.retriever.observe(obs)
52         self.observation = obs
53 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_ad509b6894625808427a677995488c385}\label{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_ad509b6894625808427a677995488c385}} 
\index{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}!id@{id}}
\index{id@{id}!parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}}
\subsubsection{\texorpdfstring{id}{id}}
{\footnotesize\ttfamily parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent.\+id}



Definition at line 21 of file retriever\+\_\+reader.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_ab93ead9cf1fcab11b471b9e025b5652c}\label{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_ab93ead9cf1fcab11b471b9e025b5652c}} 
\index{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}!observation@{observation}}
\index{observation@{observation}!parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}}
\subsubsection{\texorpdfstring{observation}{observation}}
{\footnotesize\ttfamily parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent.\+observation}



Definition at line 52 of file retriever\+\_\+reader.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a5ebf10c780f576b8e6b481a207a3b6ce}\label{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a5ebf10c780f576b8e6b481a207a3b6ce}} 
\index{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}!reader@{reader}}
\index{reader@{reader}!parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}}
\subsubsection{\texorpdfstring{reader}{reader}}
{\footnotesize\ttfamily parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent.\+reader}



Definition at line 29 of file retriever\+\_\+reader.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a5695be3aea22476bb07b09c4a76e5b5d}\label{classparlai_1_1agents_1_1retriever__reader_1_1retriever__reader_1_1RetrieverReaderAgent_a5695be3aea22476bb07b09c4a76e5b5d}} 
\index{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}!retriever@{retriever}}
\index{retriever@{retriever}!parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent@{parlai\+::agents\+::retriever\+\_\+reader\+::retriever\+\_\+reader\+::\+Retriever\+Reader\+Agent}}
\subsubsection{\texorpdfstring{retriever}{retriever}}
{\footnotesize\ttfamily parlai.\+agents.\+retriever\+\_\+reader.\+retriever\+\_\+reader.\+Retriever\+Reader\+Agent.\+retriever}



Definition at line 25 of file retriever\+\_\+reader.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/agents/retriever\+\_\+reader/\hyperlink{retriever__reader_8py}{retriever\+\_\+reader.\+py}\end{DoxyCompactItemize}
