\hypertarget{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher}{}\section{parlai.\+tasks.\+squad2.\+agents.\+Sentence\+Labels\+Teacher Class Reference}
\label{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher}\index{parlai.\+tasks.\+squad2.\+agents.\+Sentence\+Labels\+Teacher@{parlai.\+tasks.\+squad2.\+agents.\+Sentence\+Labels\+Teacher}}


Inheritance diagram for parlai.\+tasks.\+squad2.\+agents.\+Sentence\+Labels\+Teacher\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{dd/da8/classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+tasks.\+squad2.\+agents.\+Sentence\+Labels\+Teacher\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{d0/d90/classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher_acc15b4caefa5b72697761981c39873dc}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1agents_1_1Teacher_a3ce6243860ce978a897922863ed32fa4}{opt}, shared=None)
\item 
def \hyperlink{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher_a1af54cd1c62193018fa1961bb985908e}{get} (self, \hyperlink{classparlai_1_1core_1_1teachers_1_1FixedDialogTeacher_afd4ebab8063eb42d182d30a1a41f133e}{episode\+\_\+idx}, \hyperlink{classparlai_1_1core_1_1teachers_1_1FixedDialogTeacher_ae3201b15f3c3b46a2f3511bad9b43e7d}{entry\+\_\+idx}=None)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher_a38eaa848e9051e5fb1b0a63f2308481e}{sent\+\_\+tok}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Teacher which contains the question as the text, the sentences as the label
candidates, and the label as the sentence containing the answer.

Some punctuation may be removed for tokenization purposes.
\end{DoxyVerb}
 

Definition at line 329 of file agents.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher_acc15b4caefa5b72697761981c39873dc}\label{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher_acc15b4caefa5b72697761981c39873dc}} 
\index{parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher@{parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher@{parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+squad2.\+agents.\+Sentence\+Labels\+Teacher.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 337 of file agents.\+py.


\begin{DoxyCode}
337     \textcolor{keyword}{def }\_\_init\_\_(self, opt, shared=None):
338         super().\_\_init\_\_(opt, shared)
339 
340         \textcolor{keywordflow}{try}:
341             \textcolor{keyword}{import} nltk
342         \textcolor{keywordflow}{except} ImportError:
343             \textcolor{keywordflow}{raise} ImportError(\textcolor{stringliteral}{'Please install nltk (e.g. pip install nltk).'})
344         \textcolor{comment}{# nltk-specific setup}
345         st\_path = \textcolor{stringliteral}{'tokenizers/punkt/\{0\}.pickle'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(\textcolor{stringliteral}{'english'})
346         \textcolor{keywordflow}{try}:
347             self.sent\_tok = nltk.data.load(st\_path)
348         \textcolor{keywordflow}{except} LookupError:
349             nltk.download(\textcolor{stringliteral}{'punkt'})
350             self.sent\_tok = nltk.data.load(st\_path)
351 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher_a1af54cd1c62193018fa1961bb985908e}\label{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher_a1af54cd1c62193018fa1961bb985908e}} 
\index{parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher@{parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher}!get@{get}}
\index{get@{get}!parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher@{parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher}}
\subsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+squad2.\+agents.\+Sentence\+Labels\+Teacher.\+get (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{episode\+\_\+idx,  }\item[{}]{entry\+\_\+idx = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 352 of file agents.\+py.


\begin{DoxyCode}
352     \textcolor{keyword}{def }get(self, episode\_idx, entry\_idx=None):
353         article\_idx, paragraph\_idx, qa\_idx = self.examples[episode\_idx]
354         article = self.squad[article\_idx]
355         paragraph = article[\textcolor{stringliteral}{'paragraphs'}][paragraph\_idx]
356         qa = paragraph[\textcolor{stringliteral}{'qas'}][qa\_idx]
357         context = paragraph[\textcolor{stringliteral}{'context'}]
358         question = qa[\textcolor{stringliteral}{'question'}]
359 
360         answers = [\textcolor{stringliteral}{''}]
361         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} qa[\textcolor{stringliteral}{'is\_impossible'}]:
362             answers = [a[\textcolor{stringliteral}{'text'}] \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} qa[\textcolor{stringliteral}{'answers'}]]
363 
364         \textcolor{comment}{# remove '.', '?', '!' from answers for proper sentence}
365         \textcolor{comment}{# tokenization}
366         edited\_answers = []
367         \textcolor{keywordflow}{for} answer \textcolor{keywordflow}{in} answers:
368             new\_answer = answer.replace(\textcolor{stringliteral}{'.'}, \textcolor{stringliteral}{''}).replace(\textcolor{stringliteral}{'?'}, \textcolor{stringliteral}{''}).replace(\textcolor{stringliteral}{'!'}, \textcolor{stringliteral}{''})
369             context = context.replace(answer, new\_answer)
370             edited\_answers.append(new\_answer)
371 
372         edited\_sentences = self.sent\_tok.\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(context)
373 
374         labels = []
375         \textcolor{keywordflow}{for} sentence \textcolor{keywordflow}{in} edited\_sentences:
376             \textcolor{keywordflow}{for} answer \textcolor{keywordflow}{in} edited\_answers:
377                 \textcolor{keywordflow}{if} answer \textcolor{keywordflow}{in} sentence \textcolor{keywordflow}{and} sentence \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} labels:
378                     labels.append(sentence)
379                     \textcolor{keywordflow}{break}
380 
381         plausible = []
382         \textcolor{keywordflow}{if} qa[\textcolor{stringliteral}{'is\_impossible'}]:
383             plausible = qa[\textcolor{stringliteral}{'plausible\_answers'}]
384         action = \{
385             \textcolor{stringliteral}{'id'}: \textcolor{stringliteral}{'SquadSentenceLabels'},
386             \textcolor{stringliteral}{'text'}: question,
387             \textcolor{stringliteral}{'labels'}: labels,
388             \textcolor{stringliteral}{'plausible\_answers'}: plausible,
389             \textcolor{stringliteral}{'label\_candidates'}: edited\_sentences,
390             \textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{True},
391         \}
392 
393         \textcolor{keywordflow}{return} action
394 \end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher_a38eaa848e9051e5fb1b0a63f2308481e}\label{classparlai_1_1tasks_1_1squad2_1_1agents_1_1SentenceLabelsTeacher_a38eaa848e9051e5fb1b0a63f2308481e}} 
\index{parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher@{parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher}!sent\+\_\+tok@{sent\+\_\+tok}}
\index{sent\+\_\+tok@{sent\+\_\+tok}!parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher@{parlai\+::tasks\+::squad2\+::agents\+::\+Sentence\+Labels\+Teacher}}
\subsubsection{\texorpdfstring{sent\+\_\+tok}{sent\_tok}}
{\footnotesize\ttfamily parlai.\+tasks.\+squad2.\+agents.\+Sentence\+Labels\+Teacher.\+sent\+\_\+tok}



Definition at line 347 of file agents.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/tasks/squad2/\hyperlink{parlai_2tasks_2squad2_2agents_8py}{agents.\+py}\end{DoxyCompactItemize}
