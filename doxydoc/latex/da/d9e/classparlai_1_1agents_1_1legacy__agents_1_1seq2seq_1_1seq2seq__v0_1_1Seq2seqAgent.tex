\hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent}{}\section{parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent Class Reference}
\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent}\index{parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent@{parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent}}


Inheritance diagram for parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=226pt]{d3/d2f/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=211pt]{dc/d5a/classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a88801410eefdb0b71bb674a0768e87b9}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8e4926c0c0da6bd7d530c44aa5416731}{opt}, shared=None)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad40d38a1cc2cafe32c43477740b4a164}{override\+\_\+opt} (self, new\+\_\+opt)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a073830870e283f88ee45a95c0ae8ad2f}{parse} (self, text)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8f6de929b475d3915c159c48165b4575}{v2t} (self, vec)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a0be9f1e378a403284d8afac5648fbf4d}{zero\+\_\+grad} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a3933d4fdc5e603b1a168d92e7da77151}{update\+\_\+params} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a56d246fd8b6bcf41726181c17cdc2762}{reset} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ae76435bf7acee9501188de47c0ba6991}{reset\+\_\+metrics} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a83a444ecb418dfb4381147f23653dd7b}{report} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac050147b69c47182730e92866f64156a}{share} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8419a9652b14a16cedff86206a7bb613}{observe} (self, \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a4473b0e478d7928c2b59ab653c8334fb}{observation})
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_aadec879f7d8daa6451076e4fb358715b}{predict} (self, xs, ys=None, cands=None, valid\+\_\+cands=None, is\+\_\+training=False)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a83e2433e00bff6162ebad3b818771b59}{vectorize} (self, observations)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a9326d8ed88999a992b8ec73313c70a36}{init\+\_\+cuda\+\_\+buffer} (self, batchsize)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a4ae534e440fd57603bc9b6e7c08b1c57}{batch\+\_\+act} (self, observations)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ae66e8065addb136eb82828ccbe56c5ca}{act} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a31c017cd07b01834a5d467fadfddd7cd}{save} (self, path=None)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a86c41e705170f0b2e56a5bbc378aead9}{shutdown} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a2aabe1e56b7b94f46875ae7f704f681f}{load} (self, path)
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a584d45d729817694d615d2d545532af2}{receive\+\_\+metrics} (self, metrics\+\_\+dict)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a05552a2714cd8d15d754a62258727c98}{dictionary\+\_\+class} ()
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac00637641bf7d8f23614c53ec8a1c610}{add\+\_\+cmdline\+\_\+args} (argparser)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a7943d21acc4e6986e15678e7da1d2f27}{truncate}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac50fcecc3b2ec89ece9bf75df8e21c6d}{metrics}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a11398edabc596559f45324d2d603b1e3}{history}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a3f13aca25d825730f0dacbf50f48d7c6}{report\+\_\+freq}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a227faa3994686ab266237ce9e11a2dc7}{use\+\_\+person\+\_\+tokens}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a2f31501d3923b8fb080d147d23ab727b}{batch\+\_\+idx}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a07995ff61edb2c4699aa766122878e94}{rank}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a215857d3ce2c7522c43728ab2879ce89}{beam\+\_\+size}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac0b7a3b712fe92dbabee7f31972b8a47}{topk}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ab81d3b0bd5474debb2f983d1b6220d5e}{use\+\_\+cuda}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8e4926c0c0da6bd7d530c44aa5416731}{opt}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad5ff9534948d32ca9b387fe1189174e6}{dict}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a044b5f18e6d9f0207b947769f06bcc6b}{S\+T\+A\+R\+T\+\_\+\+I\+DX}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a46ebee256e0812f6cab77a71c02578e0}{E\+N\+D\+\_\+\+I\+DX}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8589f9403a5d358b1c58b467fc556680}{N\+U\+L\+L\+\_\+\+I\+DX}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad5d4bdcd877577596273c4af1eb4c70d}{answers}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ae6ef958bb58cc1597b23b0a6c6c49b3f}{model}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a616955265cd96254aae5b5958ac18159}{id}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a203f77c92dd9f343cd7c5580756d5e5a}{model\+\_\+class}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad336994a64a83591ba1388aef3f1d5de}{criterion}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a4896d5dc3fd7a0f876a654f0bc942b6a}{clip}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac6a5cc3b1faaae160f5c10318a7afcfd}{optimizer}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac8229fafe6c4b7d7ebedbd0f00b55eb0}{scheduler}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a4473b0e478d7928c2b59ab653c8334fb}{observation}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a31e1353ee2c64ac03af2bc7854597f35}{buffer\+\_\+initialized}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
dictionary \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a83374019847ffa0c1cc43bf0b24120e9}{O\+P\+T\+I\+M\+\_\+\+O\+P\+TS}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Agent which takes an input sequence and produces an output sequence.

This model supports encoding the input and decoding the output via one of
several flavors of RNN. It then uses a linear layer (whose weights can
be shared with the embedding layer) to convert RNN output states into
output tokens. This model currently uses greedy decoding, selecting the
highest probability token at each time step.

For more information, see the following papers:
- Neural Machine Translation by Jointly Learning to Align and Translate
  `(Bahdanau et al. 2014) <arxiv.org/abs/1409.0473>`_
- Sequence to Sequence Learning with Neural Networks
  `(Sutskever et al. 2014) <arxiv.org/abs/1409.3215>`_
- Effective Approaches to Attention-based Neural Machine Translation
  `(Luong et al. 2015) <arxiv.org/abs/1508.04025>`_
\end{DoxyVerb}
 

Definition at line 95 of file seq2seq\+\_\+v0.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a88801410eefdb0b71bb674a0768e87b9}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a88801410eefdb0b71bb674a0768e87b9}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set up model.
\end{DoxyVerb}
 

Definition at line 357 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
357     \textcolor{keyword}{def }\_\_init\_\_(self, opt, shared=None):
358         \textcolor{stringliteral}{"""}
359 \textcolor{stringliteral}{        Set up model.}
360 \textcolor{stringliteral}{        """}
361         super().\_\_init\_\_(opt, shared)
362         opt = self.opt  \textcolor{comment}{# there is a deepcopy in the init}
363 
364         \textcolor{comment}{# all instances may need some params}
365         self.truncate = opt[\textcolor{stringliteral}{'truncate'}] \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'truncate'}] > 0 \textcolor{keywordflow}{else} \textcolor{keywordtype}{None}
366         self.metrics = \{
367             \textcolor{stringliteral}{'loss'}: 0.0,
368             \textcolor{stringliteral}{'num\_tokens'}: 0,
369             \textcolor{stringliteral}{'correct\_tokens'}: 0,
370             \textcolor{stringliteral}{'total\_skipped\_batches'}: 0,
371         \}
372         self.history = \{\}
373         self.report\_freq = opt.get(\textcolor{stringliteral}{'report\_freq'}, 0.001)
374         self.use\_person\_tokens = opt.get(\textcolor{stringliteral}{'person\_tokens'}, \textcolor{keyword}{False})
375         self.batch\_idx = shared \textcolor{keywordflow}{and} shared.get(\textcolor{stringliteral}{'batchindex'}) \textcolor{keywordflow}{or} 0
376         self.rank = opt[\textcolor{stringliteral}{'rank\_candidates'}]
377         self.beam\_size = opt.get(\textcolor{stringliteral}{'beam\_size'}, 1)
378         self.topk = opt.get(\textcolor{stringliteral}{'topk'}, 1)
379         states = \{\}
380 
381         \textcolor{comment}{# check for cuda}
382         self.use\_cuda = \textcolor{keywordflow}{not} opt.get(\textcolor{stringliteral}{'no\_cuda'}) \textcolor{keywordflow}{and} torch.cuda.is\_available()
383         \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'numthreads'}, 1) > 1:
384             torch.set\_num\_threads(1)
385 
386         \textcolor{keywordflow}{if} shared:
387             \textcolor{comment}{# set up shared properties}
388             self.opt = shared[\textcolor{stringliteral}{'opt'}]
389             opt = self.opt
390             self.dict = shared[\textcolor{stringliteral}{'dict'}]
391             self.START\_IDX = shared[\textcolor{stringliteral}{'START\_IDX'}]
392             self.END\_IDX = shared[\textcolor{stringliteral}{'END\_IDX'}]
393             self.NULL\_IDX = shared[\textcolor{stringliteral}{'NULL\_IDX'}]
394             \textcolor{comment}{# answers contains a batch\_size list of the last answer produced}
395             self.answers = shared[\textcolor{stringliteral}{'answers'}]
396             self.model = shared[\textcolor{stringliteral}{'model'}]
397             self.metrics = shared[\textcolor{stringliteral}{'metrics'}]
398             states = shared.get(\textcolor{stringliteral}{'states'}, \{\})
399 
400         \textcolor{keywordflow}{else}:
401             \textcolor{comment}{# this is not a shared instance of this class, so do full init}
402             \textcolor{comment}{# answers contains a batch\_size list of the last answer produced}
403             self.answers = [\textcolor{keywordtype}{None}] * opt[\textcolor{stringliteral}{'batchsize'}]
404 
405             \textcolor{keywordflow}{if} self.use\_cuda:
406                 print(\textcolor{stringliteral}{'[ Using CUDA ]'})
407                 torch.cuda.set\_device(opt[\textcolor{stringliteral}{'gpu'}])
408 
409             init\_model = \textcolor{keywordtype}{None}
410             \textcolor{comment}{# check first for 'init\_model' for loading model from file}
411             \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'init\_model'}) \textcolor{keywordflow}{and} os.path.isfile(opt[\textcolor{stringliteral}{'init\_model'}]):
412                 init\_model = opt[\textcolor{stringliteral}{'init\_model'}]
413             \textcolor{comment}{# next check for 'model\_file', this would override init\_model}
414             \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'model\_file'}) \textcolor{keywordflow}{and} os.path.isfile(opt[\textcolor{stringliteral}{'model\_file'}]):
415                 init\_model = opt[\textcolor{stringliteral}{'model\_file'}]
416 
417             \textcolor{keywordflow}{if} init\_model \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
418                 \textcolor{comment}{# load model parameters if available}
419                 print(\textcolor{stringliteral}{'[ Loading existing model params from \{\} ]'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(init\_model))
420                 states = self.load(init\_model)
421 
422                 \textcolor{keywordflow}{if} os.path.isfile(init\_model + \textcolor{stringliteral}{'.dict'}) \textcolor{keywordflow}{or} opt[\textcolor{stringliteral}{'dict\_file'}] \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
423                     opt[\textcolor{stringliteral}{'dict\_file'}] = init\_model + \textcolor{stringliteral}{'.dict'}
424 
425             \textcolor{comment}{# load dictionary and basic tokens & vectors}
426             self.dict = DictionaryAgent(opt)
427             self.id = \textcolor{stringliteral}{'Seq2Seq'}
428             \textcolor{comment}{# we use START markers to start our output}
429             self.START\_IDX = self.dict[self.dict.start\_token]
430             \textcolor{comment}{# we use END markers to end our output}
431             self.END\_IDX = self.dict[self.dict.end\_token]
432             \textcolor{comment}{# get index of null token from dictionary (probably 0)}
433             self.NULL\_IDX = self.dict[self.dict.null\_token]
434 
435             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} hasattr(self, \textcolor{stringliteral}{'model\_class'}):
436                 \textcolor{comment}{# this allows child classes to override this but inherit init}
437                 self.model\_class = Seq2seq
438             self.model = self.model\_class(
439                 opt,
440                 len(self.dict),
441                 padding\_idx=self.NULL\_IDX,
442                 start\_idx=self.START\_IDX,
443                 end\_idx=self.END\_IDX,
444                 longest\_label=states.get(\textcolor{stringliteral}{'longest\_label'}, 1),
445             )
446 
447             \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'dict\_tokenizer'}) == \textcolor{stringliteral}{'bpe'} \textcolor{keywordflow}{and} opt[\textcolor{stringliteral}{'embedding\_type'}] != \textcolor{stringliteral}{'random'}:
448                 print(\textcolor{stringliteral}{'skipping preinitialization of embeddings for bpe'})
449             \textcolor{keywordflow}{elif} \textcolor{keywordflow}{not} states \textcolor{keywordflow}{and} opt[\textcolor{stringliteral}{'embedding\_type'}] != \textcolor{stringliteral}{'random'}:
450                 \textcolor{comment}{# set up preinitialized embeddings}
451                 \textcolor{keywordflow}{try}:
452                     \textcolor{keyword}{import} torchtext.vocab \textcolor{keyword}{as} vocab
453                 \textcolor{keywordflow}{except} ImportError \textcolor{keyword}{as} ex:
454                     print(\textcolor{stringliteral}{'Please install torch text with `pip install torchtext`'})
455                     \textcolor{keywordflow}{raise} ex
456                 pretrained\_dim = 300
457                 \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'embedding\_type'}].startswith(\textcolor{stringliteral}{'glove'}):
458                     \textcolor{keywordflow}{if} \textcolor{stringliteral}{'twitter'} \textcolor{keywordflow}{in} opt[\textcolor{stringliteral}{'embedding\_type'}]:
459                         init = \textcolor{stringliteral}{'glove-twitter'}
460                         name = \textcolor{stringliteral}{'twitter.27B'}
461                         pretrained\_dim = 200
462                     \textcolor{keywordflow}{else}:
463                         init = \textcolor{stringliteral}{'glove'}
464                         name = \textcolor{stringliteral}{'840B'}
465                     embs = vocab.GloVe(
466                         name=name,
467                         dim=pretrained\_dim,
468                         cache=\hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_a5fbd3301b67f00d6d146fb01c7cd7626}{modelzoo\_path}(
469                             self.opt.get(\textcolor{stringliteral}{'datapath'}), \textcolor{stringliteral}{'models:glove\_vectors'}
470                         ),
471                     )
472                 \textcolor{keywordflow}{elif} opt[\textcolor{stringliteral}{'embedding\_type'}].startswith(\textcolor{stringliteral}{'fasttext'}):
473                     init = \textcolor{stringliteral}{'fasttext'}
474                     embs = vocab.FastText(
475                         language=\textcolor{stringliteral}{'en'},
476                         cache=\hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_a5fbd3301b67f00d6d146fb01c7cd7626}{modelzoo\_path}(
477                             self.opt.get(\textcolor{stringliteral}{'datapath'}), \textcolor{stringliteral}{'models:fasttext\_vectors'}
478                         ),
479                     )
480                 \textcolor{keywordflow}{else}:
481                     \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'embedding type not implemented'})
482 
483                 \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'embeddingsize'}] != pretrained\_dim:
484                     rp = torch.Tensor(pretrained\_dim, opt[\textcolor{stringliteral}{'embeddingsize'}]).normal\_()
485                     t = \textcolor{keyword}{lambda} x: torch.mm(x.unsqueeze(0), rp)
486                 \textcolor{keywordflow}{else}:
487                     t = \textcolor{keyword}{lambda} x: x
488                 cnt = 0
489                 \textcolor{keywordflow}{for} w, i \textcolor{keywordflow}{in} self.dict.tok2ind.items():
490                     \textcolor{keywordflow}{if} w \textcolor{keywordflow}{in} embs.stoi:
491                         vec = t(embs.vectors[embs.stoi[w]])
492                         self.model.decoder.lt.weight.data[i] = vec
493                         cnt += 1
494                         \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'lookuptable'}] \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'unique'}, \textcolor{stringliteral}{'dec\_out'}]:
495                             \textcolor{comment}{# also set encoder lt, since it's not shared}
496                             self.model.encoder.lt.weight.data[i] = vec
497                 print(
498                     \textcolor{stringliteral}{'Seq2seq: initialized embeddings for \{\} tokens from \{\}.'}
499                     \textcolor{stringliteral}{''}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(cnt, init)
500                 )
501 
502             \textcolor{keywordflow}{if} states:
503                 \textcolor{comment}{# set loaded states if applicable}
504                 self.model.load\_state\_dict(states[\textcolor{stringliteral}{'model'}])
505 
506             \textcolor{keywordflow}{if} self.use\_cuda:
507                 self.model.cuda()
508 
509         \textcolor{comment}{# set up criteria}
510         \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'numsoftmax'}, 1) > 1:
511             self.criterion = nn.NLLLoss(ignore\_index=self.NULL\_IDX, size\_average=\textcolor{keyword}{False})
512         \textcolor{keywordflow}{else}:
513             self.criterion = nn.CrossEntropyLoss(
514                 ignore\_index=self.NULL\_IDX, size\_average=\textcolor{keyword}{False}
515             )
516 
517         \textcolor{keywordflow}{if} self.use\_cuda:
518             self.criterion.cuda()
519 
520         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'train'} \textcolor{keywordflow}{in} opt.get(\textcolor{stringliteral}{'datatype'}, \textcolor{stringliteral}{''}):
521             \textcolor{comment}{# we only set up optimizers when training}
522             \textcolor{comment}{# we only set this up for the original instance or hogwild ones}
523             self.clip = opt.get(\textcolor{stringliteral}{'gradient\_clip'}, -1)
524 
525             \textcolor{comment}{# set up optimizer}
526             lr = opt[\textcolor{stringliteral}{'learningrate'}]
527             optim\_class = Seq2seqAgent.OPTIM\_OPTS[opt[\textcolor{stringliteral}{'optimizer'}]]
528             kwargs = \{\textcolor{stringliteral}{'lr'}: lr\}
529             \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'momentum'}) > 0 \textcolor{keywordflow}{and} opt[\textcolor{stringliteral}{'optimizer'}] \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'sgd'}, \textcolor{stringliteral}{'rmsprop'}]:
530                 kwargs[\textcolor{stringliteral}{'momentum'}] = opt[\textcolor{stringliteral}{'momentum'}]
531                 \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'optimizer'}] == \textcolor{stringliteral}{'sgd'}:
532                     kwargs[\textcolor{stringliteral}{'nesterov'}] = \textcolor{keyword}{True}
533             \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'optimizer'}] == \textcolor{stringliteral}{'adam'}:
534                 \textcolor{comment}{# https://openreview.net/forum?id=ryQu7f-RZ}
535                 kwargs[\textcolor{stringliteral}{'amsgrad'}] = \textcolor{keyword}{True}
536 
537             \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'embedding\_type'}].endswith(\textcolor{stringliteral}{'fixed'}):
538                 print(\textcolor{stringliteral}{'Seq2seq: fixing embedding weights.'})
539                 self.model.decoder.lt.weight.requires\_grad = \textcolor{keyword}{False}
540                 self.model.encoder.lt.weight.requires\_grad = \textcolor{keyword}{False}
541                 \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'lookuptable'}] \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'dec\_out'}, \textcolor{stringliteral}{'all'}]:
542                     self.model.decoder.e2s.weight.requires\_grad = \textcolor{keyword}{False}
543             self.optimizer = optim\_class(
544                 [p \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} self.model.parameters() \textcolor{keywordflow}{if} p.requires\_grad], **kwargs
545             )
546             \textcolor{keywordflow}{if} states.get(\textcolor{stringliteral}{'optimizer'}):
547                 \textcolor{keywordflow}{if} states[\textcolor{stringliteral}{'optimizer\_type'}] != opt[\textcolor{stringliteral}{'optimizer'}]:
548                     print(
549                         \textcolor{stringliteral}{'WARNING: not loading optim state since optim class '} \textcolor{stringliteral}{'changed.'}
550                     )
551                 \textcolor{keywordflow}{else}:
552                     \textcolor{keywordflow}{try}:
553                         self.optimizer.load\_state\_dict(states[\textcolor{stringliteral}{'optimizer'}])
554                     \textcolor{keywordflow}{except} ValueError:
555                         print(
556                             \textcolor{stringliteral}{'WARNING: not loading optim state since model '}
557                             \textcolor{stringliteral}{'params changed.'}
558                         )
559                     \textcolor{keywordflow}{if} self.use\_cuda:
560                         \textcolor{keywordflow}{for} state \textcolor{keywordflow}{in} self.optimizer.state.values():
561                             \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} state.items():
562                                 \textcolor{keywordflow}{if} isinstance(v, torch.Tensor):
563                                     state[k] = v.cuda()
564             self.scheduler = optim.lr\_scheduler.ReduceLROnPlateau(
565                 self.optimizer, \textcolor{stringliteral}{'min'}, factor=0.5, patience=3, verbose=\textcolor{keyword}{True}
566             )
567 
568         self.reset()
569 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ae66e8065addb136eb82828ccbe56c5ca}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ae66e8065addb136eb82828ccbe56c5ca}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!act@{act}}
\index{act@{act}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{act()}{act()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+act (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 924 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
924     \textcolor{keyword}{def }act(self):
925         \textcolor{comment}{# call batch\_act with this batch of one}
926         \textcolor{keywordflow}{return} self.batch\_act([self.observation])[0]
927 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac00637641bf7d8f23614c53ec8a1c610}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac00637641bf7d8f23614c53ec8a1c610}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}}
\index{add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{add\+\_\+cmdline\+\_\+args()}{add\_cmdline\_args()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+add\+\_\+cmdline\+\_\+args (\begin{DoxyParamCaption}\item[{}]{argparser }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Add command-line arguments specifically for this agent.
\end{DoxyVerb}
 

Definition at line 131 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
131     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1drqa_1_1config_a62fdd5554f1da6be0cba185271058320}{add\_cmdline\_args}(argparser):
132         \textcolor{stringliteral}{"""}
133 \textcolor{stringliteral}{        Add command-line arguments specifically for this agent.}
134 \textcolor{stringliteral}{        """}
135         agent = argparser.add\_argument\_group(\textcolor{stringliteral}{'Seq2Seq Arguments'})
136         agent.add\_argument(
137             \textcolor{stringliteral}{'--init-model'},
138             type=str,
139             default=\textcolor{keywordtype}{None},
140             help=\textcolor{stringliteral}{'load dict/features/weights/opts from this file'},
141         )
142         agent.add\_argument(
143             \textcolor{stringliteral}{'-hs'},
144             \textcolor{stringliteral}{'--hiddensize'},
145             type=int,
146             default=128,
147             help=\textcolor{stringliteral}{'size of the hidden layers'},
148         )
149         agent.add\_argument(
150             \textcolor{stringliteral}{'-esz'},
151             \textcolor{stringliteral}{'--embeddingsize'},
152             type=int,
153             default=128,
154             help=\textcolor{stringliteral}{'size of the token embeddings'},
155         )
156         agent.add\_argument(
157             \textcolor{stringliteral}{'-nl'}, \textcolor{stringliteral}{'--numlayers'}, type=int, default=2, help=\textcolor{stringliteral}{'number of hidden layers'}
158         )
159         agent.add\_argument(
160             \textcolor{stringliteral}{'-lr'}, \textcolor{stringliteral}{'--learningrate'}, type=float, default=1, help=\textcolor{stringliteral}{'learning rate'}
161         )
162         agent.add\_argument(
163             \textcolor{stringliteral}{'-dr'}, \textcolor{stringliteral}{'--dropout'}, type=float, default=0.1, help=\textcolor{stringliteral}{'dropout rate'}
164         )
165         agent.add\_argument(
166             \textcolor{stringliteral}{'-clip'},
167             \textcolor{stringliteral}{'--gradient-clip'},
168             type=float,
169             default=0.1,
170             help=\textcolor{stringliteral}{'gradient clipping using l2 norm'},
171         )
172         agent.add\_argument(
173             \textcolor{stringliteral}{'-bi'},
174             \textcolor{stringliteral}{'--bidirectional'},
175             type=\textcolor{stringliteral}{'bool'},
176             default=\textcolor{keyword}{False},
177             help=\textcolor{stringliteral}{'whether to encode the context with a '} \textcolor{stringliteral}{'bidirectional rnn'},
178         )
179         agent.add\_argument(
180             \textcolor{stringliteral}{'-att'},
181             \textcolor{stringliteral}{'--attention'},
182             default=\textcolor{stringliteral}{'none'},
183             choices=[\textcolor{stringliteral}{'none'}, \textcolor{stringliteral}{'concat'}, \textcolor{stringliteral}{'general'}, \textcolor{stringliteral}{'dot'}, \textcolor{stringliteral}{'local'}],
184             help=\textcolor{stringliteral}{'Choices: none, concat, general, local. '}
185             \textcolor{stringliteral}{'If set local, also set attention-length. '}
186             \textcolor{stringliteral}{'(see arxiv.org/abs/1508.04025)'},
187         )
188         agent.add\_argument(
189             \textcolor{stringliteral}{'-attl'},
190             \textcolor{stringliteral}{'--attention-length'},
191             default=48,
192             type=int,
193             help=\textcolor{stringliteral}{'Length of local attention.'},
194         )
195         agent.add\_argument(
196             \textcolor{stringliteral}{'--attention-time'},
197             default=\textcolor{stringliteral}{'post'},
198             choices=[\textcolor{stringliteral}{'pre'}, \textcolor{stringliteral}{'post'}],
199             help=\textcolor{stringliteral}{'Whether to apply attention before or after '} \textcolor{stringliteral}{'decoding.'},
200         )
201         agent.add\_argument(
202             \textcolor{stringliteral}{'--no-cuda'},
203             action=\textcolor{stringliteral}{'store\_true'},
204             default=\textcolor{keyword}{False},
205             help=\textcolor{stringliteral}{'disable GPUs even if available'},
206         )
207         agent.add\_argument(
208             \textcolor{stringliteral}{'-gpu'}, \textcolor{stringliteral}{'--gpu'}, type=int, default=-1, help=\textcolor{stringliteral}{'which GPU device to use'}
209         )
210         \textcolor{comment}{# ranking arguments}
211         agent.add\_argument(
212             \textcolor{stringliteral}{'-rc'},
213             \textcolor{stringliteral}{'--rank-candidates'},
214             type=\textcolor{stringliteral}{'bool'},
215             default=\textcolor{keyword}{False},
216             help=\textcolor{stringliteral}{'rank candidates if available. this is done by'}
217             \textcolor{stringliteral}{' computing the prob score per token for each '}
218             \textcolor{stringliteral}{'candidate and selecting the highest scoring.'},
219         )
220         agent.add\_argument(
221             \textcolor{stringliteral}{'-tr'},
222             \textcolor{stringliteral}{'--truncate'},
223             type=int,
224             default=-1,
225             help=\textcolor{stringliteral}{'truncate input & output lengths to speed up '}
226             \textcolor{stringliteral}{'training (may reduce accuracy). This fixes all '}
227             \textcolor{stringliteral}{'input and output to have a maximum length. This '}
228             \textcolor{stringliteral}{'reduces the total amount '}
229             \textcolor{stringliteral}{'of padding in the batches.'},
230         )
231         agent.add\_argument(
232             \textcolor{stringliteral}{'-rnn'},
233             \textcolor{stringliteral}{'--rnn-class'},
234             default=\textcolor{stringliteral}{'lstm'},
235             choices=Seq2seq.RNN\_OPTS.keys(),
236             help=\textcolor{stringliteral}{'Choose between different types of RNNs.'},
237         )
238         agent.add\_argument(
239             \textcolor{stringliteral}{'-dec'},
240             \textcolor{stringliteral}{'--decoder'},
241             default=\textcolor{stringliteral}{'same'},
242             choices=[\textcolor{stringliteral}{'same'}, \textcolor{stringliteral}{'shared'}],
243             help=\textcolor{stringliteral}{'Choose between different decoder modules. '}
244             \textcolor{stringliteral}{'Default "same" uses same class as encoder, '}
245             \textcolor{stringliteral}{'while "shared" also uses the same weights. '}
246             \textcolor{stringliteral}{'Note that shared disabled some encoder '}
247             \textcolor{stringliteral}{'options--in particular, bidirectionality.'},
248         )
249         agent.add\_argument(
250             \textcolor{stringliteral}{'-lt'},
251             \textcolor{stringliteral}{'--lookuptable'},
252             default=\textcolor{stringliteral}{'unique'},
253             choices=[\textcolor{stringliteral}{'unique'}, \textcolor{stringliteral}{'enc\_dec'}, \textcolor{stringliteral}{'dec\_out'}, \textcolor{stringliteral}{'all'}],
254             help=\textcolor{stringliteral}{'The encoder, decoder, and output modules can '}
255             \textcolor{stringliteral}{'share weights, or not. '}
256             \textcolor{stringliteral}{'Unique has independent embeddings for each. '}
257             \textcolor{stringliteral}{'Enc\_dec shares the embedding for the encoder '}
258             \textcolor{stringliteral}{'and decoder. '}
259             \textcolor{stringliteral}{'Dec\_out shares decoder embedding and output '}
260             \textcolor{stringliteral}{'weights. '}
261             \textcolor{stringliteral}{'All shares all three weights.'},
262         )
263         agent.add\_argument(
264             \textcolor{stringliteral}{'-opt'},
265             \textcolor{stringliteral}{'--optimizer'},
266             default=\textcolor{stringliteral}{'sgd'},
267             choices=Seq2seqAgent.OPTIM\_OPTS.keys(),
268             help=\textcolor{stringliteral}{'Choose between pytorch optimizers. '}
269             \textcolor{stringliteral}{'Any member of torch.optim is valid and will '}
270             \textcolor{stringliteral}{'be used with default params except learning '}
271             \textcolor{stringliteral}{'rate (as specified by -lr).'},
272         )
273         agent.add\_argument(
274             \textcolor{stringliteral}{'-mom'},
275             \textcolor{stringliteral}{'--momentum'},
276             default=-1,
277             type=float,
278             help=\textcolor{stringliteral}{'if applicable, momentum value for optimizer. '}
279             \textcolor{stringliteral}{'if > 0, sgd uses nesterov momentum.'},
280         )
281         agent.add\_argument(
282             \textcolor{stringliteral}{'-emb'},
283             \textcolor{stringliteral}{'--embedding-type'},
284             default=\textcolor{stringliteral}{'random'},
285             choices=[
286                 \textcolor{stringliteral}{'random'},
287                 \textcolor{stringliteral}{'glove'},
288                 \textcolor{stringliteral}{'glove-fixed'},
289                 \textcolor{stringliteral}{'fasttext'},
290                 \textcolor{stringliteral}{'fasttext-fixed'},
291                 \textcolor{stringliteral}{'glove-twitter'},
292             ],
293             help=\textcolor{stringliteral}{'Choose between different strategies '}
294             \textcolor{stringliteral}{'for word embeddings. Default is random, '}
295             \textcolor{stringliteral}{'but can also preinitialize from Glove or '}
296             \textcolor{stringliteral}{'Fasttext.'}
297             \textcolor{stringliteral}{'Preinitialized embeddings can also be fixed '}
298             \textcolor{stringliteral}{'so they are not updated during training.'},
299         )
300         agent.add\_argument(
301             \textcolor{stringliteral}{'-soft'},
302             \textcolor{stringliteral}{'--numsoftmax'},
303             default=1,
304             type=int,
305             help=\textcolor{stringliteral}{'default 1, if greater then uses mixture of '}
306             \textcolor{stringliteral}{'softmax (see arxiv.org/abs/1711.03953).'},
307         )
308         agent.add\_argument(
309             \textcolor{stringliteral}{'-rf'},
310             \textcolor{stringliteral}{'--report-freq'},
311             type=float,
312             default=0.001,
313             help=\textcolor{stringliteral}{'Report frequency of prediction during eval.'},
314         )
315         agent.add\_argument(
316             \textcolor{stringliteral}{'-histr'},
317             \textcolor{stringliteral}{'--history-replies'},
318             default=\textcolor{stringliteral}{'label\_else\_model'},
319             type=str,
320             choices=[\textcolor{stringliteral}{'none'}, \textcolor{stringliteral}{'model'}, \textcolor{stringliteral}{'label'}, \textcolor{stringliteral}{'label\_else\_model'}],
321             help=\textcolor{stringliteral}{'Keep replies in the history, or not.'},
322         )
323         agent.add\_argument(
324             \textcolor{stringliteral}{'-pt'},
325             \textcolor{stringliteral}{'--person-tokens'},
326             type=\textcolor{stringliteral}{'bool'},
327             default=\textcolor{keyword}{False},
328             help=\textcolor{stringliteral}{'use special tokens before each speaker'},
329         )
330         agent.add\_argument(
331             \textcolor{stringliteral}{'--beam-size'},
332             type=int,
333             default=1,
334             help=\textcolor{stringliteral}{'Beam size, if 1 then greedy search'},
335         )
336         agent.add\_argument(
337             \textcolor{stringliteral}{'--beam-log-freq'},
338             type=float,
339             default=0.0,
340             help=\textcolor{stringliteral}{'The portion of beams to dump from minibatch into model\_name.beam\_dump folder'},
341         )
342         agent.add\_argument(
343             \textcolor{stringliteral}{'--topk'},
344             type=int,
345             default=1,
346             help=\textcolor{stringliteral}{'Top k sampling from renormalized softmax in test/valid time, default 1 means simple
       greedy max output'},
347         )
348         agent.add\_argument(
349             \textcolor{stringliteral}{'--softmax-layer-bias'},
350             type=\textcolor{stringliteral}{'bool'},
351             default=\textcolor{keyword}{False},
352             help=\textcolor{stringliteral}{'Put True if you want to include the bias in decoder.e2s layer'},
353         )
354         Seq2seqAgent.dictionary\_class().\hyperlink{namespaceparlai_1_1agents_1_1drqa_1_1config_a62fdd5554f1da6be0cba185271058320}{add\_cmdline\_args}(argparser)
355         \textcolor{keywordflow}{return} agent
356 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a4ae534e440fd57603bc9b6e7c08b1c57}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a4ae534e440fd57603bc9b6e7c08b1c57}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!batch\+\_\+act@{batch\+\_\+act}}
\index{batch\+\_\+act@{batch\+\_\+act}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{batch\+\_\+act()}{batch\_act()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+batch\+\_\+act (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{observations }\end{DoxyParamCaption})}



Definition at line 871 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
871     \textcolor{keyword}{def }batch\_act(self, observations):
872         batchsize = len(observations)
873         self.init\_cuda\_buffer(batchsize)
874         \textcolor{comment}{# initialize a table of replies with this agent's id}
875         batch\_reply = [\{\textcolor{stringliteral}{'id'}: self.getID()\} \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(batchsize)]
876 
877         \textcolor{comment}{# convert the observations into batches of inputs and targets}
878         \textcolor{comment}{# valid\_inds tells us the indices of all valid examples}
879         \textcolor{comment}{# e.g. for input [\{\}, \{'text': 'hello'\}, \{\}, \{\}], valid\_inds is [1]}
880         \textcolor{comment}{# since the other three elements had no 'text' field}
881         xs, ys, labels, valid\_inds, cands, valid\_cands, is\_training = self.vectorize(
882             observations
883         )
884 
885         \textcolor{keywordflow}{if} xs \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
886             \textcolor{comment}{# no valid examples, just return empty responses}
887             \textcolor{keywordflow}{return} batch\_reply
888 
889         \textcolor{comment}{# produce predictions, train on targets if availables}
890         cand\_inds = [i[0] \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} valid\_cands] \textcolor{keywordflow}{if} valid\_cands \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} \textcolor{keywordtype}{None}
891         predictions, cand\_preds = self.predict(xs, ys, cands, cand\_inds, is\_training)
892 
893         \textcolor{keywordflow}{if} is\_training:
894             report\_freq = 0
895         \textcolor{keywordflow}{else}:
896             report\_freq = self.report\_freq
897         \textcolor{keywordflow}{if} predictions \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
898             PaddingUtils.map\_predictions(
899                 predictions,
900                 valid\_inds,
901                 batch\_reply,
902                 observations,
903                 self.dict,
904                 self.END\_IDX,
905                 report\_freq=report\_freq,
906                 labels=labels,
907                 answers=self.answers,
908                 ys=ys.data \textcolor{keywordflow}{if} ys \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} \textcolor{keywordtype}{None},
909             )
910 
911         \textcolor{keywordflow}{if} cand\_preds \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
912             \textcolor{keywordflow}{if} valid\_cands \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
913                 valid\_cands = [(\textcolor{keywordtype}{None}, i, labels) \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} valid\_inds]
914             \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(valid\_cands)):
915                 order = cand\_preds[i]
916                 \_, batch\_idx, curr\_cands = valid\_cands[i]
917                 curr = batch\_reply[batch\_idx]
918                 curr[\textcolor{stringliteral}{'text\_candidates'}] = [
919                     curr\_cands[idx] \textcolor{keywordflow}{for} idx \textcolor{keywordflow}{in} order \textcolor{keywordflow}{if} idx < len(curr\_cands)
920                 ]
921 
922         \textcolor{keywordflow}{return} batch\_reply
923 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a05552a2714cd8d15d754a62258727c98}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a05552a2714cd8d15d754a62258727c98}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!dictionary\+\_\+class@{dictionary\+\_\+class}}
\index{dictionary\+\_\+class@{dictionary\+\_\+class}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{dictionary\+\_\+class()}{dictionary\_class()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+dictionary\+\_\+class (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 127 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
127     \textcolor{keyword}{def }dictionary\_class():
128         \textcolor{keywordflow}{return} DictionaryAgent
129 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a9326d8ed88999a992b8ec73313c70a36}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a9326d8ed88999a992b8ec73313c70a36}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!init\+\_\+cuda\+\_\+buffer@{init\+\_\+cuda\+\_\+buffer}}
\index{init\+\_\+cuda\+\_\+buffer@{init\+\_\+cuda\+\_\+buffer}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{init\+\_\+cuda\+\_\+buffer()}{init\_cuda\_buffer()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+init\+\_\+cuda\+\_\+buffer (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{batchsize }\end{DoxyParamCaption})}



Definition at line 850 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
850     \textcolor{keyword}{def }init\_cuda\_buffer(self, batchsize):
851         \textcolor{keywordflow}{if} self.use\_cuda \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} hasattr(self, \textcolor{stringliteral}{'buffer\_initialized'}):
852             \textcolor{keywordflow}{try}:
853                 print(\textcolor{stringliteral}{'preinitializing pytorch cuda buffer'})
854                 bsz = self.opt.get(\textcolor{stringliteral}{'batchsize'}, batchsize)
855                 maxlen = self.truncate \textcolor{keywordflow}{or} 180
856                 dummy = torch.ones(bsz, maxlen).long().cuda()
857                 sc = self.model(dummy, dummy)[1]
858                 loss = self.criterion(sc.view(-1, sc.size(-1)), dummy.view(-1))
859                 loss.backward()
860                 self.buffer\_initialized = \textcolor{keyword}{True}
861             \textcolor{keywordflow}{except} RuntimeError \textcolor{keyword}{as} e:
862                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'out of memory'} \textcolor{keywordflow}{in} \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(e):
863                     m = (
864                         \textcolor{stringliteral}{'CUDA OOM: Lower batch size (-bs) from \{\} or lower max'}
865                         \textcolor{stringliteral}{' sequence length (-tr) from \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(bsz, maxlen)
866                     )
867                     \textcolor{keywordflow}{raise} RuntimeError(m)
868                 \textcolor{keywordflow}{else}:
869                     \textcolor{keywordflow}{raise} e
870 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a2aabe1e56b7b94f46875ae7f704f681f}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a2aabe1e56b7b94f46875ae7f704f681f}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!load@{load}}
\index{load@{load}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+load (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{path }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return opt and model states.
\end{DoxyVerb}
 

Definition at line 957 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
957     \textcolor{keyword}{def }load(self, path):
958         \textcolor{stringliteral}{"""}
959 \textcolor{stringliteral}{        Return opt and model states.}
960 \textcolor{stringliteral}{        """}
961         states = torch.load(path, map\_location=\textcolor{keyword}{lambda} cpu, \_: cpu)
962         \textcolor{keywordflow}{return} states
963 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8419a9652b14a16cedff86206a7bb613}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8419a9652b14a16cedff86206a7bb613}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!observe@{observe}}
\index{observe@{observe}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{observe()}{observe()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+observe (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{observation }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save observation for act.

If multiple observations are from the same episode, concatenate them.
\end{DoxyVerb}
 

Definition at line 708 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
708     \textcolor{keyword}{def }observe(self, observation):
709         \textcolor{stringliteral}{"""}
710 \textcolor{stringliteral}{        Save observation for act.}
711 \textcolor{stringliteral}{}
712 \textcolor{stringliteral}{        If multiple observations are from the same episode, concatenate them.}
713 \textcolor{stringliteral}{        """}
714         \textcolor{comment}{# shallow copy observation (deep copy can be expensive)}
715         obs = observation.copy()
716 
717         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} obs.get(\textcolor{stringliteral}{'preprocessed'}, \textcolor{keyword}{False}) \textcolor{keywordflow}{or} \textcolor{stringliteral}{'text2vec'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} obs:
718             obs[\textcolor{stringliteral}{'text2vec'}] = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_ac7cb3ffae208474d6e67f37ecfe07f64}{maintain\_dialog\_history}(
719                 self.history,
720                 obs,
721                 reply=self.answers[self.batch\_idx],
722                 historyLength=self.truncate,
723                 useReplies=self.opt.get(\textcolor{stringliteral}{'history\_replies'}),
724                 dict=self.dict,
725                 useStartEndIndices=self.use\_person\_tokens,
726             )
727         \textcolor{keywordflow}{else}:
728             obs[\textcolor{stringliteral}{'text2vec'}] = deque(obs[\textcolor{stringliteral}{'text2vec'}], maxlen=self.truncate)
729         self.observation = obs
730         self.answers[self.batch\_idx] = \textcolor{keywordtype}{None}
731         \textcolor{keywordflow}{return} obs
732 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad40d38a1cc2cafe32c43477740b4a164}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad40d38a1cc2cafe32c43477740b4a164}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!override\+\_\+opt@{override\+\_\+opt}}
\index{override\+\_\+opt@{override\+\_\+opt}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{override\+\_\+opt()}{override\_opt()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+override\+\_\+opt (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{new\+\_\+opt }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set overridable opts from loaded opt file.

Print out each added key and each overriden key. Only override args specific to
the model.
\end{DoxyVerb}
 

Definition at line 570 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
570     \textcolor{keyword}{def }override\_opt(self, new\_opt):
571         \textcolor{stringliteral}{"""}
572 \textcolor{stringliteral}{        Set overridable opts from loaded opt file.}
573 \textcolor{stringliteral}{}
574 \textcolor{stringliteral}{        Print out each added key and each overriden key. Only override args specific to}
575 \textcolor{stringliteral}{        the model.}
576 \textcolor{stringliteral}{        """}
577         model\_args = \{
578             \textcolor{stringliteral}{'hiddensize'},
579             \textcolor{stringliteral}{'embeddingsize'},
580             \textcolor{stringliteral}{'numlayers'},
581             \textcolor{stringliteral}{'optimizer'},
582             \textcolor{stringliteral}{'encoder'},
583             \textcolor{stringliteral}{'decoder'},
584             \textcolor{stringliteral}{'lookuptable'},
585             \textcolor{stringliteral}{'attention'},
586             \textcolor{stringliteral}{'attention\_length'},
587             \textcolor{stringliteral}{'rnn\_class'},
588         \}
589         \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} new\_opt.items():
590             \textcolor{keywordflow}{if} k \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} model\_args:
591                 \textcolor{comment}{# skip non-model args}
592                 \textcolor{keywordflow}{continue}
593             \textcolor{keywordflow}{if} k \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.opt:
594                 print(\textcolor{stringliteral}{'[ Adding new option: | \{k\}: \{v\} | ]'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(k=k, v=v))
595             \textcolor{keywordflow}{elif} self.opt[k] != v:
596                 print(
597                     \textcolor{stringliteral}{'[ Overriding option: | \{k\}: \{old\} => \{v\} | ]'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
598                         k=k, old=self.opt[k], v=v
599                     )
600                 )
601             self.opt[k] = v
602         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'dict\_file'} \textcolor{keywordflow}{in} new\_opt \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} self.opt.get(\textcolor{stringliteral}{'dict\_file'}):
603             print(
604                 \textcolor{stringliteral}{'[ No dictionary path detected, trying to load previous '}
605                 \textcolor{stringliteral}{'path \{\} ]'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(new\_opt[\textcolor{stringliteral}{'dict\_file'}])
606             )
607             self.opt[\textcolor{stringliteral}{'dict\_file'}] = new\_opt[\textcolor{stringliteral}{'dict\_file'}]
608         \textcolor{keywordflow}{return} self.opt
609 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a073830870e283f88ee45a95c0ae8ad2f}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a073830870e283f88ee45a95c0ae8ad2f}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!parse@{parse}}
\index{parse@{parse}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{parse()}{parse()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+parse (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text }\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert string to token indices.
\end{DoxyVerb}
 

Definition at line 610 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
610     \textcolor{keyword}{def }parse(self, text):
611         \textcolor{stringliteral}{"""}
612 \textcolor{stringliteral}{        Convert string to token indices.}
613 \textcolor{stringliteral}{        """}
614         \textcolor{keywordflow}{return} self.dict.txt2vec(text)
615 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_aadec879f7d8daa6451076e4fb358715b}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_aadec879f7d8daa6451076e4fb358715b}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!predict@{predict}}
\index{predict@{predict}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{predict()}{predict()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+predict (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{xs,  }\item[{}]{ys = {\ttfamily None},  }\item[{}]{cands = {\ttfamily None},  }\item[{}]{valid\+\_\+cands = {\ttfamily None},  }\item[{}]{is\+\_\+training = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Produce a prediction from our model.

Update the model using the targets if available, otherwise rank candidates as
well if they are available and param is set.
\end{DoxyVerb}
 

Definition at line 733 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
733     \textcolor{keyword}{def }predict(self, xs, ys=None, cands=None, valid\_cands=None, is\_training=False):
734         \textcolor{stringliteral}{"""}
735 \textcolor{stringliteral}{        Produce a prediction from our model.}
736 \textcolor{stringliteral}{}
737 \textcolor{stringliteral}{        Update the model using the targets if available, otherwise rank candidates as}
738 \textcolor{stringliteral}{        well if they are available and param is set.}
739 \textcolor{stringliteral}{        """}
740         predictions, cand\_preds = \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}
741         \textcolor{keywordflow}{if} is\_training:
742             self.model.\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a36a5f4f6f9df0611a6818610518d2cf0}{train}()
743             self.zero\_grad()
744             out = \textcolor{keywordtype}{None}
745             \textcolor{keywordflow}{try}:
746                 out = self.model(xs, ys, rank\_during\_training=cands \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None})
747                 \textcolor{comment}{# generated response}
748                 \_preds, scores, cand\_preds = out[0], out[1], out[2]
749 
750                 score\_view = scores.view(-1, scores.size(-1))
751                 loss = self.criterion(score\_view, ys.view(-1))
752                 \textcolor{comment}{# save loss to metrics}
753                 y\_ne = ys.ne(self.NULL\_IDX)
754                 target\_tokens = y\_ne.long().sum().item()
755                 correct = ((ys == \_preds) * y\_ne).sum().item()
756                 self.metrics[\textcolor{stringliteral}{'correct\_tokens'}] += correct
757                 self.metrics[\textcolor{stringliteral}{'loss'}] += loss.item()
758                 self.metrics[\textcolor{stringliteral}{'num\_tokens'}] += target\_tokens
759                 loss /= target\_tokens  \textcolor{comment}{# average loss per token}
760                 loss.backward()
761             \textcolor{keywordflow}{except} RuntimeError \textcolor{keyword}{as} e:
762                 \textcolor{comment}{# catch out of memory exceptions during fwd/bck (skip batch)}
763                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'out of memory'} \textcolor{keywordflow}{in} \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(e):
764                     print(
765                         \textcolor{stringliteral}{'| WARNING: ran out of memory, skipping batch. '}
766                         \textcolor{stringliteral}{'if this happens frequently, decrease batchsize or '}
767                         \textcolor{stringliteral}{'truncate the inputs to the model.'}
768                     )
769                     self.metrics[\textcolor{stringliteral}{'total\_skipped\_batches'}] += 1
770                     \textcolor{keywordflow}{return} predictions, cand\_preds
771                 \textcolor{keywordflow}{else}:
772                     \textcolor{keywordflow}{raise} e
773             self.update\_params()
774         \textcolor{keywordflow}{else}:
775             self.model.eval()
776             out = self.model(
777                 xs,
778                 ys=\textcolor{keywordtype}{None},
779                 cands=cands,
780                 valid\_cands=valid\_cands,
781                 beam\_size=self.beam\_size,
782                 topk=self.topk,
783             )
784             predictions, cand\_preds = out[0], out[2]
785 
786             \textcolor{keywordflow}{if} ys \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
787                 \textcolor{comment}{# calculate loss on targets}
788                 out = self.model(xs, ys)
789                 scores = out[1]
790                 score\_view = scores.view(-1, scores.size(-1))
791                 loss = self.criterion(score\_view, ys.view(-1))
792                 \textcolor{comment}{# save loss to metrics}
793                 target\_tokens = ys.ne(self.NULL\_IDX).long().sum().item()
794                 self.metrics[\textcolor{stringliteral}{'loss'}] += loss.item()
795                 self.metrics[\textcolor{stringliteral}{'num\_tokens'}] += target\_tokens
796 
797         \textcolor{keywordflow}{return} predictions, cand\_preds
798 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a584d45d729817694d615d2d545532af2}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a584d45d729817694d615d2d545532af2}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!receive\+\_\+metrics@{receive\+\_\+metrics}}
\index{receive\+\_\+metrics@{receive\+\_\+metrics}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{receive\+\_\+metrics()}{receive\_metrics()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+receive\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{metrics\+\_\+dict }\end{DoxyParamCaption})}

\begin{DoxyVerb}Use the metrics to decide when to adjust LR schedule.
\end{DoxyVerb}
 

Definition at line 964 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
964     \textcolor{keyword}{def }receive\_metrics(self, metrics\_dict):
965         \textcolor{stringliteral}{"""}
966 \textcolor{stringliteral}{        Use the metrics to decide when to adjust LR schedule.}
967 \textcolor{stringliteral}{        """}
968         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'loss'} \textcolor{keywordflow}{in} metrics\_dict:
969             self.scheduler.step(metrics\_dict[\textcolor{stringliteral}{'loss'}])
970 
971 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a83a444ecb418dfb4381147f23653dd7b}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a83a444ecb418dfb4381147f23653dd7b}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!report@{report}}
\index{report@{report}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{report()}{report()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+report (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Report loss and perplexity from model's perspective.

Note that this includes predicting __END__ and __UNK__ tokens and may differ
from a truly independent measurement.
\end{DoxyVerb}
 

Definition at line 660 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
660     \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1convai2_1_1eval__f1_a01a47b9c08dad189837a51f085defc45}{report}(self):
661         \textcolor{stringliteral}{"""}
662 \textcolor{stringliteral}{        Report loss and perplexity from model's perspective.}
663 \textcolor{stringliteral}{}
664 \textcolor{stringliteral}{        Note that this includes predicting \_\_END\_\_ and \_\_UNK\_\_ tokens and may differ}
665 \textcolor{stringliteral}{        from a truly independent measurement.}
666 \textcolor{stringliteral}{        """}
667         m = \{\}
668         num\_tok = self.metrics[\textcolor{stringliteral}{'num\_tokens'}]
669         \textcolor{keywordflow}{if} num\_tok > 0:
670             \textcolor{keywordflow}{if} self.metrics[\textcolor{stringliteral}{'correct\_tokens'}] > 0:
671                 m[\textcolor{stringliteral}{'token\_acc'}] = self.metrics[\textcolor{stringliteral}{'correct\_tokens'}] / num\_tok
672             m[\textcolor{stringliteral}{'loss'}] = self.metrics[\textcolor{stringliteral}{'loss'}] / num\_tok
673             \textcolor{keywordflow}{try}:
674                 m[\textcolor{stringliteral}{'ppl'}] = math.exp(m[\textcolor{stringliteral}{'loss'}])
675             \textcolor{keywordflow}{except} OverflowError:
676                 m[\textcolor{stringliteral}{'ppl'}] = \hyperlink{namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset_aa2b7207688c641dbc094ab44eca27113}{float}(\textcolor{stringliteral}{'inf'})
677         \textcolor{keywordflow}{if} self.metrics[\textcolor{stringliteral}{'total\_skipped\_batches'}] > 0:
678             m[\textcolor{stringliteral}{'total\_skipped\_batches'}] = self.metrics[\textcolor{stringliteral}{'total\_skipped\_batches'}]
679         \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} m.items():
680             \textcolor{comment}{# clean up: rounds to sigfigs and converts tensors to floats}
681             m[k] = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(v, 4)
682         \textcolor{keywordflow}{return} m
683 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a56d246fd8b6bcf41726181c17cdc2762}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a56d246fd8b6bcf41726181c17cdc2762}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!reset@{reset}}
\index{reset@{reset}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+reset (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset observation and episode_done.
\end{DoxyVerb}
 

Definition at line 642 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
642     \textcolor{keyword}{def }reset(self):
643         \textcolor{stringliteral}{"""}
644 \textcolor{stringliteral}{        Reset observation and episode\_done.}
645 \textcolor{stringliteral}{        """}
646         self.observation = \textcolor{keywordtype}{None}
647         self.history.clear()
648         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(self.answers)):
649             self.answers[i] = \textcolor{keywordtype}{None}
650         self.reset\_metrics()
651 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ae76435bf7acee9501188de47c0ba6991}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ae76435bf7acee9501188de47c0ba6991}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!reset\+\_\+metrics@{reset\+\_\+metrics}}
\index{reset\+\_\+metrics@{reset\+\_\+metrics}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{reset\+\_\+metrics()}{reset\_metrics()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+reset\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset metrics for reporting loss and perplexity.
\end{DoxyVerb}
 

Definition at line 652 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
652     \textcolor{keyword}{def }reset\_metrics(self):
653         \textcolor{stringliteral}{"""}
654 \textcolor{stringliteral}{        Reset metrics for reporting loss and perplexity.}
655 \textcolor{stringliteral}{        """}
656         self.metrics[\textcolor{stringliteral}{'loss'}] = 0.0
657         self.metrics[\textcolor{stringliteral}{'num\_tokens'}] = 0
658         self.metrics[\textcolor{stringliteral}{'correct\_tokens'}] = 0
659 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a31c017cd07b01834a5d467fadfddd7cd}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a31c017cd07b01834a5d467fadfddd7cd}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!save@{save}}
\index{save@{save}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+save (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{path = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save model parameters if model_file is set.
\end{DoxyVerb}
 

Definition at line 928 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
928     \textcolor{keyword}{def }save(self, path=None):
929         \textcolor{stringliteral}{"""}
930 \textcolor{stringliteral}{        Save model parameters if model\_file is set.}
931 \textcolor{stringliteral}{        """}
932         path = self.opt.get(\textcolor{stringliteral}{'model\_file'}, \textcolor{keywordtype}{None}) \textcolor{keywordflow}{if} path \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} path
933 
934         \textcolor{keywordflow}{if} path \textcolor{keywordflow}{and} hasattr(self, \textcolor{stringliteral}{'model'}):
935             model = \{\}
936             model[\textcolor{stringliteral}{'model'}] = self.model.state\_dict()
937             model[\textcolor{stringliteral}{'longest\_label'}] = self.model.longest\_label
938             model[\textcolor{stringliteral}{'optimizer'}] = self.optimizer.state\_dict()
939             model[\textcolor{stringliteral}{'optimizer\_type'}] = self.opt[\textcolor{stringliteral}{'optimizer'}]
940 
941             with open(path, \textcolor{stringliteral}{'wb'}) \textcolor{keyword}{as} write:
942                 torch.save(model, write)
943 
944             \textcolor{comment}{# save opt file}
945             with open(path + \textcolor{stringliteral}{".opt"}, \textcolor{stringliteral}{'wb'}) \textcolor{keyword}{as} handle:
946                 pickle.dump(self.opt, handle, protocol=pickle.HIGHEST\_PROTOCOL)
947 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac050147b69c47182730e92866f64156a}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac050147b69c47182730e92866f64156a}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!share@{share}}
\index{share@{share}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{share()}{share()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+share (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Share internal states between parent and child instances.
\end{DoxyVerb}
 

Definition at line 684 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
684     \textcolor{keyword}{def }share(self):
685         \textcolor{stringliteral}{"""}
686 \textcolor{stringliteral}{        Share internal states between parent and child instances.}
687 \textcolor{stringliteral}{        """}
688         shared = super().share()
689         shared[\textcolor{stringliteral}{'opt'}] = self.opt
690         shared[\textcolor{stringliteral}{'answers'}] = self.answers
691         shared[\textcolor{stringliteral}{'dict'}] = self.dict
692         shared[\textcolor{stringliteral}{'START\_IDX'}] = self.START\_IDX
693         shared[\textcolor{stringliteral}{'END\_IDX'}] = self.END\_IDX
694         shared[\textcolor{stringliteral}{'NULL\_IDX'}] = self.NULL\_IDX
695         shared[\textcolor{stringliteral}{'model'}] = self.model
696         \textcolor{keywordflow}{if} self.opt.get(\textcolor{stringliteral}{'numthreads'}, 1) > 1:
697             \textcolor{comment}{# we're doing hogwild so share the model too}
698             \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(self.metrics) == dict:
699                 \textcolor{comment}{# move metrics and model to shared memory}
700                 self.metrics = SharedTable(self.metrics)
701                 self.model.share\_memory()
702             shared[\textcolor{stringliteral}{'states'}] = \{  \textcolor{comment}{# don't share optimizer states}
703                 \textcolor{stringliteral}{'optimizer\_type'}: self.opt[\textcolor{stringliteral}{'optimizer'}]
704             \}
705         shared[\textcolor{stringliteral}{'metrics'}] = self.metrics  \textcolor{comment}{# do after numthreads check}
706         \textcolor{keywordflow}{return} shared
707 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a86c41e705170f0b2e56a5bbc378aead9}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a86c41e705170f0b2e56a5bbc378aead9}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save the state of the model when shutdown.
\end{DoxyVerb}
 

Definition at line 948 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
948     \textcolor{keyword}{def }shutdown(self):
949         \textcolor{stringliteral}{"""}
950 \textcolor{stringliteral}{        Save the state of the model when shutdown.}
951 \textcolor{stringliteral}{        """}
952         path = self.opt.get(\textcolor{stringliteral}{'model\_file'}, \textcolor{keywordtype}{None})
953         \textcolor{keywordflow}{if} path \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None} \textcolor{keywordflow}{and} hasattr(self, \textcolor{stringliteral}{'optimizer'}):
954             self.save(path + \textcolor{stringliteral}{'.shutdown\_state'})
955         super().shutdown()
956 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a3933d4fdc5e603b1a168d92e7da77151}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a3933d4fdc5e603b1a168d92e7da77151}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!update\+\_\+params@{update\+\_\+params}}
\index{update\+\_\+params@{update\+\_\+params}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{update\+\_\+params()}{update\_params()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+update\+\_\+params (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Do one optimization step.
\end{DoxyVerb}
 

Definition at line 634 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
634     \textcolor{keyword}{def }update\_params(self):
635         \textcolor{stringliteral}{"""}
636 \textcolor{stringliteral}{        Do one optimization step.}
637 \textcolor{stringliteral}{        """}
638         \textcolor{keywordflow}{if} self.clip > 0:
639             torch.nn.utils.clip\_grad\_norm\_(self.model.parameters(), self.clip)
640         self.optimizer.step()
641 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8f6de929b475d3915c159c48165b4575}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8f6de929b475d3915c159c48165b4575}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!v2t@{v2t}}
\index{v2t@{v2t}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{v2t()}{v2t()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+v2t (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{vec }\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert token indices to string of tokens.
\end{DoxyVerb}
 

Definition at line 616 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
616     \textcolor{keyword}{def }v2t(self, vec):
617         \textcolor{stringliteral}{"""}
618 \textcolor{stringliteral}{        Convert token indices to string of tokens.}
619 \textcolor{stringliteral}{        """}
620         new\_vec = []
621         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} vec:
622             \textcolor{keywordflow}{if} i == self.END\_IDX:
623                 \textcolor{keywordflow}{break}
624             \textcolor{keywordflow}{elif} i != self.START\_IDX:
625                 new\_vec.append(i)
626         \textcolor{keywordflow}{return} self.dict.vec2txt(new\_vec)
627 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a83e2433e00bff6162ebad3b818771b59}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a83e2433e00bff6162ebad3b818771b59}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!vectorize@{vectorize}}
\index{vectorize@{vectorize}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{vectorize()}{vectorize()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+vectorize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{observations }\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert a list of observations into input & target tensors.
\end{DoxyVerb}
 

Definition at line 799 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
799     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1drqa_1_1utils_a5c76cc39e3014c7bcf9199d566dbdc0f}{vectorize}(self, observations):
800         \textcolor{stringliteral}{"""}
801 \textcolor{stringliteral}{        Convert a list of observations into input & target tensors.}
802 \textcolor{stringliteral}{        """}
803         is\_training = any([\textcolor{stringliteral}{'labels'} \textcolor{keywordflow}{in} obs \textcolor{keywordflow}{for} obs \textcolor{keywordflow}{in} observations])
804         xs, ys, labels, valid\_inds, \_, \_ = PaddingUtils.pad\_text(
805             observations,
806             self.dict,
807             end\_idx=self.END\_IDX,
808             null\_idx=self.NULL\_IDX,
809             dq=\textcolor{keyword}{True},
810             eval\_labels=\textcolor{keyword}{True},
811             truncate=self.truncate,
812         )
813 
814         \textcolor{keywordflow}{if} xs \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
815             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}
816         xs = torch.LongTensor(xs)
817         \textcolor{keywordflow}{if} ys \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
818             ys = torch.LongTensor(ys)
819         \textcolor{keywordflow}{if} self.use\_cuda:
820             \textcolor{comment}{# copy to gpu}
821             xs = xs.cuda()
822             \textcolor{keywordflow}{if} ys \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
823                 ys = ys.cuda()
824 
825         cands = \textcolor{keywordtype}{None}
826         valid\_cands = \textcolor{keywordtype}{None}
827         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} is\_training \textcolor{keywordflow}{and} self.rank:
828             \textcolor{comment}{# set up candidates}
829             cands = []
830             valid\_cands = []
831             \textcolor{keywordflow}{for} i, v \textcolor{keywordflow}{in} enumerate(valid\_inds):
832                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'label\_candidates'} \textcolor{keywordflow}{in} observations[v]:
833                     curr\_lcs = list(observations[v][\textcolor{stringliteral}{'label\_candidates'}])
834                     curr\_cands = [\{\textcolor{stringliteral}{'text'}: c\} \textcolor{keywordflow}{for} c \textcolor{keywordflow}{in} curr\_lcs]
835                     cs, \_, \_, valid\_c\_inds, *\_ = PaddingUtils.pad\_text(
836                         curr\_cands,
837                         self.dict,
838                         null\_idx=self.NULL\_IDX,
839                         dq=\textcolor{keyword}{True},
840                         truncate=self.truncate,
841                     )
842                     valid\_cands.append((i, v, [curr\_lcs[j] \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} valid\_c\_inds]))
843                     cs = torch.LongTensor(cs)
844                     \textcolor{keywordflow}{if} self.use\_cuda:
845                         cs = cs.cuda()
846                     cands.append(cs)
847 
848         \textcolor{keywordflow}{return} xs, ys, labels, valid\_inds, cands, valid\_cands, is\_training
849 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a0be9f1e378a403284d8afac5648fbf4d}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a0be9f1e378a403284d8afac5648fbf4d}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!zero\+\_\+grad@{zero\+\_\+grad}}
\index{zero\+\_\+grad@{zero\+\_\+grad}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{zero\+\_\+grad()}{zero\_grad()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+zero\+\_\+grad (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Zero out optimizer.
\end{DoxyVerb}
 

Definition at line 628 of file seq2seq\+\_\+v0.\+py.


\begin{DoxyCode}
628     \textcolor{keyword}{def }zero\_grad(self):
629         \textcolor{stringliteral}{"""}
630 \textcolor{stringliteral}{        Zero out optimizer.}
631 \textcolor{stringliteral}{        """}
632         self.optimizer.zero\_grad()
633 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad5d4bdcd877577596273c4af1eb4c70d}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad5d4bdcd877577596273c4af1eb4c70d}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!answers@{answers}}
\index{answers@{answers}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{answers}{answers}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+answers}



Definition at line 395 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a2f31501d3923b8fb080d147d23ab727b}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a2f31501d3923b8fb080d147d23ab727b}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!batch\+\_\+idx@{batch\+\_\+idx}}
\index{batch\+\_\+idx@{batch\+\_\+idx}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{batch\+\_\+idx}{batch\_idx}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+batch\+\_\+idx}



Definition at line 375 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a215857d3ce2c7522c43728ab2879ce89}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a215857d3ce2c7522c43728ab2879ce89}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!beam\+\_\+size@{beam\+\_\+size}}
\index{beam\+\_\+size@{beam\+\_\+size}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{beam\+\_\+size}{beam\_size}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+beam\+\_\+size}



Definition at line 377 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a31e1353ee2c64ac03af2bc7854597f35}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a31e1353ee2c64ac03af2bc7854597f35}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!buffer\+\_\+initialized@{buffer\+\_\+initialized}}
\index{buffer\+\_\+initialized@{buffer\+\_\+initialized}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{buffer\+\_\+initialized}{buffer\_initialized}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+buffer\+\_\+initialized}



Definition at line 860 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a4896d5dc3fd7a0f876a654f0bc942b6a}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a4896d5dc3fd7a0f876a654f0bc942b6a}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!clip@{clip}}
\index{clip@{clip}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{clip}{clip}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+clip}



Definition at line 523 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad336994a64a83591ba1388aef3f1d5de}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad336994a64a83591ba1388aef3f1d5de}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!criterion@{criterion}}
\index{criterion@{criterion}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{criterion}{criterion}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+criterion}



Definition at line 511 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad5ff9534948d32ca9b387fe1189174e6}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ad5ff9534948d32ca9b387fe1189174e6}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!dict@{dict}}
\index{dict@{dict}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{dict}{dict}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+dict}



Definition at line 390 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a46ebee256e0812f6cab77a71c02578e0}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a46ebee256e0812f6cab77a71c02578e0}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!E\+N\+D\+\_\+\+I\+DX@{E\+N\+D\+\_\+\+I\+DX}}
\index{E\+N\+D\+\_\+\+I\+DX@{E\+N\+D\+\_\+\+I\+DX}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{E\+N\+D\+\_\+\+I\+DX}{END\_IDX}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+E\+N\+D\+\_\+\+I\+DX}



Definition at line 392 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a11398edabc596559f45324d2d603b1e3}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a11398edabc596559f45324d2d603b1e3}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!history@{history}}
\index{history@{history}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{history}{history}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+history}



Definition at line 372 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a616955265cd96254aae5b5958ac18159}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a616955265cd96254aae5b5958ac18159}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!id@{id}}
\index{id@{id}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{id}{id}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+id}



Definition at line 427 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac50fcecc3b2ec89ece9bf75df8e21c6d}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac50fcecc3b2ec89ece9bf75df8e21c6d}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!metrics@{metrics}}
\index{metrics@{metrics}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{metrics}{metrics}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+metrics}



Definition at line 366 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ae6ef958bb58cc1597b23b0a6c6c49b3f}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ae6ef958bb58cc1597b23b0a6c6c49b3f}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!model@{model}}
\index{model@{model}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{model}{model}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+model}



Definition at line 396 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a203f77c92dd9f343cd7c5580756d5e5a}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a203f77c92dd9f343cd7c5580756d5e5a}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!model\+\_\+class@{model\+\_\+class}}
\index{model\+\_\+class@{model\+\_\+class}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{model\+\_\+class}{model\_class}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+model\+\_\+class}



Definition at line 437 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8589f9403a5d358b1c58b467fc556680}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8589f9403a5d358b1c58b467fc556680}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!N\+U\+L\+L\+\_\+\+I\+DX@{N\+U\+L\+L\+\_\+\+I\+DX}}
\index{N\+U\+L\+L\+\_\+\+I\+DX@{N\+U\+L\+L\+\_\+\+I\+DX}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{N\+U\+L\+L\+\_\+\+I\+DX}{NULL\_IDX}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+N\+U\+L\+L\+\_\+\+I\+DX}



Definition at line 393 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a4473b0e478d7928c2b59ab653c8334fb}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a4473b0e478d7928c2b59ab653c8334fb}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!observation@{observation}}
\index{observation@{observation}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{observation}{observation}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+observation}



Definition at line 646 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8e4926c0c0da6bd7d530c44aa5416731}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a8e4926c0c0da6bd7d530c44aa5416731}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!opt@{opt}}
\index{opt@{opt}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+opt}



Definition at line 388 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a83374019847ffa0c1cc43bf0b24120e9}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a83374019847ffa0c1cc43bf0b24120e9}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!O\+P\+T\+I\+M\+\_\+\+O\+P\+TS@{O\+P\+T\+I\+M\+\_\+\+O\+P\+TS}}
\index{O\+P\+T\+I\+M\+\_\+\+O\+P\+TS@{O\+P\+T\+I\+M\+\_\+\+O\+P\+TS}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{O\+P\+T\+I\+M\+\_\+\+O\+P\+TS}{OPTIM\_OPTS}}
{\footnotesize\ttfamily dictionary parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+O\+P\+T\+I\+M\+\_\+\+O\+P\+TS\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}
=  \{
        \textcolor{stringliteral}{'adadelta'}: optim.Adadelta,
        \textcolor{stringliteral}{'adagrad'}: optim.Adagrad,
        \textcolor{stringliteral}{'adam'}: optim.Adam,
        \textcolor{stringliteral}{'adamax'}: optim.Adamax,
        \textcolor{stringliteral}{'asgd'}: optim.ASGD,
        \textcolor{stringliteral}{'lbfgs'}: optim.LBFGS,
        \textcolor{stringliteral}{'rmsprop'}: optim.RMSprop,
        \textcolor{stringliteral}{'rprop'}: optim.Rprop,
        \textcolor{stringliteral}{'sgd'}: optim.SGD,
    \}
\end{DoxyCode}


Definition at line 114 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac6a5cc3b1faaae160f5c10318a7afcfd}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac6a5cc3b1faaae160f5c10318a7afcfd}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!optimizer@{optimizer}}
\index{optimizer@{optimizer}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{optimizer}{optimizer}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+optimizer}



Definition at line 543 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a07995ff61edb2c4699aa766122878e94}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a07995ff61edb2c4699aa766122878e94}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!rank@{rank}}
\index{rank@{rank}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{rank}{rank}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+rank}



Definition at line 376 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a3f13aca25d825730f0dacbf50f48d7c6}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a3f13aca25d825730f0dacbf50f48d7c6}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!report\+\_\+freq@{report\+\_\+freq}}
\index{report\+\_\+freq@{report\+\_\+freq}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{report\+\_\+freq}{report\_freq}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+report\+\_\+freq}



Definition at line 373 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac8229fafe6c4b7d7ebedbd0f00b55eb0}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac8229fafe6c4b7d7ebedbd0f00b55eb0}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!scheduler@{scheduler}}
\index{scheduler@{scheduler}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{scheduler}{scheduler}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+scheduler}



Definition at line 564 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a044b5f18e6d9f0207b947769f06bcc6b}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a044b5f18e6d9f0207b947769f06bcc6b}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!S\+T\+A\+R\+T\+\_\+\+I\+DX@{S\+T\+A\+R\+T\+\_\+\+I\+DX}}
\index{S\+T\+A\+R\+T\+\_\+\+I\+DX@{S\+T\+A\+R\+T\+\_\+\+I\+DX}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{S\+T\+A\+R\+T\+\_\+\+I\+DX}{START\_IDX}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+S\+T\+A\+R\+T\+\_\+\+I\+DX}



Definition at line 391 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac0b7a3b712fe92dbabee7f31972b8a47}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ac0b7a3b712fe92dbabee7f31972b8a47}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!topk@{topk}}
\index{topk@{topk}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{topk}{topk}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+topk}



Definition at line 378 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a7943d21acc4e6986e15678e7da1d2f27}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a7943d21acc4e6986e15678e7da1d2f27}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!truncate@{truncate}}
\index{truncate@{truncate}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{truncate}{truncate}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+truncate}



Definition at line 365 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ab81d3b0bd5474debb2f983d1b6220d5e}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_ab81d3b0bd5474debb2f983d1b6220d5e}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!use\+\_\+cuda@{use\+\_\+cuda}}
\index{use\+\_\+cuda@{use\+\_\+cuda}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{use\+\_\+cuda}{use\_cuda}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+use\+\_\+cuda}



Definition at line 382 of file seq2seq\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a227faa3994686ab266237ce9e11a2dc7}\label{classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent_a227faa3994686ab266237ce9e11a2dc7}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}!use\+\_\+person\+\_\+tokens@{use\+\_\+person\+\_\+tokens}}
\index{use\+\_\+person\+\_\+tokens@{use\+\_\+person\+\_\+tokens}!parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent@{parlai\+::agents\+::legacy\+\_\+agents\+::seq2seq\+::seq2seq\+\_\+v0\+::\+Seq2seq\+Agent}}
\subsubsection{\texorpdfstring{use\+\_\+person\+\_\+tokens}{use\_person\_tokens}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+seq2seq.\+seq2seq\+\_\+v0.\+Seq2seq\+Agent.\+use\+\_\+person\+\_\+tokens}



Definition at line 374 of file seq2seq\+\_\+v0.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/agents/legacy\+\_\+agents/seq2seq/\hyperlink{seq2seq__v0_8py}{seq2seq\+\_\+v0.\+py}\end{DoxyCompactItemize}
