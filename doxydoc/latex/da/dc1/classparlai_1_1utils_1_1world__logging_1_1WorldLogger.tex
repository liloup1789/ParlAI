\hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger}{}\section{parlai.\+utils.\+world\+\_\+logging.\+World\+Logger Class Reference}
\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger}\index{parlai.\+utils.\+world\+\_\+logging.\+World\+Logger@{parlai.\+utils.\+world\+\_\+logging.\+World\+Logger}}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_aecf78591417c85526b5f3efb75bbdca1}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_aaf2ae02c76953a68916b5136c1d2cc31}{opt})
\item 
def \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_ae53d57ea1f9df92d06b7d63bd8235bd5}{reset} (self)
\item 
def \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a42938edb3589e1f3a5754cc200e85f64}{add\+\_\+msgs} (self, acts)
\item 
def \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a457d1512dcc0920eb2e745506783c8b0}{add\+\_\+episode} (self, \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a98460ce773e615dabd51e1f3ffb45db3}{log})
\item 
def \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a98460ce773e615dabd51e1f3ffb45db3}{log} (self, world)
\item 
def \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a712d20e5ace03e3729258b61472c2023}{convert\+\_\+to\+\_\+labeled\+\_\+data} (self, \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a98460ce773e615dabd51e1f3ffb45db3}{log})
\item 
def \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a9a5210ac32adcaec88d4b33265cbba92}{write\+\_\+parlai\+\_\+format} (self, outfile)
\item 
def \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_aeb4a988aa27d9cd9a5df43feefff9748}{write\+\_\+json\+\_\+format} (self, outfile)
\item 
def \hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_af895ff20c1c2b3896c46def75a968df0}{write} (self, outfile, file\+\_\+format)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_aaf2ae02c76953a68916b5136c1d2cc31}{opt}
\item 
\hyperlink{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_afbcb1888545753a6bc9e272ab63e8218}{keep\+\_\+fields}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Logs actions/observations in a world.
\end{DoxyVerb}
 

Definition at line 16 of file world\+\_\+logging.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_aecf78591417c85526b5f3efb75bbdca1}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_aecf78591417c85526b5f3efb75bbdca1}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 21 of file world\+\_\+logging.\+py.


\begin{DoxyCode}
21     \textcolor{keyword}{def }\_\_init\_\_(self, opt):
22         self.opt = copy.deepcopy(opt)
23         self.keep\_fields = opt.get(\textcolor{stringliteral}{'log\_keep\_fields'}, \textcolor{stringliteral}{'id,text,episode\_done'}).split(\textcolor{stringliteral}{','})
24         self.reset()
25 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a457d1512dcc0920eb2e745506783c8b0}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a457d1512dcc0920eb2e745506783c8b0}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!add\+\_\+episode@{add\+\_\+episode}}
\index{add\+\_\+episode@{add\+\_\+episode}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{add\+\_\+episode()}{add\_episode()}}
{\footnotesize\ttfamily def parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+add\+\_\+episode (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{log }\end{DoxyParamCaption})}



Definition at line 41 of file world\+\_\+logging.\+py.


\begin{DoxyCode}
41     \textcolor{keyword}{def }add\_episode(self, log):
42         self.\_logs.append(log)
43 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a42938edb3589e1f3a5754cc200e85f64}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a42938edb3589e1f3a5754cc200e85f64}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!add\+\_\+msgs@{add\+\_\+msgs}}
\index{add\+\_\+msgs@{add\+\_\+msgs}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{add\+\_\+msgs()}{add\_msgs()}}
{\footnotesize\ttfamily def parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+add\+\_\+msgs (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{acts }\end{DoxyParamCaption})}



Definition at line 31 of file world\+\_\+logging.\+py.


\begin{DoxyCode}
31     \textcolor{keyword}{def }add\_msgs(self, acts):
32         msgs = []
33         \textcolor{keywordflow}{for} act \textcolor{keywordflow}{in} acts:
34             m = \{\}
35             \textcolor{keywordflow}{for} f \textcolor{keywordflow}{in} self.keep\_fields:
36                 \textcolor{keywordflow}{if} f \textcolor{keywordflow}{in} act:
37                     m[f] = act[f]
38             msgs.append(m)
39         self.\_log.append(msgs)
40 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a712d20e5ace03e3729258b61472c2023}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a712d20e5ace03e3729258b61472c2023}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!convert\+\_\+to\+\_\+labeled\+\_\+data@{convert\+\_\+to\+\_\+labeled\+\_\+data}}
\index{convert\+\_\+to\+\_\+labeled\+\_\+data@{convert\+\_\+to\+\_\+labeled\+\_\+data}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{convert\+\_\+to\+\_\+labeled\+\_\+data()}{convert\_to\_labeled\_data()}}
{\footnotesize\ttfamily def parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+convert\+\_\+to\+\_\+labeled\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{log }\end{DoxyParamCaption})}



Definition at line 52 of file world\+\_\+logging.\+py.


\begin{DoxyCode}
52     \textcolor{keyword}{def }convert\_to\_labeled\_data(self, log):
53         out = []
54         text = \textcolor{stringliteral}{''}
55         \textcolor{keywordflow}{for} msgs \textcolor{keywordflow}{in} log:
56             \textcolor{keywordflow}{if} text != \textcolor{stringliteral}{''}:
57                 text += \textcolor{stringliteral}{'\(\backslash\)n'}
58             text += msgs[0].get(\textcolor{stringliteral}{'text'})
59             \textcolor{keywordflow}{if} msgs[1].get(\textcolor{stringliteral}{'id'}) != \textcolor{stringliteral}{'context'}:
60                 label = msgs[1].get(\textcolor{stringliteral}{'text'})
61                 out.append(
62                     \{
63                         \textcolor{stringliteral}{'id'}: msgs[0].get(\textcolor{stringliteral}{'id'}),
64                         \textcolor{stringliteral}{'text'}: text,
65                         \textcolor{stringliteral}{'labels'}: [label],
66                         \textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{False},
67                     \}
68                 )
69                 text = \textcolor{stringliteral}{''}
70         \textcolor{keywordflow}{if} len(out) > 0:
71             out[-1][\textcolor{stringliteral}{'episode\_done'}] = \textcolor{keyword}{True}
72         \textcolor{keywordflow}{return} out
73 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a98460ce773e615dabd51e1f3ffb45db3}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a98460ce773e615dabd51e1f3ffb45db3}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!log@{log}}
\index{log@{log}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{log()}{log()}}
{\footnotesize\ttfamily def parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+log (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{world }\end{DoxyParamCaption})}



Definition at line 44 of file world\+\_\+logging.\+py.


\begin{DoxyCode}
44     \textcolor{keyword}{def }log(self, world):
45         acts = world.get\_acts()
46         self.add\_msgs(acts)
47         \textcolor{keywordflow}{if} world.episode\_done():
48             \textcolor{comment}{# add episode to logs}
49             self.\_log = []
50             self.add\_episode(self.\_log)
51 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_ae53d57ea1f9df92d06b7d63bd8235bd5}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_ae53d57ea1f9df92d06b7d63bd8235bd5}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!reset@{reset}}
\index{reset@{reset}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily def parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+reset (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 26 of file world\+\_\+logging.\+py.


\begin{DoxyCode}
26     \textcolor{keyword}{def }reset(self):
27         self.\_logs = []
28         self.\_log = []
29         self.add\_episode(self.\_log)
30 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_af895ff20c1c2b3896c46def75a968df0}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_af895ff20c1c2b3896c46def75a968df0}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!write@{write}}
\index{write@{write}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily def parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+write (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{outfile,  }\item[{}]{file\+\_\+format }\end{DoxyParamCaption})}



Definition at line 90 of file world\+\_\+logging.\+py.


\begin{DoxyCode}
90     \textcolor{keyword}{def }write(self, outfile, file\_format):
91         \textcolor{keywordflow}{if} file\_format == \textcolor{stringliteral}{'json'}:
92             self.write\_json\_format(outfile)
93         \textcolor{keywordflow}{else}:
94             self.write\_parlai\_format(outfile)
95 \end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_aeb4a988aa27d9cd9a5df43feefff9748}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_aeb4a988aa27d9cd9a5df43feefff9748}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!write\+\_\+json\+\_\+format@{write\+\_\+json\+\_\+format}}
\index{write\+\_\+json\+\_\+format@{write\+\_\+json\+\_\+format}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{write\+\_\+json\+\_\+format()}{write\_json\_format()}}
{\footnotesize\ttfamily def parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+write\+\_\+json\+\_\+format (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{outfile }\end{DoxyParamCaption})}



Definition at line 85 of file world\+\_\+logging.\+py.


\begin{DoxyCode}
85     \textcolor{keyword}{def }write\_json\_format(self, outfile):
86         print(\textcolor{stringliteral}{'[ saving log to \{\} ]'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(outfile))
87         with open(outfile, \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} of:
88             json.dump(self.\_logs, of)
89 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a9a5210ac32adcaec88d4b33265cbba92}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_a9a5210ac32adcaec88d4b33265cbba92}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!write\+\_\+parlai\+\_\+format@{write\+\_\+parlai\+\_\+format}}
\index{write\+\_\+parlai\+\_\+format@{write\+\_\+parlai\+\_\+format}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{write\+\_\+parlai\+\_\+format()}{write\_parlai\_format()}}
{\footnotesize\ttfamily def parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+write\+\_\+parlai\+\_\+format (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{outfile }\end{DoxyParamCaption})}



Definition at line 74 of file world\+\_\+logging.\+py.


\begin{DoxyCode}
74     \textcolor{keyword}{def }write\_parlai\_format(self, outfile):
75         print(\textcolor{stringliteral}{'[ saving log to \{\} ]'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(outfile))
76         fw = open(outfile, \textcolor{stringliteral}{'w'})
77         \textcolor{keywordflow}{for} episode \textcolor{keywordflow}{in} self.\_logs:
78             ep = self.convert\_to\_labeled\_data(episode)
79             \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} ep:
80                 txt = \hyperlink{namespaceparlai_1_1utils_1_1misc_ae5db473b41d3b49814e2566e866282b6}{msg\_to\_str}(a)
81                 fw.write(txt + \textcolor{stringliteral}{'\(\backslash\)n'})
82             fw.write(\textcolor{stringliteral}{'\(\backslash\)n'})
83         fw.close()
84 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_afbcb1888545753a6bc9e272ab63e8218}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_afbcb1888545753a6bc9e272ab63e8218}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!keep\+\_\+fields@{keep\+\_\+fields}}
\index{keep\+\_\+fields@{keep\+\_\+fields}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{keep\+\_\+fields}{keep\_fields}}
{\footnotesize\ttfamily parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+keep\+\_\+fields}



Definition at line 23 of file world\+\_\+logging.\+py.

\mbox{\Hypertarget{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_aaf2ae02c76953a68916b5136c1d2cc31}\label{classparlai_1_1utils_1_1world__logging_1_1WorldLogger_aaf2ae02c76953a68916b5136c1d2cc31}} 
\index{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}!opt@{opt}}
\index{opt@{opt}!parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger@{parlai\+::utils\+::world\+\_\+logging\+::\+World\+Logger}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily parlai.\+utils.\+world\+\_\+logging.\+World\+Logger.\+opt}



Definition at line 22 of file world\+\_\+logging.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/utils/\hyperlink{world__logging_8py}{world\+\_\+logging.\+py}\end{DoxyCompactItemize}
