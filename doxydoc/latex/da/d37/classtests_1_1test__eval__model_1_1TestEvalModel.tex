\hypertarget{classtests_1_1test__eval__model_1_1TestEvalModel}{}\section{tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model Class Reference}
\label{classtests_1_1test__eval__model_1_1TestEvalModel}\index{tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model@{tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model}}


Inheritance diagram for tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=215pt]{dd/dfb/classtests_1_1test__eval__model_1_1TestEvalModel__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=215pt]{dd/d6b/classtests_1_1test__eval__model_1_1TestEvalModel__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classtests_1_1test__eval__model_1_1TestEvalModel_a9dcbb770a097fa51f6162fe85c8cd1c5}{test\+\_\+noevalmode} (self)
\item 
def \hyperlink{classtests_1_1test__eval__model_1_1TestEvalModel_a23e0698c9a27e596401f00f914b6a27f}{test\+\_\+evalmode} (self)
\item 
def \hyperlink{classtests_1_1test__eval__model_1_1TestEvalModel_a899d6a41fb8f56be62a7145d9937ee52}{test\+\_\+output} (self)
\item 
def \hyperlink{classtests_1_1test__eval__model_1_1TestEvalModel_a35d01001a5c2f289c98b384e1a53e515}{test\+\_\+metrics\+\_\+all} (self)
\item 
def \hyperlink{classtests_1_1test__eval__model_1_1TestEvalModel_a7b7b27f681704f217f711b04311977c2}{test\+\_\+metrics\+\_\+select} (self)
\item 
def \hyperlink{classtests_1_1test__eval__model_1_1TestEvalModel_a06987267bf1d5f021f3ddcbe489a820f}{test\+\_\+multitasking\+\_\+metrics} (self)
\item 
def \hyperlink{classtests_1_1test__eval__model_1_1TestEvalModel_a6f8c8d67ca1f6a036122e191fdc77c26}{test\+\_\+train\+\_\+evalmode} (self)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Basic tests on the eval_model.py example.
\end{DoxyVerb}
 

Definition at line 13 of file test\+\_\+eval\+\_\+model.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classtests_1_1test__eval__model_1_1TestEvalModel_a23e0698c9a27e596401f00f914b6a27f}\label{classtests_1_1test__eval__model_1_1TestEvalModel_a23e0698c9a27e596401f00f914b6a27f}} 
\index{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}!test\+\_\+evalmode@{test\+\_\+evalmode}}
\index{test\+\_\+evalmode@{test\+\_\+evalmode}!tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}}
\subsubsection{\texorpdfstring{test\+\_\+evalmode()}{test\_evalmode()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model.\+test\+\_\+evalmode (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Eval_model with -dt train:evalmode should be okay.
\end{DoxyVerb}
 

Definition at line 28 of file test\+\_\+eval\+\_\+model.\+py.


\begin{DoxyCode}
28     \textcolor{keyword}{def }test\_evalmode(self):
29         \textcolor{stringliteral}{"""}
30 \textcolor{stringliteral}{        Eval\_model with -dt train:evalmode should be okay.}
31 \textcolor{stringliteral}{        """}
32         testing\_utils.eval\_model(
33             \{\textcolor{stringliteral}{'task'}: \textcolor{stringliteral}{'integration\_tests'}, \textcolor{stringliteral}{'model'}: \textcolor{stringliteral}{'repeat\_label'}\},
34             valid\_datatype=\textcolor{stringliteral}{'train:evalmode'},
35         )
36 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__eval__model_1_1TestEvalModel_a35d01001a5c2f289c98b384e1a53e515}\label{classtests_1_1test__eval__model_1_1TestEvalModel_a35d01001a5c2f289c98b384e1a53e515}} 
\index{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}!test\+\_\+metrics\+\_\+all@{test\+\_\+metrics\+\_\+all}}
\index{test\+\_\+metrics\+\_\+all@{test\+\_\+metrics\+\_\+all}!tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}}
\subsubsection{\texorpdfstring{test\+\_\+metrics\+\_\+all()}{test\_metrics\_all()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model.\+test\+\_\+metrics\+\_\+all (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test output of running eval_model.
\end{DoxyVerb}
 

Definition at line 70 of file test\+\_\+eval\+\_\+model.\+py.


\begin{DoxyCode}
70     \textcolor{keyword}{def }test\_metrics\_all(self):
71         \textcolor{stringliteral}{"""}
72 \textcolor{stringliteral}{        Test output of running eval\_model.}
73 \textcolor{stringliteral}{        """}
74         parser = \hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1browser__chat_1_1client_a20c9862417d1f1a61b06551de0820ee4}{setup\_args}()
75         parser.set\_defaults(
76             task=\textcolor{stringliteral}{'integration\_tests'},
77             model=\textcolor{stringliteral}{'repeat\_label'},
78             datatype=\textcolor{stringliteral}{'valid'},
79             num\_examples=5,
80             display\_examples=\textcolor{keyword}{False},
81             metrics=\textcolor{stringliteral}{'all'},
82         )
83 
84         opt = parser.parse\_args(print\_args=\textcolor{keyword}{False})
85         str\_output, valid, test = testing\_utils.eval\_model(opt)
86         self.assertGreater(len(str\_output), 0, \textcolor{stringliteral}{"Output is empty"})
87 
88         \textcolor{comment}{# decode the output}
89         scores = str\_output.split(\textcolor{stringliteral}{"\(\backslash\)n---\(\backslash\)n"})
90 
91         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(1, len(scores)):
92             score = ast.literal\_eval(scores[i])
93             \textcolor{comment}{# check totals}
94             self.assertEqual(score[\textcolor{stringliteral}{'exs'}], i, \textcolor{stringliteral}{"Total is incorrect"})
95             \textcolor{comment}{# accuracy should be one}
96             self.assertEqual(\textcolor{stringliteral}{'accuracy'} \textcolor{keywordflow}{in} score, \textcolor{keyword}{True}, \textcolor{stringliteral}{"Accuracy is missing from all"})
97             self.assertEqual(score[\textcolor{stringliteral}{'accuracy'}], 1, \textcolor{stringliteral}{"Accuracy != 1"})
98             self.assertEqual(\textcolor{stringliteral}{'rouge-1'} \textcolor{keywordflow}{in} score, \textcolor{keyword}{True}, \textcolor{stringliteral}{"Rouge is missing from all"})
99             self.assertEqual(score[\textcolor{stringliteral}{'rouge-1'}], 1, \textcolor{stringliteral}{'rouge1 != 1'})
100             self.assertEqual(score[\textcolor{stringliteral}{'rouge-2'}], 1, \textcolor{stringliteral}{'rouge-2 != 1'})
101             self.assertEqual(score[\textcolor{stringliteral}{'rouge-L'}], 1, \textcolor{stringliteral}{'rouge-L != 1'})
102 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__eval__model_1_1TestEvalModel_a7b7b27f681704f217f711b04311977c2}\label{classtests_1_1test__eval__model_1_1TestEvalModel_a7b7b27f681704f217f711b04311977c2}} 
\index{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}!test\+\_\+metrics\+\_\+select@{test\+\_\+metrics\+\_\+select}}
\index{test\+\_\+metrics\+\_\+select@{test\+\_\+metrics\+\_\+select}!tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}}
\subsubsection{\texorpdfstring{test\+\_\+metrics\+\_\+select()}{test\_metrics\_select()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model.\+test\+\_\+metrics\+\_\+select (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test output of running eval_model.
\end{DoxyVerb}
 

Definition at line 103 of file test\+\_\+eval\+\_\+model.\+py.


\begin{DoxyCode}
103     \textcolor{keyword}{def }test\_metrics\_select(self):
104         \textcolor{stringliteral}{"""}
105 \textcolor{stringliteral}{        Test output of running eval\_model.}
106 \textcolor{stringliteral}{        """}
107         parser = \hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1browser__chat_1_1client_a20c9862417d1f1a61b06551de0820ee4}{setup\_args}()
108         parser.set\_defaults(
109             task=\textcolor{stringliteral}{'integration\_tests'},
110             model=\textcolor{stringliteral}{'repeat\_label'},
111             datatype=\textcolor{stringliteral}{'valid'},
112             num\_examples=5,
113             display\_examples=\textcolor{keyword}{False},
114             metrics=\textcolor{stringliteral}{'accuracy,rouge'},
115         )
116 
117         opt = parser.parse\_args(print\_args=\textcolor{keyword}{False})
118         str\_output, valid, test = testing\_utils.eval\_model(opt)
119         self.assertGreater(len(str\_output), 0, \textcolor{stringliteral}{"Output is empty"})
120 
121         \textcolor{comment}{# decode the output}
122         scores = str\_output.split(\textcolor{stringliteral}{"\(\backslash\)n---\(\backslash\)n"})
123 
124         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(1, len(scores)):
125             score = ast.literal\_eval(scores[i])
126             \textcolor{comment}{# check totals}
127             self.assertEqual(score[\textcolor{stringliteral}{'exs'}], i, \textcolor{stringliteral}{"Total is incorrect"})
128             \textcolor{comment}{# accuracy should be one}
129             self.assertEqual(
130                 \textcolor{stringliteral}{'accuracy'} \textcolor{keywordflow}{in} score, \textcolor{keyword}{True}, \textcolor{stringliteral}{"Accuracy is missing from selection"}
131             )
132             self.assertEqual(score[\textcolor{stringliteral}{'accuracy'}], 1, \textcolor{stringliteral}{"Accuracy != 1"})
133             self.assertEqual(
134                 \textcolor{stringliteral}{'rouge-1'} \textcolor{keywordflow}{in} score, \textcolor{keyword}{True}, \textcolor{stringliteral}{"Rouge is missing from selection"}
135             )
136             self.assertEqual(score[\textcolor{stringliteral}{'rouge-1'}], 1, \textcolor{stringliteral}{'rouge1 != 1'})
137             self.assertEqual(score[\textcolor{stringliteral}{'rouge-2'}], 1, \textcolor{stringliteral}{'rouge-2 != 1'})
138             self.assertEqual(score[\textcolor{stringliteral}{'rouge-L'}], 1, \textcolor{stringliteral}{'rouge-L != 1'})
139 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__eval__model_1_1TestEvalModel_a06987267bf1d5f021f3ddcbe489a820f}\label{classtests_1_1test__eval__model_1_1TestEvalModel_a06987267bf1d5f021f3ddcbe489a820f}} 
\index{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}!test\+\_\+multitasking\+\_\+metrics@{test\+\_\+multitasking\+\_\+metrics}}
\index{test\+\_\+multitasking\+\_\+metrics@{test\+\_\+multitasking\+\_\+metrics}!tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}}
\subsubsection{\texorpdfstring{test\+\_\+multitasking\+\_\+metrics()}{test\_multitasking\_metrics()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model.\+test\+\_\+multitasking\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 140 of file test\+\_\+eval\+\_\+model.\+py.


\begin{DoxyCode}
140     \textcolor{keyword}{def }test\_multitasking\_metrics(self):
141         stdout, valid, test = testing\_utils.eval\_model(
142             \{
143                 \textcolor{stringliteral}{'task'}: \textcolor{stringliteral}{'integration\_tests:candidate,'}
144                 \textcolor{stringliteral}{'integration\_tests:multiturnCandidate'},
145                 \textcolor{stringliteral}{'model'}: \textcolor{stringliteral}{'random\_candidate'},
146                 \textcolor{stringliteral}{'num\_epochs'}: 0.5,
147                 \textcolor{stringliteral}{'aggregate\_micro'}: \textcolor{keyword}{True},
148             \}
149         )
150 
151         task1\_acc = valid[\textcolor{stringliteral}{'tasks'}][\textcolor{stringliteral}{'integration\_tests:candidate'}][\textcolor{stringliteral}{'accuracy'}]
152         task2\_acc = valid[\textcolor{stringliteral}{'tasks'}][\textcolor{stringliteral}{'integration\_tests:multiturnCandidate'}][\textcolor{stringliteral}{'accuracy'}]
153         total\_acc = valid[\textcolor{stringliteral}{'accuracy'}]
154         \textcolor{comment}{# task 2 is 4 times the size of task 1}
155         self.assertAlmostEqual(
156             total\_acc,
157             (task1\_acc + 4 * task2\_acc) / 5,
158             4,
159             \textcolor{stringliteral}{'Task accuracy is averaged incorrectly'},
160         )
161 
162         stdout, valid, test = testing\_utils.eval\_model(
163             \{
164                 \textcolor{stringliteral}{'task'}: \textcolor{stringliteral}{'integration\_tests:candidate,'}
165                 \textcolor{stringliteral}{'integration\_tests:multiturnCandidate'},
166                 \textcolor{stringliteral}{'model'}: \textcolor{stringliteral}{'random\_candidate'},
167                 \textcolor{stringliteral}{'num\_epochs'}: 0.5,
168                 \textcolor{stringliteral}{'aggregate\_micro'}: \textcolor{keyword}{False},
169             \}
170         )
171         task1\_acc = valid[\textcolor{stringliteral}{'tasks'}][\textcolor{stringliteral}{'integration\_tests:candidate'}][\textcolor{stringliteral}{'accuracy'}]
172         task2\_acc = valid[\textcolor{stringliteral}{'tasks'}][\textcolor{stringliteral}{'integration\_tests:multiturnCandidate'}][\textcolor{stringliteral}{'accuracy'}]
173         total\_acc = valid[\textcolor{stringliteral}{'accuracy'}]
174         \textcolor{comment}{# metrics should be averaged equally across tasks}
175         self.assertAlmostEqual(
176             total\_acc,
177             (task1\_acc + task2\_acc) / 2,
178             4,
179             \textcolor{stringliteral}{'Task accuracy is averaged incorrectly'},
180         )
181 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__eval__model_1_1TestEvalModel_a9dcbb770a097fa51f6162fe85c8cd1c5}\label{classtests_1_1test__eval__model_1_1TestEvalModel_a9dcbb770a097fa51f6162fe85c8cd1c5}} 
\index{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}!test\+\_\+noevalmode@{test\+\_\+noevalmode}}
\index{test\+\_\+noevalmode@{test\+\_\+noevalmode}!tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}}
\subsubsection{\texorpdfstring{test\+\_\+noevalmode()}{test\_noevalmode()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model.\+test\+\_\+noevalmode (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Ensure you get an error trying to use eval_model with -dt train.
\end{DoxyVerb}
 

Definition at line 18 of file test\+\_\+eval\+\_\+model.\+py.


\begin{DoxyCode}
18     \textcolor{keyword}{def }test\_noevalmode(self):
19         \textcolor{stringliteral}{"""}
20 \textcolor{stringliteral}{        Ensure you get an error trying to use eval\_model with -dt train.}
21 \textcolor{stringliteral}{        """}
22         with self.assertRaises(ValueError):
23             testing\_utils.eval\_model(
24                 \{\textcolor{stringliteral}{'task'}: \textcolor{stringliteral}{'integration\_tests'}, \textcolor{stringliteral}{'model'}: \textcolor{stringliteral}{'repeat\_label'}\},
25                 valid\_datatype=\textcolor{stringliteral}{'train'},
26             )
27 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__eval__model_1_1TestEvalModel_a899d6a41fb8f56be62a7145d9937ee52}\label{classtests_1_1test__eval__model_1_1TestEvalModel_a899d6a41fb8f56be62a7145d9937ee52}} 
\index{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}!test\+\_\+output@{test\+\_\+output}}
\index{test\+\_\+output@{test\+\_\+output}!tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}}
\subsubsection{\texorpdfstring{test\+\_\+output()}{test\_output()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model.\+test\+\_\+output (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test output of running eval_model.
\end{DoxyVerb}
 

Definition at line 37 of file test\+\_\+eval\+\_\+model.\+py.


\begin{DoxyCode}
37     \textcolor{keyword}{def }test\_output(self):
38         \textcolor{stringliteral}{"""}
39 \textcolor{stringliteral}{        Test output of running eval\_model.}
40 \textcolor{stringliteral}{        """}
41         parser = \hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1browser__chat_1_1client_a20c9862417d1f1a61b06551de0820ee4}{setup\_args}()
42         parser.set\_defaults(
43             task=\textcolor{stringliteral}{'integration\_tests'},
44             model=\textcolor{stringliteral}{'repeat\_label'},
45             datatype=\textcolor{stringliteral}{'valid'},
46             num\_examples=5,
47             display\_examples=\textcolor{keyword}{False},
48         )
49 
50         opt = parser.parse\_args(print\_args=\textcolor{keyword}{False})
51         str\_output, valid, test = testing\_utils.eval\_model(opt)
52         self.assertGreater(len(str\_output), 0, \textcolor{stringliteral}{"Output is empty"})
53 
54         \textcolor{comment}{# decode the output}
55         scores = str\_output.split(\textcolor{stringliteral}{"\(\backslash\)n---\(\backslash\)n"})
56 
57         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(1, len(scores)):
58             score = ast.literal\_eval(scores[i])
59             \textcolor{comment}{# check totals}
60             self.assertEqual(score[\textcolor{stringliteral}{'exs'}], i, \textcolor{stringliteral}{"Total is incorrect"})
61             \textcolor{comment}{# accuracy should be one}
62             self.assertEqual(
63                 \textcolor{stringliteral}{'accuracy'} \textcolor{keywordflow}{in} score, \textcolor{keyword}{True}, \textcolor{stringliteral}{"Accuracy is missing from default"}
64             )
65             self.assertEqual(score[\textcolor{stringliteral}{'accuracy'}], 1, \textcolor{stringliteral}{"Accuracy != 1"})
66             self.assertEqual(
67                 \textcolor{stringliteral}{'rouge-1'} \textcolor{keywordflow}{in} score, \textcolor{keyword}{False}, \textcolor{stringliteral}{"Rouge is in the default metrics"}
68             )
69 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__eval__model_1_1TestEvalModel_a6f8c8d67ca1f6a036122e191fdc77c26}\label{classtests_1_1test__eval__model_1_1TestEvalModel_a6f8c8d67ca1f6a036122e191fdc77c26}} 
\index{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}!test\+\_\+train\+\_\+evalmode@{test\+\_\+train\+\_\+evalmode}}
\index{test\+\_\+train\+\_\+evalmode@{test\+\_\+train\+\_\+evalmode}!tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model@{tests\+::test\+\_\+eval\+\_\+model\+::\+Test\+Eval\+Model}}
\subsubsection{\texorpdfstring{test\+\_\+train\+\_\+evalmode()}{test\_train\_evalmode()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+eval\+\_\+model.\+Test\+Eval\+Model.\+test\+\_\+train\+\_\+evalmode (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test that evaluating a model with train:evalmode completes an epoch.
\end{DoxyVerb}
 

Definition at line 182 of file test\+\_\+eval\+\_\+model.\+py.


\begin{DoxyCode}
182     \textcolor{keyword}{def }test\_train\_evalmode(self):
183         \textcolor{stringliteral}{"""}
184 \textcolor{stringliteral}{        Test that evaluating a model with train:evalmode completes an epoch.}
185 \textcolor{stringliteral}{        """}
186         base\_dict = \{\textcolor{stringliteral}{'model'}: \textcolor{stringliteral}{'repeat\_label'}, \textcolor{stringliteral}{'datatype'}: \textcolor{stringliteral}{'train:evalmode'}\}
187 
188         teachers = [\textcolor{stringliteral}{'integration\_tests:fixed\_dialog\_candidate'}, \textcolor{stringliteral}{'integration\_tests'}]
189         batchsize = [1, 64]
190         \textcolor{keywordflow}{for} bs \textcolor{keywordflow}{in} batchsize:
191             \textcolor{keywordflow}{for} teacher \textcolor{keywordflow}{in} teachers:
192                 d = base\_dict.copy()
193                 d[\textcolor{stringliteral}{'task'}] = teacher
194                 d[\textcolor{stringliteral}{'batchsize'}] = bs
195                 with testing\_utils.timeout(time=20):
196                     stdout, valid, test = testing\_utils.eval\_model(
197                         d, valid\_datatype=d[\textcolor{stringliteral}{'datatype'}]
198                     )
199                 self.assertEqual(
200                     \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(valid[\textcolor{stringliteral}{'exs'}]),
201                     500,
202                     f\textcolor{stringliteral}{'train:evalmode failed with bs \{bs\} and teacher \{teacher\}'}
203                     f\textcolor{stringliteral}{' stdout: \{stdout\}'},
204                 )
205 
206 
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
tests/\hyperlink{test__eval__model_8py}{test\+\_\+eval\+\_\+model.\+py}\end{DoxyCompactItemize}
