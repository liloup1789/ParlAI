\hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld}{}\section{personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World Class Reference}
\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld}\index{personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World}}


Inheritance diagram for personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{dd/d08/classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{d5/dd7/classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ab05199b7af0da7a70a52e5f563b7511d}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1worlds_1_1World_a3640d92718acd3e6942a28c1ab3678bd}{opt}, \hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_aab94355fe6accd2935a78f0e1836eb6c}{agents}=None, shared=None, \hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ac344f28e6b5ef9bdf42428795054418d}{world\+\_\+tag}=\textquotesingle{}N\+O\+NE\textquotesingle{})
\item 
def \hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a579f1033a02ede69365f79246a23d8da}{episode\+\_\+done} (self)
\item 
def \hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ab682688b0f65bc5162cb77f3d96fafc4}{parley} (self)
\item 
def \hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a4e9a57d65cc93af5741f56597a970618}{get\+\_\+instruction} (self, agent\+\_\+id=None, tag=\textquotesingle{}first\textquotesingle{}, turn\+\_\+num=0)
\item 
def \hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a594560fccee92084ad833d131c77d860}{check\+\_\+timeout} (self, act)
\item 
def \hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ae0d5bc2141cf6e64b53adf8c432bccf4}{save\+\_\+data} (self)
\item 
def \hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a1fe4b499c8d38e26df4a7921a1672c32}{review\+\_\+work} (self)
\item 
def \hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_af1e2b434ec1e39f734379b1d35b80489}{shutdown} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a8678acc9310ef032d7ab61f4c9c0a6f0}{turn\+\_\+idx}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a4af042388de61e4099d906223a34c5e8}{task\+\_\+type}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ae31a2275d8036447df796fcca3031263}{chat\+\_\+done}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ac344f28e6b5ef9bdf42428795054418d}{world\+\_\+tag}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a2c3e1e28516144ad45e8ba6def0abdce}{max\+\_\+resp\+\_\+time}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_aab94355fe6accd2935a78f0e1836eb6c}{agents}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a5794297cbf142459512359cfc0a13ee9}{offensive\+\_\+lang\+\_\+detector}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a3626a4fc2845b1a6942c9bd825aca0e2}{agent}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a9c235bbd3a0a5d51e9a3a14ec4d4159a}{data}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a55830013704d64587260f64e325e2543}{exact\+\_\+match}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a83290e0daf54129c6757e5691355f289}{num\+\_\+images}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a136ccad6844edd498cf7e823ce3f1da2}{multiple\+\_\+personality}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_aaacd5c8739e44cb8991b935eaf8ccec9}{eval}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_aef06e94c27b16fcb98b88ade2e4ad2d2}{data\+\_\+type}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a1178a7d92c357f467f062e63b2831e85}{task\+\_\+type\+\_\+title}
\item 
\hyperlink{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ad1c8f019f3cb67a2aa4bfc1b790047b6}{config}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}World an agent observes ten images, with ten different personalities, and writes
engaging comments about them.
\end{DoxyVerb}
 

Definition at line 249 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ab05199b7af0da7a70a52e5f563b7511d}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ab05199b7af0da7a70a52e5f563b7511d}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{agents = {\ttfamily None},  }\item[{}]{shared = {\ttfamily None},  }\item[{}]{world\+\_\+tag = {\ttfamily \textquotesingle{}NONE\textquotesingle{}} }\end{DoxyParamCaption})}



Definition at line 255 of file worlds.\+py.


\begin{DoxyCode}
255     \textcolor{keyword}{def }\_\_init\_\_(self, opt, agents=None, shared=None, world\_tag='NONE'):
256         self.turn\_idx = 0
257         self.task\_type = \textcolor{stringliteral}{'sandbox'} \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'is\_sandbox'}] \textcolor{keywordflow}{else} \textcolor{stringliteral}{'live'}
258         self.chat\_done = \textcolor{keyword}{False}
259         self.world\_tag = world\_tag
260         self.max\_resp\_time = opt[\textcolor{stringliteral}{'max\_resp\_time'}]  \textcolor{comment}{# in secs}
261         super().\_\_init\_\_(opt, agents, shared)
262         self.agents = agents
263         self.offensive\_lang\_detector = OffensiveStringMatcher()
264         self.agent = agents[0]
265         self.data = []
266         self.exact\_match = \textcolor{keyword}{False}
267         self.num\_images = opt[\textcolor{stringliteral}{'num\_images'}]
268         self.multiple\_personality = opt.get(\textcolor{stringliteral}{'multiple\_personality'}, \textcolor{keyword}{False})
269         self.eval = 0
270         self.data\_type = opt[\textcolor{stringliteral}{'task\_type'}]
271         self.task\_type\_title = TASK\_TYPE\_TO\_TITLE[opt[\textcolor{stringliteral}{'task\_type'}]]
272         self.config = TASK\_TYPE\_TO\_CONFIG[opt[\textcolor{stringliteral}{'task\_type'}]]
273 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a594560fccee92084ad833d131c77d860}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a594560fccee92084ad833d131c77d860}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!check\+\_\+timeout@{check\+\_\+timeout}}
\index{check\+\_\+timeout@{check\+\_\+timeout}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{check\+\_\+timeout()}{check\_timeout()}}
{\footnotesize\ttfamily def personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+check\+\_\+timeout (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{act }\end{DoxyParamCaption})}



Definition at line 372 of file worlds.\+py.


\begin{DoxyCode}
372     \textcolor{keyword}{def }check\_timeout(self, act):
373         \textcolor{keywordflow}{if} act[\textcolor{stringliteral}{'text'}] == \textcolor{stringliteral}{'[TIMEOUT]'} \textcolor{keywordflow}{and} act[\textcolor{stringliteral}{'episode\_done'}]:
374             control\_msg = \{\textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{True}\}
375             control\_msg[\textcolor{stringliteral}{'id'}] = \textcolor{stringliteral}{'SYSTEM'}
376             control\_msg[\textcolor{stringliteral}{'text'}] = self.get\_instruction(tag=\textcolor{stringliteral}{'timeout'})
377             \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents:
378                 \textcolor{keywordflow}{if} ag.id != act[\textcolor{stringliteral}{'id'}]:
379                     ag.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
380             self.chat\_done = \textcolor{keyword}{True}
381             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
382         \textcolor{keywordflow}{elif} act[\textcolor{stringliteral}{'text'}] == \textcolor{stringliteral}{'[DISCONNECT]'}:
383             self.chat\_done = \textcolor{keyword}{True}
384             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
385         \textcolor{keywordflow}{else}:
386             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
387 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a579f1033a02ede69365f79246a23d8da}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a579f1033a02ede69365f79246a23d8da}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!episode\+\_\+done@{episode\+\_\+done}}
\index{episode\+\_\+done@{episode\+\_\+done}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{episode\+\_\+done()}{episode\_done()}}
{\footnotesize\ttfamily def personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+episode\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 274 of file worlds.\+py.


\begin{DoxyCode}
274     \textcolor{keyword}{def }episode\_done(self):
275         \textcolor{keywordflow}{return} self.chat\_done
276 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a4e9a57d65cc93af5741f56597a970618}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a4e9a57d65cc93af5741f56597a970618}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!get\+\_\+instruction@{get\+\_\+instruction}}
\index{get\+\_\+instruction@{get\+\_\+instruction}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{get\+\_\+instruction()}{get\_instruction()}}
{\footnotesize\ttfamily def personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+get\+\_\+instruction (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+id = {\ttfamily None},  }\item[{}]{tag = {\ttfamily \textquotesingle{}first\textquotesingle{}},  }\item[{}]{turn\+\_\+num = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 366 of file worlds.\+py.


\begin{DoxyCode}
366     \textcolor{keyword}{def }get\_instruction(self, agent\_id=None, tag='first', turn\_num=0):
367         \textcolor{keywordflow}{if} tag == \textcolor{stringliteral}{'start'}:
368             \textcolor{keywordflow}{return} START\_MSGS[self.data\_type].\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(turn\_num)
369         \textcolor{keywordflow}{if} tag == \textcolor{stringliteral}{'timeout'}:
370             \textcolor{keywordflow}{return} TIMEOUT\_MSG
371 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ab682688b0f65bc5162cb77f3d96fafc4}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ab682688b0f65bc5162cb77f3d96fafc4}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!parley@{parley}}
\index{parley@{parley}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{parley()}{parley()}}
{\footnotesize\ttfamily def personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+parley (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}COMMENTER is given an image, and is told to give a comment for the image.
\end{DoxyVerb}
 

Definition at line 277 of file worlds.\+py.


\begin{DoxyCode}
277     \textcolor{keyword}{def }parley(self):
278         \textcolor{stringliteral}{"""}
279 \textcolor{stringliteral}{        COMMENTER is given an image, and is told to give a comment for the image.}
280 \textcolor{stringliteral}{        """}
281         \textcolor{comment}{# Initial Message Value}
282         control\_msg = \{\textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{False}\}
283         control\_msg[\textcolor{stringliteral}{'id'}] = \textcolor{stringliteral}{'SYSTEM'}
284 
285         \textcolor{comment}{# First, we give COMMENTER their personality instructions, and image}
286         \textcolor{keywordflow}{while} self.turn\_idx < self.num\_images:
287             print(self.world\_tag + \textcolor{stringliteral}{' is at turn \{\}...'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.turn\_idx))
288             \textcolor{comment}{# Send personality + image to turker}
289             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.multiple\_personality:
290                 pers\_tup = self.agent.personality\_generator.pop\_personality()
291                 self.pers\_idx, personality = pers\_tup
292                 img\_tup = self.agent.image\_generator.pop\_image()
293                 self.image\_hash, image\_path = img\_tup
294                 img = \hyperlink{namespacepersonality__captions_1_1worlds_a2863737d97a8e8c5a1ebe9029d0d2293}{load\_image}(image\_path)
295             \textcolor{keywordflow}{else}:
296                 pair\_tup = self.agent.personality\_and\_image\_generator.pop\_pair()
297                 self.pair\_idx, personality, self.image\_hash, image\_path = pair\_tup
298                 img = \hyperlink{namespacepersonality__captions_1_1worlds_a2863737d97a8e8c5a1ebe9029d0d2293}{load\_image}(image\_path)
299             buffered = BytesIO()
300             img.save(buffered, format=\textcolor{stringliteral}{'JPEG'})
301             encoded = \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(base64.b64encode(buffered.getvalue()).decode(\textcolor{stringliteral}{'ascii'}))
302             control\_msg[\textcolor{stringliteral}{'image'}] = encoded
303             \textcolor{keywordflow}{if} self.data\_type == \textcolor{stringliteral}{'personality'}:
304                 personality\_text = (
305                     \textcolor{stringliteral}{'<b><span style="color:blue">'}
306                     \textcolor{stringliteral}{'\{\}\(\backslash\)n</span></b>'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(personality.strip())
307                 )
308                 control\_msg[\textcolor{stringliteral}{'personality\_text'}] = personality\_text
309             control\_msg[\textcolor{stringliteral}{'text'}] = self.get\_instruction(
310                 tag=\textcolor{stringliteral}{'start'}, agent\_id=self.agent.id, turn\_num=self.turn\_idx + 1
311             )
312             control\_msg[\textcolor{stringliteral}{'description'}] = self.config[\textcolor{stringliteral}{'task\_description'}]
313             control\_msg[\textcolor{stringliteral}{'task\_type\_title'}] = self.task\_type\_title
314             self.agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
315             time.sleep(1)
316 
317             \textcolor{comment}{# Collect comment from turker}
318             offensive\_counter = 0
319             \textcolor{keywordflow}{while} offensive\_counter < 3:
320                 idx = 0
321                 acts = self.acts
322                 acts[idx] = self.agent.act(timeout=self.max\_resp\_time)
323                 agent\_left = self.check\_timeout(acts[idx])
324                 \textcolor{keywordflow}{if} agent\_left:
325                     \textcolor{keywordflow}{break}
326                 comment = acts[idx][\textcolor{stringliteral}{'text'}]
327                 offensive = self.offensive\_lang\_detector.contains\_offensive\_language(
328                     comment
329                 )
330                 \textcolor{keywordflow}{if} offensive:
331                     \textcolor{comment}{# Tell Turker to not be offensive!}
332                     offensive\_msg = \{\textcolor{stringliteral}{'id'}: \textcolor{stringliteral}{'SYSTEM'}, \textcolor{stringliteral}{'text'}: OFFENSIVE\_MSG\}
333                     self.agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(offensive\_msg))
334                     offensive\_counter += 1
335                 \textcolor{keywordflow}{else}:
336                     \textcolor{keywordflow}{break}
337 
338             \textcolor{keywordflow}{if} self.chat\_done:
339                 \textcolor{keywordflow}{break}
340             self.data.append(
341                 \{
342                     \textcolor{stringliteral}{'comment'}: comment,
343                     \textcolor{stringliteral}{'personality'}: personality,
344                     \textcolor{stringliteral}{'image\_hash'}: self.image\_hash,
345                     \textcolor{stringliteral}{'image\_path'}: image\_path,
346                     \textcolor{stringliteral}{'contains\_offensive\_language'}: offensive,
347                 \}
348             )
349             self.turn\_idx += 1
350 
351         \textcolor{keywordflow}{if} self.turn\_idx == self.num\_images:
352             control\_msg[\textcolor{stringliteral}{'text'}] = CHAT\_ENDED\_MSG.format(self.num\_images)
353             control\_msg[\textcolor{stringliteral}{'eval'}] = \textcolor{keyword}{True}
354             self.agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
355             act = self.agent.act(timeout=self.max\_resp\_time)
356             self.check\_timeout(act)
357             \textcolor{keywordflow}{try}:
358                 ev\_val = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(act[\textcolor{stringliteral}{'eval'}])
359                 ev\_text = act[\textcolor{stringliteral}{'text'}]
360             \textcolor{keywordflow}{except} BaseException:  \textcolor{comment}{# If there is a disconnect here}
361                 ev\_val, ev\_text = (-1, \textcolor{stringliteral}{'Eval not received'})
362             self.eval = \{ev\_val: ev\_text\}
363         self.chat\_done = \textcolor{keyword}{True}
364         \textcolor{keywordflow}{return}
365 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a1fe4b499c8d38e26df4a7921a1672c32}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a1fe4b499c8d38e26df4a7921a1672c32}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!review\+\_\+work@{review\+\_\+work}}
\index{review\+\_\+work@{review\+\_\+work}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{review\+\_\+work()}{review\_work()}}
{\footnotesize\ttfamily def personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+review\+\_\+work (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 453 of file worlds.\+py.


\begin{DoxyCode}
453     \textcolor{keyword}{def }review\_work(self):
454         \textcolor{keyword}{global} review\_agent
455 
456         \textcolor{keyword}{def }review\_agent(ag):
457             contains\_offense = any(d[\textcolor{stringliteral}{'contains\_offensive\_language'}] \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} self.data)
458             \textcolor{keywordflow}{if} contains\_offense:
459                 ag.reject\_work(
460                     reason=\textcolor{stringliteral}{'We have rejected this HIT because at '}
461                     \textcolor{stringliteral}{'least one of your comments contains '}
462                     \textcolor{stringliteral}{'offensive language'}
463                 )
464                 print(
465                     \textcolor{stringliteral}{'Rejected work for agent \{\} for '}
466                     \textcolor{stringliteral}{'offensive language'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(ag.worker\_id)
467                 )
468             \textcolor{keywordflow}{elif} self.exact\_match:
469                 ag.reject\_work(
470                     reason=\textcolor{stringliteral}{'We have rejected this HIT because all '}
471                     \textcolor{stringliteral}{'of your comments are the exact same'}
472                 )
473                 print(
474                     \textcolor{stringliteral}{'Rejected work for agent \{\} for '}
475                     \textcolor{stringliteral}{'same comments'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(ag.worker\_id)
476                 )
477 
478         Parallel(n\_jobs=len(self.agents), backend=\textcolor{stringliteral}{'threading'})(
479             delayed(review\_agent)(agent) \textcolor{keywordflow}{for} agent \textcolor{keywordflow}{in} self.agents
480         )
481 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ae0d5bc2141cf6e64b53adf8c432bccf4}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ae0d5bc2141cf6e64b53adf8c432bccf4}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!save\+\_\+data@{save\+\_\+data}}
\index{save\+\_\+data@{save\+\_\+data}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{save\+\_\+data()}{save\_data()}}
{\footnotesize\ttfamily def personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+save\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 388 of file worlds.\+py.


\begin{DoxyCode}
388     \textcolor{keyword}{def }save\_data(self):
389         convo\_finished = \textcolor{keyword}{True}
390         \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents:
391             \textcolor{keywordflow}{if} (
392                 ag.hit\_is\_abandoned
393                 \textcolor{keywordflow}{or} ag.hit\_is\_returned
394                 \textcolor{keywordflow}{or} ag.disconnected
395                 \textcolor{keywordflow}{or} ag.hit\_is\_expired
396             ):
397                 convo\_finished = \textcolor{keyword}{False}
398         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} convo\_finished:
399             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.multiple\_personality:
400                 ag.personality\_generator.push\_personality(self.pers\_idx)
401                 ag.image\_generator.push\_image(self.image\_hash)
402                 print(
403                     \textcolor{stringliteral}{'\(\backslash\)n**Push personality \{\} back to stack. **\(\backslash\)n'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.pers\_idx)
404                 )
405                 print(\textcolor{stringliteral}{'\(\backslash\)n**Push image \{\} back to stack. **\(\backslash\)n'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.image\_hash))
406             \textcolor{keywordflow}{else}:
407                 ag.personality\_and\_image\_generator.push\_pair(self.pair\_idx)
408                 print(\textcolor{stringliteral}{'\(\backslash\)n**Push pair \{\} back to stack. **\(\backslash\)n'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.pair\_idx))
409         self.agents[0].personality\_generator.save\_idx\_stack()
410         self.agents[0].image\_generator.save\_idx\_stack()
411         self.agents[0].personality\_and\_image\_generator.save\_idx\_stack()
412         data\_path = self.opt[\textcolor{stringliteral}{'data\_path'}]
413         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(data\_path):
414             os.makedirs(data\_path)
415         \textcolor{keywordflow}{if} convo\_finished:
416             filename = os.path.join(
417                 data\_path,
418                 \textcolor{stringliteral}{'\{\}\_\{\}\_\{\}.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
419                     time.strftime(\textcolor{stringliteral}{'%Y%m%d-%H%M%S'}),
420                     np.random.randint(0, 1000),
421                     self.task\_type,
422                 ),
423             )
424         \textcolor{keywordflow}{else}:
425             filename = os.path.join(
426                 data\_path,
427                 \textcolor{stringliteral}{'\{\}\_\{\}\_\{\}\_incomplete.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
428                     time.strftime(\textcolor{stringliteral}{'%Y%m%d-%H%M%S'}),
429                     np.random.randint(0, 1000),
430                     self.task\_type,
431                 ),
432             )
433         comments = [d[\textcolor{stringliteral}{'comment'}] \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} self.data]
434 
435         \textcolor{keywordflow}{if} len(comments) >= 2:
436             c = comments[0]
437             \textcolor{keywordflow}{if} \_exact\_match(c, comments[1:]):
438                 self.exact\_match = \textcolor{keyword}{True}
439 
440         pickle.dump(
441             \{
442                 \textcolor{stringliteral}{'data'}: self.data,
443                 \textcolor{stringliteral}{'worker'}: self.agents[0].worker\_id,
444                 \textcolor{stringliteral}{'hit\_id'}: self.agents[0].hit\_id,
445                 \textcolor{stringliteral}{'assignment\_id'}: self.agents[0].assignment\_id,
446                 \textcolor{stringliteral}{'exact\_match'}: self.exact\_match,
447                 \textcolor{stringliteral}{'task\_eval'}: self.eval,
448             \},
449             open(filename, \textcolor{stringliteral}{'wb'}),
450         )
451         print(\textcolor{stringliteral}{'\{\}: Data successfully saved at \{\}.'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.world\_tag, filename))
452 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_af1e2b434ec1e39f734379b1d35b80489}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_af1e2b434ec1e39f734379b1d35b80489}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily def personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Shutdown all mturk agents in parallel, otherwise if one mturk agent is
disconnected then it could prevent other mturk agents from completing.
\end{DoxyVerb}
 

Definition at line 482 of file worlds.\+py.


\begin{DoxyCode}
482     \textcolor{keyword}{def }shutdown(self):
483         \textcolor{stringliteral}{"""}
484 \textcolor{stringliteral}{        Shutdown all mturk agents in parallel, otherwise if one mturk agent is}
485 \textcolor{stringliteral}{        disconnected then it could prevent other mturk agents from completing.}
486 \textcolor{stringliteral}{        """}
487         \textcolor{keyword}{global} shutdown\_agent
488 
489         \textcolor{keyword}{def }shutdown\_agent(agent):
490             agent.shutdown()
491 
492         Parallel(n\_jobs=len(self.agents), backend=\textcolor{stringliteral}{'threading'})(
493             delayed(shutdown\_agent)(agent) \textcolor{keywordflow}{for} agent \textcolor{keywordflow}{in} self.agents
494         )
495 \end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a3626a4fc2845b1a6942c9bd825aca0e2}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a3626a4fc2845b1a6942c9bd825aca0e2}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!agent@{agent}}
\index{agent@{agent}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{agent}{agent}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+agent}



Definition at line 264 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_aab94355fe6accd2935a78f0e1836eb6c}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_aab94355fe6accd2935a78f0e1836eb6c}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!agents@{agents}}
\index{agents@{agents}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{agents}{agents}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+agents}



Definition at line 262 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ae31a2275d8036447df796fcca3031263}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ae31a2275d8036447df796fcca3031263}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!chat\+\_\+done@{chat\+\_\+done}}
\index{chat\+\_\+done@{chat\+\_\+done}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{chat\+\_\+done}{chat\_done}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+chat\+\_\+done}



Definition at line 258 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ad1c8f019f3cb67a2aa4bfc1b790047b6}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ad1c8f019f3cb67a2aa4bfc1b790047b6}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!config@{config}}
\index{config@{config}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{config}{config}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+config}



Definition at line 272 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a9c235bbd3a0a5d51e9a3a14ec4d4159a}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a9c235bbd3a0a5d51e9a3a14ec4d4159a}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!data@{data}}
\index{data@{data}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{data}{data}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+data}



Definition at line 265 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_aef06e94c27b16fcb98b88ade2e4ad2d2}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_aef06e94c27b16fcb98b88ade2e4ad2d2}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!data\+\_\+type@{data\+\_\+type}}
\index{data\+\_\+type@{data\+\_\+type}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{data\+\_\+type}{data\_type}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+data\+\_\+type}



Definition at line 270 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_aaacd5c8739e44cb8991b935eaf8ccec9}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_aaacd5c8739e44cb8991b935eaf8ccec9}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!eval@{eval}}
\index{eval@{eval}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{eval}{eval}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+eval}



Definition at line 269 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a55830013704d64587260f64e325e2543}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a55830013704d64587260f64e325e2543}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!exact\+\_\+match@{exact\+\_\+match}}
\index{exact\+\_\+match@{exact\+\_\+match}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{exact\+\_\+match}{exact\_match}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+exact\+\_\+match}



Definition at line 266 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a2c3e1e28516144ad45e8ba6def0abdce}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a2c3e1e28516144ad45e8ba6def0abdce}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!max\+\_\+resp\+\_\+time@{max\+\_\+resp\+\_\+time}}
\index{max\+\_\+resp\+\_\+time@{max\+\_\+resp\+\_\+time}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{max\+\_\+resp\+\_\+time}{max\_resp\_time}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+max\+\_\+resp\+\_\+time}



Definition at line 260 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a136ccad6844edd498cf7e823ce3f1da2}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a136ccad6844edd498cf7e823ce3f1da2}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!multiple\+\_\+personality@{multiple\+\_\+personality}}
\index{multiple\+\_\+personality@{multiple\+\_\+personality}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{multiple\+\_\+personality}{multiple\_personality}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+multiple\+\_\+personality}



Definition at line 268 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a83290e0daf54129c6757e5691355f289}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a83290e0daf54129c6757e5691355f289}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!num\+\_\+images@{num\+\_\+images}}
\index{num\+\_\+images@{num\+\_\+images}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{num\+\_\+images}{num\_images}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+num\+\_\+images}



Definition at line 267 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a5794297cbf142459512359cfc0a13ee9}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a5794297cbf142459512359cfc0a13ee9}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!offensive\+\_\+lang\+\_\+detector@{offensive\+\_\+lang\+\_\+detector}}
\index{offensive\+\_\+lang\+\_\+detector@{offensive\+\_\+lang\+\_\+detector}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{offensive\+\_\+lang\+\_\+detector}{offensive\_lang\_detector}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+offensive\+\_\+lang\+\_\+detector}



Definition at line 263 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a4af042388de61e4099d906223a34c5e8}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a4af042388de61e4099d906223a34c5e8}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!task\+\_\+type@{task\+\_\+type}}
\index{task\+\_\+type@{task\+\_\+type}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{task\+\_\+type}{task\_type}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+task\+\_\+type}



Definition at line 257 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a1178a7d92c357f467f062e63b2831e85}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a1178a7d92c357f467f062e63b2831e85}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!task\+\_\+type\+\_\+title@{task\+\_\+type\+\_\+title}}
\index{task\+\_\+type\+\_\+title@{task\+\_\+type\+\_\+title}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{task\+\_\+type\+\_\+title}{task\_type\_title}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+task\+\_\+type\+\_\+title}



Definition at line 271 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a8678acc9310ef032d7ab61f4c9c0a6f0}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_a8678acc9310ef032d7ab61f4c9c0a6f0}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!turn\+\_\+idx@{turn\+\_\+idx}}
\index{turn\+\_\+idx@{turn\+\_\+idx}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{turn\+\_\+idx}{turn\_idx}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+turn\+\_\+idx}



Definition at line 256 of file worlds.\+py.

\mbox{\Hypertarget{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ac344f28e6b5ef9bdf42428795054418d}\label{classpersonality__captions_1_1worlds_1_1MTurkPersonalityCaptionsWorld_ac344f28e6b5ef9bdf42428795054418d}} 
\index{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}!world\+\_\+tag@{world\+\_\+tag}}
\index{world\+\_\+tag@{world\+\_\+tag}!personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World@{personality\+\_\+captions\+::worlds\+::\+M\+Turk\+Personality\+Captions\+World}}
\subsubsection{\texorpdfstring{world\+\_\+tag}{world\_tag}}
{\footnotesize\ttfamily personality\+\_\+captions.\+worlds.\+M\+Turk\+Personality\+Captions\+World.\+world\+\_\+tag}



Definition at line 259 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/tasks/personality\+\_\+captions/personality\+\_\+captions/\hyperlink{parlai_2mturk_2tasks_2personality__captions_2personality__captions_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
