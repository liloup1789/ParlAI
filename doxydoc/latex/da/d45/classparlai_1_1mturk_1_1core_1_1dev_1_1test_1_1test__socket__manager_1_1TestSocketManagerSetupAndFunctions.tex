\hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions}{}\section{parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions Class Reference}
\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions}\index{parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions}}


Inheritance diagram for parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=290pt]{d1/d51/classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=290pt]{de/d54/classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a8d0f8ea9d4c7bc39a42474b329bdf4d7}{set\+Up} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_aaad170d033fb44ca433f8d2e50059fe1}{tear\+Down} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a47e2a498d0c06fae5f359797705c7eea}{test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a7b364826b5db57643bc127dd9f6a3232}{assert\+Equal\+By} (self, val\+\_\+func, val, max\+\_\+time)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_af1a377b1111ae9f2678666752e58cdd7}{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a9fad20b73bdbba96a862f11a6170db7a}{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a3d9a3b7b099516e150f51b5ecb8b0af3}{test\+\_\+init\+\_\+world\+\_\+dead} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a893ca3bf863d009293aa75b4c574c718}{fake\+\_\+socket}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Unit/integration tests for starting up a socket.
\end{DoxyVerb}
 

Definition at line 415 of file test\+\_\+socket\+\_\+manager.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a7b364826b5db57643bc127dd9f6a3232}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a7b364826b5db57643bc127dd9f6a3232}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!assert\+Equal\+By@{assert\+Equal\+By}}
\index{assert\+Equal\+By@{assert\+Equal\+By}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{assert\+Equal\+By()}{assertEqualBy()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+assert\+Equal\+By (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{val\+\_\+func,  }\item[{}]{val,  }\item[{}]{max\+\_\+time }\end{DoxyParamCaption})}



Definition at line 463 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
463     \textcolor{keyword}{def }assertEqualBy(self, val\_func, val, max\_time):
464         start\_time = time.time()
465         \textcolor{keywordflow}{while} val\_func() != val:
466             \textcolor{keyword}{assert} time.time() - start\_time < max\_time, (
467                 \textcolor{stringliteral}{"Value was not attained in specified time, was \{\} rather "}
468                 \textcolor{stringliteral}{"than \{\}"}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(val\_func(), val)
469             )
470             time.sleep(0.1)
471 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a8d0f8ea9d4c7bc39a42474b329bdf4d7}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a8d0f8ea9d4c7bc39a42474b329bdf4d7}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!set\+Up@{set\+Up}}
\index{set\+Up@{set\+Up}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{set\+Up()}{setUp()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+set\+Up (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 420 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
420     \textcolor{keyword}{def }setUp(self):
421         self.fake\_socket = MockSocket()
422         time.sleep(1)
423 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_aaad170d033fb44ca433f8d2e50059fe1}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_aaad170d033fb44ca433f8d2e50059fe1}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!tear\+Down@{tear\+Down}}
\index{tear\+Down@{tear\+Down}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{tear\+Down()}{tearDown()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+tear\+Down (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 424 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
424     \textcolor{keyword}{def }tearDown(self):
425         self.fake\_socket.close()
426 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a47e2a498d0c06fae5f359797705c7eea}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a47e2a498d0c06fae5f359797705c7eea}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown@{test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown}}
\index{test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown@{test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown()}{test\_init\_and\_reg\_shutdown()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test initialization of a socket manager.
\end{DoxyVerb}
 

Definition at line 427 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
427     \textcolor{keyword}{def }test\_init\_and\_reg\_shutdown(self):
428         \textcolor{stringliteral}{"""}
429 \textcolor{stringliteral}{        Test initialization of a socket manager.}
430 \textcolor{stringliteral}{        """}
431         self.assertFalse(self.fake\_socket.connected)
432 
433         \textcolor{comment}{# Callbacks should never trigger during proper setup and shutdown}
434         nop\_called = \textcolor{keyword}{False}
435 
436         \textcolor{keyword}{def }nop(*args):
437             nonlocal nop\_called  \textcolor{comment}{# noqa 999 we don't support py2}
438             nop\_called = \textcolor{keyword}{True}
439 
440         socket\_manager = SocketManager(
441             \textcolor{stringliteral}{'https://127.0.0.1'},
442             self.fake\_socket.port,
443             nop,
444             nop,
445             nop,
446             TASK\_GROUP\_ID\_1,
447             0.3,
448             nop,
449         )
450         self.assertTrue(self.fake\_socket.connected)
451         self.assertFalse(nop\_called)
452 
453         \textcolor{comment}{# Test shutdown}
454         self.assertFalse(self.fake\_socket.disconnected)
455         self.assertFalse(socket\_manager.is\_shutdown)
456         self.assertTrue(socket\_manager.alive)
457         socket\_manager.shutdown()
458         time.sleep(0.3)
459         self.assertTrue(self.fake\_socket.disconnected)
460         self.assertTrue(socket\_manager.is\_shutdown)
461         self.assertFalse(nop\_called)
462 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_af1a377b1111ae9f2678666752e58cdd7}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_af1a377b1111ae9f2678666752e58cdd7}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown@{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown}}
\index{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown@{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown()}{test\_init\_and\_socket\_shutdown()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test initialization of a socket manager with a failed shutdown.
\end{DoxyVerb}
 

Definition at line 472 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
472     \textcolor{keyword}{def }test\_init\_and\_socket\_shutdown(self):
473         \textcolor{stringliteral}{"""}
474 \textcolor{stringliteral}{        Test initialization of a socket manager with a failed shutdown.}
475 \textcolor{stringliteral}{        """}
476         self.assertFalse(self.fake\_socket.connected)
477 
478         \textcolor{comment}{# Callbacks should never trigger during proper setup and shutdown}
479         nop\_called = \textcolor{keyword}{False}
480 
481         \textcolor{keyword}{def }nop(*args):
482             nonlocal nop\_called  \textcolor{comment}{# noqa 999 we don't support py2}
483             nop\_called = \textcolor{keyword}{True}
484 
485         server\_death\_called = \textcolor{keyword}{False}
486 
487         \textcolor{keyword}{def }server\_death(*args):
488             nonlocal server\_death\_called
489             server\_death\_called = \textcolor{keyword}{True}
490 
491         socket\_manager = SocketManager(
492             \textcolor{stringliteral}{'https://127.0.0.1'},
493             self.fake\_socket.port,
494             nop,
495             nop,
496             nop,
497             TASK\_GROUP\_ID\_1,
498             0.4,
499             server\_death,
500         )
501         self.assertTrue(self.fake\_socket.connected)
502         self.assertFalse(nop\_called)
503         self.assertFalse(server\_death\_called)
504 
505         \textcolor{comment}{# Test shutdown}
506         self.assertFalse(self.fake\_socket.disconnected)
507         self.assertFalse(socket\_manager.is\_shutdown)
508         self.assertTrue(socket\_manager.alive)
509         self.fake\_socket.close()
510         self.assertEqualBy(\textcolor{keyword}{lambda}: socket\_manager.alive, \textcolor{keyword}{False}, 8)
511         self.assertEqualBy(\textcolor{keyword}{lambda}: server\_death\_called, \textcolor{keyword}{True}, 20)
512         self.assertFalse(nop\_called)
513         socket\_manager.shutdown()
514 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a9fad20b73bdbba96a862f11a6170db7a}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a9fad20b73bdbba96a862f11a6170db7a}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart@{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart}}
\index{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart@{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart()}{test\_init\_and\_socket\_shutdown\_then\_restart()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test restoring connection to a socket.
\end{DoxyVerb}
 

Definition at line 515 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
515     \textcolor{keyword}{def }test\_init\_and\_socket\_shutdown\_then\_restart(self):
516         \textcolor{stringliteral}{"""}
517 \textcolor{stringliteral}{        Test restoring connection to a socket.}
518 \textcolor{stringliteral}{        """}
519         self.assertFalse(self.fake\_socket.connected)
520 
521         \textcolor{comment}{# Callbacks should never trigger during proper setup and shutdown}
522         nop\_called = \textcolor{keyword}{False}
523 
524         \textcolor{keyword}{def }nop(*args):
525             nonlocal nop\_called  \textcolor{comment}{# noqa 999 we don't support py2}
526             nop\_called = \textcolor{keyword}{True}
527 
528         server\_death\_called = \textcolor{keyword}{False}
529 
530         \textcolor{keyword}{def }server\_death(*args):
531             nonlocal server\_death\_called
532             server\_death\_called = \textcolor{keyword}{True}
533 
534         socket\_manager = SocketManager(
535             \textcolor{stringliteral}{'https://127.0.0.1'},
536             self.fake\_socket.port,
537             nop,
538             nop,
539             nop,
540             TASK\_GROUP\_ID\_1,
541             0.4,
542             server\_death,
543         )
544         self.assertTrue(self.fake\_socket.connected)
545         self.assertFalse(nop\_called)
546         self.assertFalse(server\_death\_called)
547 
548         \textcolor{comment}{# Test shutdown}
549         self.assertFalse(self.fake\_socket.disconnected)
550         self.assertFalse(socket\_manager.is\_shutdown)
551         self.assertTrue(socket\_manager.alive)
552         self.fake\_socket.close()
553         self.assertEqualBy(\textcolor{keyword}{lambda}: socket\_manager.alive, \textcolor{keyword}{False}, 8)
554         self.assertFalse(socket\_manager.alive)
555         self.fake\_socket = MockSocket()
556         self.assertEqualBy(\textcolor{keyword}{lambda}: socket\_manager.alive, \textcolor{keyword}{True}, 4)
557         self.assertFalse(nop\_called)
558         self.assertFalse(server\_death\_called)
559         socket\_manager.shutdown()
560 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a3d9a3b7b099516e150f51b5ecb8b0af3}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a3d9a3b7b099516e150f51b5ecb8b0af3}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!test\+\_\+init\+\_\+world\+\_\+dead@{test\+\_\+init\+\_\+world\+\_\+dead}}
\index{test\+\_\+init\+\_\+world\+\_\+dead@{test\+\_\+init\+\_\+world\+\_\+dead}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{test\+\_\+init\+\_\+world\+\_\+dead()}{test\_init\_world\_dead()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+test\+\_\+init\+\_\+world\+\_\+dead (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test initialization of a socket manager with a failed startup.
\end{DoxyVerb}
 

Definition at line 561 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
561     \textcolor{keyword}{def }test\_init\_world\_dead(self):
562         \textcolor{stringliteral}{"""}
563 \textcolor{stringliteral}{        Test initialization of a socket manager with a failed startup.}
564 \textcolor{stringliteral}{        """}
565         self.assertFalse(self.fake\_socket.connected)
566         self.fake\_socket.close()
567 
568         \textcolor{comment}{# Callbacks should never trigger during proper setup and shutdown}
569         nop\_called = \textcolor{keyword}{False}
570 
571         \textcolor{keyword}{def }nop(*args):
572             nonlocal nop\_called  \textcolor{comment}{# noqa 999 we don't support py2}
573             nop\_called = \textcolor{keyword}{True}
574 
575         server\_death\_called = \textcolor{keyword}{False}
576 
577         \textcolor{keyword}{def }server\_death(*args):
578             nonlocal server\_death\_called
579             server\_death\_called = \textcolor{keyword}{True}
580 
581         with self.assertRaises(ConnectionRefusedError):
582             socket\_manager = SocketManager(
583                 \textcolor{stringliteral}{'https://127.0.0.1'},
584                 self.fake\_socket.port,
585                 nop,
586                 nop,
587                 nop,
588                 TASK\_GROUP\_ID\_1,
589                 0.4,
590                 server\_death,
591             )
592             self.assertIsNone(socket\_manager)
593 
594         self.assertFalse(nop\_called)
595         self.assertTrue(server\_death\_called)
596 
597 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a893ca3bf863d009293aa75b4c574c718}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a893ca3bf863d009293aa75b4c574c718}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!fake\+\_\+socket@{fake\+\_\+socket}}
\index{fake\+\_\+socket@{fake\+\_\+socket}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{fake\+\_\+socket}{fake\_socket}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+fake\+\_\+socket}



Definition at line 421 of file test\+\_\+socket\+\_\+manager.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/core/dev/test/\hyperlink{dev_2test_2test__socket__manager_8py}{test\+\_\+socket\+\_\+manager.\+py}\end{DoxyCompactItemize}
