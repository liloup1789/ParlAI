\hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling}{}\section{parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling Class Reference}
\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling}\index{parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling@{parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling}}


Inheritance diagram for parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{d5/d6f/classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{d3/d8e/classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a7e5074f665782799e088ae7328d62439}{on\+\_\+alive} (self, packet)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a01ca2d8b51911eb2e930dd44cdae1185}{on\+\_\+message} (self, packet)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a73cd339bf49a155ecef810eb881bac47}{on\+\_\+worker\+\_\+death} (self, worker\+\_\+id, assignment\+\_\+id)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_aa370a7cf8fc2cb4180cf28a06b057d5b}{on\+\_\+server\+\_\+death} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a71020e0de3b257e6d1311cfe447b0b2f}{assert\+Equal\+By} (self, val\+\_\+func, val, max\+\_\+time)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a822b338ce726dcf695ef59db4498ab28}{set\+Up} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a6ac379f0b0dc0303890f13ffb0dd4364}{tear\+Down} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a36cf33c02aa479dd6147c0912462e6f2}{test\+\_\+alive\+\_\+send\+\_\+and\+\_\+disconnect} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_ad2bf1b1103fedce7f180ecb9ca3819a6}{test\+\_\+one\+\_\+agent\+\_\+disconnect\+\_\+other\+\_\+alive} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a50921bd46b7a75539519abdec05b272d}{alive\+\_\+packet}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_ada834531ef21ca05a61d4742d03795f4}{message\+\_\+packet}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_aa580dd35ffd8cb2347bf7ca777fe6f0b}{dead\+\_\+worker\+\_\+id}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_afa362bc16ba31c2b65e4e1d205edaba9}{dead\+\_\+assignment\+\_\+id}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a0580eca17e4f94732f6c2ef435c0b51f}{server\+\_\+died}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a0041fd7fb83462822fc3b24f0347f35a}{fake\+\_\+socket}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a9c9d98057f1a20cff25bea106edcddb6}{agent1}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a5499674a391613c550e6b951b068a4b1}{agent2}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_ac83ba21d89c971b4419daca7382cacbe}{socket\+\_\+manager}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Test sending messages to the world and then to each of two agents, along with
failure cases for each.
\end{DoxyVerb}
 

Definition at line 787 of file test\+\_\+socket\+\_\+manager.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a71020e0de3b257e6d1311cfe447b0b2f}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a71020e0de3b257e6d1311cfe447b0b2f}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!assert\+Equal\+By@{assert\+Equal\+By}}
\index{assert\+Equal\+By@{assert\+Equal\+By}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{assert\+Equal\+By()}{assertEqualBy()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+assert\+Equal\+By (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{val\+\_\+func,  }\item[{}]{val,  }\item[{}]{max\+\_\+time }\end{DoxyParamCaption})}



Definition at line 807 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
807     \textcolor{keyword}{def }assertEqualBy(self, val\_func, val, max\_time):
808         start\_time = time.time()
809         \textcolor{keywordflow}{while} val\_func() != val:
810             \textcolor{keyword}{assert} (
811                 time.time() - start\_time < max\_time
812             ), \textcolor{stringliteral}{"Value was not attained in specified time"}
813             time.sleep(0.1)
814 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a7e5074f665782799e088ae7328d62439}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a7e5074f665782799e088ae7328d62439}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!on\+\_\+alive@{on\+\_\+alive}}
\index{on\+\_\+alive@{on\+\_\+alive}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{on\+\_\+alive()}{on\_alive()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+on\+\_\+alive (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{packet }\end{DoxyParamCaption})}



Definition at line 793 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
793     \textcolor{keyword}{def }on\_alive(self, packet):
794         self.alive\_packet = packet
795         self.socket\_manager.open\_channel(packet.sender\_id, packet.assignment\_id)
796 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a01ca2d8b51911eb2e930dd44cdae1185}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a01ca2d8b51911eb2e930dd44cdae1185}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!on\+\_\+message@{on\+\_\+message}}
\index{on\+\_\+message@{on\+\_\+message}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{on\+\_\+message()}{on\_message()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+on\+\_\+message (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{packet }\end{DoxyParamCaption})}



Definition at line 797 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
797     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1browser__chat_1_1client_a01c1536b48e2f5badd2fe58ea02b9a5c}{on\_message}(self, packet):
798         self.message\_packet = packet
799 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_aa370a7cf8fc2cb4180cf28a06b057d5b}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_aa370a7cf8fc2cb4180cf28a06b057d5b}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!on\+\_\+server\+\_\+death@{on\+\_\+server\+\_\+death}}
\index{on\+\_\+server\+\_\+death@{on\+\_\+server\+\_\+death}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{on\+\_\+server\+\_\+death()}{on\_server\_death()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+on\+\_\+server\+\_\+death (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 804 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
804     \textcolor{keyword}{def }on\_server\_death(self):
805         self.server\_died = \textcolor{keyword}{True}
806 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a73cd339bf49a155ecef810eb881bac47}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a73cd339bf49a155ecef810eb881bac47}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!on\+\_\+worker\+\_\+death@{on\+\_\+worker\+\_\+death}}
\index{on\+\_\+worker\+\_\+death@{on\+\_\+worker\+\_\+death}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{on\+\_\+worker\+\_\+death()}{on\_worker\_death()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+on\+\_\+worker\+\_\+death (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{worker\+\_\+id,  }\item[{}]{assignment\+\_\+id }\end{DoxyParamCaption})}



Definition at line 800 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
800     \textcolor{keyword}{def }on\_worker\_death(self, worker\_id, assignment\_id):
801         self.dead\_worker\_id = worker\_id
802         self.dead\_assignment\_id = assignment\_id
803 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a822b338ce726dcf695ef59db4498ab28}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a822b338ce726dcf695ef59db4498ab28}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!set\+Up@{set\+Up}}
\index{set\+Up@{set\+Up}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{set\+Up()}{setUp()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+set\+Up (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 815 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
815     \textcolor{keyword}{def }setUp(self):
816         self.fake\_socket = MockSocket()
817         time.sleep(0.3)
818         self.agent1 = MockAgent(
819             TEST\_HIT\_ID\_1, TEST\_ASSIGNMENT\_ID\_1, TEST\_WORKER\_ID\_1, TASK\_GROUP\_ID\_1
820         )
821         self.agent2 = MockAgent(
822             TEST\_HIT\_ID\_2, TEST\_ASSIGNMENT\_ID\_2, TEST\_WORKER\_ID\_2, TASK\_GROUP\_ID\_1
823         )
824         self.alive\_packet = \textcolor{keywordtype}{None}
825         self.message\_packet = \textcolor{keywordtype}{None}
826         self.dead\_worker\_id = \textcolor{keywordtype}{None}
827         self.dead\_assignment\_id = \textcolor{keywordtype}{None}
828         self.server\_died = \textcolor{keyword}{False}
829 
830         self.socket\_manager = SocketManager(
831             \textcolor{stringliteral}{'https://127.0.0.1'},
832             3030,
833             self.on\_alive,
834             self.on\_message,
835             self.on\_worker\_death,
836             TASK\_GROUP\_ID\_1,
837             1,
838             self.on\_server\_death,
839         )
840 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a6ac379f0b0dc0303890f13ffb0dd4364}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a6ac379f0b0dc0303890f13ffb0dd4364}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!tear\+Down@{tear\+Down}}
\index{tear\+Down@{tear\+Down}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{tear\+Down()}{tearDown()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+tear\+Down (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 841 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
841     \textcolor{keyword}{def }tearDown(self):
842         self.socket\_manager.shutdown()
843         self.fake\_socket.close()
844 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a36cf33c02aa479dd6147c0912462e6f2}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a36cf33c02aa479dd6147c0912462e6f2}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!test\+\_\+alive\+\_\+send\+\_\+and\+\_\+disconnect@{test\+\_\+alive\+\_\+send\+\_\+and\+\_\+disconnect}}
\index{test\+\_\+alive\+\_\+send\+\_\+and\+\_\+disconnect@{test\+\_\+alive\+\_\+send\+\_\+and\+\_\+disconnect}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{test\+\_\+alive\+\_\+send\+\_\+and\+\_\+disconnect()}{test\_alive\_send\_and\_disconnect()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+test\+\_\+alive\+\_\+send\+\_\+and\+\_\+disconnect (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 845 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
845     \textcolor{keyword}{def }test\_alive\_send\_and\_disconnect(self):
846         message\_packet = \textcolor{keywordtype}{None}
847 
848         \textcolor{keyword}{def }on\_msg(*args):
849             nonlocal message\_packet
850             message\_packet = args[0]
851 
852         self.agent1.register\_to\_socket(self.fake\_socket, on\_msg)
853         self.assertIsNone(message\_packet)
854 
855         \textcolor{comment}{# Assert alive is registered}
856         alive\_id = self.agent1.send\_alive()
857         self.assertIsNone(message\_packet)
858         self.assertIsNone(self.message\_packet)
859         self.assertEqualBy(\textcolor{keyword}{lambda}: self.alive\_packet \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}, \textcolor{keyword}{False}, 8)
860         self.assertEqual(self.alive\_packet.id, alive\_id)
861 
862         \textcolor{comment}{# Test message send from agent}
863         test\_message\_text\_1 = \textcolor{stringliteral}{'test\_message\_text\_1'}
864         msg\_id = self.agent1.send\_message(test\_message\_text\_1)
865         self.assertEqualBy(\textcolor{keyword}{lambda}: self.message\_packet \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}, \textcolor{keyword}{False}, 8)
866         self.assertEqual(self.message\_packet.id, msg\_id)
867         self.assertEqual(self.message\_packet.data[\textcolor{stringliteral}{'text'}], test\_message\_text\_1)
868 
869         \textcolor{comment}{# Test message send to agent}
870         manager\_message\_id = \textcolor{stringliteral}{'message\_id\_from\_manager'}
871         test\_message\_text\_2 = \textcolor{stringliteral}{'test\_message\_text\_2'}
872         message\_send\_packet = Packet(
873             manager\_message\_id,
874             data\_model.MESSAGE\_BATCH,
875             self.socket\_manager.get\_my\_sender\_id(),
876             TEST\_WORKER\_ID\_1,
877             TEST\_ASSIGNMENT\_ID\_1,
878             test\_message\_text\_2,
879             \textcolor{stringliteral}{'t2'},
880         )
881         self.socket\_manager.queue\_packet(message\_send\_packet)
882         self.assertEqualBy(\textcolor{keyword}{lambda}: message\_packet \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}, \textcolor{keyword}{False}, 8)
883         self.assertEqual(message\_packet.id, manager\_message\_id)
884         self.assertEqual(message\_packet.data, test\_message\_text\_2)
885         self.assertIn(manager\_message\_id, self.socket\_manager.packet\_map)
886 
887         \textcolor{comment}{# Test agent disconnect}
888         self.agent1.send\_disconnect()
889         self.assertEqualBy(\textcolor{keyword}{lambda}: self.dead\_worker\_id, TEST\_WORKER\_ID\_1, 8)
890         self.assertEqual(self.dead\_assignment\_id, TEST\_ASSIGNMENT\_ID\_1)
891 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_ad2bf1b1103fedce7f180ecb9ca3819a6}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_ad2bf1b1103fedce7f180ecb9ca3819a6}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!test\+\_\+one\+\_\+agent\+\_\+disconnect\+\_\+other\+\_\+alive@{test\+\_\+one\+\_\+agent\+\_\+disconnect\+\_\+other\+\_\+alive}}
\index{test\+\_\+one\+\_\+agent\+\_\+disconnect\+\_\+other\+\_\+alive@{test\+\_\+one\+\_\+agent\+\_\+disconnect\+\_\+other\+\_\+alive}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{test\+\_\+one\+\_\+agent\+\_\+disconnect\+\_\+other\+\_\+alive()}{test\_one\_agent\_disconnect\_other\_alive()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+test\+\_\+one\+\_\+agent\+\_\+disconnect\+\_\+other\+\_\+alive (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 892 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
892     \textcolor{keyword}{def }test\_one\_agent\_disconnect\_other\_alive(self):
893         message\_packet = \textcolor{keywordtype}{None}
894 
895         \textcolor{keyword}{def }on\_msg(*args):
896             nonlocal message\_packet
897             message\_packet = args[0]
898 
899         self.agent1.register\_to\_socket(self.fake\_socket, on\_msg)
900         self.agent2.register\_to\_socket(self.fake\_socket, on\_msg)
901         self.assertIsNone(message\_packet)
902 
903         \textcolor{comment}{# Assert alive is registered}
904         self.agent1.send\_alive()
905         self.agent2.send\_alive()
906         self.assertIsNone(message\_packet)
907 
908         \textcolor{comment}{# Kill second agent}
909         self.agent2.send\_disconnect()
910         self.assertEqualBy(\textcolor{keyword}{lambda}: self.dead\_worker\_id, TEST\_WORKER\_ID\_2, 8)
911         self.assertEqual(self.dead\_assignment\_id, TEST\_ASSIGNMENT\_ID\_2)
912 
913         \textcolor{comment}{# Run rest of tests}
914 
915         \textcolor{comment}{# Test message send from agent}
916         test\_message\_text\_1 = \textcolor{stringliteral}{'test\_message\_text\_1'}
917         msg\_id = self.agent1.send\_message(test\_message\_text\_1)
918         self.assertEqualBy(\textcolor{keyword}{lambda}: self.message\_packet \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}, \textcolor{keyword}{False}, 8)
919         self.assertEqual(self.message\_packet.id, msg\_id)
920         self.assertEqual(self.message\_packet.data[\textcolor{stringliteral}{'text'}], test\_message\_text\_1)
921 
922         \textcolor{comment}{# Test message send to agent}
923         manager\_message\_id = \textcolor{stringliteral}{'message\_id\_from\_manager'}
924         test\_message\_text\_2 = \textcolor{stringliteral}{'test\_message\_text\_2'}
925         message\_send\_packet = Packet(
926             manager\_message\_id,
927             data\_model.WORLD\_MESSAGE,
928             self.socket\_manager.get\_my\_sender\_id(),
929             TEST\_WORKER\_ID\_1,
930             TEST\_ASSIGNMENT\_ID\_1,
931             test\_message\_text\_2,
932             \textcolor{stringliteral}{'t2'},
933         )
934         self.socket\_manager.queue\_packet(message\_send\_packet)
935         self.assertEqualBy(\textcolor{keyword}{lambda}: message\_packet \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}, \textcolor{keyword}{False}, 8)
936         self.assertEqual(message\_packet.id, manager\_message\_id)
937         self.assertEqual(message\_packet.data, test\_message\_text\_2)
938         self.assertIn(manager\_message\_id, self.socket\_manager.packet\_map)
939 
940         \textcolor{comment}{# Test agent disconnect}
941         self.agent1.send\_disconnect()
942         self.assertEqualBy(\textcolor{keyword}{lambda}: self.dead\_worker\_id, TEST\_WORKER\_ID\_1, 8)
943         self.assertEqual(self.dead\_assignment\_id, TEST\_ASSIGNMENT\_ID\_1)
944 
945 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a9c9d98057f1a20cff25bea106edcddb6}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a9c9d98057f1a20cff25bea106edcddb6}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!agent1@{agent1}}
\index{agent1@{agent1}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{agent1}{agent1}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+agent1}



Definition at line 818 of file test\+\_\+socket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a5499674a391613c550e6b951b068a4b1}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a5499674a391613c550e6b951b068a4b1}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!agent2@{agent2}}
\index{agent2@{agent2}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{agent2}{agent2}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+agent2}



Definition at line 821 of file test\+\_\+socket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a50921bd46b7a75539519abdec05b272d}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a50921bd46b7a75539519abdec05b272d}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!alive\+\_\+packet@{alive\+\_\+packet}}
\index{alive\+\_\+packet@{alive\+\_\+packet}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{alive\+\_\+packet}{alive\_packet}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+alive\+\_\+packet}



Definition at line 794 of file test\+\_\+socket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_afa362bc16ba31c2b65e4e1d205edaba9}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_afa362bc16ba31c2b65e4e1d205edaba9}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!dead\+\_\+assignment\+\_\+id@{dead\+\_\+assignment\+\_\+id}}
\index{dead\+\_\+assignment\+\_\+id@{dead\+\_\+assignment\+\_\+id}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{dead\+\_\+assignment\+\_\+id}{dead\_assignment\_id}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+dead\+\_\+assignment\+\_\+id}



Definition at line 802 of file test\+\_\+socket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_aa580dd35ffd8cb2347bf7ca777fe6f0b}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_aa580dd35ffd8cb2347bf7ca777fe6f0b}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!dead\+\_\+worker\+\_\+id@{dead\+\_\+worker\+\_\+id}}
\index{dead\+\_\+worker\+\_\+id@{dead\+\_\+worker\+\_\+id}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{dead\+\_\+worker\+\_\+id}{dead\_worker\_id}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+dead\+\_\+worker\+\_\+id}



Definition at line 801 of file test\+\_\+socket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a0041fd7fb83462822fc3b24f0347f35a}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a0041fd7fb83462822fc3b24f0347f35a}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!fake\+\_\+socket@{fake\+\_\+socket}}
\index{fake\+\_\+socket@{fake\+\_\+socket}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{fake\+\_\+socket}{fake\_socket}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+fake\+\_\+socket}



Definition at line 816 of file test\+\_\+socket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_ada834531ef21ca05a61d4742d03795f4}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_ada834531ef21ca05a61d4742d03795f4}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!message\+\_\+packet@{message\+\_\+packet}}
\index{message\+\_\+packet@{message\+\_\+packet}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{message\+\_\+packet}{message\_packet}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+message\+\_\+packet}



Definition at line 798 of file test\+\_\+socket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a0580eca17e4f94732f6c2ef435c0b51f}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_a0580eca17e4f94732f6c2ef435c0b51f}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!server\+\_\+died@{server\+\_\+died}}
\index{server\+\_\+died@{server\+\_\+died}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{server\+\_\+died}{server\_died}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+server\+\_\+died}



Definition at line 805 of file test\+\_\+socket\+\_\+manager.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_ac83ba21d89c971b4419daca7382cacbe}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__socket__manager_1_1TestSocketManagerMessageHandling_ac83ba21d89c971b4419daca7382cacbe}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}!socket\+\_\+manager@{socket\+\_\+manager}}
\index{socket\+\_\+manager@{socket\+\_\+manager}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Message\+Handling}}
\subsubsection{\texorpdfstring{socket\+\_\+manager}{socket\_manager}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Message\+Handling.\+socket\+\_\+manager}



Definition at line 830 of file test\+\_\+socket\+\_\+manager.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/core/dev/test/\hyperlink{dev_2test_2test__socket__manager_8py}{test\+\_\+socket\+\_\+manager.\+py}\end{DoxyCompactItemize}
