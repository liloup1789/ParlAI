\hypertarget{classlight__chats_1_1graph_1_1GraphFunction}{}\section{light\+\_\+chats.\+graph.\+Graph\+Function Class Reference}
\label{classlight__chats_1_1graph_1_1GraphFunction}\index{light\+\_\+chats.\+graph.\+Graph\+Function@{light\+\_\+chats.\+graph.\+Graph\+Function}}


Inheritance diagram for light\+\_\+chats.\+graph.\+Graph\+Function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d6/d3e/classlight__chats_1_1graph_1_1GraphFunction__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for light\+\_\+chats.\+graph.\+Graph\+Function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{d0/d69/classlight__chats_1_1graph_1_1GraphFunction__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_afcb6dd9e771c4db34f5af22588e6190e}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, function\+\_\+name, \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a2d40c8aa5303afce9e93be14593fca78}{possible\+\_\+arg\+\_\+nums}, \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a20251500fbafb95c381e0c0bf9f37376}{arg\+\_\+split\+\_\+words}, \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a6845a255ccdfcaa58debca3157f7adb7}{arg\+\_\+find\+\_\+type}, \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a88e5637deee00b7f2f5d682afea0e85d}{arg\+\_\+constraints}, \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a46da34454c8776f43d4102c74a650334}{func\+\_\+constraints}, \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a5fc1640403f59d0358e1dccea3682487}{callback\+\_\+triggers})
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a8ac297dcadb1e5ec360f55f293dcbfcb}{valid\+\_\+args} (self, graph, args)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a21e2dd1c8eb431b3ee22cce4853e3c15}{handle} (self, graph, args)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a9fd67b8cadf1f9be60d4885d21287518}{func} (self, graph, args)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a8828c59ad0d9f53bfb2234f0b8b37377}{get\+\_\+action\+\_\+observation\+\_\+format} (self, action, descs)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_ab20674b5c6c05a6c5188e51bc991717f}{get\+\_\+failure\+\_\+action} (self, graph, args, spec\+\_\+fail=\textquotesingle{}failed\textquotesingle{})
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a9c89db357c2eb4c4833d7f975df2e85d}{get\+\_\+find\+\_\+fail\+\_\+text} (self, arg\+\_\+idx)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a4ffab7ed0e956a6bc76e3f61818ab5ff}{get\+\_\+improper\+\_\+args\+\_\+text} (self, num\+\_\+args)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a2110ae09489d9ebc9291a1fd39d8c4cd}{evaluate\+\_\+constraint\+\_\+set} (self, graph, args, constraints)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_af627ff84086a094b84da04e30a97779e}{check\+\_\+possibilites\+\_\+vs\+\_\+constraints} (self, graph, output\+\_\+args, arg\+\_\+idx, possible\+\_\+ids)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a3b6764b365baf7471e53651adf83706b}{parse\+\_\+text\+\_\+to\+\_\+args} (self, graph, actor\+\_\+id, text)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a9769b13542f28f04977e374057bbc017}{try\+\_\+callback\+\_\+override\+\_\+args} (self, graph, args)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a33a25a071385ffbd0a222cab65c543d4}{parse\+\_\+descs\+\_\+to\+\_\+args\+\_\+helper} (self, graph, args, output\+\_\+args, arg\+\_\+find\+\_\+idx=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a8b76e8a8bb07f75abd081e220683dbd4}{parse\+\_\+descs\+\_\+to\+\_\+args} (self, graph, args)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a6fb123ff0ec87dde23a5ce8a1614bbbe}{get\+\_\+name} (self)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a0994341bec72be122101ce59da936882}{get\+\_\+canonical\+\_\+form} (self, graph, args)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1GraphFunction_aa7929e44e5afafd4d27418c7fe5a2fe0}{get\+\_\+reverse} (self, graph, args)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlight__chats_1_1graph_1_1GraphFunction_afb7e1d1d49ff540be034f685f4d1e337}{name}
\item 
\hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a2d40c8aa5303afce9e93be14593fca78}{possible\+\_\+arg\+\_\+nums}
\item 
\hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a20251500fbafb95c381e0c0bf9f37376}{arg\+\_\+split\+\_\+words}
\item 
\hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a6845a255ccdfcaa58debca3157f7adb7}{arg\+\_\+find\+\_\+type}
\item 
\hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a88e5637deee00b7f2f5d682afea0e85d}{arg\+\_\+constraints}
\item 
\hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a46da34454c8776f43d4102c74a650334}{func\+\_\+constraints}
\item 
\hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a5fc1640403f59d0358e1dccea3682487}{callback\+\_\+triggers}
\item 
\hyperlink{classlight__chats_1_1graph_1_1GraphFunction_aa5b75544ede241f8635e4d6c99ed6a3b}{formats}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlight__chats_1_1graph_1_1GraphFunction_a40c1214e286a5c8ca375aae48bf36d89}{format\+\_\+observation}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Initial description of function should only contain what the arguments are as set up
by init, establishing a number to type relationship like:

[Actor, item actor is carrying, container in same room as actor]
\end{DoxyVerb}
 

Definition at line 87 of file graph.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_afcb6dd9e771c4db34f5af22588e6190e}\label{classlight__chats_1_1graph_1_1GraphFunction_afcb6dd9e771c4db34f5af22588e6190e}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{function\+\_\+name,  }\item[{}]{possible\+\_\+arg\+\_\+nums,  }\item[{}]{arg\+\_\+split\+\_\+words,  }\item[{}]{arg\+\_\+find\+\_\+type,  }\item[{}]{arg\+\_\+constraints,  }\item[{}]{func\+\_\+constraints,  }\item[{}]{callback\+\_\+triggers }\end{DoxyParamCaption})}

\begin{DoxyVerb}Create a new graph function
args:
function name - name or array of aliases for the function
possible_arg_nums - number or array of valid arg numbers for
    determining if given args are valid or for breaking text into
    a valid number of arguments before they're parsed into descs
arg_split_words - array of words to be used to split input args
arg_find_type - array of args for desc_to_nodes to use to find the
    argument at the given index, following the form
    {'type': <search type>, 'from': <arg idx of reference>}. If a
    list is given for each argument use the same element for each
arg_constraints - constraints on whether or not found arguments are
    valid to be matched during the parsing step. Form is array of
    arrays of constraint types
func_constraints - constraints on whether a function will pass with
    the given args, format is array of constraint types
callback_triggers - callback hook names and argument idxs for making
    calls to callback functions upon completion of this function call
\end{DoxyVerb}
 

Definition at line 104 of file graph.\+py.


\begin{DoxyCode}
104     ):
105         \textcolor{stringliteral}{"""Create a new graph function}
106 \textcolor{stringliteral}{        args:}
107 \textcolor{stringliteral}{        function name - name or array of aliases for the function}
108 \textcolor{stringliteral}{        possible\_arg\_nums - number or array of valid arg numbers for}
109 \textcolor{stringliteral}{            determining if given args are valid or for breaking text into}
110 \textcolor{stringliteral}{            a valid number of arguments before they're parsed into descs}
111 \textcolor{stringliteral}{        arg\_split\_words - array of words to be used to split input args}
112 \textcolor{stringliteral}{        arg\_find\_type - array of args for desc\_to\_nodes to use to find the}
113 \textcolor{stringliteral}{            argument at the given index, following the form}
114 \textcolor{stringliteral}{            \{'type': <search type>, 'from': <arg idx of reference>\}. If a}
115 \textcolor{stringliteral}{            list is given for each argument use the same element for each}
116 \textcolor{stringliteral}{        arg\_constraints - constraints on whether or not found arguments are}
117 \textcolor{stringliteral}{            valid to be matched during the parsing step. Form is array of}
118 \textcolor{stringliteral}{            arrays of constraint types}
119 \textcolor{stringliteral}{        func\_constraints - constraints on whether a function will pass with}
120 \textcolor{stringliteral}{            the given args, format is array of constraint types}
121 \textcolor{stringliteral}{        callback\_triggers - callback hook names and argument idxs for making}
122 \textcolor{stringliteral}{            calls to callback functions upon completion of this function call}
123 \textcolor{stringliteral}{        """}
124         self.name = function\_name
125         self.possible\_arg\_nums = possible\_arg\_nums
126         self.arg\_split\_words = arg\_split\_words
127         self.arg\_find\_type = arg\_find\_type
128         self.arg\_constraints = arg\_constraints
129         self.func\_constraints = func\_constraints
130         self.callback\_triggers = callback\_triggers
131         self.formats = \{\textcolor{stringliteral}{'failed'}: \textcolor{stringliteral}{'\{1\} couldn\(\backslash\)'t do that'}\}
132 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_af627ff84086a094b84da04e30a97779e}\label{classlight__chats_1_1graph_1_1GraphFunction_af627ff84086a094b84da04e30a97779e}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!check\+\_\+possibilites\+\_\+vs\+\_\+constraints@{check\+\_\+possibilites\+\_\+vs\+\_\+constraints}}
\index{check\+\_\+possibilites\+\_\+vs\+\_\+constraints@{check\+\_\+possibilites\+\_\+vs\+\_\+constraints}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{check\+\_\+possibilites\+\_\+vs\+\_\+constraints()}{check\_possibilites\_vs\_constraints()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+check\+\_\+possibilites\+\_\+vs\+\_\+constraints (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{output\+\_\+args,  }\item[{}]{arg\+\_\+idx,  }\item[{}]{possible\+\_\+ids }\end{DoxyParamCaption})}

\begin{DoxyVerb}Iterate through the given possible ids for a particular arg index and see if any
match all the constraints for that argument.

Returns (True, valid_ID) on success Returns (False, violator_action) on failure
\end{DoxyVerb}
 

Definition at line 254 of file graph.\+py.


\begin{DoxyCode}
254     ):
255         \textcolor{stringliteral}{"""}
256 \textcolor{stringliteral}{        Iterate through the given possible ids for a particular arg index and see if any}
257 \textcolor{stringliteral}{        match all the constraints for that argument.}
258 \textcolor{stringliteral}{}
259 \textcolor{stringliteral}{        Returns (True, valid\_ID) on success Returns (False, violator\_action) on failure}
260 \textcolor{stringliteral}{        """}
261         constraints = self.arg\_constraints[arg\_idx]
262         most\_constraints = -1
263         final\_failure\_action = \textcolor{keywordtype}{None}
264         \textcolor{keywordflow}{for} pos\_id \textcolor{keywordflow}{in} possible\_ids:
265             output\_args[arg\_idx] = pos\_id
266             success, cons\_passed, failure\_action = self.evaluate\_constraint\_set(
267                 graph, output\_args, constraints
268             )
269             \textcolor{keywordflow}{if} success:
270                 \textcolor{keywordflow}{return} \textcolor{keyword}{True}, pos\_id
271             \textcolor{keywordflow}{else}:
272                 output\_args[arg\_idx] = \textcolor{keywordtype}{None}
273                 \textcolor{keywordflow}{if} cons\_passed > most\_constraints:
274                     most\_constraints = cons\_passed
275                     final\_failure\_action = failure\_action
276         \textcolor{keywordflow}{return} \textcolor{keyword}{False}, final\_failure\_action
277 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a2110ae09489d9ebc9291a1fd39d8c4cd}\label{classlight__chats_1_1graph_1_1GraphFunction_a2110ae09489d9ebc9291a1fd39d8c4cd}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!evaluate\+\_\+constraint\+\_\+set@{evaluate\+\_\+constraint\+\_\+set}}
\index{evaluate\+\_\+constraint\+\_\+set@{evaluate\+\_\+constraint\+\_\+set}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{evaluate\+\_\+constraint\+\_\+set()}{evaluate\_constraint\_set()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+evaluate\+\_\+constraint\+\_\+set (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{args,  }\item[{}]{constraints }\end{DoxyParamCaption})}

\begin{DoxyVerb}Check a particular set of arguments against the given constraints returns (True,
cons_passed, None) if the constraints all pass returns (False, cons_passed,
failure_action) if any constraint fails.
\end{DoxyVerb}
 

Definition at line 229 of file graph.\+py.


\begin{DoxyCode}
229     \textcolor{keyword}{def }evaluate\_constraint\_set(self, graph, args, constraints):
230         \textcolor{stringliteral}{"""}
231 \textcolor{stringliteral}{        Check a particular set of arguments against the given constraints returns (True,}
232 \textcolor{stringliteral}{        cons\_passed, None) if the constraints all pass returns (False, cons\_passed,}
233 \textcolor{stringliteral}{        failure\_action) if any constraint fails.}
234 \textcolor{stringliteral}{        """}
235         cons\_passed = 0
236         failure\_action = \textcolor{keywordtype}{None}
237         \textcolor{keywordflow}{for} constraint \textcolor{keywordflow}{in} constraints:
238             con\_args = [args[i] \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} ([0] + constraint[\textcolor{stringliteral}{'in\_args'}])]
239             con\_args += constraint[\textcolor{stringliteral}{'args'}]
240             con\_obj = CONSTRAINTS[constraint[\textcolor{stringliteral}{'type'}]]
241             \textcolor{keywordflow}{if} con\_obj.evaluate\_constraint(graph, con\_args):
242                 cons\_passed += 1
243             \textcolor{keywordflow}{else}:
244                 spec\_fail = constraint.get(\textcolor{stringliteral}{'spec\_fail'}, \textcolor{stringliteral}{'failed'})
245                 failure\_action = con\_obj.get\_failure\_action(graph, con\_args, spec\_fail)
246                 \textcolor{keywordflow}{break}
247         \textcolor{keywordflow}{if} failure\_action \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
248             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, cons\_passed, \textcolor{keywordtype}{None}
249         \textcolor{keywordflow}{else}:
250             \textcolor{keywordflow}{return} \textcolor{keyword}{False}, cons\_passed, failure\_action
251 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a9fd67b8cadf1f9be60d4885d21287518}\label{classlight__chats_1_1graph_1_1GraphFunction_a9fd67b8cadf1f9be60d4885d21287518}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!func@{func}}
\index{func@{func}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{func()}{func()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+func (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{args }\end{DoxyParamCaption})}

\begin{DoxyVerb}Execute action on the given graph
Notation for documentation should be in the form of an action with <>'s
around the incoming arguments in the order they are passed in. Optional
arguments can be denoted by putting the clause in []'s.
ex:
<Actor> does thing with <object> [and other <object>]
\end{DoxyVerb}
 

Definition at line 185 of file graph.\+py.


\begin{DoxyCode}
185     \textcolor{keyword}{def }func(self, graph, args):
186         \textcolor{stringliteral}{"""}
187 \textcolor{stringliteral}{        Execute action on the given graph}
188 \textcolor{stringliteral}{        Notation for documentation should be in the form of an action with <>'s}
189 \textcolor{stringliteral}{        around the incoming arguments in the order they are passed in. Optional}
190 \textcolor{stringliteral}{        arguments can be denoted by putting the clause in []'s.}
191 \textcolor{stringliteral}{        ex:}
192 \textcolor{stringliteral}{        <Actor> does thing with <object> [and other <object>]}
193 \textcolor{stringliteral}{        """}
194         \textcolor{keywordflow}{raise} NotImplementedError
195 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a8828c59ad0d9f53bfb2234f0b8b37377}\label{classlight__chats_1_1graph_1_1GraphFunction_a8828c59ad0d9f53bfb2234f0b8b37377}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!get\+\_\+action\+\_\+observation\+\_\+format@{get\+\_\+action\+\_\+observation\+\_\+format}}
\index{get\+\_\+action\+\_\+observation\+\_\+format@{get\+\_\+action\+\_\+observation\+\_\+format}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{get\+\_\+action\+\_\+observation\+\_\+format()}{get\_action\_observation\_format()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+get\+\_\+action\+\_\+observation\+\_\+format (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{action,  }\item[{}]{descs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Given the action, return text to be filled by the parsed args Allowed to alter
the descriptions if necessary Allowed to use the descriptions to determine the
correct format as well.
\end{DoxyVerb}
 

Definition at line 196 of file graph.\+py.


\begin{DoxyCode}
196     \textcolor{keyword}{def }get\_action\_observation\_format(self, action, descs):
197         \textcolor{stringliteral}{"""}
198 \textcolor{stringliteral}{        Given the action, return text to be filled by the parsed args Allowed to alter}
199 \textcolor{stringliteral}{        the descriptions if necessary Allowed to use the descriptions to determine the}
200 \textcolor{stringliteral}{        correct format as well.}
201 \textcolor{stringliteral}{        """}
202         \textcolor{keywordflow}{if} action[\textcolor{stringliteral}{'name'}] \textcolor{keywordflow}{in} self.formats:
203             \textcolor{keywordflow}{return} self.formats[action[\textcolor{stringliteral}{'name'}]]
204         \textcolor{keywordflow}{raise} NotImplementedError
205 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a0994341bec72be122101ce59da936882}\label{classlight__chats_1_1graph_1_1GraphFunction_a0994341bec72be122101ce59da936882}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!get\+\_\+canonical\+\_\+form@{get\+\_\+canonical\+\_\+form}}
\index{get\+\_\+canonical\+\_\+form@{get\+\_\+canonical\+\_\+form}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{get\+\_\+canonical\+\_\+form()}{get\_canonical\_form()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+get\+\_\+canonical\+\_\+form (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{args }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get canonical form for the given args on this function.
\end{DoxyVerb}
 

Definition at line 447 of file graph.\+py.


\begin{DoxyCode}
447     \textcolor{keyword}{def }get\_canonical\_form(self, graph, args):
448         \textcolor{stringliteral}{"""}
449 \textcolor{stringliteral}{        Get canonical form for the given args on this function.}
450 \textcolor{stringliteral}{        """}
451         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'ALL'} \textcolor{keywordflow}{in} self.possible\_arg\_nums:
452             \textcolor{comment}{# All is reserved for functions that take all arguments}
453             \textcolor{keywordflow}{return} \textcolor{stringliteral}{' '}.join(args)
454         loc = graph.location(args[0])
455         text\_args = [graph.node\_to\_desc\_raw(i, from\_id=loc) \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} args]
456         \textcolor{keywordflow}{if} len(args) == 1:
457             \textcolor{keywordflow}{return} self.get\_name()
458         \textcolor{keywordflow}{if} len(self.arg\_split\_words) == 0 \textcolor{keywordflow}{or} len(args) == 2:
459             \textcolor{keywordflow}{return} self.get\_name() + \textcolor{stringliteral}{' '} + text\_args[1]
460         \textcolor{keywordflow}{return} (
461             self.get\_name()
462             + \textcolor{stringliteral}{' '}
463             + (\textcolor{stringliteral}{' '} + self.arg\_split\_words[0] + \textcolor{stringliteral}{' '}).join(text\_args[1:])
464         )
465 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_ab20674b5c6c05a6c5188e51bc991717f}\label{classlight__chats_1_1graph_1_1GraphFunction_ab20674b5c6c05a6c5188e51bc991717f}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!get\+\_\+failure\+\_\+action@{get\+\_\+failure\+\_\+action}}
\index{get\+\_\+failure\+\_\+action@{get\+\_\+failure\+\_\+action}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{get\+\_\+failure\+\_\+action()}{get\_failure\_action()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+get\+\_\+failure\+\_\+action (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{args,  }\item[{}]{spec\+\_\+fail = {\ttfamily \textquotesingle{}failed\textquotesingle{}} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Returns an action for if the resolution of this function fails.
\end{DoxyVerb}
 

Definition at line 206 of file graph.\+py.


\begin{DoxyCode}
206     \textcolor{keyword}{def }get\_failure\_action(self, graph, args, spec\_fail='failed'):
207         \textcolor{stringliteral}{"""}
208 \textcolor{stringliteral}{        Returns an action for if the resolution of this function fails.}
209 \textcolor{stringliteral}{        """}
210         \textcolor{keywordflow}{return} \{
211             \textcolor{stringliteral}{'caller'}: self.get\_name(),
212             \textcolor{stringliteral}{'name'}: spec\_fail,
213             \textcolor{stringliteral}{'actors'}: args,
214             \textcolor{stringliteral}{'room\_id'}: graph.location(args[0]),
215         \}
216 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a9c89db357c2eb4c4833d7f975df2e85d}\label{classlight__chats_1_1graph_1_1GraphFunction_a9c89db357c2eb4c4833d7f975df2e85d}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!get\+\_\+find\+\_\+fail\+\_\+text@{get\+\_\+find\+\_\+fail\+\_\+text}}
\index{get\+\_\+find\+\_\+fail\+\_\+text@{get\+\_\+find\+\_\+fail\+\_\+text}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{get\+\_\+find\+\_\+fail\+\_\+text()}{get\_find\_fail\_text()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+get\+\_\+find\+\_\+fail\+\_\+text (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{arg\+\_\+idx }\end{DoxyParamCaption})}

\begin{DoxyVerb}Text displayed when an arg find during parse_text_to_args call fails to find
valid targets for the function.

Can be overridden to provide different messages for different failed arguments.
\end{DoxyVerb}
 

Definition at line 217 of file graph.\+py.


\begin{DoxyCode}
217     \textcolor{keyword}{def }get\_find\_fail\_text(self, arg\_idx):
218         \textcolor{stringliteral}{"""}
219 \textcolor{stringliteral}{        Text displayed when an arg find during parse\_text\_to\_args call fails to find}
220 \textcolor{stringliteral}{        valid targets for the function.}
221 \textcolor{stringliteral}{}
222 \textcolor{stringliteral}{        Can be overridden to provide different messages for different failed arguments.}
223 \textcolor{stringliteral}{        """}
224         \textcolor{keywordflow}{return} \textcolor{stringliteral}{'That isn\(\backslash\)'t here'}
225 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a4ffab7ed0e956a6bc76e3f61818ab5ff}\label{classlight__chats_1_1graph_1_1GraphFunction_a4ffab7ed0e956a6bc76e3f61818ab5ff}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!get\+\_\+improper\+\_\+args\+\_\+text@{get\+\_\+improper\+\_\+args\+\_\+text}}
\index{get\+\_\+improper\+\_\+args\+\_\+text@{get\+\_\+improper\+\_\+args\+\_\+text}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{get\+\_\+improper\+\_\+args\+\_\+text()}{get\_improper\_args\_text()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+get\+\_\+improper\+\_\+args\+\_\+text (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{num\+\_\+args }\end{DoxyParamCaption})}



Definition at line 226 of file graph.\+py.


\begin{DoxyCode}
226     \textcolor{keyword}{def }get\_improper\_args\_text(self, num\_args):
227         \textcolor{keywordflow}{return} \textcolor{stringliteral}{'Couldn\(\backslash\)'t understand that. Try help for help with commands'}
228 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a6fb123ff0ec87dde23a5ce8a1614bbbe}\label{classlight__chats_1_1graph_1_1GraphFunction_a6fb123ff0ec87dde23a5ce8a1614bbbe}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!get\+\_\+name@{get\+\_\+name}}
\index{get\+\_\+name@{get\+\_\+name}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{get\+\_\+name()}{get\_name()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+get\+\_\+name (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the canonical name of this function.
\end{DoxyVerb}
 

Definition at line 438 of file graph.\+py.


\begin{DoxyCode}
438     \textcolor{keyword}{def }get\_name(self):
439         \textcolor{stringliteral}{"""}
440 \textcolor{stringliteral}{        Get the canonical name of this function.}
441 \textcolor{stringliteral}{        """}
442         name = self.name
443         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(name) \textcolor{keywordflow}{is} list:
444             name = name[0]
445         \textcolor{keywordflow}{return} name
446 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_aa7929e44e5afafd4d27418c7fe5a2fe0}\label{classlight__chats_1_1graph_1_1GraphFunction_aa7929e44e5afafd4d27418c7fe5a2fe0}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!get\+\_\+reverse@{get\+\_\+reverse}}
\index{get\+\_\+reverse@{get\+\_\+reverse}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{get\+\_\+reverse()}{get\_reverse()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+get\+\_\+reverse (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{args }\end{DoxyParamCaption})}

\begin{DoxyVerb}Function to parse the graph and args and return the reverse function and args.
\end{DoxyVerb}
 

Definition at line 466 of file graph.\+py.


\begin{DoxyCode}
466     \textcolor{keyword}{def }get\_reverse(self, graph, args):
467         \textcolor{stringliteral}{"""}
468 \textcolor{stringliteral}{        Function to parse the graph and args and return the reverse function and args.}
469 \textcolor{stringliteral}{        """}
470         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}, []
471 
472 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a21e2dd1c8eb431b3ee22cce4853e3c15}\label{classlight__chats_1_1graph_1_1GraphFunction_a21e2dd1c8eb431b3ee22cce4853e3c15}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!handle@{handle}}
\index{handle@{handle}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{handle()}{handle()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+handle (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{args }\end{DoxyParamCaption})}



Definition at line 154 of file graph.\+py.


\begin{DoxyCode}
154     \textcolor{keyword}{def }handle(self, graph, args):
155         \textcolor{comment}{# if Callbacks.try\_overrides(self, graph, args):}
156         \textcolor{comment}{#     return True}
157         is\_constrained, \_cons\_passed, failure\_action = self.evaluate\_constraint\_set(
158             graph, args, self.func\_constraints
159         )
160         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} is\_constrained:
161             func\_failure\_action = self.get\_failure\_action(graph, args)
162             \textcolor{comment}{# What failed?}
163             graph.send\_action(args[0], func\_failure\_action)
164             \textcolor{comment}{# Why it failed}
165             graph.send\_action(args[0], failure\_action)
166             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
167         \textcolor{comment}{# callback\_args = deepcopy(args)}
168         is\_successful = self.func(graph, args)
169         \textcolor{comment}{# if is\_successful:}
170         \textcolor{comment}{#     Callbacks.handle\_callbacks(self, graph, args)}
171         \textcolor{comment}{#     # TODO move callbacks call functionality elsewhere so other things}
172         \textcolor{comment}{#     # can call callbacks}
173         \textcolor{comment}{#     for trigger in self.callback\_triggers:}
174         \textcolor{comment}{#         for arg in trigger['args']:}
175         \textcolor{comment}{#             if arg >= len(callback\_args):}
176         \textcolor{comment}{#                 break  # Don't have enough args for this callback}
177         \textcolor{comment}{#             acting\_agent = callback\_args[arg]}
178         \textcolor{comment}{#             callbacks = graph.get\_prop(acting\_agent, 'callbacks', \{\})}
179         \textcolor{comment}{#             if trigger['action'] in callbacks:}
180         \textcolor{comment}{#                 use\_args = [callback\_args[i] for i in trigger['args']]}
181         \textcolor{comment}{#                 Callbacks.handle(graph, callbacks[trigger['action']],}
182         \textcolor{comment}{#                                  use\_args)}
183         \textcolor{keywordflow}{return} is\_successful
184 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a8b76e8a8bb07f75abd081e220683dbd4}\label{classlight__chats_1_1graph_1_1GraphFunction_a8b76e8a8bb07f75abd081e220683dbd4}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!parse\+\_\+descs\+\_\+to\+\_\+args@{parse\+\_\+descs\+\_\+to\+\_\+args}}
\index{parse\+\_\+descs\+\_\+to\+\_\+args@{parse\+\_\+descs\+\_\+to\+\_\+args}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{parse\+\_\+descs\+\_\+to\+\_\+args()}{parse\_descs\_to\_args()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+parse\+\_\+descs\+\_\+to\+\_\+args (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{args }\end{DoxyParamCaption})}

\begin{DoxyVerb}iterates through the args and the constraints, solving dependency order on the
fly.
\end{DoxyVerb}
 

Definition at line 395 of file graph.\+py.


\begin{DoxyCode}
395     \textcolor{keyword}{def }parse\_descs\_to\_args(self, graph, args):
396         \textcolor{stringliteral}{"""}
397 \textcolor{stringliteral}{        iterates through the args and the constraints, solving dependency order on the}
398 \textcolor{stringliteral}{        fly.}
399 \textcolor{stringliteral}{        """}
400         \textcolor{comment}{# TODO improve performance by instead constructing a dependency graph}
401         \textcolor{comment}{# at runtime to avoid repeat passes through the loop and to prevent}
402         \textcolor{comment}{# circular dependencies}
403         args = [a.lower() \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} args]
404         success, output\_args, text\_args = self.try\_callback\_override\_args(graph, args)
405         \textcolor{keywordflow}{if} success:
406             \textcolor{keywordflow}{return} success, output\_args, text\_args
407         output\_args = [\textcolor{keywordtype}{None}] * (len(args))
408         output\_args[0] = args[0]
409         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'ALL'} \textcolor{keywordflow}{in} self.possible\_arg\_nums:
410             output\_args[1] = \textcolor{stringliteral}{' '}.join(args[1:])
411             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, output\_args, output\_args
412         args = [arg.lower() \textcolor{keywordflow}{for} arg \textcolor{keywordflow}{in} args]
413 
414         \textcolor{comment}{# While there are still arguments to fill}
415         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(self.arg\_find\_type[0]) \textcolor{keywordflow}{is} list:
416             arg\_find\_idx = 0
417             success = \textcolor{keyword}{False}
418             \textcolor{keywordflow}{while} arg\_find\_idx < len(self.arg\_find\_type[0]) \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} success:
419                 output\_args = [\textcolor{keywordtype}{None}] * (len(args))
420                 output\_args[0] = args[0]
421                 success, res, output\_args = self.parse\_descs\_to\_args\_helper(
422                     graph, args, output\_args, arg\_find\_idx
423                 )
424                 arg\_find\_idx += 1
425         \textcolor{keywordflow}{else}:
426             success, res, output\_args = self.parse\_descs\_to\_args\_helper(
427                 graph, args, output\_args
428             )
429 
430         \textcolor{keywordflow}{if} success:
431             \textcolor{comment}{# Determine canonical arguments}
432             loc = graph.location(output\_args[0])
433             text\_args = [graph.node\_to\_desc\_raw(i, from\_id=loc) \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} output\_args]
434             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, output\_args, text\_args
435         \textcolor{keywordflow}{else}:
436             \textcolor{keywordflow}{return} success, res, output\_args
437 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a33a25a071385ffbd0a222cab65c543d4}\label{classlight__chats_1_1graph_1_1GraphFunction_a33a25a071385ffbd0a222cab65c543d4}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!parse\+\_\+descs\+\_\+to\+\_\+args\+\_\+helper@{parse\+\_\+descs\+\_\+to\+\_\+args\+\_\+helper}}
\index{parse\+\_\+descs\+\_\+to\+\_\+args\+\_\+helper@{parse\+\_\+descs\+\_\+to\+\_\+args\+\_\+helper}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{parse\+\_\+descs\+\_\+to\+\_\+args\+\_\+helper()}{parse\_descs\_to\_args\_helper()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+parse\+\_\+descs\+\_\+to\+\_\+args\+\_\+helper (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{args,  }\item[{}]{output\+\_\+args,  }\item[{}]{arg\+\_\+find\+\_\+idx = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 336 of file graph.\+py.


\begin{DoxyCode}
336     \textcolor{keyword}{def }parse\_descs\_to\_args\_helper(self, graph, args, output\_args, arg\_find\_idx=None):
337         args = [a.lower() \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} args]
338         \textcolor{keywordflow}{for} arg\_idx, arg\_id \textcolor{keywordflow}{in} enumerate(output\_args):
339             \textcolor{keywordflow}{if} arg\_id \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:  \textcolor{comment}{# This was processed in an earlier pass}
340                 \textcolor{keywordflow}{continue}
341             arg\_find\_type = self.arg\_find\_type[arg\_idx]
342             \textcolor{keywordflow}{if} arg\_find\_idx \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
343                 arg\_find\_type = arg\_find\_type[arg\_find\_idx]
344             nearby\_idx = arg\_find\_type[\textcolor{stringliteral}{'from'}]
345             \textcolor{comment}{# we cant process a from when the nearby hasn't been found}
346             \textcolor{keywordflow}{if} output\_args[nearby\_idx] \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
347                 \textcolor{keywordflow}{continue}
348             nearbyid = output\_args[nearby\_idx]
349 
350             \textcolor{comment}{# Make sure we have all the constraints filled}
351             constraints = self.arg\_constraints[arg\_idx]
352             have\_all\_args = \textcolor{keyword}{True}
353             \textcolor{keywordflow}{for} constraint \textcolor{keywordflow}{in} constraints:
354                 \textcolor{keywordflow}{for} alt\_id\_idx \textcolor{keywordflow}{in} constraint[\textcolor{stringliteral}{'in\_args'}]:
355                     \textcolor{keywordflow}{if} arg\_idx == alt\_id\_idx:
356                         \textcolor{keywordflow}{continue}  \textcolor{comment}{# We plan to fill this slot with a guess}
357                     \textcolor{keywordflow}{if} output\_args[alt\_id\_idx] \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
358                         \textcolor{comment}{# We don't have all the constraints for this}
359                         have\_all\_args = \textcolor{keyword}{False}
360             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} have\_all\_args:
361                 \textcolor{keywordflow}{continue}
362 
363             \textcolor{comment}{# Get the possible IDs from the graph in the area}
364             arg\_text = args[arg\_idx]
365             possible\_ids = graph.desc\_to\_nodes(
366                 arg\_text, nearbyid, arg\_find\_type[\textcolor{stringliteral}{'type'}]
367             )
368             \textcolor{comment}{# can't have reflexive actions with the same arg}
369             \textcolor{keywordflow}{for} had\_id \textcolor{keywordflow}{in} output\_args:
370                 \textcolor{keywordflow}{if} had\_id \textcolor{keywordflow}{in} possible\_ids:
371                     possible\_ids.remove(had\_id)
372             res = \textcolor{keywordtype}{None}
373             \textcolor{keywordflow}{while} len(possible\_ids) > 0:
374                 \textcolor{comment}{# See if any match the constraints}
375                 success, res = self.check\_possibilites\_vs\_constraints(
376                     graph, output\_args, arg\_idx, possible\_ids
377                 )
378                 \textcolor{keywordflow}{if} success:
379                     output\_args[arg\_idx] = res
380                     possible\_ids.remove(res)
381                     success\_again, res, \_args = self.parse\_descs\_to\_args\_helper(
382                         graph, args, output\_args, arg\_find\_idx
383                     )
384                     \textcolor{keywordflow}{if} success\_again:
385                         \textcolor{keywordflow}{return} \textcolor{keyword}{True}, \textcolor{keywordtype}{None}, output\_args  \textcolor{comment}{# success!}
386                 \textcolor{keywordflow}{elif} res \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
387                     \textcolor{keywordflow}{return} \textcolor{keyword}{False}, res, args  \textcolor{comment}{# failure case, no matching option}
388                 \textcolor{keywordflow}{else}:
389                     \textcolor{keywordflow}{break}
390             \textcolor{keywordflow}{if} res \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
391                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, res, args  \textcolor{comment}{# failure case, no matching option}
392             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}, self.get\_find\_fail\_text(arg\_idx), \textcolor{keywordtype}{None}  \textcolor{comment}{# failed find}
393         \textcolor{keywordflow}{return} \textcolor{keyword}{True}, \textcolor{stringliteral}{''}, output\_args  \textcolor{comment}{# base case, all filled}
394 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a3b6764b365baf7471e53651adf83706b}\label{classlight__chats_1_1graph_1_1GraphFunction_a3b6764b365baf7471e53651adf83706b}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!parse\+\_\+text\+\_\+to\+\_\+args@{parse\+\_\+text\+\_\+to\+\_\+args}}
\index{parse\+\_\+text\+\_\+to\+\_\+args@{parse\+\_\+text\+\_\+to\+\_\+args}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{parse\+\_\+text\+\_\+to\+\_\+args()}{parse\_text\_to\_args()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+parse\+\_\+text\+\_\+to\+\_\+args (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{actor\+\_\+id,  }\item[{}]{text }\end{DoxyParamCaption})}

\begin{DoxyVerb}Breaks text into function arguments based on this function's
delimiters
Returns:
(None, display text, None) if parsing failed to find valid candidates
(True, arg_ids, canonical_text_args) if parsing and constraints succeed
(False, Failure action, matched_args)
if parsing succeeds but constraints fail
\end{DoxyVerb}
 

Definition at line 278 of file graph.\+py.


\begin{DoxyCode}
278     \textcolor{keyword}{def }parse\_text\_to\_args(self, graph, actor\_id, text):
279         \textcolor{stringliteral}{"""Breaks text into function arguments based on this function's}
280 \textcolor{stringliteral}{        delimiters}
281 \textcolor{stringliteral}{        Returns:}
282 \textcolor{stringliteral}{        (None, display text, None) if parsing failed to find valid candidates}
283 \textcolor{stringliteral}{        (True, arg\_ids, canonical\_text\_args) if parsing and constraints succeed}
284 \textcolor{stringliteral}{        (False, Failure action, matched\_args)}
285 \textcolor{stringliteral}{                if parsing succeeds but constraints fail}
286 \textcolor{stringliteral}{        """}
287         actor\_id = actor\_id.lower()
288         c\_arg = []
289         descs = [actor\_id]
290         \textcolor{keywordflow}{for} word \textcolor{keywordflow}{in} text:
291             \textcolor{keywordflow}{if} word.lower() \textcolor{keywordflow}{in} self.arg\_split\_words:
292                 descs.append(\textcolor{stringliteral}{' '}.join(c\_arg))
293                 c\_arg = []
294             \textcolor{keywordflow}{else}:
295                 c\_arg.append(word)
296         \textcolor{keywordflow}{if} len(c\_arg) != 0:
297             descs.append(\textcolor{stringliteral}{' '}.join(c\_arg))
298         \textcolor{keywordflow}{if} (
299             len(descs) \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.possible\_arg\_nums
300             \textcolor{keywordflow}{and} \textcolor{stringliteral}{'ALL'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.possible\_arg\_nums
301         ):
302             \textcolor{keywordflow}{return} (\textcolor{keywordtype}{None}, self.get\_improper\_args\_text(len(descs)), \textcolor{keywordtype}{None})
303         \textcolor{keywordflow}{return} self.parse\_descs\_to\_args(graph, descs)
304 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a9769b13542f28f04977e374057bbc017}\label{classlight__chats_1_1graph_1_1GraphFunction_a9769b13542f28f04977e374057bbc017}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!try\+\_\+callback\+\_\+override\+\_\+args@{try\+\_\+callback\+\_\+override\+\_\+args}}
\index{try\+\_\+callback\+\_\+override\+\_\+args@{try\+\_\+callback\+\_\+override\+\_\+args}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{try\+\_\+callback\+\_\+override\+\_\+args()}{try\_callback\_override\_args()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+try\+\_\+callback\+\_\+override\+\_\+args (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{args }\end{DoxyParamCaption})}



Definition at line 305 of file graph.\+py.


\begin{DoxyCode}
305     \textcolor{keyword}{def }try\_callback\_override\_args(self, graph, args):
306         output\_args = [\textcolor{keywordtype}{None}] * (len(args))
307         output\_args[0] = args[0]
308         args = [arg.lower() \textcolor{keywordflow}{for} arg \textcolor{keywordflow}{in} args]
309         \textcolor{comment}{# While there are still arguments to fill}
310         \textcolor{keywordflow}{while} \textcolor{keywordtype}{None} \textcolor{keywordflow}{in} output\_args:
311             \textcolor{keywordflow}{for} arg\_idx, arg\_id \textcolor{keywordflow}{in} enumerate(output\_args):
312                 \textcolor{keywordflow}{if} arg\_id \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:  \textcolor{comment}{# This was processed in an earlier pass}
313                     \textcolor{keywordflow}{continue}
314                 nearbyid = output\_args[0]
315 
316                 \textcolor{comment}{# Get the possible IDs from the graph in the area}
317                 arg\_text = args[arg\_idx]
318                 possible\_ids = graph.desc\_to\_nodes(arg\_text, nearbyid, \textcolor{stringliteral}{'all+here'})
319                 \textcolor{comment}{# can't have reflexive actions with the same arg}
320                 \textcolor{keywordflow}{for} had\_id \textcolor{keywordflow}{in} output\_args:
321                     \textcolor{keywordflow}{if} had\_id \textcolor{keywordflow}{in} possible\_ids:
322                         possible\_ids.remove(had\_id)
323                 \textcolor{keywordflow}{if} len(possible\_ids) == 0:
324                     \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}
325 
326                 output\_args[arg\_idx] = possible\_ids[0]
327 
328         \textcolor{comment}{# Determine canonical arguments}
329         \textcolor{comment}{# if Callbacks.has\_valid\_override(self, graph, output\_args):}
330         \textcolor{comment}{#     loc = graph.location(output\_args[0])}
331         \textcolor{comment}{#     text\_args = \(\backslash\)}
332         \textcolor{comment}{#         [graph.node\_to\_desc\_raw(i, from\_id=loc) for i in output\_args]}
333         \textcolor{comment}{#     return True, output\_args, text\_args}
334         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}
335 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a8ac297dcadb1e5ec360f55f293dcbfcb}\label{classlight__chats_1_1graph_1_1GraphFunction_a8ac297dcadb1e5ec360f55f293dcbfcb}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!valid\+\_\+args@{valid\+\_\+args}}
\index{valid\+\_\+args@{valid\+\_\+args}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{valid\+\_\+args()}{valid\_args()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph\+Function.\+valid\+\_\+args (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{graph,  }\item[{}]{args }\end{DoxyParamCaption})}



Definition at line 135 of file graph.\+py.


\begin{DoxyCode}
135     \textcolor{keyword}{def }valid\_args(self, graph, args):
136         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'ALL'} \textcolor{keywordflow}{in} self.possible\_arg\_nums \textcolor{keywordflow}{and} len(args) >= 2:
137             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
138         \textcolor{keywordflow}{if} len(args) \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.possible\_arg\_nums:
139             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
140         args = [a.lower() \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} args]
141         loc = graph.location(args[0])
142         \textcolor{comment}{# convert the arguments supplied to text form}
143         text\_args = [graph.node\_to\_desc\_raw(i, from\_id=loc).lower() \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} args]
144         \textcolor{comment}{# ensure that those are valid from the parser perspective}
145         valid, args, \_args = self.parse\_descs\_to\_args(graph, text\_args)
146         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} valid:
147             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
148         \textcolor{comment}{# ensure that they pass the function constraints}
149         valid, \_cons\_passed, \_failure = self.evaluate\_constraint\_set(
150             graph, args, self.func\_constraints
151         )
152         \textcolor{keywordflow}{return} valid
153 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a88e5637deee00b7f2f5d682afea0e85d}\label{classlight__chats_1_1graph_1_1GraphFunction_a88e5637deee00b7f2f5d682afea0e85d}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!arg\+\_\+constraints@{arg\+\_\+constraints}}
\index{arg\+\_\+constraints@{arg\+\_\+constraints}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{arg\+\_\+constraints}{arg\_constraints}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph\+Function.\+arg\+\_\+constraints}



Definition at line 128 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a6845a255ccdfcaa58debca3157f7adb7}\label{classlight__chats_1_1graph_1_1GraphFunction_a6845a255ccdfcaa58debca3157f7adb7}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!arg\+\_\+find\+\_\+type@{arg\+\_\+find\+\_\+type}}
\index{arg\+\_\+find\+\_\+type@{arg\+\_\+find\+\_\+type}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{arg\+\_\+find\+\_\+type}{arg\_find\_type}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph\+Function.\+arg\+\_\+find\+\_\+type}



Definition at line 127 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a20251500fbafb95c381e0c0bf9f37376}\label{classlight__chats_1_1graph_1_1GraphFunction_a20251500fbafb95c381e0c0bf9f37376}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!arg\+\_\+split\+\_\+words@{arg\+\_\+split\+\_\+words}}
\index{arg\+\_\+split\+\_\+words@{arg\+\_\+split\+\_\+words}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{arg\+\_\+split\+\_\+words}{arg\_split\_words}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph\+Function.\+arg\+\_\+split\+\_\+words}



Definition at line 126 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a5fc1640403f59d0358e1dccea3682487}\label{classlight__chats_1_1graph_1_1GraphFunction_a5fc1640403f59d0358e1dccea3682487}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!callback\+\_\+triggers@{callback\+\_\+triggers}}
\index{callback\+\_\+triggers@{callback\+\_\+triggers}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{callback\+\_\+triggers}{callback\_triggers}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph\+Function.\+callback\+\_\+triggers}



Definition at line 130 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a40c1214e286a5c8ca375aae48bf36d89}\label{classlight__chats_1_1graph_1_1GraphFunction_a40c1214e286a5c8ca375aae48bf36d89}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!format\+\_\+observation@{format\+\_\+observation}}
\index{format\+\_\+observation@{format\+\_\+observation}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{format\+\_\+observation}{format\_observation}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph\+Function.\+format\+\_\+observation\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 133 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_aa5b75544ede241f8635e4d6c99ed6a3b}\label{classlight__chats_1_1graph_1_1GraphFunction_aa5b75544ede241f8635e4d6c99ed6a3b}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!formats@{formats}}
\index{formats@{formats}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{formats}{formats}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph\+Function.\+formats}



Definition at line 131 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a46da34454c8776f43d4102c74a650334}\label{classlight__chats_1_1graph_1_1GraphFunction_a46da34454c8776f43d4102c74a650334}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!func\+\_\+constraints@{func\+\_\+constraints}}
\index{func\+\_\+constraints@{func\+\_\+constraints}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{func\+\_\+constraints}{func\_constraints}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph\+Function.\+func\+\_\+constraints}



Definition at line 129 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_afb7e1d1d49ff540be034f685f4d1e337}\label{classlight__chats_1_1graph_1_1GraphFunction_afb7e1d1d49ff540be034f685f4d1e337}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!name@{name}}
\index{name@{name}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{name}{name}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph\+Function.\+name}



Definition at line 124 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1GraphFunction_a2d40c8aa5303afce9e93be14593fca78}\label{classlight__chats_1_1graph_1_1GraphFunction_a2d40c8aa5303afce9e93be14593fca78}} 
\index{light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}!possible\+\_\+arg\+\_\+nums@{possible\+\_\+arg\+\_\+nums}}
\index{possible\+\_\+arg\+\_\+nums@{possible\+\_\+arg\+\_\+nums}!light\+\_\+chats\+::graph\+::\+Graph\+Function@{light\+\_\+chats\+::graph\+::\+Graph\+Function}}
\subsubsection{\texorpdfstring{possible\+\_\+arg\+\_\+nums}{possible\_arg\_nums}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph\+Function.\+possible\+\_\+arg\+\_\+nums}



Definition at line 125 of file graph.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/tasks/light/light\+\_\+chats/\hyperlink{parlai_2mturk_2tasks_2light_2light__chats_2graph_8py}{graph.\+py}\end{DoxyCompactItemize}
