\hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1worlds_1_1MTurkDataWorld}{}\section{parlai.\+mturk.\+core.\+dev.\+worlds.\+M\+Turk\+Data\+World Class Reference}
\label{classparlai_1_1mturk_1_1core_1_1dev_1_1worlds_1_1MTurkDataWorld}\index{parlai.\+mturk.\+core.\+dev.\+worlds.\+M\+Turk\+Data\+World@{parlai.\+mturk.\+core.\+dev.\+worlds.\+M\+Turk\+Data\+World}}


Inheritance diagram for parlai.\+mturk.\+core.\+dev.\+worlds.\+M\+Turk\+Data\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d2/de5/classparlai_1_1mturk_1_1core_1_1dev_1_1worlds_1_1MTurkDataWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+core.\+dev.\+worlds.\+M\+Turk\+Data\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=223pt]{d1/d17/classparlai_1_1mturk_1_1core_1_1dev_1_1worlds_1_1MTurkDataWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1worlds_1_1MTurkDataWorld_ab37222b5a1e607c5f8f301de880241f2}{prep\+\_\+save\+\_\+data} (self, workers)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1worlds_1_1MTurkDataWorld_af01360aeaa7e6ad524049621551683df}{get\+\_\+custom\+\_\+task\+\_\+data} (self)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 11 of file worlds.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1worlds_1_1MTurkDataWorld_af01360aeaa7e6ad524049621551683df}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1worlds_1_1MTurkDataWorld_af01360aeaa7e6ad524049621551683df}} 
\index{parlai\+::mturk\+::core\+::dev\+::worlds\+::\+M\+Turk\+Data\+World@{parlai\+::mturk\+::core\+::dev\+::worlds\+::\+M\+Turk\+Data\+World}!get\+\_\+custom\+\_\+task\+\_\+data@{get\+\_\+custom\+\_\+task\+\_\+data}}
\index{get\+\_\+custom\+\_\+task\+\_\+data@{get\+\_\+custom\+\_\+task\+\_\+data}!parlai\+::mturk\+::core\+::dev\+::worlds\+::\+M\+Turk\+Data\+World@{parlai\+::mturk\+::core\+::dev\+::worlds\+::\+M\+Turk\+Data\+World}}
\subsubsection{\texorpdfstring{get\+\_\+custom\+\_\+task\+\_\+data()}{get\_custom\_task\_data()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+worlds.\+M\+Turk\+Data\+World.\+get\+\_\+custom\+\_\+task\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}This function should take the contents of whatever was collected during this
task that should be saved and return it in some format, preferrably a dict
containing acts.

If data needs pickling, put it in a field named 'needs-pickle'
\end{DoxyVerb}
 

Definition at line 43 of file worlds.\+py.


\begin{DoxyCode}
43     \textcolor{keyword}{def }get\_custom\_task\_data(self):
44         \textcolor{stringliteral}{"""}
45 \textcolor{stringliteral}{        This function should take the contents of whatever was collected during this}
46 \textcolor{stringliteral}{        task that should be saved and return it in some format, preferrably a dict}
47 \textcolor{stringliteral}{        containing acts.}
48 \textcolor{stringliteral}{}
49 \textcolor{stringliteral}{        If data needs pickling, put it in a field named 'needs-pickle'}
50 \textcolor{stringliteral}{        """}
51         \textcolor{comment}{# return \{}
52         \textcolor{comment}{#     'acts': [self.important\_turn1, self.important\_turn2]}
53         \textcolor{comment}{#     'context': self.some\_context\_data\_of\_importance}
54         \textcolor{comment}{#     'needs-pickle': self.json\_incompatible\_object}
55         \textcolor{comment}{# \}}
56         \textcolor{keywordflow}{pass}
57 
58 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1worlds_1_1MTurkDataWorld_ab37222b5a1e607c5f8f301de880241f2}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1worlds_1_1MTurkDataWorld_ab37222b5a1e607c5f8f301de880241f2}} 
\index{parlai\+::mturk\+::core\+::dev\+::worlds\+::\+M\+Turk\+Data\+World@{parlai\+::mturk\+::core\+::dev\+::worlds\+::\+M\+Turk\+Data\+World}!prep\+\_\+save\+\_\+data@{prep\+\_\+save\+\_\+data}}
\index{prep\+\_\+save\+\_\+data@{prep\+\_\+save\+\_\+data}!parlai\+::mturk\+::core\+::dev\+::worlds\+::\+M\+Turk\+Data\+World@{parlai\+::mturk\+::core\+::dev\+::worlds\+::\+M\+Turk\+Data\+World}}
\subsubsection{\texorpdfstring{prep\+\_\+save\+\_\+data()}{prep\_save\_data()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+worlds.\+M\+Turk\+Data\+World.\+prep\+\_\+save\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{workers }\end{DoxyParamCaption})}

\begin{DoxyVerb}This prepares data to be saved for later review, including chats from individual
worker perspectives.
\end{DoxyVerb}
 

Definition at line 12 of file worlds.\+py.


\begin{DoxyCode}
12     \textcolor{keyword}{def }prep\_save\_data(self, workers):
13         \textcolor{stringliteral}{"""}
14 \textcolor{stringliteral}{        This prepares data to be saved for later review, including chats from individual}
15 \textcolor{stringliteral}{        worker perspectives.}
16 \textcolor{stringliteral}{        """}
17         custom\_data = self.get\_custom\_task\_data()
18         save\_data = \{\textcolor{stringliteral}{'custom\_data'}: custom\_data, \textcolor{stringliteral}{'worker\_data'}: \{\}\}
19 
20         \textcolor{keywordflow}{for} agent \textcolor{keywordflow}{in} workers:
21             messages = agent.get\_messages()
22             \textcolor{comment}{# filter out peer feedback}
23             save\_messages = [m \textcolor{keywordflow}{for} m \textcolor{keywordflow}{in} messages \textcolor{keywordflow}{if} m.get(\textcolor{stringliteral}{'text'}) != \textcolor{stringliteral}{'[PEER\_REVIEW]'}]
24             save\_data[\textcolor{stringliteral}{'worker\_data'}][agent.worker\_id] = \{
25                 \textcolor{stringliteral}{'worker\_id'}: agent.worker\_id,
26                 \textcolor{stringliteral}{'agent\_id'}: agent.id,
27                 \textcolor{stringliteral}{'assignment\_id'}: agent.assignment\_id,
28                 \textcolor{stringliteral}{'messages'}: save\_messages,
29                 \textcolor{stringliteral}{'given\_feedback'}: agent.feedback,
30                 \textcolor{stringliteral}{'completed'}: self.episode\_done(),
31             \}
32 
33         \textcolor{comment}{# In simple pairing case, attach the feedback right here}
34         \textcolor{keywordflow}{if} len(workers) == 2:
35             data = save\_data[\textcolor{stringliteral}{'worker\_data'}]
36             a\_0 = workers[0]
37             a\_1 = workers[1]
38             data[a\_0.worker\_id][\textcolor{stringliteral}{'received\_feedback'}] = a\_1.feedback
39             data[a\_1.worker\_id][\textcolor{stringliteral}{'received\_feedback'}] = a\_0.feedback
40 
41         \textcolor{keywordflow}{return} save\_data
42 
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/core/dev/\hyperlink{parlai_2mturk_2core_2dev_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
