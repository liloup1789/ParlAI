\hypertarget{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build}{}\section{parlai.\+tasks.\+convai2\+\_\+wild\+\_\+evaluation.\+build Namespace Reference}
\label{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build}\index{parlai.\+tasks.\+convai2\+\_\+wild\+\_\+evaluation.\+build@{parlai.\+tasks.\+convai2\+\_\+wild\+\_\+evaluation.\+build}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build_a6c2b84806e2cb18c6eedb72d161dec5e}{make\+\_\+parlai\+\_\+format}
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build_a7f46320f8766498ee5f87f68e24da31b}{build} (opt)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build_aec445685ba4d77fbe9b8ad4cdc90cbab}{R\+E\+S\+O\+U\+R\+C\+ES}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build_a7f46320f8766498ee5f87f68e24da31b}\label{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build_a7f46320f8766498ee5f87f68e24da31b}} 
\index{parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build@{parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build}!build@{build}}
\index{build@{build}!parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build@{parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build}}
\subsubsection{\texorpdfstring{build()}{build()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+convai2\+\_\+wild\+\_\+evaluation.\+build.\+build (\begin{DoxyParamCaption}\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 57 of file build.\+py.


\begin{DoxyCode}
57 \textcolor{keyword}{def }\hyperlink{namespacedialog__babi__feedback_1_1build_a7a9d289f7493a5ded13c4b7f071b6184}{build}(opt):
58     version = \textcolor{stringliteral}{'0.2'}
59     dpath = os.path.join(opt[\textcolor{stringliteral}{'datapath'}], \textcolor{stringliteral}{'ConvAI2\_wild\_evaluation'})
60 
61     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} build\_data.built(dpath, version):
62         print(\textcolor{stringliteral}{'[building data: '} + dpath + \textcolor{stringliteral}{']'})
63 
64         \textcolor{keywordflow}{if} build\_data.built(dpath):
65             \textcolor{comment}{# An older version exists, so remove these outdated files.}
66             build\_data.remove\_dir(dpath)
67         build\_data.make\_dir(dpath)
68 
69         \textcolor{comment}{# Download the data.}
70         \textcolor{keywordflow}{for} downloadable\_file \textcolor{keywordflow}{in} RESOURCES:
71             downloadable\_file.download\_file(dpath)
72 
73         output\_fname = \textcolor{stringliteral}{'convai2\_wild\_evaluation.json'}
74         output\_path = os.path.join(dpath, output\_fname)
75 
76         with open(output\_path, \textcolor{stringliteral}{'r') as data\_f:}
77 \textcolor{stringliteral}{            data = json.load(data\_f)}
78 \textcolor{stringliteral}{}
79 \textcolor{stringliteral}{        \hyperlink{namespaceparlai_1_1tasks_1_1quac_1_1build_a08c212462b5c58cde91192d35f24f0cc}{make\_parlai\_format}(data, dpath)}
80 \textcolor{stringliteral}{        os.remove(output\_path)}
81 \textcolor{stringliteral}{}
82 \textcolor{stringliteral}{        }\textcolor{comment}{# Mark the data as built.}
83         build\_data.mark\_done(dpath, version)
84 \end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build_a6c2b84806e2cb18c6eedb72d161dec5e}\label{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build_a6c2b84806e2cb18c6eedb72d161dec5e}} 
\index{parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build@{parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build}!make\+\_\+parlai\+\_\+format@{make\+\_\+parlai\+\_\+format}}
\index{make\+\_\+parlai\+\_\+format@{make\+\_\+parlai\+\_\+format}!parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build@{parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build}}
\subsubsection{\texorpdfstring{make\+\_\+parlai\+\_\+format()}{make\_parlai\_format()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+convai2\+\_\+wild\+\_\+evaluation.\+build.\+make\+\_\+parlai\+\_\+format (\begin{DoxyParamCaption}\item[{}]{data }\end{DoxyParamCaption})}



Definition at line 21 of file build.\+py.


\begin{DoxyCode}
21 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1quac_1_1build_a08c212462b5c58cde91192d35f24f0cc}{make\_parlai\_format}(data: list, dpath: str):
22     train\_p = 0.6
23     valid\_p = 0.2
24     test\_p = 1 - (train\_p + valid\_p)
25 
26     \textcolor{keyword}{assert} train\_p > 0
27     \textcolor{keyword}{assert} valid\_p > 0
28     \textcolor{keyword}{assert} test\_p > 0
29 
30     data\_len = len(data)
31 
32     first\_valid = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(data\_len * train\_p)
33     first\_test = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(data\_len * (train\_p + valid\_p))
34 
35     data\_train = data[:first\_valid]
36     data\_valid = data[first\_valid:first\_test]
37     data\_test = data[first\_test:]
38 
39     data\_train\_txt = \textcolor{stringliteral}{'\(\backslash\)n'}.join(data\_train)
40     data\_valid\_txt = \textcolor{stringliteral}{'\(\backslash\)n'}.join(data\_valid)
41     data\_test\_txt = \textcolor{stringliteral}{'\(\backslash\)n'}.join(data\_test)
42 
43     path\_train = os.path.join(dpath, \textcolor{stringliteral}{'train.txt'})
44     path\_valid = os.path.join(dpath, \textcolor{stringliteral}{'valid.txt'})
45     path\_test = os.path.join(dpath, \textcolor{stringliteral}{'test.txt'})
46 
47     with open(path\_train, \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} f\_train:
48         f\_train.write(data\_train\_txt)
49 
50     with open(path\_valid, \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} f\_valid:
51         f\_valid.write(data\_valid\_txt)
52 
53     with open(path\_test, \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} f\_test:
54         f\_test.write(data\_test\_txt)
55 
56 
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build_aec445685ba4d77fbe9b8ad4cdc90cbab}\label{namespaceparlai_1_1tasks_1_1convai2__wild__evaluation_1_1build_aec445685ba4d77fbe9b8ad4cdc90cbab}} 
\index{parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build@{parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build}!R\+E\+S\+O\+U\+R\+C\+ES@{R\+E\+S\+O\+U\+R\+C\+ES}}
\index{R\+E\+S\+O\+U\+R\+C\+ES@{R\+E\+S\+O\+U\+R\+C\+ES}!parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build@{parlai\+::tasks\+::convai2\+\_\+wild\+\_\+evaluation\+::build}}
\subsubsection{\texorpdfstring{R\+E\+S\+O\+U\+R\+C\+ES}{RESOURCES}}
{\footnotesize\ttfamily parlai.\+tasks.\+convai2\+\_\+wild\+\_\+evaluation.\+build.\+R\+E\+S\+O\+U\+R\+C\+ES}



Definition at line 12 of file build.\+py.

