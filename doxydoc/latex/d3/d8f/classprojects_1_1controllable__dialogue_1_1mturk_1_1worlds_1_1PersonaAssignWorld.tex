\hypertarget{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld}{}\section{projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World Class Reference}
\label{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld}\index{projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World@{projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World}}


Inheritance diagram for projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=247pt]{d6/da9/classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=247pt]{d7/d72/classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a5a4e7ec8f20094ed50f4301233be7ae4}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1worlds_1_1World_a3640d92718acd3e6942a28c1ab3678bd}{opt}, \hyperlink{classparlai_1_1mturk_1_1core_1_1legacy__2018_1_1worlds_1_1MTurkOnboardWorld_a434294c870fa0b31b2889eb1f384e408}{mturk\+\_\+agent})
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a6c8b0be29e30f5531e3c3f2dfea93966}{parley} (self)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_acfc25a9685b1b254a2308304cc413723}{check\+\_\+timeout} (self, act)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a875349c4ad910d85489934e5cc3f4286}{max\+\_\+persona\+\_\+time}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_abe2ba6a74f6a5c747cffcd62a0db5cb2}{human\+\_\+eval}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a4820af5d7a4d448167b669d2b9a1a0ac}{episode\+Done}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}A world that assigns a persona to an agent.
\end{DoxyVerb}
 

Definition at line 263 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a5a4e7ec8f20094ed50f4301233be7ae4}\label{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a5a4e7ec8f20094ed50f4301233be7ae4}} 
\index{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{mturk\+\_\+agent }\end{DoxyParamCaption})}



Definition at line 268 of file worlds.\+py.


\begin{DoxyCode}
268     \textcolor{keyword}{def }\_\_init\_\_(self, opt, mturk\_agent):
269         self.max\_persona\_time = opt[\textcolor{stringliteral}{'max\_persona\_time'}]
270         self.human\_eval = opt[\textcolor{stringliteral}{'human\_eval'}]
271         super().\_\_init\_\_(opt, mturk\_agent)
272 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_acfc25a9685b1b254a2308304cc413723}\label{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_acfc25a9685b1b254a2308304cc413723}} 
\index{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}!check\+\_\+timeout@{check\+\_\+timeout}}
\index{check\+\_\+timeout@{check\+\_\+timeout}!projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}}
\subsubsection{\texorpdfstring{check\+\_\+timeout()}{check\_timeout()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World.\+check\+\_\+timeout (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{act }\end{DoxyParamCaption})}



Definition at line 303 of file worlds.\+py.


\begin{DoxyCode}
303     \textcolor{keyword}{def }check\_timeout(self, act):
304         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'text'} \textcolor{keywordflow}{in} act:
305             \textcolor{keywordflow}{if} (
306                 (act[\textcolor{stringliteral}{'text'}] == \textcolor{stringliteral}{'[TIMEOUT]'})
307                 \textcolor{keywordflow}{or} (act[\textcolor{stringliteral}{'text'}] == \textcolor{stringliteral}{'[RETURNED]'})
308                 \textcolor{keywordflow}{or} (act[\textcolor{stringliteral}{'text'}] == \textcolor{stringliteral}{'[DISCONNECT]'})
309             ):
310                 \textcolor{keywordflow}{return} \textcolor{keyword}{True}
311         \textcolor{keywordflow}{return} \textcolor{keyword}{False}
312 
313 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a6c8b0be29e30f5531e3c3f2dfea93966}\label{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a6c8b0be29e30f5531e3c3f2dfea93966}} 
\index{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}!parley@{parley}}
\index{parley@{parley}!projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}}
\subsubsection{\texorpdfstring{parley()}{parley()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World.\+parley (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 273 of file worlds.\+py.


\begin{DoxyCode}
273     \textcolor{keyword}{def }parley(self):
274         personas = self.mturk\_agent.personas\_generator.get\_persona()
275         self.mturk\_agent.personas = personas
276         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.human\_eval:
277             \textcolor{comment}{# get model personas}
278             model\_personas = self.mturk\_agent.personas\_generator.get\_persona()
279             \textcolor{keywordflow}{while} model\_personas == personas:
280                 model\_personas = self.mturk\_agent.personas\_generator.get\_persona()
281             self.mturk\_agent.model\_personas = model\_personas
282 
283         persona\_text = \textcolor{stringliteral}{''}
284         \textcolor{keywordflow}{for} persona \textcolor{keywordflow}{in} personas:
285             persona\_text += \textcolor{stringliteral}{'<b><span style="color:blue">'} \textcolor{stringliteral}{'\{\}\(\backslash\)n</span></b>'}.
      \hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
286                 persona.strip()
287             )
288 
289         self.mturk\_agent.observe(
290             \{
291                 \textcolor{stringliteral}{'id'}: \textcolor{stringliteral}{'SYSTEM'},
292                 \textcolor{stringliteral}{'show\_persona'}: \textcolor{keyword}{True},
293                 \textcolor{stringliteral}{'text'}: ONBOARD\_MSG + \textcolor{stringliteral}{'<br>'} + persona\_text + \textcolor{stringliteral}{'<br>'},
294             \}
295         )
296 
297         act = self.mturk\_agent.act(timeout=self.max\_persona\_time)
298         timed\_out = self.check\_timeout(act)
299         \textcolor{keywordflow}{if} timed\_out:
300             self.episodeDone = \textcolor{keyword}{True}
301             \textcolor{keywordflow}{return}
302 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a4820af5d7a4d448167b669d2b9a1a0ac}\label{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a4820af5d7a4d448167b669d2b9a1a0ac}} 
\index{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}!episode\+Done@{episode\+Done}}
\index{episode\+Done@{episode\+Done}!projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}}
\subsubsection{\texorpdfstring{episode\+Done}{episodeDone}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World.\+episode\+Done}



Definition at line 300 of file worlds.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_abe2ba6a74f6a5c747cffcd62a0db5cb2}\label{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_abe2ba6a74f6a5c747cffcd62a0db5cb2}} 
\index{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}!human\+\_\+eval@{human\+\_\+eval}}
\index{human\+\_\+eval@{human\+\_\+eval}!projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}}
\subsubsection{\texorpdfstring{human\+\_\+eval}{human\_eval}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World.\+human\+\_\+eval}



Definition at line 270 of file worlds.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a875349c4ad910d85489934e5cc3f4286}\label{classprojects_1_1controllable__dialogue_1_1mturk_1_1worlds_1_1PersonaAssignWorld_a875349c4ad910d85489934e5cc3f4286}} 
\index{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}!max\+\_\+persona\+\_\+time@{max\+\_\+persona\+\_\+time}}
\index{max\+\_\+persona\+\_\+time@{max\+\_\+persona\+\_\+time}!projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World@{projects\+::controllable\+\_\+dialogue\+::mturk\+::worlds\+::\+Persona\+Assign\+World}}
\subsubsection{\texorpdfstring{max\+\_\+persona\+\_\+time}{max\_persona\_time}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+mturk.\+worlds.\+Persona\+Assign\+World.\+max\+\_\+persona\+\_\+time}



Definition at line 269 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
projects/controllable\+\_\+dialogue/mturk/\hyperlink{projects_2controllable__dialogue_2mturk_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
