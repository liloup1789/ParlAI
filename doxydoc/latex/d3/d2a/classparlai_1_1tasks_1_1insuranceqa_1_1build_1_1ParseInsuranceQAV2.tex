\hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2}{}\section{parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A\+V2 Class Reference}
\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2}\index{parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A\+V2@{parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A\+V2}}


Inheritance diagram for parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A\+V2\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{d0/d7c/classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A\+V2\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{df/d63/classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_a8a510d31a4f0b733beb887de3c8379b0}{write\+\_\+data\+\_\+files} (cls, dpext, out\+\_\+path, d\+\_\+vocab, d\+\_\+label\+\_\+answer)
\item 
def \hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_abaa749229881633590c411cdaf79c6ff}{create\+\_\+fb\+\_\+format} (cls, out\+\_\+path, dtype, inpath, d\+\_\+vocab, d\+\_\+label\+\_\+answer)
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_a638ee7d37982261f4cfd3e099c8668a3}{version}
\item 
\hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_a33951ca3b8a8270c1acd65b14bac757f}{label2answer\+\_\+fname}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 156 of file build.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_abaa749229881633590c411cdaf79c6ff}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_abaa749229881633590c411cdaf79c6ff}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2}!create\+\_\+fb\+\_\+format@{create\+\_\+fb\+\_\+format}}
\index{create\+\_\+fb\+\_\+format@{create\+\_\+fb\+\_\+format}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2}}
\subsubsection{\texorpdfstring{create\+\_\+fb\+\_\+format()}{create\_fb\_format()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A\+V2.\+create\+\_\+fb\+\_\+format (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{out\+\_\+path,  }\item[{}]{dtype,  }\item[{}]{inpath,  }\item[{}]{d\+\_\+vocab,  }\item[{}]{d\+\_\+label\+\_\+answer }\end{DoxyParamCaption})}



Definition at line 186 of file build.\+py.


\begin{DoxyCode}
186     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1wikiqa_1_1build_a554828702769592403db58c955d1dfe3}{create\_fb\_format}(cls, out\_path, dtype, inpath, d\_vocab, d\_label\_answer):
187         print(\textcolor{stringliteral}{'building fbformat:'} + dtype)
188         fout = open(os.path.join(out\_path, dtype + \textcolor{stringliteral}{'.txt'}), \textcolor{stringliteral}{'w'})
189         lines = cls.readlines(inpath)
190 
191         \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} lines:
192             fields = line.rstrip(\textcolor{stringliteral}{"\(\backslash\)n"}).split(\textcolor{stringliteral}{"\(\backslash\)t"})
193             \textcolor{keywordflow}{if} len(fields) != 4:
194                 \textcolor{keywordflow}{raise} ValueError(
195                     \textcolor{stringliteral}{"data file (%s) corrupted. Line (%s)"} % (repr(line), inpath)
196                 )
197             \textcolor{keywordflow}{else}:
198                 \_, s\_q\_wids, s\_good\_aids, s\_bad\_aids = fields
199                 q = cls.wids2sent(s\_q\_wids.split(), d\_vocab)
200                 good\_ans = [d\_label\_answer[aid\_] \textcolor{keywordflow}{for} aid\_ \textcolor{keywordflow}{in} s\_good\_aids.split()]
201                 bad\_ans = [d\_label\_answer[aid\_] \textcolor{keywordflow}{for} aid\_ \textcolor{keywordflow}{in} s\_bad\_aids.split()]
202                 \textcolor{comment}{# save}
203                 s = (
204                     \textcolor{stringliteral}{'1 '}
205                     + q
206                     + \textcolor{stringliteral}{'\(\backslash\)t'}
207                     + \textcolor{stringliteral}{"|"}.join(good\_ans)
208                     + \textcolor{stringliteral}{'\(\backslash\)t\(\backslash\)t'}
209                     + \textcolor{stringliteral}{"|"}.join(good\_ans + bad\_ans)
210                 )
211                 fout.write(s + \textcolor{stringliteral}{'\(\backslash\)n'})
212         fout.close()
213 
214 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_a8a510d31a4f0b733beb887de3c8379b0}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_a8a510d31a4f0b733beb887de3c8379b0}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2}!write\+\_\+data\+\_\+files@{write\+\_\+data\+\_\+files}}
\index{write\+\_\+data\+\_\+files@{write\+\_\+data\+\_\+files}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2}}
\subsubsection{\texorpdfstring{write\+\_\+data\+\_\+files()}{write\_data\_files()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A\+V2.\+write\+\_\+data\+\_\+files (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{dpext,  }\item[{}]{out\+\_\+path,  }\item[{}]{d\+\_\+vocab,  }\item[{}]{d\+\_\+label\+\_\+answer }\end{DoxyParamCaption})}



Definition at line 161 of file build.\+py.


\begin{DoxyCode}
161     \textcolor{keyword}{def }write\_data\_files(cls, dpext, out\_path, d\_vocab, d\_label\_answer):
162         data\_fnames\_tmpl = [
163             (
164                 \textcolor{stringliteral}{"train.%s"},
165                 \textcolor{stringliteral}{"InsuranceQA.question.anslabel.token.%s.pool.solr.train.encoded.gz"},
166             ),  \textcolor{comment}{# noqa: E501}
167             (
168                 \textcolor{stringliteral}{"valid.%s"},
169                 \textcolor{stringliteral}{"InsuranceQA.question.anslabel.token.%s.pool.solr.valid.encoded.gz"},
170             ),  \textcolor{comment}{# noqa: E501}
171             (
172                 \textcolor{stringliteral}{"test.%s"},
173                 \textcolor{stringliteral}{"InsuranceQA.question.anslabel.token.%s.pool.solr.test.encoded.gz"},
174             ),  \textcolor{comment}{# noqa: E501}
175         ]
176         \textcolor{keywordflow}{for} n\_cands \textcolor{keywordflow}{in} [100, 500, 1000, 1500]:
177             \textcolor{keywordflow}{for} dtype\_tmp, data\_fname\_tmp \textcolor{keywordflow}{in} data\_fnames\_tmpl:
178                 dtype = dtype\_tmp % n\_cands
179                 data\_fname = data\_fname\_tmp % n\_cands
180                 data\_path = os.path.join(dpext, data\_fname)
181                 cls.create\_fb\_format(
182                     out\_path, dtype, data\_path, d\_vocab, d\_label\_answer
183                 )
184 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_a33951ca3b8a8270c1acd65b14bac757f}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_a33951ca3b8a8270c1acd65b14bac757f}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2}!label2answer\+\_\+fname@{label2answer\+\_\+fname}}
\index{label2answer\+\_\+fname@{label2answer\+\_\+fname}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2}}
\subsubsection{\texorpdfstring{label2answer\+\_\+fname}{label2answer\_fname}}
{\footnotesize\ttfamily parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A\+V2.\+label2answer\+\_\+fname\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 158 of file build.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_a638ee7d37982261f4cfd3e099c8668a3}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQAV2_a638ee7d37982261f4cfd3e099c8668a3}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2}!version@{version}}
\index{version@{version}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+Q\+A\+V2}}
\subsubsection{\texorpdfstring{version}{version}}
{\footnotesize\ttfamily parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A\+V2.\+version\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 157 of file build.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/tasks/insuranceqa/\hyperlink{parlai_2tasks_2insuranceqa_2build_8py}{build.\+py}\end{DoxyCompactItemize}
