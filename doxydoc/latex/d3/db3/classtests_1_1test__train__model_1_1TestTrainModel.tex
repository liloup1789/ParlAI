\hypertarget{classtests_1_1test__train__model_1_1TestTrainModel}{}\section{tests.\+test\+\_\+train\+\_\+model.\+Test\+Train\+Model Class Reference}
\label{classtests_1_1test__train__model_1_1TestTrainModel}\index{tests.\+test\+\_\+train\+\_\+model.\+Test\+Train\+Model@{tests.\+test\+\_\+train\+\_\+model.\+Test\+Train\+Model}}


Inheritance diagram for tests.\+test\+\_\+train\+\_\+model.\+Test\+Train\+Model\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=216pt]{de/d6c/classtests_1_1test__train__model_1_1TestTrainModel__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for tests.\+test\+\_\+train\+\_\+model.\+Test\+Train\+Model\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=216pt]{d7/d26/classtests_1_1test__train__model_1_1TestTrainModel__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classtests_1_1test__train__model_1_1TestTrainModel_affbd00e2cf6b61eae40b5f6e4c1cd8a9}{test\+\_\+fast\+\_\+final\+\_\+eval} (self)
\item 
def \hyperlink{classtests_1_1test__train__model_1_1TestTrainModel_a099516526ea34f8ad88bf921e94c01b9}{test\+\_\+multitasking\+\_\+metrics} (self)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 15 of file test\+\_\+train\+\_\+model.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classtests_1_1test__train__model_1_1TestTrainModel_affbd00e2cf6b61eae40b5f6e4c1cd8a9}\label{classtests_1_1test__train__model_1_1TestTrainModel_affbd00e2cf6b61eae40b5f6e4c1cd8a9}} 
\index{tests\+::test\+\_\+train\+\_\+model\+::\+Test\+Train\+Model@{tests\+::test\+\_\+train\+\_\+model\+::\+Test\+Train\+Model}!test\+\_\+fast\+\_\+final\+\_\+eval@{test\+\_\+fast\+\_\+final\+\_\+eval}}
\index{test\+\_\+fast\+\_\+final\+\_\+eval@{test\+\_\+fast\+\_\+final\+\_\+eval}!tests\+::test\+\_\+train\+\_\+model\+::\+Test\+Train\+Model@{tests\+::test\+\_\+train\+\_\+model\+::\+Test\+Train\+Model}}
\subsubsection{\texorpdfstring{test\+\_\+fast\+\_\+final\+\_\+eval()}{test\_fast\_final\_eval()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+train\+\_\+model.\+Test\+Train\+Model.\+test\+\_\+fast\+\_\+final\+\_\+eval (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 16 of file test\+\_\+train\+\_\+model.\+py.


\begin{DoxyCode}
16     \textcolor{keyword}{def }test\_fast\_final\_eval(self):
17         stdout, valid, test = testing\_utils.train\_model(
18             \{
19                 \textcolor{stringliteral}{'task'}: \textcolor{stringliteral}{'integration\_tests'},
20                 \textcolor{stringliteral}{'validation\_max\_exs'}: 10,
21                 \textcolor{stringliteral}{'model'}: \textcolor{stringliteral}{'repeat\_label'},
22                 \textcolor{stringliteral}{'short\_final\_eval'}: \textcolor{keyword}{True},
23                 \textcolor{stringliteral}{'num\_epochs'}: 1.0,
24             \}
25         )
26         self.assertEqual(valid[\textcolor{stringliteral}{'exs'}], 10, \textcolor{stringliteral}{'Validation exs is wrong'})
27         self.assertEqual(test[\textcolor{stringliteral}{'exs'}], 10, \textcolor{stringliteral}{'Test exs is wrong'})
28 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__train__model_1_1TestTrainModel_a099516526ea34f8ad88bf921e94c01b9}\label{classtests_1_1test__train__model_1_1TestTrainModel_a099516526ea34f8ad88bf921e94c01b9}} 
\index{tests\+::test\+\_\+train\+\_\+model\+::\+Test\+Train\+Model@{tests\+::test\+\_\+train\+\_\+model\+::\+Test\+Train\+Model}!test\+\_\+multitasking\+\_\+metrics@{test\+\_\+multitasking\+\_\+metrics}}
\index{test\+\_\+multitasking\+\_\+metrics@{test\+\_\+multitasking\+\_\+metrics}!tests\+::test\+\_\+train\+\_\+model\+::\+Test\+Train\+Model@{tests\+::test\+\_\+train\+\_\+model\+::\+Test\+Train\+Model}}
\subsubsection{\texorpdfstring{test\+\_\+multitasking\+\_\+metrics()}{test\_multitasking\_metrics()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+train\+\_\+model.\+Test\+Train\+Model.\+test\+\_\+multitasking\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 29 of file test\+\_\+train\+\_\+model.\+py.


\begin{DoxyCode}
29     \textcolor{keyword}{def }test\_multitasking\_metrics(self):
30         stdout, valid, test = testing\_utils.train\_model(
31             \{
32                 \textcolor{stringliteral}{'task'}: \textcolor{stringliteral}{'integration\_tests:candidate,'}
33                 \textcolor{stringliteral}{'integration\_tests:multiturnCandidate'},
34                 \textcolor{stringliteral}{'model'}: \textcolor{stringliteral}{'random\_candidate'},
35                 \textcolor{stringliteral}{'num\_epochs'}: 0.5,
36                 \textcolor{stringliteral}{'aggregate\_micro'}: \textcolor{keyword}{True},
37             \}
38         )
39 
40         task1\_acc = valid[\textcolor{stringliteral}{'tasks'}][\textcolor{stringliteral}{'integration\_tests:candidate'}][\textcolor{stringliteral}{'accuracy'}]
41         task2\_acc = valid[\textcolor{stringliteral}{'tasks'}][\textcolor{stringliteral}{'integration\_tests:multiturnCandidate'}][\textcolor{stringliteral}{'accuracy'}]
42         total\_acc = valid[\textcolor{stringliteral}{'accuracy'}]
43         \textcolor{comment}{# task 2 is 4 times the size of task 1}
44         self.assertAlmostEqual(
45             total\_acc,
46             (task1\_acc + 4 * task2\_acc) / 5,
47             4,
48             \textcolor{stringliteral}{'Task accuracy is averaged incorrectly'},
49         )
50 
51         stdout, valid, test = testing\_utils.train\_model(
52             \{
53                 \textcolor{stringliteral}{'task'}: \textcolor{stringliteral}{'integration\_tests:candidate,'}
54                 \textcolor{stringliteral}{'integration\_tests:multiturnCandidate'},
55                 \textcolor{stringliteral}{'model'}: \textcolor{stringliteral}{'random\_candidate'},
56                 \textcolor{stringliteral}{'num\_epochs'}: 0.5,
57                 \textcolor{stringliteral}{'aggregate\_micro'}: \textcolor{keyword}{False},
58             \}
59         )
60         task1\_acc = valid[\textcolor{stringliteral}{'tasks'}][\textcolor{stringliteral}{'integration\_tests:candidate'}][\textcolor{stringliteral}{'accuracy'}]
61         task2\_acc = valid[\textcolor{stringliteral}{'tasks'}][\textcolor{stringliteral}{'integration\_tests:multiturnCandidate'}][\textcolor{stringliteral}{'accuracy'}]
62         total\_acc = valid[\textcolor{stringliteral}{'accuracy'}]
63         \textcolor{comment}{# metrics should be averaged equally across tasks}
64         self.assertAlmostEqual(
65             total\_acc,
66             (task1\_acc + task2\_acc) / 2,
67             4,
68             \textcolor{stringliteral}{'Task accuracy is averaged incorrectly'},
69         )
70 
71 
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
tests/\hyperlink{test__train__model_8py}{test\+\_\+train\+\_\+model.\+py}\end{DoxyCompactItemize}
