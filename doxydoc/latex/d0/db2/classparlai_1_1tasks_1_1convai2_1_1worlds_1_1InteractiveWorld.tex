\hypertarget{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld}{}\section{parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World Class Reference}
\label{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld}\index{parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World@{parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World}}


Inheritance diagram for parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=218pt]{db/db8/classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=218pt]{d9/dc4/classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a5fb521abcaeae7438ab08feff1bdfccf}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1worlds_1_1World_a3640d92718acd3e6942a28c1ab3678bd}{opt}, \hyperlink{classparlai_1_1core_1_1worlds_1_1DialogPartnerWorld_a04185d1d55ca86c96c796f12f2226fc9}{agents}, shared=None)
\item 
def \hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_acac91ca0d5cfc546437874e2f6d801a3}{get\+\_\+new\+\_\+personas} (self)
\item 
def \hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a75559c133b900cdd71389c9760e9a703}{parley} (self)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_abcbca63c63937e6399a1ab29cd425274}{add\+\_\+cmdline\+\_\+args} (argparser)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a544124310a84b4fb70abda3b41df5323}{personas\+\_\+list}
\item 
\hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a88aa6f6d630f6d15551e333260bf8e9a}{display\+\_\+partner\+\_\+persona}
\item 
\hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a3caeecc4c52e4dce168341bbb1519b03}{cnt}
\item 
\hyperlink{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a8f91a884b0bcb293335e3b7cb6404a1f}{p2}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 51 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a5fb521abcaeae7438ab08feff1bdfccf}\label{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a5fb521abcaeae7438ab08feff1bdfccf}} 
\index{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{agents,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 62 of file worlds.\+py.


\begin{DoxyCode}
62     \textcolor{keyword}{def }\_\_init\_\_(self, opt, agents, shared=None):
63         super().\_\_init\_\_(opt, agents, shared)
64         self.personas\_list = \hyperlink{namespaceparlai_1_1tasks_1_1convai2_1_1worlds_a61a758b7cb43183397d002f7f203f586}{load\_personas}(self.opt)
65         self.display\_partner\_persona = self.opt[\textcolor{stringliteral}{'display\_partner\_persona'}]
66         self.cnt = 0
67 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_abcbca63c63937e6399a1ab29cd425274}\label{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_abcbca63c63937e6399a1ab29cd425274}} 
\index{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}!add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}}
\index{add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}!parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}}
\subsubsection{\texorpdfstring{add\+\_\+cmdline\+\_\+args()}{add\_cmdline\_args()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World.\+add\+\_\+cmdline\+\_\+args (\begin{DoxyParamCaption}\item[{}]{argparser }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 53 of file worlds.\+py.


\begin{DoxyCode}
53     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1drqa_1_1config_a62fdd5554f1da6be0cba185271058320}{add\_cmdline\_args}(argparser):
54         parser = argparser.add\_argument\_group(\textcolor{stringliteral}{'ConvAI2 Interactive World'})
55         parser.add\_argument(
56             \textcolor{stringliteral}{'--display-partner-persona'},
57             type=\textcolor{stringliteral}{'bool'},
58             default=\textcolor{keyword}{True},
59             help=\textcolor{stringliteral}{'Display your partner persona at the end of the chat'},
60         )
61 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_acac91ca0d5cfc546437874e2f6d801a3}\label{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_acac91ca0d5cfc546437874e2f6d801a3}} 
\index{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}!get\+\_\+new\+\_\+personas@{get\+\_\+new\+\_\+personas}}
\index{get\+\_\+new\+\_\+personas@{get\+\_\+new\+\_\+personas}!parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}}
\subsubsection{\texorpdfstring{get\+\_\+new\+\_\+personas()}{get\_new\_personas()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World.\+get\+\_\+new\+\_\+personas (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 68 of file worlds.\+py.


\begin{DoxyCode}
68     \textcolor{keyword}{def }get\_new\_personas(self):
69         random.seed()
70         personas\_1 = random.choice(self.personas\_list)
71         personas\_2 = random.choice(self.personas\_list)
72         \textcolor{keywordflow}{return} personas\_1, personas\_2
73 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a75559c133b900cdd71389c9760e9a703}\label{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a75559c133b900cdd71389c9760e9a703}} 
\index{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}!parley@{parley}}
\index{parley@{parley}!parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}}
\subsubsection{\texorpdfstring{parley()}{parley()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World.\+parley (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Agent 0 goes first.

Alternate between the two agents.
\end{DoxyVerb}
 

Definition at line 74 of file worlds.\+py.


\begin{DoxyCode}
74     \textcolor{keyword}{def }parley(self):
75         \textcolor{stringliteral}{"""}
76 \textcolor{stringliteral}{        Agent 0 goes first.}
77 \textcolor{stringliteral}{}
78 \textcolor{stringliteral}{        Alternate between the two agents.}
79 \textcolor{stringliteral}{        """}
80         \textcolor{keywordflow}{if} self.cnt == 0:
81             self.p1, self.p2 = self.get\_new\_personas()
82 
83         acts = self.acts
84         human\_agent, model\_agent = self.agents
85         \textcolor{keywordflow}{if} self.cnt == 0:
86             \textcolor{comment}{# add the persona on to the first message to human agent}
87             act = \{\}
88             act[\textcolor{stringliteral}{'text'}] = self.p1
89             act[\textcolor{stringliteral}{'episode\_done'}] = \textcolor{keyword}{False}
90             act[\textcolor{stringliteral}{'id'}] = \textcolor{stringliteral}{'persona'}
91             human\_agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(act))
92         act = deepcopy(human\_agent.act())
93         \textcolor{keywordflow}{if} self.cnt == 0:
94             \textcolor{comment}{# add the persona on to the first message to model agent}
95             act.force\_set(\textcolor{stringliteral}{'text'}, self.p2 + act.get(\textcolor{stringliteral}{'text'}, \textcolor{stringliteral}{'hi'}))
96             model\_agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(act))
97         \textcolor{keywordflow}{else}:
98             model\_agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(act))
99         acts[1] = model\_agent.act()
100         human\_agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(acts[1]))
101         self.update\_counters()
102         self.cnt += 1
103 
104         \textcolor{keywordflow}{if} act[\textcolor{stringliteral}{'episode\_done'}]:
105             print(\textcolor{stringliteral}{"\(\backslash\)nCHAT DONE.\(\backslash\)n"})
106             \textcolor{keywordflow}{if} self.display\_partner\_persona:
107                 partner\_persona = self.p2.replace(
108                     \textcolor{stringliteral}{'your persona:'}, \textcolor{stringliteral}{'partner\(\backslash\)'s persona:'}
109                 )
110                 print(
111                     f\textcolor{stringliteral}{"Your partner was playing the following persona:\(\backslash\)n\{partner\_persona\}"}
112                 )
113             print(\textcolor{stringliteral}{"[ Preparing new chat ... ]\(\backslash\)n"})
114             self.cnt = 0
115 
116 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a3caeecc4c52e4dce168341bbb1519b03}\label{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a3caeecc4c52e4dce168341bbb1519b03}} 
\index{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}!cnt@{cnt}}
\index{cnt@{cnt}!parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}}
\subsubsection{\texorpdfstring{cnt}{cnt}}
{\footnotesize\ttfamily parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World.\+cnt}



Definition at line 66 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a88aa6f6d630f6d15551e333260bf8e9a}\label{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a88aa6f6d630f6d15551e333260bf8e9a}} 
\index{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}!display\+\_\+partner\+\_\+persona@{display\+\_\+partner\+\_\+persona}}
\index{display\+\_\+partner\+\_\+persona@{display\+\_\+partner\+\_\+persona}!parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}}
\subsubsection{\texorpdfstring{display\+\_\+partner\+\_\+persona}{display\_partner\_persona}}
{\footnotesize\ttfamily parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World.\+display\+\_\+partner\+\_\+persona}



Definition at line 65 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a8f91a884b0bcb293335e3b7cb6404a1f}\label{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a8f91a884b0bcb293335e3b7cb6404a1f}} 
\index{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}!p2@{p2}}
\index{p2@{p2}!parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}}
\subsubsection{\texorpdfstring{p2}{p2}}
{\footnotesize\ttfamily parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World.\+p2}



Definition at line 81 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a544124310a84b4fb70abda3b41df5323}\label{classparlai_1_1tasks_1_1convai2_1_1worlds_1_1InteractiveWorld_a544124310a84b4fb70abda3b41df5323}} 
\index{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}!personas\+\_\+list@{personas\+\_\+list}}
\index{personas\+\_\+list@{personas\+\_\+list}!parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World@{parlai\+::tasks\+::convai2\+::worlds\+::\+Interactive\+World}}
\subsubsection{\texorpdfstring{personas\+\_\+list}{personas\_list}}
{\footnotesize\ttfamily parlai.\+tasks.\+convai2.\+worlds.\+Interactive\+World.\+personas\+\_\+list}



Definition at line 64 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/tasks/convai2/\hyperlink{parlai_2tasks_2convai2_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
