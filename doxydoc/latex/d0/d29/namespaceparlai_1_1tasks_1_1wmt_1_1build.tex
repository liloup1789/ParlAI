\hypertarget{namespaceparlai_1_1tasks_1_1wmt_1_1build}{}\section{parlai.\+tasks.\+wmt.\+build Namespace Reference}
\label{namespaceparlai_1_1tasks_1_1wmt_1_1build}\index{parlai.\+tasks.\+wmt.\+build@{parlai.\+tasks.\+wmt.\+build}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1wmt_1_1build_a192eab3c7b1241809a1c134d54a9933f}{read\+Files} (dpath, rfnames)
\item 
def \hyperlink{namespaceparlai_1_1tasks_1_1wmt_1_1build_a824777527357c539f3e9d748efaa2f57}{build} (opt)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespaceparlai_1_1tasks_1_1wmt_1_1build_a1d3c055b42a6d2afdc77be3068414bae}{R\+E\+S\+O\+U\+R\+C\+ES}
\item 
bool \hyperlink{namespaceparlai_1_1tasks_1_1wmt_1_1build_a57b7ea8cd94546ecabb37c23515d739b}{zipped} = False,
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1wmt_1_1build_a824777527357c539f3e9d748efaa2f57}\label{namespaceparlai_1_1tasks_1_1wmt_1_1build_a824777527357c539f3e9d748efaa2f57}} 
\index{parlai\+::tasks\+::wmt\+::build@{parlai\+::tasks\+::wmt\+::build}!build@{build}}
\index{build@{build}!parlai\+::tasks\+::wmt\+::build@{parlai\+::tasks\+::wmt\+::build}}
\subsubsection{\texorpdfstring{build()}{build()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+wmt.\+build.\+build (\begin{DoxyParamCaption}\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 55 of file build.\+py.


\begin{DoxyCode}
55 \textcolor{keyword}{def }\hyperlink{namespacedialog__babi__feedback_1_1build_a7a9d289f7493a5ded13c4b7f071b6184}{build}(opt):
56     dpath = os.path.join(opt[\textcolor{stringliteral}{'datapath'}], \textcolor{stringliteral}{'wmt'})
57     version = \textcolor{stringliteral}{'None'}
58 
59     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} build\_data.built(dpath, version\_string=version):
60         print(\textcolor{stringliteral}{'[building data: '} + dpath + \textcolor{stringliteral}{']'})
61         \textcolor{keywordflow}{if} build\_data.built(dpath):
62             \textcolor{comment}{# An older version exists, so remove these outdated files.}
63             build\_data.remove\_dir(dpath)
64         build\_data.make\_dir(dpath)
65 
66         \textcolor{comment}{# Download the data.}
67         \textcolor{keywordflow}{for} downloadable\_file \textcolor{keywordflow}{in} RESOURCES:
68             downloadable\_file.download\_file(dpath)
69 
70         train\_r\_fnames = (\textcolor{stringliteral}{'train.en'}, \textcolor{stringliteral}{'train.de'})
71         train\_w\_fname = \textcolor{stringliteral}{'en\_de\_train.txt'}
72         valid\_w\_fname = \textcolor{stringliteral}{'en\_de\_valid.txt'}
73         test\_r\_fnames = (\textcolor{stringliteral}{'newstest2014.en'}, \textcolor{stringliteral}{'newstest2014.de'})
74         test\_w\_fname = \textcolor{stringliteral}{'en\_de\_test.txt'}
75 
76         train\_zip = \hyperlink{namespaceparlai_1_1tasks_1_1wmt_1_1build_a192eab3c7b1241809a1c134d54a9933f}{readFiles}(dpath, train\_r\_fnames)
77         numpy.random.shuffle(train\_zip)
78         with open(os.path.join(dpath, valid\_w\_fname), \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} f:
79             \textcolor{keywordflow}{for} de\_sent, en\_sent \textcolor{keywordflow}{in} train\_zip[:30000]:
80                 f.write(\textcolor{stringliteral}{'1 '} + en\_sent + \textcolor{stringliteral}{'\(\backslash\)t'} + de\_sent + \textcolor{stringliteral}{'\(\backslash\)n'})
81         with open(os.path.join(dpath, train\_w\_fname), \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} f:
82             \textcolor{keywordflow}{for} de\_sent, en\_sent \textcolor{keywordflow}{in} train\_zip[30000:]:
83                 f.write(\textcolor{stringliteral}{'1 '} + en\_sent + \textcolor{stringliteral}{'\(\backslash\)t'} + de\_sent + \textcolor{stringliteral}{'\(\backslash\)n'})
84 
85         test\_zip = \hyperlink{namespaceparlai_1_1tasks_1_1wmt_1_1build_a192eab3c7b1241809a1c134d54a9933f}{readFiles}(dpath, test\_r\_fnames)
86         with open(os.path.join(dpath, test\_w\_fname), \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} f:
87             \textcolor{keywordflow}{for} de\_sent, en\_sent \textcolor{keywordflow}{in} test\_zip:
88                 f.write(\textcolor{stringliteral}{'1 '} + en\_sent + \textcolor{stringliteral}{'\(\backslash\)t'} + de\_sent + \textcolor{stringliteral}{'\(\backslash\)n'})
89 
90         \textcolor{comment}{# Mark the data as built.}
91         build\_data.mark\_done(dpath, version\_string=version)
92 \end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1wmt_1_1build_a192eab3c7b1241809a1c134d54a9933f}\label{namespaceparlai_1_1tasks_1_1wmt_1_1build_a192eab3c7b1241809a1c134d54a9933f}} 
\index{parlai\+::tasks\+::wmt\+::build@{parlai\+::tasks\+::wmt\+::build}!read\+Files@{read\+Files}}
\index{read\+Files@{read\+Files}!parlai\+::tasks\+::wmt\+::build@{parlai\+::tasks\+::wmt\+::build}}
\subsubsection{\texorpdfstring{read\+Files()}{readFiles()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+wmt.\+build.\+read\+Files (\begin{DoxyParamCaption}\item[{}]{dpath,  }\item[{}]{rfnames }\end{DoxyParamCaption})}



Definition at line 42 of file build.\+py.


\begin{DoxyCode}
42 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1wmt_1_1build_a192eab3c7b1241809a1c134d54a9933f}{readFiles}(dpath, rfnames):
43     en\_fname, de\_fname = rfnames
44     with open(os.path.join(dpath, en\_fname), \textcolor{stringliteral}{'r') as f:}
45 \textcolor{stringliteral}{        }\textcolor{comment}{# We replace '##AT##-##AT##' as a workaround in order to use the}
46         \textcolor{comment}{# nltk tokenizer specified by DictionaryAgent}
47         en = [l[:-1].replace(\textcolor{stringliteral}{'##AT##-##AT##'}, \textcolor{stringliteral}{'\_\_AT\_\_'}) \textcolor{keywordflow}{for} l \textcolor{keywordflow}{in} f]
48 
49     with open(os.path.join(dpath, de\_fname), \textcolor{stringliteral}{'r') as f:}
50 \textcolor{stringliteral}{        de = [l[:-1].replace('##AT##-##AT##'}, \textcolor{stringliteral}{'\_\_AT\_\_'}) \textcolor{keywordflow}{for} l \textcolor{keywordflow}{in} f]
51 
52     \textcolor{keywordflow}{return} list(zip(de, en))
53 
54 
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1wmt_1_1build_a1d3c055b42a6d2afdc77be3068414bae}\label{namespaceparlai_1_1tasks_1_1wmt_1_1build_a1d3c055b42a6d2afdc77be3068414bae}} 
\index{parlai\+::tasks\+::wmt\+::build@{parlai\+::tasks\+::wmt\+::build}!R\+E\+S\+O\+U\+R\+C\+ES@{R\+E\+S\+O\+U\+R\+C\+ES}}
\index{R\+E\+S\+O\+U\+R\+C\+ES@{R\+E\+S\+O\+U\+R\+C\+ES}!parlai\+::tasks\+::wmt\+::build@{parlai\+::tasks\+::wmt\+::build}}
\subsubsection{\texorpdfstring{R\+E\+S\+O\+U\+R\+C\+ES}{RESOURCES}}
{\footnotesize\ttfamily parlai.\+tasks.\+wmt.\+build.\+R\+E\+S\+O\+U\+R\+C\+ES}



Definition at line 14 of file build.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1tasks_1_1wmt_1_1build_a57b7ea8cd94546ecabb37c23515d739b}\label{namespaceparlai_1_1tasks_1_1wmt_1_1build_a57b7ea8cd94546ecabb37c23515d739b}} 
\index{parlai\+::tasks\+::wmt\+::build@{parlai\+::tasks\+::wmt\+::build}!zipped@{zipped}}
\index{zipped@{zipped}!parlai\+::tasks\+::wmt\+::build@{parlai\+::tasks\+::wmt\+::build}}
\subsubsection{\texorpdfstring{zipped}{zipped}}
{\footnotesize\ttfamily bool parlai.\+tasks.\+wmt.\+build.\+zipped = False,}



Definition at line 19 of file build.\+py.

