\hypertarget{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher}{}\section{parlai.\+tasks.\+narrative\+\_\+qa.\+agents.\+Default\+Teacher Class Reference}
\label{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher}\index{parlai.\+tasks.\+narrative\+\_\+qa.\+agents.\+Default\+Teacher@{parlai.\+tasks.\+narrative\+\_\+qa.\+agents.\+Default\+Teacher}}


Inheritance diagram for parlai.\+tasks.\+narrative\+\_\+qa.\+agents.\+Default\+Teacher\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{d7/d5c/classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+tasks.\+narrative\+\_\+qa.\+agents.\+Default\+Teacher\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{dd/d19/classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher_a1e28f1ca5d28d95fe534c91900889fec}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1agents_1_1Teacher_a3ce6243860ce978a897922863ed32fa4}{opt}, shared=None)
\item 
def \hyperlink{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher_aea2df19cb2adefb891829407f2988b19}{setup\+\_\+data} (self, path)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher_a3eb0cdd21da621da606478fcf09b5e2e}{id}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 73 of file agents.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher_a1e28f1ca5d28d95fe534c91900889fec}\label{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher_a1e28f1ca5d28d95fe534c91900889fec}} 
\index{parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher@{parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher@{parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+narrative\+\_\+qa.\+agents.\+Default\+Teacher.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 74 of file agents.\+py.


\begin{DoxyCode}
74     \textcolor{keyword}{def }\_\_init\_\_(self, opt, shared=None):
75         opt = copy.deepcopy(opt)
76         data\_path = \_path(opt)
77         opt[\textcolor{stringliteral}{'datafile'}] = data\_path
78         self.id = \textcolor{stringliteral}{'NarrativeQA'}
79 
80         super().\_\_init\_\_(opt, shared)
81 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher_aea2df19cb2adefb891829407f2988b19}\label{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher_aea2df19cb2adefb891829407f2988b19}} 
\index{parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher@{parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher}!setup\+\_\+data@{setup\+\_\+data}}
\index{setup\+\_\+data@{setup\+\_\+data}!parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher@{parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher}}
\subsubsection{\texorpdfstring{setup\+\_\+data()}{setup\_data()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+narrative\+\_\+qa.\+agents.\+Default\+Teacher.\+setup\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{path }\end{DoxyParamCaption})}



Definition at line 82 of file agents.\+py.


\begin{DoxyCode}
82     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1multinli_1_1agents_a4fa2cb0ba1ed745336ad8bceed36b841}{setup\_data}(self, path):
83         print(\textcolor{stringliteral}{'loading data from: '} + path)
84 
85         qa\_path = os.path.join(path, \textcolor{stringliteral}{'qaps.csv'})
86         documents\_path = os.path.join(path, \textcolor{stringliteral}{'documents.csv'})
87 
88         stories\_base\_path = os.path.join(path, \textcolor{stringliteral}{'..'}, \textcolor{stringliteral}{'stories'})
89         qa\_pairs = dict()
90 
91         print(
92             \textcolor{stringliteral}{"%s stories found."}
93             % len(glob.glob(os.path.join(stories\_base\_path, \textcolor{stringliteral}{"*.content"})))
94         )
95 
96         with open(qa\_path, \textcolor{stringliteral}{'r') as f:}
97 \textcolor{stringliteral}{            reader = csv.DictReader(f)}
98 \textcolor{stringliteral}{            }\textcolor{keywordflow}{for} row \textcolor{keywordflow}{in} reader:
99                 \textcolor{keywordflow}{if} row[\textcolor{stringliteral}{'document\_id'}] \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} qa\_pairs:
100                     qa\_pairs[row[\textcolor{stringliteral}{'document\_id'}]] = []
101                 qa\_pairs[row[\textcolor{stringliteral}{'document\_id'}]].append(row)
102 
103         with open(documents\_path, \textcolor{stringliteral}{'r') as f:}
104 \textcolor{stringliteral}{            reader = csv.DictReader(f)}
105 \textcolor{stringliteral}{}
106 \textcolor{stringliteral}{            }\textcolor{keywordflow}{for} row \textcolor{keywordflow}{in} reader:
107                 story\_path = os.path.join(
108                     stories\_base\_path, row[\textcolor{stringliteral}{'document\_id'}] + \textcolor{stringliteral}{'.content'}
109                 )
110 
111                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(story\_path):
112                     \textcolor{keywordflow}{continue}
113 
114                 story = \textcolor{keywordtype}{None}
115                 with open(story\_path, \textcolor{stringliteral}{'r', encoding='}utf-8', errors='ignore') as f:
116                     story = f.read().strip()
117 
118                 info = \textcolor{stringliteral}{'Title:  %s'} % row[\textcolor{stringliteral}{'wiki\_title'}]
119                 info += \textcolor{stringliteral}{'\(\backslash\)nKind: %s'} % row[\textcolor{stringliteral}{'kind'}]
120                 info += \textcolor{stringliteral}{'\(\backslash\)nStory url: %s'} % row[\textcolor{stringliteral}{'story\_url'}]
121                 info += \textcolor{stringliteral}{'\(\backslash\)nStory start: %s'} % row[\textcolor{stringliteral}{'story\_start'}]
122                 info += \textcolor{stringliteral}{'\(\backslash\)nStory end: %s'} % row[\textcolor{stringliteral}{'story\_end'}]
123                 info += \textcolor{stringliteral}{'\(\backslash\)nStory: %s'} % story
124 
125                 \textcolor{keywordflow}{for} i, qa \textcolor{keywordflow}{in} enumerate(qa\_pairs[row[\textcolor{stringliteral}{'document\_id'}]]):
126                     question = qa[\textcolor{stringliteral}{'question\_tokenized'}]
127                     answer1 = qa[\textcolor{stringliteral}{'answer1\_tokenized'}]
128                     answer2 = qa[\textcolor{stringliteral}{'answer2\_tokenized'}]
129 
130                     \textcolor{keywordflow}{if} i == 0:
131                         \textcolor{comment}{# Prepend start info in first question}
132                         \textcolor{keywordflow}{yield} (info + \textcolor{stringliteral}{'\(\backslash\)n'} + question, [answer1, answer2]), \textcolor{keyword}{True}
133                     \textcolor{keywordflow}{else}:
134                         \textcolor{keywordflow}{yield} (question, [answer1, answer2]), \textcolor{keyword}{False}
135 \end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher_a3eb0cdd21da621da606478fcf09b5e2e}\label{classparlai_1_1tasks_1_1narrative__qa_1_1agents_1_1DefaultTeacher_a3eb0cdd21da621da606478fcf09b5e2e}} 
\index{parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher@{parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher}!id@{id}}
\index{id@{id}!parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher@{parlai\+::tasks\+::narrative\+\_\+qa\+::agents\+::\+Default\+Teacher}}
\subsubsection{\texorpdfstring{id}{id}}
{\footnotesize\ttfamily parlai.\+tasks.\+narrative\+\_\+qa.\+agents.\+Default\+Teacher.\+id}



Definition at line 78 of file agents.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/tasks/narrative\+\_\+qa/\hyperlink{parlai_2tasks_2narrative__qa_2agents_8py}{agents.\+py}\end{DoxyCompactItemize}
