\hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher}{}\section{parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher Class Reference}
\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher}\index{parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher@{parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher}}


Inheritance diagram for parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=256pt]{d0/dc0/classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=256pt]{d0/d9e/classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ac9189c0fbd25d24bf036aadee0fa3aaf}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1agents_1_1Teacher_a3ce6243860ce978a897922863ed32fa4}{opt}, shared=None)
\item 
def \hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ab05b135cb36558dab5a04b4b00167159}{data\+\_\+to\+\_\+json} (self, pd, file\+\_\+name)
\item 
def \hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_acbc5c579a2791af831f6e4f72dc8560c}{build} (self, \hyperlink{classparlai_1_1core_1_1agents_1_1Teacher_a3ce6243860ce978a897922863ed32fa4}{opt})
\item 
def \hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a91737afc71227b1eb490648106b2a73c}{num\+\_\+episodes} (self)
\item 
def \hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a144791f29981c18666fa8725cc424ba8}{num\+\_\+examples} (self)
\item 
def \hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a036126fb8ba0cb0dcd665a5b6bd4966f}{get} (self, \hyperlink{classparlai_1_1core_1_1teachers_1_1FixedDialogTeacher_afd4ebab8063eb42d182d30a1a41f133e}{episode\+\_\+idx}, \hyperlink{classparlai_1_1core_1_1teachers_1_1FixedDialogTeacher_ae3201b15f3c3b46a2f3511bad9b43e7d}{entry\+\_\+idx})
\item 
def \hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a0d73b4cda0c165161393500459440b94}{share} (self)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ae852dbc08e3e60342ba52a89a6b4423c}{add\+\_\+cmdline\+\_\+args} (parser)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a0a82908d2bd950c6bc497f6e095b06b7}{fixed\+\_\+random}
\item 
\hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ad43ba64edd570e5fb5e4a4a0a68865cf}{use\+\_\+test\+\_\+set}
\item 
\hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a9eeb881196ce42d8994dc4884fd9113a}{balance\+\_\+data}
\item 
\hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a004f00e27fe4d6f437edab31e99018f5}{data\+\_\+path}
\item 
\hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_acfbf40cbf6be048c6667f4712e1db5c3}{data}
\item 
\hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a81bfea7e10ad4273964a26599dcce45d}{label\+\_\+candidates}
\item 
\hyperlink{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a027ef2d3141fc6e055b17f3ce7a3c7c5}{total\+\_\+data}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Dataset of comments from Wikipedia's Talk page edits. Taken from the Toxic Comments
Classification Challenge on Kaggle.

<https://www.kaggle.com/c/jigsaw-toxic-comment-classification-challenge/data>

We convert this data to a binary classification task.
\end{DoxyVerb}
 

Definition at line 140 of file agents.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ac9189c0fbd25d24bf036aadee0fa3aaf}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ac9189c0fbd25d24bf036aadee0fa3aaf}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 170 of file agents.\+py.


\begin{DoxyCode}
170     \textcolor{keyword}{def }\_\_init\_\_(self, opt, shared=None):
171         self.fixed\_random = random.Random(42)
172 
173         self.use\_test\_set = opt[\textcolor{stringliteral}{'use\_test\_set'}]
174         self.balance\_data = opt[\textcolor{stringliteral}{'balance\_data'}]
175 
176         self.data\_path = os.path.join(
177             opt[\textcolor{stringliteral}{'datapath'}], \textcolor{stringliteral}{'dialogue\_safety'}, \textcolor{stringliteral}{'wiki-toxic-comments'}
178         )
179 
180         \textcolor{keywordflow}{if} shared \textcolor{keywordflow}{and} \textcolor{stringliteral}{'data'} \textcolor{keywordflow}{in} shared:
181             self.data = shared[\textcolor{stringliteral}{'data'}]
182         \textcolor{keywordflow}{else}:
183             self.build(opt)
184             self.\_setup\_data(opt[\textcolor{stringliteral}{'datatype'}])
185 
186         self.label\_candidates = [NOT\_OK\_CLASS, OK\_CLASS]
187 
188         opt = copy.deepcopy(opt)
189         super().\_\_init\_\_(opt, shared)
190         self.reset()
191 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ae852dbc08e3e60342ba52a89a6b4423c}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ae852dbc08e3e60342ba52a89a6b4423c}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}}
\index{add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{add\+\_\+cmdline\+\_\+args()}{add\_cmdline\_args()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+add\+\_\+cmdline\+\_\+args (\begin{DoxyParamCaption}\item[{}]{parser }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 151 of file agents.\+py.


\begin{DoxyCode}
151     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1drqa_1_1config_a62fdd5554f1da6be0cba185271058320}{add\_cmdline\_args}(parser):
152         parser = parser.add\_argument\_group(\textcolor{stringliteral}{'Kaggle Toxic Comment Classification Data'})
153         parser.add\_argument(
154             \textcolor{stringliteral}{'--use-test-set'},
155             type=\textcolor{stringliteral}{'bool'},
156             default=\textcolor{keyword}{False},
157             help=\textcolor{stringliteral}{'Defaults to 80/10/10 train/test/valid split of train set. '}
158             \textcolor{stringliteral}{'Else, will partition train data into 90/10 train/valid and '}
159             \textcolor{stringliteral}{'use the test set as is.'},
160         )
161         parser.add\_argument(
162             \textcolor{stringliteral}{'--balance-data'},
163             type=\textcolor{stringliteral}{'bool'},
164             default=\textcolor{keyword}{False},
165             help=\textcolor{stringliteral}{'Balances the data so there are equal numbers of OK and NOT '}
166             \textcolor{stringliteral}{'OK training data'},
167         )
168         \textcolor{keywordflow}{return} parser
169 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_acbc5c579a2791af831f6e4f72dc8560c}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_acbc5c579a2791af831f6e4f72dc8560c}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!build@{build}}
\index{build@{build}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{build()}{build()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+build (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 232 of file agents.\+py.


\begin{DoxyCode}
232     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1mturk_1_1tasks_1_1talkthewalk_1_1download_a8c0fbb9b6dfe127cb8c1bd6e7c4e33fd}{build}(self, opt):
233         self.\_get\_data()
234 
235         \textcolor{keywordflow}{try}:
236             \textcolor{keyword}{import} pandas \textcolor{keyword}{as} pd
237         \textcolor{keywordflow}{except} ImportError:
238             \textcolor{keywordflow}{raise} ImportError(\textcolor{stringliteral}{'Please install pandas by running `pip install pandas`'})
239 
240         version = \textcolor{stringliteral}{'v1.0'}
241         read\_path = self.data\_path
242         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} build\_data.built(self.data\_path, version):
243             print(\textcolor{stringliteral}{'[building data from : '} + read\_path + \textcolor{stringliteral}{']'})
244             build\_data.make\_dir(self.data\_path)
245             \textcolor{comment}{# Read in data}
246             train = pd.read\_csv(os.path.join(read\_path, \textcolor{stringliteral}{'train.csv'}))
247             test = pd.read\_csv(os.path.join(read\_path, \textcolor{stringliteral}{'test.csv'}))
248             test\_labels = pd.read\_csv(os.path.join(read\_path, \textcolor{stringliteral}{'test\_labels.csv'}))
249 
250             \textcolor{comment}{# Labels for test data; value of -1 indicates it was not used for scoring}
251             test\_labels = test\_labels[
252                 (test\_labels.toxic != -1)
253                 & (test\_labels.severe\_toxic != -1)
254                 & (test\_labels.obscene != -1)
255                 & (test\_labels.threat != -1)
256                 & (test\_labels.insult != -1)
257                 & (test\_labels.identity\_hate != -1)
258             ]
259 
260             \textcolor{comment}{# Merge test data with labels}
261             test = pd.merge(test\_labels, test, on=\textcolor{stringliteral}{'id'})
262 
263             \textcolor{comment}{# Split 10% of train data to be valid}
264             test[\textcolor{stringliteral}{'data\_type'}] = \textcolor{stringliteral}{'test'}
265             train[\textcolor{stringliteral}{'data\_type'}] = \textcolor{stringliteral}{'train'}
266             valid\_set = train.sample(frac=0.1, random\_state=42)
267             valid\_set[\textcolor{stringliteral}{'data\_type'}] = \textcolor{stringliteral}{'valid'}
268             train.update(valid\_set)
269 
270             \textcolor{comment}{# Combine test and train into one data frame}
271             total\_data = pd.concat([test, train], ignore\_index=\textcolor{keyword}{True}, sort=\textcolor{keyword}{False})
272             \textcolor{comment}{# Rename comment\_text to text for the act dict}
273             total\_data.rename(columns=\{\textcolor{stringliteral}{'comment\_text'}: \textcolor{stringliteral}{'text'}\}, inplace=\textcolor{keyword}{True})
274 
275             \textcolor{comment}{# Use the different categories to get binary classification}
276             total\_data[\textcolor{stringliteral}{'sensitive'}] = (
277                 total\_data[\textcolor{stringliteral}{'severe\_toxic'}]
278                 + total\_data[\textcolor{stringliteral}{'toxic'}]
279                 + total\_data[\textcolor{stringliteral}{'obscene'}]
280                 + total\_data[\textcolor{stringliteral}{'threat'}]
281                 + total\_data[\textcolor{stringliteral}{'insult'}]
282                 + total\_data[\textcolor{stringliteral}{'identity\_hate'}]
283             )
284 
285             total\_data.loc[total\_data[\textcolor{stringliteral}{'sensitive'}] < 1, \textcolor{stringliteral}{'is\_sensitive'}] = 0
286             total\_data.loc[total\_data[\textcolor{stringliteral}{'sensitive'}] >= 1, \textcolor{stringliteral}{'is\_sensitive'}] = 1
287 
288             \textcolor{comment}{# Drop unecessary column}
289             total\_data = total\_data.drop(columns=[\textcolor{stringliteral}{'id'}])
290 
291             self.data\_to\_json(total\_data, \textcolor{stringliteral}{'wiki-toxic-comments-default.json'})
292 
293             \textcolor{comment}{# Partition 80/10/10 according to arXiv:1811.12900 [cs.CL]}
294             \textcolor{comment}{# 90 train 10 test in paper}
295             \textcolor{comment}{# split based on command line flag}
296             original\_train = total\_data[
297                 (total\_data[\textcolor{stringliteral}{'data\_type'}] == \textcolor{stringliteral}{'valid'})
298                 | (total\_data[\textcolor{stringliteral}{'data\_type'}] == \textcolor{stringliteral}{'train'})
299             ].copy()
300             l\_td = len(original\_train)
301 
302             original\_train.iloc[: \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(0.8 * l\_td)][\textcolor{stringliteral}{'data\_type'}] = \textcolor{stringliteral}{'train'}
303             original\_train.iloc[\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(0.8 * l\_td) : \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(0.9 * l\_td)][\textcolor{stringliteral}{'data\_type'}] = \textcolor{stringliteral}{'test'}
304             original\_train.iloc[\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(0.9 * l\_td) :][\textcolor{stringliteral}{'data\_type'}] = \textcolor{stringliteral}{'valid'}
305 
306             self.data\_to\_json(original\_train, \textcolor{stringliteral}{'wiki-toxic-comments-partition.json'})
307 
308             \textcolor{comment}{# Merge the 3 files to get a list of dicts as follows:}
309             \textcolor{comment}{# [}
310             \textcolor{comment}{#     \{}
311             \textcolor{comment}{#         'toxic': 0 or 1 ,}
312             \textcolor{comment}{#         'severe\_toxic': 0 or 1,}
313             \textcolor{comment}{#         'obscene': 0 or 1,}
314             \textcolor{comment}{#         'threat': 0 or 1,}
315             \textcolor{comment}{#         'insult': 0 or 1,}
316             \textcolor{comment}{#         'identity\_hate': 0 or 1,}
317             \textcolor{comment}{#         'text': <comments>,}
318             \textcolor{comment}{#         'data\_type': test/validation/train,}
319             \textcolor{comment}{#         'sensitive': 0.0,}
320             \textcolor{comment}{#         'is\_sensitive': 0/1}
321             \textcolor{comment}{#     \},}
322             \textcolor{comment}{#   ...}
323             \textcolor{comment}{# ]}
324 
325             build\_data.mark\_done(self.data\_path, version)
326 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ab05b135cb36558dab5a04b4b00167159}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ab05b135cb36558dab5a04b4b00167159}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!data\+\_\+to\+\_\+json@{data\+\_\+to\+\_\+json}}
\index{data\+\_\+to\+\_\+json@{data\+\_\+to\+\_\+json}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{data\+\_\+to\+\_\+json()}{data\_to\_json()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+data\+\_\+to\+\_\+json (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{pd,  }\item[{}]{file\+\_\+name }\end{DoxyParamCaption})}



Definition at line 227 of file agents.\+py.


\begin{DoxyCode}
227     \textcolor{keyword}{def }data\_to\_json(self, pd, file\_name):
228         response = pd.to\_dict(\textcolor{stringliteral}{'records'})
229         with open(os.path.join(self.data\_path, file\_name), \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} f:
230             f.write(json.dumps(response, indent=4))
231 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a036126fb8ba0cb0dcd665a5b6bd4966f}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a036126fb8ba0cb0dcd665a5b6bd4966f}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!get@{get}}
\index{get@{get}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+get (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{episode\+\_\+idx,  }\item[{}]{entry\+\_\+idx }\end{DoxyParamCaption})}



Definition at line 369 of file agents.\+py.


\begin{DoxyCode}
369     \textcolor{keyword}{def }get(self, episode\_idx, entry\_idx):
370         sample = self.data[episode\_idx]
371         sample[\textcolor{stringliteral}{'label\_candidates'}] = self.label\_candidates
372         sample[\textcolor{stringliteral}{'episode\_done'}] = \textcolor{keyword}{True}
373         sample[\textcolor{stringliteral}{'labels'}] = [self.label\_candidates[\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(sample[\textcolor{stringliteral}{'is\_sensitive'}]) - 1]]
374         \textcolor{keywordflow}{return} Message(sample)
375 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a91737afc71227b1eb490648106b2a73c}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a91737afc71227b1eb490648106b2a73c}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!num\+\_\+episodes@{num\+\_\+episodes}}
\index{num\+\_\+episodes@{num\+\_\+episodes}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{num\+\_\+episodes()}{num\_episodes()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+num\+\_\+episodes (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 327 of file agents.\+py.


\begin{DoxyCode}
327     \textcolor{keyword}{def }num\_episodes(self):
328         \textcolor{keywordflow}{return} len(self.data)
329 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a144791f29981c18666fa8725cc424ba8}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a144791f29981c18666fa8725cc424ba8}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!num\+\_\+examples@{num\+\_\+examples}}
\index{num\+\_\+examples@{num\+\_\+examples}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{num\+\_\+examples()}{num\_examples()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+num\+\_\+examples (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 330 of file agents.\+py.


\begin{DoxyCode}
330     \textcolor{keyword}{def }num\_examples(self):
331         \textcolor{keywordflow}{return} len(self.data)
332 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a0d73b4cda0c165161393500459440b94}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a0d73b4cda0c165161393500459440b94}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!share@{share}}
\index{share@{share}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{share()}{share()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+share (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 376 of file agents.\+py.


\begin{DoxyCode}
376     \textcolor{keyword}{def }share(self):
377         shared = super().share()
378         shared[\textcolor{stringliteral}{'data'}] = self.data
379         \textcolor{keywordflow}{return} shared
380 
381 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a9eeb881196ce42d8994dc4884fd9113a}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a9eeb881196ce42d8994dc4884fd9113a}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!balance\+\_\+data@{balance\+\_\+data}}
\index{balance\+\_\+data@{balance\+\_\+data}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{balance\+\_\+data}{balance\_data}}
{\footnotesize\ttfamily parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+balance\+\_\+data}



Definition at line 174 of file agents.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_acfbf40cbf6be048c6667f4712e1db5c3}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_acfbf40cbf6be048c6667f4712e1db5c3}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!data@{data}}
\index{data@{data}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{data}{data}}
{\footnotesize\ttfamily parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+data}



Definition at line 181 of file agents.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a004f00e27fe4d6f437edab31e99018f5}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a004f00e27fe4d6f437edab31e99018f5}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!data\+\_\+path@{data\+\_\+path}}
\index{data\+\_\+path@{data\+\_\+path}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{data\+\_\+path}{data\_path}}
{\footnotesize\ttfamily parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+data\+\_\+path}



Definition at line 176 of file agents.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a0a82908d2bd950c6bc497f6e095b06b7}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a0a82908d2bd950c6bc497f6e095b06b7}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!fixed\+\_\+random@{fixed\+\_\+random}}
\index{fixed\+\_\+random@{fixed\+\_\+random}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{fixed\+\_\+random}{fixed\_random}}
{\footnotesize\ttfamily parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+fixed\+\_\+random}



Definition at line 171 of file agents.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a81bfea7e10ad4273964a26599dcce45d}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a81bfea7e10ad4273964a26599dcce45d}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!label\+\_\+candidates@{label\+\_\+candidates}}
\index{label\+\_\+candidates@{label\+\_\+candidates}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{label\+\_\+candidates}{label\_candidates}}
{\footnotesize\ttfamily parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+label\+\_\+candidates}



Definition at line 186 of file agents.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a027ef2d3141fc6e055b17f3ce7a3c7c5}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_a027ef2d3141fc6e055b17f3ce7a3c7c5}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!total\+\_\+data@{total\+\_\+data}}
\index{total\+\_\+data@{total\+\_\+data}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{total\+\_\+data}{total\_data}}
{\footnotesize\ttfamily parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+total\+\_\+data}



Definition at line 358 of file agents.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ad43ba64edd570e5fb5e4a4a0a68865cf}\label{classparlai_1_1tasks_1_1dialogue__safety_1_1agents_1_1WikiToxicCommentsTeacher_ad43ba64edd570e5fb5e4a4a0a68865cf}} 
\index{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}!use\+\_\+test\+\_\+set@{use\+\_\+test\+\_\+set}}
\index{use\+\_\+test\+\_\+set@{use\+\_\+test\+\_\+set}!parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher@{parlai\+::tasks\+::dialogue\+\_\+safety\+::agents\+::\+Wiki\+Toxic\+Comments\+Teacher}}
\subsubsection{\texorpdfstring{use\+\_\+test\+\_\+set}{use\_test\_set}}
{\footnotesize\ttfamily parlai.\+tasks.\+dialogue\+\_\+safety.\+agents.\+Wiki\+Toxic\+Comments\+Teacher.\+use\+\_\+test\+\_\+set}



Definition at line 173 of file agents.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/tasks/dialogue\+\_\+safety/\hyperlink{parlai_2tasks_2dialogue__safety_2agents_8py}{agents.\+py}\end{DoxyCompactItemize}
