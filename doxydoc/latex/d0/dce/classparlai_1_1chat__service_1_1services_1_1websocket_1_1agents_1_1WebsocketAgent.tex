\hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent}{}\section{parlai.\+chat\+\_\+service.\+services.\+websocket.\+agents.\+Websocket\+Agent Class Reference}
\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent}\index{parlai.\+chat\+\_\+service.\+services.\+websocket.\+agents.\+Websocket\+Agent@{parlai.\+chat\+\_\+service.\+services.\+websocket.\+agents.\+Websocket\+Agent}}


Inheritance diagram for parlai.\+chat\+\_\+service.\+services.\+websocket.\+agents.\+Websocket\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{d0/d86/classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+chat\+\_\+service.\+services.\+websocket.\+agents.\+Websocket\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{d0/d15/classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_a128d5ee9aaa2861274d95778b75dda16}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1agents_1_1Agent_ab3b45d2754244608c75d4068b90cd051}{opt}, \hyperlink{classparlai_1_1chat__service_1_1core_1_1agents_1_1ChatServiceAgent_a8216a688db46e2aa7cdd023016ecf27c}{manager}, receiver\+\_\+id, \hyperlink{classparlai_1_1chat__service_1_1core_1_1agents_1_1ChatServiceAgent_a1f1f978765ae81ca5ec8d04d14575386}{task\+\_\+id})
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_aae41aaeb0af93fb30a11e731167c596c}{observe} (self, \hyperlink{classparlai_1_1chat__service_1_1core_1_1agents_1_1ChatServiceAgent_afbb942bd61c840d55354e5cfea6a1f4d}{act})
\item 
def \hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_a8e6bb97a0b0996be55dd7aacedc62dff}{put\+\_\+data} (self, message)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_acdde68c9a11ff8d7cbc968d26f166061}{message\+\_\+partners}
\item 
\hyperlink{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_a013ba8209bd78bec4b657f422371d81e}{action\+\_\+id}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Class for a person that can act in a ParlAI world via websockets.
\end{DoxyVerb}
 

Definition at line 11 of file agents.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_a128d5ee9aaa2861274d95778b75dda16}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_a128d5ee9aaa2861274d95778b75dda16}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+agents.\+Websocket\+Agent.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{manager,  }\item[{}]{receiver\+\_\+id,  }\item[{}]{task\+\_\+id }\end{DoxyParamCaption})}



Definition at line 16 of file agents.\+py.


\begin{DoxyCode}
16     \textcolor{keyword}{def }\_\_init\_\_(self, opt, manager, receiver\_id, task\_id):
17         super().\_\_init\_\_(opt, manager, receiver\_id, task\_id)
18         self.message\_partners = []
19         self.action\_id = 1
20 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_aae41aaeb0af93fb30a11e731167c596c}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_aae41aaeb0af93fb30a11e731167c596c}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent}!observe@{observe}}
\index{observe@{observe}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent}}
\subsubsection{\texorpdfstring{observe()}{observe()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+agents.\+Websocket\+Agent.\+observe (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{act }\end{DoxyParamCaption})}

\begin{DoxyVerb}Send an agent a message through the websocket manager.

Only attachments of type `image` are currently supported. In the case of
images, the resultant message will have a `text` field which will be a
base 64 encoded image and `mime_type` which will be an image mime type.

Args:
    act: dict. If act contain an `payload` key, then a dict should be
provided for the value in `payload`. Otherwise, act should be
a dict with the key `text` for the message.
For the `pyaload` dict, this agent expects a `type` key, which
specifies whether or not the attachment is an image. If the
attachment is an image, a `data` key must be specified with a
base 64 encoded image.
A `quick_replies` key can be provided with a list of string quick
replies for any message
\end{DoxyVerb}
 

Definition at line 21 of file agents.\+py.


\begin{DoxyCode}
21     \textcolor{keyword}{def }observe(self, act):
22         \textcolor{stringliteral}{"""}
23 \textcolor{stringliteral}{        Send an agent a message through the websocket manager.}
24 \textcolor{stringliteral}{}
25 \textcolor{stringliteral}{        Only attachments of type `image` are currently supported. In the case of}
26 \textcolor{stringliteral}{        images, the resultant message will have a `text` field which will be a}
27 \textcolor{stringliteral}{        base 64 encoded image and `mime\_type` which will be an image mime type.}
28 \textcolor{stringliteral}{}
29 \textcolor{stringliteral}{        Args:}
30 \textcolor{stringliteral}{            act: dict. If act contain an `payload` key, then a dict should be}
31 \textcolor{stringliteral}{                provided for the value in `payload`. Otherwise, act should be}
32 \textcolor{stringliteral}{                a dict with the key `text` for the message.}
33 \textcolor{stringliteral}{                For the `pyaload` dict, this agent expects a `type` key, which}
34 \textcolor{stringliteral}{                specifies whether or not the attachment is an image. If the}
35 \textcolor{stringliteral}{                attachment is an image, a `data` key must be specified with a}
36 \textcolor{stringliteral}{                base 64 encoded image.}
37 \textcolor{stringliteral}{                A `quick\_replies` key can be provided with a list of string quick}
38 \textcolor{stringliteral}{                replies for any message}
39 \textcolor{stringliteral}{        """}
40         logging.info(f\textcolor{stringliteral}{"Sending new message: \{act\}"})
41         quick\_replies = act.get(\textcolor{stringliteral}{'quick\_replies'}, \textcolor{keywordtype}{None})
42         \textcolor{keywordflow}{if} act.get(\textcolor{stringliteral}{'payload'}, \textcolor{keywordtype}{None}):
43             self.manager.observe\_payload(self.id, act[\textcolor{stringliteral}{'payload'}], quick\_replies)
44         \textcolor{keywordflow}{else}:
45             self.manager.observe\_message(self.id, act[\textcolor{stringliteral}{'text'}], quick\_replies)
46 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_a8e6bb97a0b0996be55dd7aacedc62dff}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_a8e6bb97a0b0996be55dd7aacedc62dff}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent}!put\+\_\+data@{put\+\_\+data}}
\index{put\+\_\+data@{put\+\_\+data}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent}}
\subsubsection{\texorpdfstring{put\+\_\+data()}{put\_data()}}
{\footnotesize\ttfamily def parlai.\+chat\+\_\+service.\+services.\+websocket.\+agents.\+Websocket\+Agent.\+put\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{message }\end{DoxyParamCaption})}

\begin{DoxyVerb}Put data into the message queue.

Args:
    message: dict. An incoming websocket message. See the chat_services
README for the message structure.
\end{DoxyVerb}
 

Definition at line 47 of file agents.\+py.


\begin{DoxyCode}
47     \textcolor{keyword}{def }put\_data(self, message):
48         \textcolor{stringliteral}{"""}
49 \textcolor{stringliteral}{        Put data into the message queue.}
50 \textcolor{stringliteral}{}
51 \textcolor{stringliteral}{        Args:}
52 \textcolor{stringliteral}{            message: dict. An incoming websocket message. See the chat\_services}
53 \textcolor{stringliteral}{                README for the message structure.}
54 \textcolor{stringliteral}{        """}
55         logging.info(f\textcolor{stringliteral}{"Received new message: \{message\}"})
56         action = \{
57             \textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{False},
58             \textcolor{stringliteral}{'text'}: message.get(\textcolor{stringliteral}{'text'}, \textcolor{stringliteral}{''}),
59             \textcolor{stringliteral}{'payload'}: message.get(\textcolor{stringliteral}{'payload'}),
60         \}
61 
62         self.\_queue\_action(action, self.action\_id)
63         self.action\_id += 1
64 \end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_a013ba8209bd78bec4b657f422371d81e}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_a013ba8209bd78bec4b657f422371d81e}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent}!action\+\_\+id@{action\+\_\+id}}
\index{action\+\_\+id@{action\+\_\+id}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent}}
\subsubsection{\texorpdfstring{action\+\_\+id}{action\_id}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+agents.\+Websocket\+Agent.\+action\+\_\+id}



Definition at line 19 of file agents.\+py.

\mbox{\Hypertarget{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_acdde68c9a11ff8d7cbc968d26f166061}\label{classparlai_1_1chat__service_1_1services_1_1websocket_1_1agents_1_1WebsocketAgent_acdde68c9a11ff8d7cbc968d26f166061}} 
\index{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent}!message\+\_\+partners@{message\+\_\+partners}}
\index{message\+\_\+partners@{message\+\_\+partners}!parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent@{parlai\+::chat\+\_\+service\+::services\+::websocket\+::agents\+::\+Websocket\+Agent}}
\subsubsection{\texorpdfstring{message\+\_\+partners}{message\_partners}}
{\footnotesize\ttfamily parlai.\+chat\+\_\+service.\+services.\+websocket.\+agents.\+Websocket\+Agent.\+message\+\_\+partners}



Definition at line 18 of file agents.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/chat\+\_\+service/services/websocket/\hyperlink{parlai_2chat__service_2services_2websocket_2agents_8py}{agents.\+py}\end{DoxyCompactItemize}
