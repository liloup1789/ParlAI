\hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History}{}\section{projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+util.\+Conv\+A\+I2\+History Class Reference}
\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History}\index{projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+util.\+Conv\+A\+I2\+History@{projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+util.\+Conv\+A\+I2\+History}}


Inheritance diagram for projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+util.\+Conv\+A\+I2\+History\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=227pt]{d8/da3/classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+util.\+Conv\+A\+I2\+History\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=227pt]{d1/d46/classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_ab28df6476a9460112e5a00eafba01c4c}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, text, assume\+\_\+persontokens=True, dictionary=None)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_a45addcda1344d422a0a8d29598944884}{persona\+\_\+lines}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_af543c29eeb1a89f33388640305f16c84}{partner\+\_\+utts}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_a12340ae0e928a10c22ea9abfebf02b30}{own\+\_\+utts}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}An object to store the history of a ConvAI2 conversation in a convenient format.
\end{DoxyVerb}
 

Definition at line 16 of file util.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_ab28df6476a9460112e5a00eafba01c4c}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_ab28df6476a9460112e5a00eafba01c4c}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+util.\+Conv\+A\+I2\+History.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text,  }\item[{}]{assume\+\_\+persontokens = {\ttfamily True},  }\item[{}]{dictionary = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Separates text (the dialogue context) into:
  self.persona_lines: list of strings; the persona lines with "your persona:"
    removed.
  self.partner_utts: list of strings; the partner's utterances.
  self.own_utts: list of strings; the bot's own utterances.
All of the above are lowercase and tokenized.

Inputs:
  text: string. Contains several lines separated by \n. The first few lines are
    persona lines beginning "your persona: ", then the next lines are dialogue.
  assume_persontokens: If True, assert that the dialogue lines start with
    __p1__ and __p2__ respectively, and then remove them.
  dictionary: parlai DictionaryAgent.
\end{DoxyVerb}
 

Definition at line 21 of file util.\+py.


\begin{DoxyCode}
21     \textcolor{keyword}{def }\_\_init\_\_(self, text, assume\_persontokens=True, dictionary=None):
22         \textcolor{stringliteral}{"""}
23 \textcolor{stringliteral}{        Separates text (the dialogue context) into:}
24 \textcolor{stringliteral}{          self.persona\_lines: list of strings; the persona lines with "your persona:"}
25 \textcolor{stringliteral}{            removed.}
26 \textcolor{stringliteral}{          self.partner\_utts: list of strings; the partner's utterances.}
27 \textcolor{stringliteral}{          self.own\_utts: list of strings; the bot's own utterances.}
28 \textcolor{stringliteral}{        All of the above are lowercase and tokenized.}
29 \textcolor{stringliteral}{}
30 \textcolor{stringliteral}{        Inputs:}
31 \textcolor{stringliteral}{          text: string. Contains several lines separated by \(\backslash\)n. The first few lines are}
32 \textcolor{stringliteral}{            persona lines beginning "your persona: ", then the next lines are dialogue.}
33 \textcolor{stringliteral}{          assume\_persontokens: If True, assert that the dialogue lines start with}
34 \textcolor{stringliteral}{            \_\_p1\_\_ and \_\_p2\_\_ respectively, and then remove them.}
35 \textcolor{stringliteral}{          dictionary: parlai DictionaryAgent.}
36 \textcolor{stringliteral}{        """}
37         p1\_token, p2\_token = TorchAgent.P1\_TOKEN, TorchAgent.P2\_TOKEN
38 
39         \textcolor{comment}{# Split text into lines}
40         lines = [t.strip() \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} text.split(\textcolor{stringliteral}{'\(\backslash\)n'})]
41 
42         \textcolor{comment}{# Identify the persona lines and remove "your persona"}
43         persona\_lines = [t \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} lines \textcolor{keywordflow}{if} \textcolor{stringliteral}{"your persona:"} \textcolor{keywordflow}{in} t]
44         persona\_lines = [\hyperlink{namespaceprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_accba1ac2dc7bedf184abe7d46120861c}{remove\_prefix}(pl, \textcolor{stringliteral}{"your persona:"}) \textcolor{keywordflow}{for} pl \textcolor{keywordflow}{in} persona\_lines]
45         persona\_lines = [\hyperlink{namespaceprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_a21f7e685d288dffc51d76664b3f31859}{fix\_personaline\_period}(pl) \textcolor{keywordflow}{for} pl \textcolor{keywordflow}{in} persona\_lines]
46 
47         \textcolor{comment}{# Identify the dialogue lines. It's assumed that p1 goes first.}
48         utts = lines[len(persona\_lines) :]
49         p1\_utts = [utts[i] \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(0, len(utts), 2)]
50         p2\_utts = [utts[i] \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(1, len(utts), 2)]
51 
52         \textcolor{comment}{# Check for and remove the \_\_p1\_\_ and \_\_p2\_\_ prefixes}
53         \textcolor{keywordflow}{if} assume\_persontokens:
54             p1\_utts = [\hyperlink{namespaceprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_accba1ac2dc7bedf184abe7d46120861c}{remove\_prefix}(utt, p1\_token) \textcolor{keywordflow}{for} utt \textcolor{keywordflow}{in} p1\_utts]
55             p2\_utts = [\hyperlink{namespaceprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_accba1ac2dc7bedf184abe7d46120861c}{remove\_prefix}(utt, p2\_token) \textcolor{keywordflow}{for} utt \textcolor{keywordflow}{in} p2\_utts]
56 
57         \textcolor{comment}{# Tokenize and lowercase}
58         \textcolor{keywordflow}{if} dictionary \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
59             persona\_lines = [\textcolor{stringliteral}{" "}.join(dictionary.tokenize(pl)) \textcolor{keywordflow}{for} pl \textcolor{keywordflow}{in} persona\_lines]
60             p1\_utts = [\textcolor{stringliteral}{" "}.join(dictionary.tokenize(utt)) \textcolor{keywordflow}{for} utt \textcolor{keywordflow}{in} p1\_utts]
61             p2\_utts = [\textcolor{stringliteral}{" "}.join(dictionary.tokenize(utt)) \textcolor{keywordflow}{for} utt \textcolor{keywordflow}{in} p2\_utts]
62 
63         \textcolor{comment}{# Strip trailing whitespace and discard any empty lines}
64         self.persona\_lines = [l.strip() \textcolor{keywordflow}{for} l \textcolor{keywordflow}{in} persona\_lines \textcolor{keywordflow}{if} l.strip() != \textcolor{stringliteral}{""}]
65         self.partner\_utts = [l.strip() \textcolor{keywordflow}{for} l \textcolor{keywordflow}{in} p1\_utts \textcolor{keywordflow}{if} l.strip() != \textcolor{stringliteral}{""}]
66         self.own\_utts = [l.strip() \textcolor{keywordflow}{for} l \textcolor{keywordflow}{in} p2\_utts \textcolor{keywordflow}{if} l.strip() != \textcolor{stringliteral}{""}]
67 
68 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_a12340ae0e928a10c22ea9abfebf02b30}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_a12340ae0e928a10c22ea9abfebf02b30}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History}!own\+\_\+utts@{own\+\_\+utts}}
\index{own\+\_\+utts@{own\+\_\+utts}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History}}
\subsubsection{\texorpdfstring{own\+\_\+utts}{own\_utts}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+util.\+Conv\+A\+I2\+History.\+own\+\_\+utts}



Definition at line 66 of file util.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_af543c29eeb1a89f33388640305f16c84}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_af543c29eeb1a89f33388640305f16c84}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History}!partner\+\_\+utts@{partner\+\_\+utts}}
\index{partner\+\_\+utts@{partner\+\_\+utts}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History}}
\subsubsection{\texorpdfstring{partner\+\_\+utts}{partner\_utts}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+util.\+Conv\+A\+I2\+History.\+partner\+\_\+utts}



Definition at line 65 of file util.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_a45addcda1344d422a0a8d29598944884}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1util_1_1ConvAI2History_a45addcda1344d422a0a8d29598944884}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History}!persona\+\_\+lines@{persona\+\_\+lines}}
\index{persona\+\_\+lines@{persona\+\_\+lines}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::util\+::\+Conv\+A\+I2\+History}}
\subsubsection{\texorpdfstring{persona\+\_\+lines}{persona\_lines}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+util.\+Conv\+A\+I2\+History.\+persona\+\_\+lines}



Definition at line 64 of file util.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
projects/controllable\+\_\+dialogue/controllable\+\_\+seq2seq/\hyperlink{util_8py}{util.\+py}\end{DoxyCompactItemize}
