\hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler}{}\section{parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler Class Reference}
\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler}\index{parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler@{parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler}}


Inheritance diagram for parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{d7/dc7/classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{d5/db5/classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_ab4f73b8d0b0a7757d5e038b39b39bae5}{initialize} (self, \hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a1e04549bbc02ca8d76b295ea2cb74a0f}{app})
\item 
def \hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a70122a05efc4aef04aa4ecb4bd718173}{check\+\_\+origin} (self, origin)
\item 
def \hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_adb3510933e76ec5d4f7ac2d1dd52962f}{open} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a5d4b5ce22544ee8eab0063586b9e5fe8}{on\+\_\+message} (self, message)
\item 
def \hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a9bf75a90b26ccfe8ba72a5cea8612035}{on\+\_\+close} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a1e04549bbc02ca8d76b295ea2cb74a0f}{app}
\item 
\hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a996b255bda95ff104f6117a02874e219}{sources}
\item 
\hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a730b42ceee91d8ce1278f60c65595a71}{alive}
\item 
\hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a9bdd78d8eed7be817fa1e4aac0b318e7}{sid}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 524 of file server.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a70122a05efc4aef04aa4ecb4bd718173}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a70122a05efc4aef04aa4ecb4bd718173}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}!check\+\_\+origin@{check\+\_\+origin}}
\index{check\+\_\+origin@{check\+\_\+origin}!parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}}
\subsubsection{\texorpdfstring{check\+\_\+origin()}{check\_origin()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler.\+check\+\_\+origin (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{origin }\end{DoxyParamCaption})}



Definition at line 529 of file server.\+py.


\begin{DoxyCode}
529     \textcolor{keyword}{def }check\_origin(self, origin):
530         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
531 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_ab4f73b8d0b0a7757d5e038b39b39bae5}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_ab4f73b8d0b0a7757d5e038b39b39bae5}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}!initialize@{initialize}}
\index{initialize@{initialize}!parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}}
\subsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler.\+initialize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{app }\end{DoxyParamCaption})}



Definition at line 525 of file server.\+py.


\begin{DoxyCode}
525     \textcolor{keyword}{def }initialize(self, app):
526         self.app = app
527         self.sources = app.sources
528 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a9bf75a90b26ccfe8ba72a5cea8612035}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a9bf75a90b26ccfe8ba72a5cea8612035}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}!on\+\_\+close@{on\+\_\+close}}
\index{on\+\_\+close@{on\+\_\+close}!parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}}
\subsubsection{\texorpdfstring{on\+\_\+close()}{on\_close()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler.\+on\+\_\+close (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 585 of file server.\+py.


\begin{DoxyCode}
585     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1terminal__chat_1_1client_a02c04f40cfa11defbf5c83bbe46aba00}{on\_close}(self):
586         self.alive = \textcolor{keyword}{False}
587         \textcolor{keywordflow}{if} self \textcolor{keywordflow}{in} list(self.sources.values()):
588             self.sources.pop(self.sid, \textcolor{keywordtype}{None})
589 
590 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a5d4b5ce22544ee8eab0063586b9e5fe8}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a5d4b5ce22544ee8eab0063586b9e5fe8}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}!on\+\_\+message@{on\+\_\+message}}
\index{on\+\_\+message@{on\+\_\+message}!parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}}
\subsubsection{\texorpdfstring{on\+\_\+message()}{on\_message()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler.\+on\+\_\+message (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{message }\end{DoxyParamCaption})}



Definition at line 565 of file server.\+py.


\begin{DoxyCode}
565     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1terminal__chat_1_1client_a0ef2bb2bd3b966dcdd8402a92b999708}{on\_message}(self, message):
566         logging.info(\textcolor{stringliteral}{'from frontend client: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(message))
567         msg = tornado.escape.json\_decode(tornado.escape.to\_basestring(message))
568         message = msg[\textcolor{stringliteral}{'text'}]
569         task\_data = msg[\textcolor{stringliteral}{'task\_data'}]
570         sender\_id = msg[\textcolor{stringliteral}{'sender'}]
571         agent\_id = msg[\textcolor{stringliteral}{'id'}]
572         act = \{
573             \textcolor{stringliteral}{'id'}: agent\_id,
574             \textcolor{stringliteral}{'task\_data'}: task\_data,
575             \textcolor{stringliteral}{'text'}: message,
576             \textcolor{stringliteral}{'message\_id'}: \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(uuid.uuid4()),
577         \}
578         t = threading.Thread(
579             target=self.app.task\_manager.on\_new\_message,
580             args=(sender\_id, PacketWrap(act)),
581             daemon=\textcolor{keyword}{True},
582         )
583         t.start()
584 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_adb3510933e76ec5d4f7ac2d1dd52962f}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_adb3510933e76ec5d4f7ac2d1dd52962f}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}!open@{open}}
\index{open@{open}!parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}}
\subsubsection{\texorpdfstring{open()}{open()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler.\+open (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 553 of file server.\+py.


\begin{DoxyCode}
553     \textcolor{keyword}{def }open(self):
554         self.sid = \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(hex(\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(time.time() * 10000000))[2:])
555         self.alive = \textcolor{keyword}{True}
556         \textcolor{keywordflow}{if} self \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} list(self.sources.values()):
557             self.sources[self.sid] = self
558         logging.info(\textcolor{stringliteral}{'Opened task socket from ip: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.request.remote\_ip))
559 
560         self.write\_message(json.dumps(\{\textcolor{stringliteral}{'command'}: \textcolor{stringliteral}{'alive'}, \textcolor{stringliteral}{'data'}: \textcolor{stringliteral}{'socket\_alive'}\}))
561 
562         t = threading.Thread(target=self.\_run\_socket)
563         t.start()
564 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a730b42ceee91d8ce1278f60c65595a71}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a730b42ceee91d8ce1278f60c65595a71}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}!alive@{alive}}
\index{alive@{alive}!parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}}
\subsubsection{\texorpdfstring{alive}{alive}}
{\footnotesize\ttfamily parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler.\+alive}



Definition at line 550 of file server.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a1e04549bbc02ca8d76b295ea2cb74a0f}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a1e04549bbc02ca8d76b295ea2cb74a0f}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}!app@{app}}
\index{app@{app}!parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}}
\subsubsection{\texorpdfstring{app}{app}}
{\footnotesize\ttfamily parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler.\+app}



Definition at line 526 of file server.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a9bdd78d8eed7be817fa1e4aac0b318e7}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a9bdd78d8eed7be817fa1e4aac0b318e7}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}!sid@{sid}}
\index{sid@{sid}!parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}}
\subsubsection{\texorpdfstring{sid}{sid}}
{\footnotesize\ttfamily parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler.\+sid}



Definition at line 554 of file server.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a996b255bda95ff104f6117a02874e219}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1TaskSocketHandler_a996b255bda95ff104f6117a02874e219}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}!sources@{sources}}
\index{sources@{sources}!parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Task\+Socket\+Handler}}
\subsubsection{\texorpdfstring{sources}{sources}}
{\footnotesize\ttfamily parlai.\+mturk.\+webapp.\+server.\+Task\+Socket\+Handler.\+sources}



Definition at line 527 of file server.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/webapp/\hyperlink{server_8py}{server.\+py}\end{DoxyCompactItemize}
