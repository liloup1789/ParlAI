\hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler}{}\section{parlai.\+mturk.\+webapp.\+server.\+Bonus\+Handler Class Reference}
\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler}\index{parlai.\+mturk.\+webapp.\+server.\+Bonus\+Handler@{parlai.\+mturk.\+webapp.\+server.\+Bonus\+Handler}}


Inheritance diagram for parlai.\+mturk.\+webapp.\+server.\+Bonus\+Handler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{df/db9/classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+webapp.\+server.\+Bonus\+Handler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{d7/daa/classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler_aa29383ea72a9d3e93e75a0689bc6db1e}{initialize} (self, app)
\item 
def \hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler_acdeaf6529109287285903ed8babe864c}{post} (self, worker\+\_\+target)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler_a9cfd41f9f9ca83eae4d3f8d5f54b8d03}{mturk\+\_\+manager}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 488 of file server.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler_aa29383ea72a9d3e93e75a0689bc6db1e}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler_aa29383ea72a9d3e93e75a0689bc6db1e}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler}!initialize@{initialize}}
\index{initialize@{initialize}!parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler}}
\subsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+webapp.\+server.\+Bonus\+Handler.\+initialize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{app }\end{DoxyParamCaption})}



Definition at line 489 of file server.\+py.


\begin{DoxyCode}
489     \textcolor{keyword}{def }initialize(self, app):
490         self.mturk\_manager = app.mturk\_manager
491 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler_acdeaf6529109287285903ed8babe864c}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler_acdeaf6529109287285903ed8babe864c}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler}!post@{post}}
\index{post@{post}!parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler}}
\subsubsection{\texorpdfstring{post()}{post()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+webapp.\+server.\+Bonus\+Handler.\+post (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{worker\+\_\+target }\end{DoxyParamCaption})}

\begin{DoxyVerb}Requests to /bonus/{worker_id} will give a bonus to that worker.

Requires a reason, assignment_id, a unique token (for idempotence), and the
bonus amount IN CENTS
\end{DoxyVerb}
 

Definition at line 492 of file server.\+py.


\begin{DoxyCode}
492     \textcolor{keyword}{def }post(self, worker\_target):
493         \textcolor{stringliteral}{"""}
494 \textcolor{stringliteral}{        Requests to /bonus/\{worker\_id\} will give a bonus to that worker.}
495 \textcolor{stringliteral}{}
496 \textcolor{stringliteral}{        Requires a reason, assignment\_id, a unique token (for idempotence), and the}
497 \textcolor{stringliteral}{        bonus amount IN CENTS}
498 \textcolor{stringliteral}{        """}
499         data = tornado.escape.json\_decode(self.request.body)
500         reason = data[\textcolor{stringliteral}{'reason'}]
501         assignment\_id = data[\textcolor{stringliteral}{'assignment\_id'}]
502         bonus\_cents = data[\textcolor{stringliteral}{'bonus\_cents'}]
503         token = data[\textcolor{stringliteral}{'bonus\_token'}]
504 
505         dollar\_amount = bonus\_cents / 100.0
506         self.mturk\_manager.pay\_bonus(
507             worker\_target, dollar\_amount, assignment\_id, reason, token
508         )
509         print(
510             \textcolor{stringliteral}{'Bonused $\{\} to \{\} for reason \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
511                 dollar\_amount, worker\_target, reason
512             )
513         )
514         data = \{\textcolor{stringliteral}{'status'}: \textcolor{keyword}{True}\}
515         self.write(json.dumps(data))
516 
517 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler_a9cfd41f9f9ca83eae4d3f8d5f54b8d03}\label{classparlai_1_1mturk_1_1webapp_1_1server_1_1BonusHandler_a9cfd41f9f9ca83eae4d3f8d5f54b8d03}} 
\index{parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler}!mturk\+\_\+manager@{mturk\+\_\+manager}}
\index{mturk\+\_\+manager@{mturk\+\_\+manager}!parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler@{parlai\+::mturk\+::webapp\+::server\+::\+Bonus\+Handler}}
\subsubsection{\texorpdfstring{mturk\+\_\+manager}{mturk\_manager}}
{\footnotesize\ttfamily parlai.\+mturk.\+webapp.\+server.\+Bonus\+Handler.\+mturk\+\_\+manager}



Definition at line 490 of file server.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/webapp/\hyperlink{server_8py}{server.\+py}\end{DoxyCompactItemize}
