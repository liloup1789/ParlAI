\hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA}{}\section{parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+QA Class Reference}
\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA}\index{parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+QA@{parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+QA}}


Inheritance diagram for parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+QA\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/dc3/classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+QA\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{d8/dd9/classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a3f2322d59e42f329387912bd3d03c888}{read\+\_\+gz} (cls, filename)
\item 
def \hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_af8b1135c593e04b80b602d717a3b30d3}{readlines} (cls, path)
\item 
def \hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_afb5e7fdf077dea815bdd256c5a750069}{wids2sent} (cls, wids, d\+\_\+vocab)
\item 
def \hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_ade9a2ccdc949872bb85c31c9440d5e82}{read\+\_\+vocab} (cls, vocab\+\_\+path)
\item 
def \hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a24c20a520141dbc602a242780281ee6d}{read\+\_\+label2answer} (cls, label2answer\+\_\+path\+\_\+gz, d\+\_\+vocab)
\item 
def \hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a05c7792ef7e45fe67f6e964d2f73f852}{create\+\_\+fb\+\_\+format} (cls, out\+\_\+path, dtype, inpath, d\+\_\+vocab, d\+\_\+label\+\_\+answer)
\item 
def \hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_abd3ae5efba9775554d68e911fd36c840}{write\+\_\+data\+\_\+files} (cls, dpext, out\+\_\+path, d\+\_\+vocab, d\+\_\+label\+\_\+answer)
\item 
def \hyperlink{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a94f69218557d222da922e0de7f41f75a}{build} (cls, dpath)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 17 of file build.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a94f69218557d222da922e0de7f41f75a}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a94f69218557d222da922e0de7f41f75a}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}!build@{build}}
\index{build@{build}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}}
\subsubsection{\texorpdfstring{build()}{build()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A.\+build (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{dpath }\end{DoxyParamCaption})}



Definition at line 81 of file build.\+py.


\begin{DoxyCode}
81     \textcolor{keyword}{def }\hyperlink{namespacedialog__babi__feedback_1_1build_a7a9d289f7493a5ded13c4b7f071b6184}{build}(cls, dpath):
82         print(\textcolor{stringliteral}{"building version: %s"} % cls.version)
83 
84         \textcolor{comment}{# the root of dataset}
85         dpext = os.path.join(dpath, \textcolor{stringliteral}{'insuranceQA-master/%s'} % cls.version)
86 
87         \textcolor{comment}{# read vocab file}
88         vocab\_path = os.path.join(dpext, \textcolor{stringliteral}{"vocabulary"})
89         d\_vocab = cls.read\_vocab(vocab\_path)
90 
91         \textcolor{comment}{# read label2answer file}
92         label2answer\_path\_gz = os.path.join(dpext, cls.label2answer\_fname)
93         d\_label\_answer = cls.read\_label2answer(label2answer\_path\_gz, d\_vocab)
94 
95         \textcolor{comment}{# Create out path}
96         out\_path = os.path.join(dpath, cls.version)
97         build\_data.make\_dir(out\_path)
98 
99         \textcolor{comment}{# Parse and write data files}
100         cls.write\_data\_files(dpext, out\_path, d\_vocab, d\_label\_answer)
101 
102 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a05c7792ef7e45fe67f6e964d2f73f852}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a05c7792ef7e45fe67f6e964d2f73f852}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}!create\+\_\+fb\+\_\+format@{create\+\_\+fb\+\_\+format}}
\index{create\+\_\+fb\+\_\+format@{create\+\_\+fb\+\_\+format}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}}
\subsubsection{\texorpdfstring{create\+\_\+fb\+\_\+format()}{create\_fb\_format()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A.\+create\+\_\+fb\+\_\+format (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{out\+\_\+path,  }\item[{}]{dtype,  }\item[{}]{inpath,  }\item[{}]{d\+\_\+vocab,  }\item[{}]{d\+\_\+label\+\_\+answer }\end{DoxyParamCaption})}



Definition at line 73 of file build.\+py.


\begin{DoxyCode}
73     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1tasks_1_1wikiqa_1_1build_a554828702769592403db58c955d1dfe3}{create\_fb\_format}(cls, out\_path, dtype, inpath, d\_vocab, d\_label\_answer):
74         \textcolor{keywordflow}{pass}
75 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a3f2322d59e42f329387912bd3d03c888}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a3f2322d59e42f329387912bd3d03c888}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}!read\+\_\+gz@{read\+\_\+gz}}
\index{read\+\_\+gz@{read\+\_\+gz}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}}
\subsubsection{\texorpdfstring{read\+\_\+gz()}{read\_gz()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A.\+read\+\_\+gz (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{filename }\end{DoxyParamCaption})}



Definition at line 22 of file build.\+py.


\begin{DoxyCode}
22     \textcolor{keyword}{def }read\_gz(cls, filename):
23         f = gzip.open(filename, \textcolor{stringliteral}{'rb'})
24         \textcolor{keywordflow}{return} [x.decode(\textcolor{stringliteral}{'utf-8'}) \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} f.readlines()]
25 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a24c20a520141dbc602a242780281ee6d}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_a24c20a520141dbc602a242780281ee6d}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}!read\+\_\+label2answer@{read\+\_\+label2answer}}
\index{read\+\_\+label2answer@{read\+\_\+label2answer}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}}
\subsubsection{\texorpdfstring{read\+\_\+label2answer()}{read\_label2answer()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A.\+read\+\_\+label2answer (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{label2answer\+\_\+path\+\_\+gz,  }\item[{}]{d\+\_\+vocab }\end{DoxyParamCaption})}



Definition at line 55 of file build.\+py.


\begin{DoxyCode}
55     \textcolor{keyword}{def }read\_label2answer(cls, label2answer\_path\_gz, d\_vocab):
56         lines = cls.readlines(label2answer\_path\_gz)
57 
58         d\_label\_answer = \{\}
59         \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} lines:
60             fields = line.rstrip(\textcolor{stringliteral}{"\(\backslash\)n"}).split(\textcolor{stringliteral}{"\(\backslash\)t"})
61             \textcolor{keywordflow}{if} len(fields) != 2:
62                 \textcolor{keywordflow}{raise} ValueError(
63                     \textcolor{stringliteral}{"label2answer file (%s) corrupted. Line (%s)"}
64                     % (repr(line), label2answer\_path\_gz)
65                 )
66             \textcolor{keywordflow}{else}:
67                 aid, s\_wids = fields
68                 sent = cls.wids2sent(s\_wids.split(), d\_vocab)
69                 d\_label\_answer[aid] = sent
70         \textcolor{keywordflow}{return} d\_label\_answer
71 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_ade9a2ccdc949872bb85c31c9440d5e82}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_ade9a2ccdc949872bb85c31c9440d5e82}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}!read\+\_\+vocab@{read\+\_\+vocab}}
\index{read\+\_\+vocab@{read\+\_\+vocab}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}}
\subsubsection{\texorpdfstring{read\+\_\+vocab()}{read\_vocab()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A.\+read\+\_\+vocab (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{vocab\+\_\+path }\end{DoxyParamCaption})}



Definition at line 39 of file build.\+py.


\begin{DoxyCode}
39     \textcolor{keyword}{def }read\_vocab(cls, vocab\_path):
40         d\_vocab = \{\}
41         with open(vocab\_path, \textcolor{stringliteral}{"r") as f:}
42 \textcolor{stringliteral}{            }\textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} f:
43                 fields = line.rstrip(\textcolor{stringliteral}{'\(\backslash\)n'}).split(\textcolor{stringliteral}{"\(\backslash\)t"})
44                 \textcolor{keywordflow}{if} len(fields) != 2:
45                     \textcolor{keywordflow}{raise} ValueError(
46                         \textcolor{stringliteral}{"vocab file (%s) corrupted. Line (%s)"}
47                         % (repr(line), vocab\_path)
48                     )
49                 \textcolor{keywordflow}{else}:
50                     wid, word = fields
51                     d\_vocab[wid] = word
52         \textcolor{keywordflow}{return} d\_vocab
53 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_af8b1135c593e04b80b602d717a3b30d3}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_af8b1135c593e04b80b602d717a3b30d3}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}!readlines@{readlines}}
\index{readlines@{readlines}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}}
\subsubsection{\texorpdfstring{readlines()}{readlines()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A.\+readlines (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{path }\end{DoxyParamCaption})}



Definition at line 27 of file build.\+py.


\begin{DoxyCode}
27     \textcolor{keyword}{def }readlines(cls, path):
28         \textcolor{keywordflow}{if} path.endswith(\textcolor{stringliteral}{".gz"}):
29             lines = cls.read\_gz(path)
30         \textcolor{keywordflow}{else}:
31             lines = open(path).readlines()
32         \textcolor{keywordflow}{return} lines
33 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_afb5e7fdf077dea815bdd256c5a750069}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_afb5e7fdf077dea815bdd256c5a750069}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}!wids2sent@{wids2sent}}
\index{wids2sent@{wids2sent}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}}
\subsubsection{\texorpdfstring{wids2sent()}{wids2sent()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A.\+wids2sent (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{wids,  }\item[{}]{d\+\_\+vocab }\end{DoxyParamCaption})}



Definition at line 35 of file build.\+py.


\begin{DoxyCode}
35     \textcolor{keyword}{def }wids2sent(cls, wids, d\_vocab):
36         \textcolor{keywordflow}{return} \textcolor{stringliteral}{" "}.join([d\_vocab[w] \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} wids])
37 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_abd3ae5efba9775554d68e911fd36c840}\label{classparlai_1_1tasks_1_1insuranceqa_1_1build_1_1ParseInsuranceQA_abd3ae5efba9775554d68e911fd36c840}} 
\index{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}!write\+\_\+data\+\_\+files@{write\+\_\+data\+\_\+files}}
\index{write\+\_\+data\+\_\+files@{write\+\_\+data\+\_\+files}!parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA@{parlai\+::tasks\+::insuranceqa\+::build\+::\+Parse\+Insurance\+QA}}
\subsubsection{\texorpdfstring{write\+\_\+data\+\_\+files()}{write\_data\_files()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+insuranceqa.\+build.\+Parse\+Insurance\+Q\+A.\+write\+\_\+data\+\_\+files (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{dpext,  }\item[{}]{out\+\_\+path,  }\item[{}]{d\+\_\+vocab,  }\item[{}]{d\+\_\+label\+\_\+answer }\end{DoxyParamCaption})}



Definition at line 77 of file build.\+py.


\begin{DoxyCode}
77     \textcolor{keyword}{def }write\_data\_files(cls, dpext, out\_path, d\_vocab, d\_label\_answer):
78         \textcolor{keywordflow}{pass}
79 
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/tasks/insuranceqa/\hyperlink{parlai_2tasks_2insuranceqa_2build_8py}{build.\+py}\end{DoxyCompactItemize}
