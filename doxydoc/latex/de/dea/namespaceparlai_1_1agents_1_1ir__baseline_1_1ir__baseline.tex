\hypertarget{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline}{}\section{parlai.\+agents.\+ir\+\_\+baseline.\+ir\+\_\+baseline Namespace Reference}
\label{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline}\index{parlai.\+agents.\+ir\+\_\+baseline.\+ir\+\_\+baseline@{parlai.\+agents.\+ir\+\_\+baseline.\+ir\+\_\+baseline}}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_1_1IrBaselineAgent}{Ir\+Baseline\+Agent}
\item 
class \hyperlink{classparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_1_1MaxPriorityQueue}{Max\+Priority\+Queue}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a64aaaccb38f5dd5f51c09439456b2f6e}{score\+\_\+match} (query\+\_\+rep, text, length\+\_\+penalty, dictionary=None, debug=False)
\item 
def \hyperlink{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a995475fdd96a7bbd8886a3ebcfa56156}{rank\+\_\+candidates} (query\+\_\+rep, cands, length\+\_\+penalty, dictionary=None)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a7e7907f0dfbd5f6c59bd56187a1b44df}{stopwords}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a995475fdd96a7bbd8886a3ebcfa56156}\label{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a995475fdd96a7bbd8886a3ebcfa56156}} 
\index{parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline@{parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline}!rank\+\_\+candidates@{rank\+\_\+candidates}}
\index{rank\+\_\+candidates@{rank\+\_\+candidates}!parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline@{parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline}}
\subsubsection{\texorpdfstring{rank\+\_\+candidates()}{rank\_candidates()}}
{\footnotesize\ttfamily def parlai.\+agents.\+ir\+\_\+baseline.\+ir\+\_\+baseline.\+rank\+\_\+candidates (\begin{DoxyParamCaption}\item[{}]{query\+\_\+rep,  }\item[{}]{cands,  }\item[{}]{length\+\_\+penalty,  }\item[{}]{dictionary = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Rank candidates given representation of query.

:param query_rep: base query representation to match text again.
:param cands: strings to compare against query_rep for matching tokens
:param length_penalty: scores are divided by the norm taken to this power
:dictionary: optional dictionary to use to tokenize text

:returns: ordered list of candidate strings in score-ranked order
\end{DoxyVerb}
 

Definition at line 195 of file ir\+\_\+baseline.\+py.


\begin{DoxyCode}
195 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a995475fdd96a7bbd8886a3ebcfa56156}{rank\_candidates}(query\_rep, cands, length\_penalty, dictionary=None):
196     \textcolor{stringliteral}{"""}
197 \textcolor{stringliteral}{    Rank candidates given representation of query.}
198 \textcolor{stringliteral}{}
199 \textcolor{stringliteral}{    :param query\_rep: base query representation to match text again.}
200 \textcolor{stringliteral}{    :param cands: strings to compare against query\_rep for matching tokens}
201 \textcolor{stringliteral}{    :param length\_penalty: scores are divided by the norm taken to this power}
202 \textcolor{stringliteral}{    :dictionary: optional dictionary to use to tokenize text}
203 \textcolor{stringliteral}{}
204 \textcolor{stringliteral}{    :returns: ordered list of candidate strings in score-ranked order}
205 \textcolor{stringliteral}{    """}
206     \textcolor{keywordflow}{if} \textcolor{keyword}{True}:
207         mpq = MaxPriorityQueue(100)
208         \textcolor{keywordflow}{for} c \textcolor{keywordflow}{in} cands:
209             score = \hyperlink{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a64aaaccb38f5dd5f51c09439456b2f6e}{score\_match}(query\_rep, c, length\_penalty, dictionary)
210             mpq.add(c, score)
211         \textcolor{keywordflow}{return} list(reversed(mpq))
212     \textcolor{keywordflow}{else}:
213         cands = list(cands)
214         score = [0] * len(cands)
215         \textcolor{keywordflow}{for} i, c \textcolor{keywordflow}{in} enumerate(cands):
216             score[i] = -\hyperlink{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a64aaaccb38f5dd5f51c09439456b2f6e}{score\_match}(query\_rep, c, length\_penalty, dictionary)
217         r = [i[0] \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} sorted(enumerate(score), key=\textcolor{keyword}{lambda} x: x[1])]
218         res = []
219         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(min(100, len(score))):
220             res.append(cands[r[i]])
221         \textcolor{keywordflow}{return} res
222 
223 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a64aaaccb38f5dd5f51c09439456b2f6e}\label{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a64aaaccb38f5dd5f51c09439456b2f6e}} 
\index{parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline@{parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline}!score\+\_\+match@{score\+\_\+match}}
\index{score\+\_\+match@{score\+\_\+match}!parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline@{parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline}}
\subsubsection{\texorpdfstring{score\+\_\+match()}{score\_match()}}
{\footnotesize\ttfamily def parlai.\+agents.\+ir\+\_\+baseline.\+ir\+\_\+baseline.\+score\+\_\+match (\begin{DoxyParamCaption}\item[{}]{query\+\_\+rep,  }\item[{}]{text,  }\item[{}]{length\+\_\+penalty,  }\item[{}]{dictionary = {\ttfamily None},  }\item[{}]{debug = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Calculate the score match between the query representation the text.

:param query_rep: base query representation to match text again.
:param text: string to comapre against query_rep for matching tokens
:param length_penalty: scores are divided by the norm taken to this power
:dictionary: optional dictionary to use to tokenize text
:debug: flag to enable printing every match

:returns: float score of match
\end{DoxyVerb}
 

Definition at line 161 of file ir\+\_\+baseline.\+py.


\begin{DoxyCode}
161 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a64aaaccb38f5dd5f51c09439456b2f6e}{score\_match}(query\_rep, text, length\_penalty, dictionary=None, debug=False):
162     \textcolor{stringliteral}{"""}
163 \textcolor{stringliteral}{    Calculate the score match between the query representation the text.}
164 \textcolor{stringliteral}{}
165 \textcolor{stringliteral}{    :param query\_rep: base query representation to match text again.}
166 \textcolor{stringliteral}{    :param text: string to comapre against query\_rep for matching tokens}
167 \textcolor{stringliteral}{    :param length\_penalty: scores are divided by the norm taken to this power}
168 \textcolor{stringliteral}{    :dictionary: optional dictionary to use to tokenize text}
169 \textcolor{stringliteral}{    :debug: flag to enable printing every match}
170 \textcolor{stringliteral}{}
171 \textcolor{stringliteral}{    :returns: float score of match}
172 \textcolor{stringliteral}{    """}
173     \textcolor{keywordflow}{if} text == \textcolor{stringliteral}{""}:
174         \textcolor{keywordflow}{return} 0
175     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} dictionary:
176         words = text.lower().split(\textcolor{stringliteral}{' '})
177     \textcolor{keywordflow}{else}:
178         words = [w \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} dictionary.tokenize(text.lower())]
179     score = 0
180     rw = query\_rep[\textcolor{stringliteral}{'words'}]
181     used = \{\}
182     \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} words:
183         \textcolor{keywordflow}{if} w \textcolor{keywordflow}{in} rw \textcolor{keywordflow}{and} w \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} used:
184             score += rw[w]
185             \textcolor{keywordflow}{if} debug:
186                 print(\textcolor{stringliteral}{"match: "} + w)
187         used[w] = \textcolor{keyword}{True}
188     norm = math.sqrt(len(used))
189     norm = math.pow(norm * query\_rep[\textcolor{stringliteral}{'norm'}], length\_penalty)
190     \textcolor{keywordflow}{if} norm > 1:
191         score /= norm
192     \textcolor{keywordflow}{return} score
193 
194 
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a7e7907f0dfbd5f6c59bd56187a1b44df}\label{namespaceparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_a7e7907f0dfbd5f6c59bd56187a1b44df}} 
\index{parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline@{parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline}!stopwords@{stopwords}}
\index{stopwords@{stopwords}!parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline@{parlai\+::agents\+::ir\+\_\+baseline\+::ir\+\_\+baseline}}
\subsubsection{\texorpdfstring{stopwords}{stopwords}}
{\footnotesize\ttfamily parlai.\+agents.\+ir\+\_\+baseline.\+ir\+\_\+baseline.\+stopwords}



Definition at line 94 of file ir\+\_\+baseline.\+py.

