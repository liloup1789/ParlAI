\hypertarget{classtests_1_1test__utils_1_1TestUtils}{}\section{tests.\+test\+\_\+utils.\+Test\+Utils Class Reference}
\label{classtests_1_1test__utils_1_1TestUtils}\index{tests.\+test\+\_\+utils.\+Test\+Utils@{tests.\+test\+\_\+utils.\+Test\+Utils}}


Inheritance diagram for tests.\+test\+\_\+utils.\+Test\+Utils\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{de/dbd/classtests_1_1test__utils_1_1TestUtils__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for tests.\+test\+\_\+utils.\+Test\+Utils\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{d3/d53/classtests_1_1test__utils_1_1TestUtils__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_aa020fc67900c834a020730f29cacc916}{test\+\_\+round\+\_\+sigfigs} (self)
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_aa4b5f19e38d6da7a8947226c60007184}{test\+\_\+timer} (self)
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_a211bff449c261cce734e51e3a937d1af}{test\+\_\+setnamedtupledefaults} (self)
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_a9d3d0280ce67a3e6b039b9184844dc45}{test\+\_\+padded\+\_\+tensor} (self)
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_ad9ee6ef6b6ce7d9f168234eddf5d3716}{test\+\_\+argsort} (self)
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_a595e1217b715af6a4670ee244c9aa61f}{test\+\_\+opt} (self)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 22 of file test\+\_\+utils.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_ad9ee6ef6b6ce7d9f168234eddf5d3716}\label{classtests_1_1test__utils_1_1TestUtils_ad9ee6ef6b6ce7d9f168234eddf5d3716}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+argsort@{test\+\_\+argsort}}
\index{test\+\_\+argsort@{test\+\_\+argsort}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+argsort()}{test\_argsort()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+argsort (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 114 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
114     \textcolor{keyword}{def }test\_argsort(self):
115         keys = [5, 4, 3, 2, 1]
116         items = [\textcolor{stringliteral}{"five"}, \textcolor{stringliteral}{"four"}, \textcolor{stringliteral}{"three"}, \textcolor{stringliteral}{"two"}, \textcolor{stringliteral}{"one"}]
117         items2 = [\textcolor{stringliteral}{"e"}, \textcolor{stringliteral}{"d"}, \textcolor{stringliteral}{"c"}, \textcolor{stringliteral}{"b"}, \textcolor{stringliteral}{"a"}]
118         torch\_keys = torch.LongTensor(keys)
119         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_a1521e559b740f741ebb47b8755202bb2}{argsort}(keys, items, items2) == [
120             list(reversed(items)),
121             list(reversed(items2)),
122         ]
123         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_a1521e559b740f741ebb47b8755202bb2}{argsort}(keys, items, items2, descending=\textcolor{keyword}{True}) == [items, items2]
124 
125         \textcolor{keyword}{assert} np.all(\hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_a1521e559b740f741ebb47b8755202bb2}{argsort}(torch\_keys, torch\_keys)[0].numpy() == np.arange(1, 6))
126 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_a595e1217b715af6a4670ee244c9aa61f}\label{classtests_1_1test__utils_1_1TestUtils_a595e1217b715af6a4670ee244c9aa61f}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+opt@{test\+\_\+opt}}
\index{test\+\_\+opt@{test\+\_\+opt}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+opt()}{test\_opt()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+opt (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 127 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
127     \textcolor{keyword}{def }test\_opt(self):
128         opt = \{\textcolor{stringliteral}{'x'}: 0\}
129         opt = Opt(opt)
130         opt[\textcolor{stringliteral}{'x'}] += 1
131         opt[\textcolor{stringliteral}{'x'}] = 10
132         history = opt.history[\textcolor{stringliteral}{'x'}]
133         self.assertEqual(history[0][1], 1, \textcolor{stringliteral}{'History not set properly'})
134         self.assertEqual(history[1][1], 10, \textcolor{stringliteral}{'History not set properly'})
135 
136         opt\_copy = deepcopy(opt)
137         history = opt\_copy.history[\textcolor{stringliteral}{'x'}]
138         self.assertEqual(history[0][1], 1, \textcolor{stringliteral}{'Deepcopy history not set properly'})
139         self.assertEqual(history[1][1], 10, \textcolor{stringliteral}{'Deepcopy history not set properly'})
140 
141 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_a9d3d0280ce67a3e6b039b9184844dc45}\label{classtests_1_1test__utils_1_1TestUtils_a9d3d0280ce67a3e6b039b9184844dc45}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+padded\+\_\+tensor@{test\+\_\+padded\+\_\+tensor}}
\index{test\+\_\+padded\+\_\+tensor@{test\+\_\+padded\+\_\+tensor}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+padded\+\_\+tensor()}{test\_padded\_tensor()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+padded\+\_\+tensor (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 103 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
103     \textcolor{keyword}{def }test\_padded\_tensor(self):
104         \textcolor{comment}{# list of lists}
105         lol = [[1, 2], [3, 4, 5]]
106         output, lens = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_adb5a414ae439f14c54e8c760b91cc4c8}{padded\_tensor}(lol)
107         \textcolor{keyword}{assert} np.all(output.numpy() == np.array([[1, 2, 0], [3, 4, 5]]))
108         \textcolor{keyword}{assert} lens == [2, 3]
109         output, \_ = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_adb5a414ae439f14c54e8c760b91cc4c8}{padded\_tensor}(lol, left\_padded=\textcolor{keyword}{True})
110         \textcolor{keyword}{assert} np.all(output.numpy() == np.array([[0, 1, 2], [3, 4, 5]]))
111         output, \_ = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_adb5a414ae439f14c54e8c760b91cc4c8}{padded\_tensor}(lol, pad\_idx=99)
112         \textcolor{keyword}{assert} np.all(output.numpy() == np.array([[1, 2, 99], [3, 4, 5]]))
113 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_aa020fc67900c834a020730f29cacc916}\label{classtests_1_1test__utils_1_1TestUtils_aa020fc67900c834a020730f29cacc916}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+round\+\_\+sigfigs@{test\+\_\+round\+\_\+sigfigs}}
\index{test\+\_\+round\+\_\+sigfigs@{test\+\_\+round\+\_\+sigfigs}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+round\+\_\+sigfigs()}{test\_round\_sigfigs()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+round\+\_\+sigfigs (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 23 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
23     \textcolor{keyword}{def }test\_round\_sigfigs(self):
24         x = 0
25         y = 0
26         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 2) == y
27 
28         x = 100
29         y = 100
30         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 2) == y
31 
32         x = 0.01
33         y = 0.01
34         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 2) == y
35 
36         x = 0.00123
37         y = 0.001
38         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 1) == y
39 
40         x = 0.37
41         y = 0.4
42         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 1) == y
43 
44         x = 2353
45         y = 2350
46         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 3) == y
47 
48         x = 3547345734
49         y = 3547350000
50         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 6) == y
51 
52         x = 0.0000046246
53         y = 0.00000462
54         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 3) == y
55 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_a211bff449c261cce734e51e3a937d1af}\label{classtests_1_1test__utils_1_1TestUtils_a211bff449c261cce734e51e3a937d1af}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+setnamedtupledefaults@{test\+\_\+setnamedtupledefaults}}
\index{test\+\_\+setnamedtupledefaults@{test\+\_\+setnamedtupledefaults}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+setnamedtupledefaults()}{test\_setnamedtupledefaults()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+setnamedtupledefaults (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 77 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
77     \textcolor{keyword}{def }test\_setnamedtupledefaults(self):
78         \textcolor{keyword}{from} collections \textcolor{keyword}{import} namedtuple
79 
80         NT = namedtuple(\textcolor{stringliteral}{"NT"}, (\textcolor{stringliteral}{"a"}, \textcolor{stringliteral}{"b"}, \textcolor{stringliteral}{"c"}))
81 
82         \textcolor{comment}{# Shouldn't be able to construct a namedtuple without providing info}
83         \textcolor{keywordflow}{try}:
84             NT()
85             self.fail(\textcolor{stringliteral}{"Shouldn't be able to construct namedtuple"})
86         \textcolor{keywordflow}{except} TypeError:
87             \textcolor{keywordflow}{pass}
88 
89         \textcolor{comment}{# Test setting default value}
90         \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_a17553492abb2e671bc3fc58e1e3a96b0}{set\_namedtuple\_defaults}(NT)
91         nt = NT()
92         \textcolor{keyword}{assert} nt.a \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}
93         \textcolor{keyword}{assert} nt.b \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}
94         \textcolor{keyword}{assert} nt.c \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}
95 
96         \textcolor{comment}{# Test setting it with something else}
97         \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_a17553492abb2e671bc3fc58e1e3a96b0}{set\_namedtuple\_defaults}(NT, default=1)
98         nt = NT()
99         \textcolor{keyword}{assert} nt.a == 1
100         \textcolor{keyword}{assert} nt.b == 1
101         \textcolor{keyword}{assert} nt.c == 1
102 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_aa4b5f19e38d6da7a8947226c60007184}\label{classtests_1_1test__utils_1_1TestUtils_aa4b5f19e38d6da7a8947226c60007184}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+timer@{test\+\_\+timer}}
\index{test\+\_\+timer@{test\+\_\+timer}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+timer()}{test\_timer()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+timer (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 56 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
56     \textcolor{keyword}{def }test\_timer(self):
57         t = Timer()
58         time.sleep(1e-6)
59         elapsed = t.stop().time()
60         \textcolor{keyword}{assert} elapsed > 0
61 
62         same = t.time()
63         \textcolor{keyword}{assert} elapsed == same
64 
65         t.resume()
66         time.sleep(1e-6)
67         more = t.time()
68         \textcolor{keyword}{assert} more > elapsed
69 
70         rabbit = Timer()
71         time.sleep(1e-6)
72         turtle = Timer()
73         time.sleep(1e-6)
74         \textcolor{keyword}{assert} turtle.time() > 0
75         \textcolor{keyword}{assert} turtle.time() < rabbit.time()
76 
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
tests/\hyperlink{test__utils_8py}{test\+\_\+utils.\+py}\end{DoxyCompactItemize}
