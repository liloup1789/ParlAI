\hypertarget{classtests_1_1test__utils_1_1TestUtils}{}\section{tests.\+test\+\_\+utils.\+Test\+Utils Class Reference}
\label{classtests_1_1test__utils_1_1TestUtils}\index{tests.\+test\+\_\+utils.\+Test\+Utils@{tests.\+test\+\_\+utils.\+Test\+Utils}}


Inheritance diagram for tests.\+test\+\_\+utils.\+Test\+Utils\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{de/dbd/classtests_1_1test__utils_1_1TestUtils__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for tests.\+test\+\_\+utils.\+Test\+Utils\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{d3/d53/classtests_1_1test__utils_1_1TestUtils__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_aa020fc67900c834a020730f29cacc916}{test\+\_\+round\+\_\+sigfigs} (self)
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_aa4b5f19e38d6da7a8947226c60007184}{test\+\_\+timer} (self)
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_a211bff449c261cce734e51e3a937d1af}{test\+\_\+setnamedtupledefaults} (self)
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_a9d3d0280ce67a3e6b039b9184844dc45}{test\+\_\+padded\+\_\+tensor} (self)
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_ad9ee6ef6b6ce7d9f168234eddf5d3716}{test\+\_\+argsort} (self)
\item 
def \hyperlink{classtests_1_1test__utils_1_1TestUtils_a595e1217b715af6a4670ee244c9aa61f}{test\+\_\+opt} (self)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 17 of file test\+\_\+utils.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_ad9ee6ef6b6ce7d9f168234eddf5d3716}\label{classtests_1_1test__utils_1_1TestUtils_ad9ee6ef6b6ce7d9f168234eddf5d3716}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+argsort@{test\+\_\+argsort}}
\index{test\+\_\+argsort@{test\+\_\+argsort}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+argsort()}{test\_argsort()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+argsort (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 109 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
109     \textcolor{keyword}{def }test\_argsort(self):
110         keys = [5, 4, 3, 2, 1]
111         items = [\textcolor{stringliteral}{"five"}, \textcolor{stringliteral}{"four"}, \textcolor{stringliteral}{"three"}, \textcolor{stringliteral}{"two"}, \textcolor{stringliteral}{"one"}]
112         items2 = [\textcolor{stringliteral}{"e"}, \textcolor{stringliteral}{"d"}, \textcolor{stringliteral}{"c"}, \textcolor{stringliteral}{"b"}, \textcolor{stringliteral}{"a"}]
113         torch\_keys = torch.LongTensor(keys)
114         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_a1521e559b740f741ebb47b8755202bb2}{argsort}(keys, items, items2) == [
115             list(reversed(items)),
116             list(reversed(items2)),
117         ]
118         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_a1521e559b740f741ebb47b8755202bb2}{argsort}(keys, items, items2, descending=\textcolor{keyword}{True}) == [items, items2]
119 
120         \textcolor{keyword}{assert} np.all(\hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_a1521e559b740f741ebb47b8755202bb2}{argsort}(torch\_keys, torch\_keys)[0].numpy() == np.arange(1, 6))
121 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_a595e1217b715af6a4670ee244c9aa61f}\label{classtests_1_1test__utils_1_1TestUtils_a595e1217b715af6a4670ee244c9aa61f}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+opt@{test\+\_\+opt}}
\index{test\+\_\+opt@{test\+\_\+opt}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+opt()}{test\_opt()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+opt (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 122 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
122     \textcolor{keyword}{def }test\_opt(self):
123         opt = \{\textcolor{stringliteral}{'x'}: 0\}
124         opt = Opt(opt)
125         opt[\textcolor{stringliteral}{'x'}] += 1
126         opt[\textcolor{stringliteral}{'x'}] = 10
127         history = opt.history[\textcolor{stringliteral}{'x'}]
128         self.assertEqual(history[0][1], 1, \textcolor{stringliteral}{'History not set properly'})
129         self.assertEqual(history[1][1], 10, \textcolor{stringliteral}{'History not set properly'})
130 
131         opt\_copy = deepcopy(opt)
132         history = opt\_copy.history[\textcolor{stringliteral}{'x'}]
133         self.assertEqual(history[0][1], 1, \textcolor{stringliteral}{'Deepcopy history not set properly'})
134         self.assertEqual(history[1][1], 10, \textcolor{stringliteral}{'Deepcopy history not set properly'})
135 
136 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_a9d3d0280ce67a3e6b039b9184844dc45}\label{classtests_1_1test__utils_1_1TestUtils_a9d3d0280ce67a3e6b039b9184844dc45}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+padded\+\_\+tensor@{test\+\_\+padded\+\_\+tensor}}
\index{test\+\_\+padded\+\_\+tensor@{test\+\_\+padded\+\_\+tensor}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+padded\+\_\+tensor()}{test\_padded\_tensor()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+padded\+\_\+tensor (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 98 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
98     \textcolor{keyword}{def }test\_padded\_tensor(self):
99         \textcolor{comment}{# list of lists}
100         lol = [[1, 2], [3, 4, 5]]
101         output, lens = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_adb5a414ae439f14c54e8c760b91cc4c8}{padded\_tensor}(lol)
102         \textcolor{keyword}{assert} np.all(output.numpy() == np.array([[1, 2, 0], [3, 4, 5]]))
103         \textcolor{keyword}{assert} lens == [2, 3]
104         output, \_ = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_adb5a414ae439f14c54e8c760b91cc4c8}{padded\_tensor}(lol, left\_padded=\textcolor{keyword}{True})
105         \textcolor{keyword}{assert} np.all(output.numpy() == np.array([[0, 1, 2], [3, 4, 5]]))
106         output, \_ = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_adb5a414ae439f14c54e8c760b91cc4c8}{padded\_tensor}(lol, pad\_idx=99)
107         \textcolor{keyword}{assert} np.all(output.numpy() == np.array([[1, 2, 99], [3, 4, 5]]))
108 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_aa020fc67900c834a020730f29cacc916}\label{classtests_1_1test__utils_1_1TestUtils_aa020fc67900c834a020730f29cacc916}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+round\+\_\+sigfigs@{test\+\_\+round\+\_\+sigfigs}}
\index{test\+\_\+round\+\_\+sigfigs@{test\+\_\+round\+\_\+sigfigs}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+round\+\_\+sigfigs()}{test\_round\_sigfigs()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+round\+\_\+sigfigs (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 18 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
18     \textcolor{keyword}{def }test\_round\_sigfigs(self):
19         x = 0
20         y = 0
21         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 2) == y
22 
23         x = 100
24         y = 100
25         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 2) == y
26 
27         x = 0.01
28         y = 0.01
29         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 2) == y
30 
31         x = 0.00123
32         y = 0.001
33         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 1) == y
34 
35         x = 0.37
36         y = 0.4
37         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 1) == y
38 
39         x = 2353
40         y = 2350
41         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 3) == y
42 
43         x = 3547345734
44         y = 3547350000
45         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 6) == y
46 
47         x = 0.0000046246
48         y = 0.00000462
49         \textcolor{keyword}{assert} \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(x, 3) == y
50 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_a211bff449c261cce734e51e3a937d1af}\label{classtests_1_1test__utils_1_1TestUtils_a211bff449c261cce734e51e3a937d1af}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+setnamedtupledefaults@{test\+\_\+setnamedtupledefaults}}
\index{test\+\_\+setnamedtupledefaults@{test\+\_\+setnamedtupledefaults}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+setnamedtupledefaults()}{test\_setnamedtupledefaults()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+setnamedtupledefaults (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 72 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
72     \textcolor{keyword}{def }test\_setnamedtupledefaults(self):
73         \textcolor{keyword}{from} collections \textcolor{keyword}{import} namedtuple
74 
75         NT = namedtuple(\textcolor{stringliteral}{"NT"}, (\textcolor{stringliteral}{"a"}, \textcolor{stringliteral}{"b"}, \textcolor{stringliteral}{"c"}))
76 
77         \textcolor{comment}{# Shouldn't be able to construct a namedtuple without providing info}
78         \textcolor{keywordflow}{try}:
79             NT()
80             self.fail(\textcolor{stringliteral}{"Shouldn't be able to construct namedtuple"})
81         \textcolor{keywordflow}{except} TypeError:
82             \textcolor{keywordflow}{pass}
83 
84         \textcolor{comment}{# Test setting default value}
85         \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_a17553492abb2e671bc3fc58e1e3a96b0}{set\_namedtuple\_defaults}(NT)
86         nt = NT()
87         \textcolor{keyword}{assert} nt.a \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}
88         \textcolor{keyword}{assert} nt.b \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}
89         \textcolor{keyword}{assert} nt.c \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}
90 
91         \textcolor{comment}{# Test setting it with something else}
92         \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v1_a17553492abb2e671bc3fc58e1e3a96b0}{set\_namedtuple\_defaults}(NT, default=1)
93         nt = NT()
94         \textcolor{keyword}{assert} nt.a == 1
95         \textcolor{keyword}{assert} nt.b == 1
96         \textcolor{keyword}{assert} nt.c == 1
97 
\end{DoxyCode}
\mbox{\Hypertarget{classtests_1_1test__utils_1_1TestUtils_aa4b5f19e38d6da7a8947226c60007184}\label{classtests_1_1test__utils_1_1TestUtils_aa4b5f19e38d6da7a8947226c60007184}} 
\index{tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}!test\+\_\+timer@{test\+\_\+timer}}
\index{test\+\_\+timer@{test\+\_\+timer}!tests\+::test\+\_\+utils\+::\+Test\+Utils@{tests\+::test\+\_\+utils\+::\+Test\+Utils}}
\subsubsection{\texorpdfstring{test\+\_\+timer()}{test\_timer()}}
{\footnotesize\ttfamily def tests.\+test\+\_\+utils.\+Test\+Utils.\+test\+\_\+timer (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 51 of file test\+\_\+utils.\+py.


\begin{DoxyCode}
51     \textcolor{keyword}{def }test\_timer(self):
52         t = Timer()
53         time.sleep(1e-6)
54         elapsed = t.stop().time()
55         \textcolor{keyword}{assert} elapsed > 0
56 
57         same = t.time()
58         \textcolor{keyword}{assert} elapsed == same
59 
60         t.resume()
61         time.sleep(1e-6)
62         more = t.time()
63         \textcolor{keyword}{assert} more > elapsed
64 
65         rabbit = Timer()
66         time.sleep(1e-6)
67         turtle = Timer()
68         time.sleep(1e-6)
69         \textcolor{keyword}{assert} turtle.time() > 0
70         \textcolor{keyword}{assert} turtle.time() < rabbit.time()
71 
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
tests/\hyperlink{test__utils_8py}{test\+\_\+utils.\+py}\end{DoxyCompactItemize}
