\hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop}{}\section{parlai.\+agents.\+legacy\+\_\+agents.\+memnn.\+modules\+\_\+v0.\+Hop Class Reference}
\label{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop}\index{parlai.\+agents.\+legacy\+\_\+agents.\+memnn.\+modules\+\_\+v0.\+Hop@{parlai.\+agents.\+legacy\+\_\+agents.\+memnn.\+modules\+\_\+v0.\+Hop}}


Inheritance diagram for parlai.\+agents.\+legacy\+\_\+agents.\+memnn.\+modules\+\_\+v0.\+Hop\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=206pt]{d2/dd4/classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+agents.\+legacy\+\_\+agents.\+memnn.\+modules\+\_\+v0.\+Hop\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=206pt]{db/d4b/classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_a76029bb0d257bc0a01f2a03b3480321a}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_ac291a01e4b365714a352d411f353bdc6}{embedding\+\_\+size})
\item 
def \hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_a19e28fabccb536fcc5f0db0e92a7a135}{forward} (self, query\+\_\+embeddings, in\+\_\+memory\+\_\+embeddings, out\+\_\+memory\+\_\+embeddings, attention\+\_\+mask=None)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_ac291a01e4b365714a352d411f353bdc6}{embedding\+\_\+size}
\item 
\hyperlink{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_ac96056089c04bfc0ed7ad4a364655956}{linear}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 166 of file modules\+\_\+v0.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_a76029bb0d257bc0a01f2a03b3480321a}\label{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_a76029bb0d257bc0a01f2a03b3480321a}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop@{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop@{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+memnn.\+modules\+\_\+v0.\+Hop.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{embedding\+\_\+size }\end{DoxyParamCaption})}



Definition at line 167 of file modules\+\_\+v0.\+py.


\begin{DoxyCode}
167     \textcolor{keyword}{def }\_\_init\_\_(self, embedding\_size):
168         super(Hop, self).\_\_init\_\_()
169         self.embedding\_size = embedding\_size
170         self.linear = nn.Linear(embedding\_size, embedding\_size, bias=\textcolor{keyword}{False})
171 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_a19e28fabccb536fcc5f0db0e92a7a135}\label{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_a19e28fabccb536fcc5f0db0e92a7a135}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop@{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop}!forward@{forward}}
\index{forward@{forward}!parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop@{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop}}
\subsubsection{\texorpdfstring{forward()}{forward()}}
{\footnotesize\ttfamily def parlai.\+agents.\+legacy\+\_\+agents.\+memnn.\+modules\+\_\+v0.\+Hop.\+forward (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{query\+\_\+embeddings,  }\item[{}]{in\+\_\+memory\+\_\+embeddings,  }\item[{}]{out\+\_\+memory\+\_\+embeddings,  }\item[{}]{attention\+\_\+mask = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 178 of file modules\+\_\+v0.\+py.


\begin{DoxyCode}
178     ):
179         attention = torch.bmm(
180             in\_memory\_embeddings, query\_embeddings.unsqueeze(2)
181         ).squeeze(2)
182         \textcolor{keywordflow}{if} attention\_mask \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
183             \textcolor{comment}{# exclude masked elements from the softmax}
184             attention = (
185                 attention\_mask.float() * attention
186                 + (1 - attention\_mask.float()) * -1e20
187             )
188         probs = softmax(attention, dim=1).unsqueeze(1)
189         memory\_output = torch.bmm(probs, out\_memory\_embeddings).squeeze(1)
190         query\_embeddings = self.linear(query\_embeddings)
191         output = memory\_output + query\_embeddings
192         \textcolor{keywordflow}{return} output
193 
194 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_ac291a01e4b365714a352d411f353bdc6}\label{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_ac291a01e4b365714a352d411f353bdc6}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop@{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop}!embedding\+\_\+size@{embedding\+\_\+size}}
\index{embedding\+\_\+size@{embedding\+\_\+size}!parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop@{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop}}
\subsubsection{\texorpdfstring{embedding\+\_\+size}{embedding\_size}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+memnn.\+modules\+\_\+v0.\+Hop.\+embedding\+\_\+size}



Definition at line 169 of file modules\+\_\+v0.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_ac96056089c04bfc0ed7ad4a364655956}\label{classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1modules__v0_1_1Hop_ac96056089c04bfc0ed7ad4a364655956}} 
\index{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop@{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop}!linear@{linear}}
\index{linear@{linear}!parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop@{parlai\+::agents\+::legacy\+\_\+agents\+::memnn\+::modules\+\_\+v0\+::\+Hop}}
\subsubsection{\texorpdfstring{linear}{linear}}
{\footnotesize\ttfamily parlai.\+agents.\+legacy\+\_\+agents.\+memnn.\+modules\+\_\+v0.\+Hop.\+linear}



Definition at line 170 of file modules\+\_\+v0.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/agents/legacy\+\_\+agents/memnn/\hyperlink{memnn_2modules__v0_8py}{modules\+\_\+v0.\+py}\end{DoxyCompactItemize}
