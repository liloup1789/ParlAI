\hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld}{}\section{image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World Class Reference}
\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld}\index{image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World}}


Inheritance diagram for image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d3/d4a/classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d1/dfc/classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aa4c8a2169f71ac876be070a1c9c5cbdc}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1worlds_1_1World_a3640d92718acd3e6942a28c1ab3678bd}{opt}, \hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a4a6b3bbe92761e075e8763997d452b65}{agents}=None, shared=None, \hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a0be08870bfc570382e035bc0b6119b62}{world\+\_\+tag}=\textquotesingle{}N\+O\+NE\textquotesingle{})
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a27c215716de1649559eca384ed71d0f8}{episode\+\_\+done} (self)
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a7af5e011cc93106144797115af770537}{parley} (self)
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ab3caeb29dc340a476579b1cc8d101608}{get\+\_\+instruction} (self, agent\+\_\+id=None, tag=\textquotesingle{}first\textquotesingle{}, turn\+\_\+num=0)
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a333c8d7353ed7fba417461177035c209}{check\+\_\+timeout} (self, act)
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ac4710715dfda617f14c962e641fd16b9}{save\+\_\+data} (self)
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a02bb22cb19e1f1ccecab9043a18741e1}{review\+\_\+work} (self)
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aace5207ebc6f75d797a87003eeded08d}{shutdown} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_acb6317fe3c0f3ca2c81ef344e49e15d4}{turn\+\_\+idx}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a61f2dbe636a6b7286febaedbcd9f5b18}{task\+\_\+type}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a3cc59163cc4f2bad20f795d10a8e1b44}{chat\+\_\+done}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a0be08870bfc570382e035bc0b6119b62}{world\+\_\+tag}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aefe1eca5e9e0c0588cf3a938cbfc9bee}{max\+\_\+resp\+\_\+time}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a4a6b3bbe92761e075e8763997d452b65}{agents}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a8a1e906514af9c95bb1e859400c79a7c}{agent}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a8cf95b8421df9c62f5a8029b10d4191d}{offensive\+\_\+lang\+\_\+detector}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ac03c068df619250dd205eee8ecab59e3}{data}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aebd5761b4adf46ed785462d375c8b762}{exact\+\_\+match}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_adf323947082f426bc1f082e4bde387c6}{num\+\_\+images}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ac1c15938041a70c1671cd60fe94dfb04}{second\+\_\+resp}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a83ee57ee0709f14bee6e64cef39ab17d}{config}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ab9245c8e27f66da8d8dc91591a428433}{image\+\_\+path}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}World where an agent observes 5 images and 5 comments, with 5 different
personalities, and writes engaging responses to the comments.
\end{DoxyVerb}
 

Definition at line 188 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aa4c8a2169f71ac876be070a1c9c5cbdc}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aa4c8a2169f71ac876be070a1c9c5cbdc}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{agents = {\ttfamily None},  }\item[{}]{shared = {\ttfamily None},  }\item[{}]{world\+\_\+tag = {\ttfamily \textquotesingle{}NONE\textquotesingle{}} }\end{DoxyParamCaption})}



Definition at line 194 of file worlds.\+py.


\begin{DoxyCode}
194     \textcolor{keyword}{def }\_\_init\_\_(self, opt, agents=None, shared=None, world\_tag='NONE'):
195         self.turn\_idx = 0
196         self.task\_type = \textcolor{stringliteral}{'sandbox'} \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'is\_sandbox'}] \textcolor{keywordflow}{else} \textcolor{stringliteral}{'live'}
197         self.chat\_done = \textcolor{keyword}{False}
198         self.world\_tag = world\_tag
199         self.max\_resp\_time = opt[\textcolor{stringliteral}{'max\_resp\_time'}]  \textcolor{comment}{# in secs}
200         super().\_\_init\_\_(opt, agents, shared)
201         self.agents = agents
202         self.agent = agents[0]
203         self.offensive\_lang\_detector = OffensiveStringMatcher()
204         self.data = []
205         self.exact\_match = \textcolor{keyword}{False}
206         self.num\_images = opt[\textcolor{stringliteral}{'num\_images'}]
207         self.second\_resp = opt.get(\textcolor{stringliteral}{'second\_response'}, \textcolor{keyword}{False})
208         self.config = config\_first \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.second\_resp \textcolor{keywordflow}{else} config\_second
209         \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'yfcc\_path'}):
210             self.image\_path = opt[\textcolor{stringliteral}{'yfcc\_path'}]
211         \textcolor{keywordflow}{else}:
212             self.image\_path = os.path.join(opt[\textcolor{stringliteral}{'datapath'}], \textcolor{stringliteral}{'yfcc\_images'})
213 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a333c8d7353ed7fba417461177035c209}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a333c8d7353ed7fba417461177035c209}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!check\+\_\+timeout@{check\+\_\+timeout}}
\index{check\+\_\+timeout@{check\+\_\+timeout}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{check\+\_\+timeout()}{check\_timeout()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+check\+\_\+timeout (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{act }\end{DoxyParamCaption})}



Definition at line 321 of file worlds.\+py.


\begin{DoxyCode}
321     \textcolor{keyword}{def }check\_timeout(self, act):
322         \textcolor{keywordflow}{if} act[\textcolor{stringliteral}{'text'}] == \textcolor{stringliteral}{'[TIMEOUT]'} \textcolor{keywordflow}{and} act[\textcolor{stringliteral}{'episode\_done'}]:
323             control\_msg = \{\textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{True}\}
324             control\_msg[\textcolor{stringliteral}{'id'}] = \textcolor{stringliteral}{'SYSTEM'}
325             control\_msg[\textcolor{stringliteral}{'text'}] = self.get\_instruction(tag=\textcolor{stringliteral}{'timeout'})
326             \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents:
327                 \textcolor{keywordflow}{if} ag.id != act[\textcolor{stringliteral}{'id'}]:
328                     ag.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
329             self.chat\_done = \textcolor{keyword}{True}
330             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
331         \textcolor{keywordflow}{elif} act[\textcolor{stringliteral}{'text'}] == \textcolor{stringliteral}{'[DISCONNECT]'}:
332             self.chat\_done = \textcolor{keyword}{True}
333             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
334         \textcolor{keywordflow}{else}:
335             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
336 
\end{DoxyCode}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a27c215716de1649559eca384ed71d0f8}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a27c215716de1649559eca384ed71d0f8}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!episode\+\_\+done@{episode\+\_\+done}}
\index{episode\+\_\+done@{episode\+\_\+done}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{episode\+\_\+done()}{episode\_done()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+episode\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 214 of file worlds.\+py.


\begin{DoxyCode}
214     \textcolor{keyword}{def }episode\_done(self):
215         \textcolor{keywordflow}{return} self.chat\_done
216 
\end{DoxyCode}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ab3caeb29dc340a476579b1cc8d101608}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ab3caeb29dc340a476579b1cc8d101608}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!get\+\_\+instruction@{get\+\_\+instruction}}
\index{get\+\_\+instruction@{get\+\_\+instruction}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{get\+\_\+instruction()}{get\_instruction()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+get\+\_\+instruction (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+id = {\ttfamily None},  }\item[{}]{tag = {\ttfamily \textquotesingle{}first\textquotesingle{}},  }\item[{}]{turn\+\_\+num = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 314 of file worlds.\+py.


\begin{DoxyCode}
314     \textcolor{keyword}{def }get\_instruction(self, agent\_id=None, tag='first', turn\_num=0):
315         \textcolor{keywordflow}{if} tag == \textcolor{stringliteral}{'start'}:
316             start\_msg = START\_MSG \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.second\_resp \textcolor{keywordflow}{else} START\_MSG\_SECOND\_RESP
317             \textcolor{keywordflow}{return} start\_msg.format(turn\_num)
318         \textcolor{keywordflow}{if} tag == \textcolor{stringliteral}{'timeout'}:
319             \textcolor{keywordflow}{return} TIMEOUT\_MSG
320 
\end{DoxyCode}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a7af5e011cc93106144797115af770537}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a7af5e011cc93106144797115af770537}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!parley@{parley}}
\index{parley@{parley}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{parley()}{parley()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+parley (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}RESPONDER is given an image and a comment, and is told to give a response for to
the comment.
\end{DoxyVerb}
 

Definition at line 217 of file worlds.\+py.


\begin{DoxyCode}
217     \textcolor{keyword}{def }parley(self):
218         \textcolor{stringliteral}{"""}
219 \textcolor{stringliteral}{        RESPONDER is given an image and a comment, and is told to give a response for to}
220 \textcolor{stringliteral}{        the comment.}
221 \textcolor{stringliteral}{        """}
222         \textcolor{comment}{# Initial Message Value}
223         control\_msg = \{\textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{False}\}
224         control\_msg[\textcolor{stringliteral}{'id'}] = \textcolor{stringliteral}{'SYSTEM'}
225 
226         \textcolor{stringliteral}{'''We only have to worry about 1 agent'''}
227         agent = self.agents[0]
228 
229         \textcolor{stringliteral}{'''First, we give RESPONDER their personality instructions, and image}
230 \textcolor{stringliteral}{        '''}
231         \textcolor{keywordflow}{while} self.turn\_idx < self.num\_images:
232             print(self.world\_tag + \textcolor{stringliteral}{' is at turn \{\}...'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.turn\_idx))
233             \textcolor{comment}{# Send personality + image + comment to turker}
234 
235             self.example\_num, example = self.agent.example\_generator.pop\_example()
236             control\_msg[\textcolor{stringliteral}{'text'}] = self.get\_instruction(
237                 tag=\textcolor{stringliteral}{'start'}, agent\_id=agent.id, turn\_num=self.turn\_idx + 1
238             )
239 
240             \textcolor{keywordflow}{if} self.second\_resp:
241                 control\_msg[\textcolor{stringliteral}{'comment\_text'}] = (
242                     \textcolor{stringliteral}{'<b><span style="color:red">'}
243                     \textcolor{stringliteral}{'\{\}\(\backslash\)n</span></b>'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(example[\textcolor{stringliteral}{'dialog'}][0][1].strip())
244                 )
245                 control\_msg[\textcolor{stringliteral}{'response\_text'}] = (
246                     \textcolor{stringliteral}{'<b><span style="color:blue">'}
247                     \textcolor{stringliteral}{'\{\}\(\backslash\)n</span></b>'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(example[\textcolor{stringliteral}{'dialog'}][1][1].strip())
248                 )
249             \textcolor{keywordflow}{else}:
250                 control\_msg[\textcolor{stringliteral}{'comment\_text'}] = (
251                     \textcolor{stringliteral}{'<b><span style="color:red">'}
252                     \textcolor{stringliteral}{'\{\}\(\backslash\)n</span></b>'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(example[\textcolor{stringliteral}{'comment'}].strip())
253                 )
254 
255             img = \hyperlink{namespacepersonality__captions_1_1worlds_a2863737d97a8e8c5a1ebe9029d0d2293}{load\_image}(
256                 os.path.join(self.image\_path, \textcolor{stringliteral}{'\{\}.jpg'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(example[\textcolor{stringliteral}{'image\_hash'}]))
257             )
258             buffered = BytesIO()
259             img.save(buffered, format=\textcolor{stringliteral}{'JPEG'})
260             encoded = \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(base64.b64encode(buffered.getvalue()).decode(\textcolor{stringliteral}{'ascii'}))
261             control\_msg[\textcolor{stringliteral}{'image'}] = encoded
262             \textcolor{keywordflow}{if} self.second\_resp:
263                 self.pers\_idx, personality = (-1, example[\textcolor{stringliteral}{'dialog'}][0][0])
264             \textcolor{keywordflow}{else}:
265                 pers\_tup = self.agent.personality\_generator.pop\_personality()
266                 self.pers\_idx, personality = pers\_tup
267             personality\_text = \textcolor{stringliteral}{'<b><span style="color:\{\}">'} \textcolor{stringliteral}{'\{\}\(\backslash\)n</span></b>'}.
      \hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
268                 \textcolor{stringliteral}{'blue'} \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.second\_resp \textcolor{keywordflow}{else} \textcolor{stringliteral}{'red'}, personality.strip()
269             )
270             control\_msg[\textcolor{stringliteral}{'personality\_text'}] = personality\_text
271             control\_msg[\textcolor{stringliteral}{'description'}] = self.config[\textcolor{stringliteral}{'task\_description'}]
272             agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
273             time.sleep(1)
274 
275             \textcolor{comment}{# Collect comment from turker}
276             offensive\_counter = 0
277             \textcolor{keywordflow}{while} offensive\_counter < 3:
278                 idx = 0
279                 acts = self.acts
280                 acts[idx] = agent.act(timeout=self.max\_resp\_time)
281                 agent\_left = self.check\_timeout(acts[idx])
282                 \textcolor{keywordflow}{if} agent\_left:
283                     \textcolor{keywordflow}{break}
284                 response = acts[idx][\textcolor{stringliteral}{'text'}]
285                 offensive = self.offensive\_lang\_detector.contains\_offensive\_language(
286                     response
287                 )
288                 \textcolor{keywordflow}{if} offensive:
289                     \textcolor{comment}{# Tell Turker to not be offensive!}
290                     offensive\_counter += 1
291                     \textcolor{keywordflow}{if} offensive\_counter == 3:
292                         \textcolor{keywordflow}{break}
293                     offensive\_msg = \{\textcolor{stringliteral}{'id'}: \textcolor{stringliteral}{'SYSTEM'}, \textcolor{stringliteral}{'text'}: OFFENSIVE\_MSG\}
294                     agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(offensive\_msg))
295                 \textcolor{keywordflow}{else}:
296                     \textcolor{keywordflow}{break}
297 
298             \textcolor{keywordflow}{if} self.chat\_done:
299                 \textcolor{keywordflow}{break}
300             ex\_to\_save = example.copy()
301             key = \textcolor{stringliteral}{'second\_response'} \textcolor{keywordflow}{if} self.second\_resp \textcolor{keywordflow}{else} \textcolor{stringliteral}{'first\_response'}
302             ex\_to\_save[key] = response
303             ex\_to\_save[\textcolor{stringliteral}{'\{\}\_personality'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(key)] = personality
304             ex\_to\_save[\textcolor{stringliteral}{'contains\_offensive\_language'}] = offensive
305             self.data.append(ex\_to\_save)
306             self.turn\_idx += 1
307 
308         \textcolor{keywordflow}{if} self.turn\_idx == self.num\_images:
309             control\_msg[\textcolor{stringliteral}{'text'}] = CHAT\_ENDED\_MSG.format(self.num\_images)
310             agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
311         self.chat\_done = \textcolor{keyword}{True}
312         \textcolor{keywordflow}{return}
313 
\end{DoxyCode}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a02bb22cb19e1f1ccecab9043a18741e1}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a02bb22cb19e1f1ccecab9043a18741e1}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!review\+\_\+work@{review\+\_\+work}}
\index{review\+\_\+work@{review\+\_\+work}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{review\+\_\+work()}{review\_work()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+review\+\_\+work (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 399 of file worlds.\+py.


\begin{DoxyCode}
399     \textcolor{keyword}{def }review\_work(self):
400         \textcolor{keyword}{global} review\_agent
401 
402         \textcolor{keyword}{def }review\_agent(ag):
403             contains\_offense = any(d[\textcolor{stringliteral}{'contains\_offensive\_language'}] \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} self.data)
404             \textcolor{keywordflow}{if} contains\_offense:
405                 ag.reject\_work(
406                     reason=\textcolor{stringliteral}{'We have rejected this HIT because at '}
407                     \textcolor{stringliteral}{'least one of your comments '}
408                     \textcolor{stringliteral}{'contains offensive language'}
409                 )
410                 print(
411                     \textcolor{stringliteral}{'Rejected work for agent \{\} for offensive language'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
412                         ag.worker\_id
413                     )
414                 )
415             \textcolor{keywordflow}{elif} self.exact\_match:
416                 ag.reject\_work(
417                     reason=\textcolor{stringliteral}{'We have rejected this HIT because '}
418                     \textcolor{stringliteral}{'all of your comments are the exact same'}
419                 )
420                 print(
421                     \textcolor{stringliteral}{'Rejected work for agent \{\} for same comments'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(ag.worker\_id)
422                 )
423 
424         Parallel(n\_jobs=len(self.agents), backend=\textcolor{stringliteral}{'threading'})(
425             delayed(review\_agent)(agent) \textcolor{keywordflow}{for} agent \textcolor{keywordflow}{in} self.agents
426         )
427 
\end{DoxyCode}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ac4710715dfda617f14c962e641fd16b9}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ac4710715dfda617f14c962e641fd16b9}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!save\+\_\+data@{save\+\_\+data}}
\index{save\+\_\+data@{save\+\_\+data}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{save\+\_\+data()}{save\_data()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+save\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 337 of file worlds.\+py.


\begin{DoxyCode}
337     \textcolor{keyword}{def }save\_data(self):
338         convo\_finished = \textcolor{keyword}{True}
339         \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents:
340             \textcolor{keywordflow}{if} (
341                 ag.hit\_is\_abandoned
342                 \textcolor{keywordflow}{or} ag.hit\_is\_returned
343                 \textcolor{keywordflow}{or} ag.disconnected
344                 \textcolor{keywordflow}{or} ag.hit\_is\_expired
345             ):
346                 convo\_finished = \textcolor{keyword}{False}
347         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} convo\_finished:
348             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.second\_resp:
349                 ag.personality\_generator.push\_personality(self.pers\_idx)
350             ag.example\_generator.push\_example(self.example\_num)
351             print(\textcolor{stringliteral}{'\(\backslash\)n**Push personality \{\} back to stack. **\(\backslash\)n'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.pers\_idx))
352             print(\textcolor{stringliteral}{'\(\backslash\)n**Push image \{\} back to stack. **\(\backslash\)n'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.example\_num))
353         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.second\_resp:
354             self.agents[0].personality\_generator.save\_idx\_stack()
355         self.agents[0].example\_generator.save\_idx\_stack()
356         data\_path = self.opt[\textcolor{stringliteral}{'data\_path'}]
357         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(data\_path):
358             os.makedirs(data\_path)
359         \textcolor{keywordflow}{if} convo\_finished:
360             filename = os.path.join(
361                 data\_path,
362                 \textcolor{stringliteral}{'\{\}\_\{\}\_\{\}.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
363                     time.strftime(\textcolor{stringliteral}{'%Y%m%d-%H%M%S'}),
364                     np.random.randint(0, 1000),
365                     self.task\_type,
366                 ),
367             )
368         \textcolor{keywordflow}{else}:
369             filename = os.path.join(
370                 data\_path,
371                 \textcolor{stringliteral}{'\{\}\_\{\}\_\{\}\_incomplete.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
372                     time.strftime(\textcolor{stringliteral}{'%Y%m%d-%H%M%S'}),
373                     np.random.randint(0, 1000),
374                     self.task\_type,
375                 ),
376             )
377         key = \textcolor{stringliteral}{'second\_response'} \textcolor{keywordflow}{if} self.second\_resp \textcolor{keywordflow}{else} \textcolor{stringliteral}{'first\_response'}
378         responses = [d[key] \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} self.data]
379 
380         \textcolor{keywordflow}{if} len(responses) >= 2:
381             c = responses[0]
382             \textcolor{keywordflow}{if} \_exact\_match(c, responses[1:]):
383                 self.exact\_match = \textcolor{keyword}{True}
384         data\_to\_save = [
385             d \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} self.data \textcolor{keywordflow}{if} d[\textcolor{stringliteral}{'contains\_offensive\_language'}] \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}
386         ]
387         pickle.dump(
388             \{
389                 \textcolor{stringliteral}{'data'}: data\_to\_save,
390                 \textcolor{stringliteral}{'worker'}: self.agents[0].worker\_id,
391                 \textcolor{stringliteral}{'hit\_id'}: self.agents[0].hit\_id,
392                 \textcolor{stringliteral}{'assignment\_id'}: self.agents[0].assignment\_id,
393                 \textcolor{stringliteral}{'exact\_match'}: self.exact\_match,
394             \},
395             open(filename, \textcolor{stringliteral}{'wb'}),
396         )
397         print(\textcolor{stringliteral}{'\{\}: Data successfully saved at \{\}.'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.world\_tag, filename))
398 
\end{DoxyCode}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aace5207ebc6f75d797a87003eeded08d}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aace5207ebc6f75d797a87003eeded08d}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Shutdown all mturk agents in parallel, otherwise if one mturk agent is
disconnected then it could prevent other mturk agents from completing.
\end{DoxyVerb}
 

Definition at line 428 of file worlds.\+py.


\begin{DoxyCode}
428     \textcolor{keyword}{def }shutdown(self):
429         \textcolor{stringliteral}{"""}
430 \textcolor{stringliteral}{        Shutdown all mturk agents in parallel, otherwise if one mturk agent is}
431 \textcolor{stringliteral}{        disconnected then it could prevent other mturk agents from completing.}
432 \textcolor{stringliteral}{        """}
433         \textcolor{keyword}{global} shutdown\_agent
434 
435         \textcolor{keyword}{def }shutdown\_agent(agent):
436             agent.shutdown()
437 
438         Parallel(n\_jobs=len(self.agents), backend=\textcolor{stringliteral}{'threading'})(
439             delayed(shutdown\_agent)(agent) \textcolor{keywordflow}{for} agent \textcolor{keywordflow}{in} self.agents
440         )
441 \end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a8a1e906514af9c95bb1e859400c79a7c}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a8a1e906514af9c95bb1e859400c79a7c}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!agent@{agent}}
\index{agent@{agent}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{agent}{agent}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+agent}



Definition at line 202 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a4a6b3bbe92761e075e8763997d452b65}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a4a6b3bbe92761e075e8763997d452b65}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!agents@{agents}}
\index{agents@{agents}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{agents}{agents}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+agents}



Definition at line 201 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a3cc59163cc4f2bad20f795d10a8e1b44}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a3cc59163cc4f2bad20f795d10a8e1b44}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!chat\+\_\+done@{chat\+\_\+done}}
\index{chat\+\_\+done@{chat\+\_\+done}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{chat\+\_\+done}{chat\_done}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+chat\+\_\+done}



Definition at line 197 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a83ee57ee0709f14bee6e64cef39ab17d}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a83ee57ee0709f14bee6e64cef39ab17d}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!config@{config}}
\index{config@{config}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{config}{config}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+config}



Definition at line 208 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ac03c068df619250dd205eee8ecab59e3}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ac03c068df619250dd205eee8ecab59e3}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!data@{data}}
\index{data@{data}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{data}{data}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+data}



Definition at line 204 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aebd5761b4adf46ed785462d375c8b762}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aebd5761b4adf46ed785462d375c8b762}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!exact\+\_\+match@{exact\+\_\+match}}
\index{exact\+\_\+match@{exact\+\_\+match}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{exact\+\_\+match}{exact\_match}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+exact\+\_\+match}



Definition at line 205 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ab9245c8e27f66da8d8dc91591a428433}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ab9245c8e27f66da8d8dc91591a428433}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!image\+\_\+path@{image\+\_\+path}}
\index{image\+\_\+path@{image\+\_\+path}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{image\+\_\+path}{image\_path}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+image\+\_\+path}



Definition at line 210 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aefe1eca5e9e0c0588cf3a938cbfc9bee}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_aefe1eca5e9e0c0588cf3a938cbfc9bee}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!max\+\_\+resp\+\_\+time@{max\+\_\+resp\+\_\+time}}
\index{max\+\_\+resp\+\_\+time@{max\+\_\+resp\+\_\+time}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{max\+\_\+resp\+\_\+time}{max\_resp\_time}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+max\+\_\+resp\+\_\+time}



Definition at line 199 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_adf323947082f426bc1f082e4bde387c6}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_adf323947082f426bc1f082e4bde387c6}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!num\+\_\+images@{num\+\_\+images}}
\index{num\+\_\+images@{num\+\_\+images}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{num\+\_\+images}{num\_images}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+num\+\_\+images}



Definition at line 206 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a8cf95b8421df9c62f5a8029b10d4191d}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a8cf95b8421df9c62f5a8029b10d4191d}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!offensive\+\_\+lang\+\_\+detector@{offensive\+\_\+lang\+\_\+detector}}
\index{offensive\+\_\+lang\+\_\+detector@{offensive\+\_\+lang\+\_\+detector}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{offensive\+\_\+lang\+\_\+detector}{offensive\_lang\_detector}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+offensive\+\_\+lang\+\_\+detector}



Definition at line 203 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ac1c15938041a70c1671cd60fe94dfb04}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_ac1c15938041a70c1671cd60fe94dfb04}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!second\+\_\+resp@{second\+\_\+resp}}
\index{second\+\_\+resp@{second\+\_\+resp}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{second\+\_\+resp}{second\_resp}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+second\+\_\+resp}



Definition at line 207 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a61f2dbe636a6b7286febaedbcd9f5b18}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a61f2dbe636a6b7286febaedbcd9f5b18}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!task\+\_\+type@{task\+\_\+type}}
\index{task\+\_\+type@{task\+\_\+type}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{task\+\_\+type}{task\_type}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+task\+\_\+type}



Definition at line 196 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_acb6317fe3c0f3ca2c81ef344e49e15d4}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_acb6317fe3c0f3ca2c81ef344e49e15d4}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!turn\+\_\+idx@{turn\+\_\+idx}}
\index{turn\+\_\+idx@{turn\+\_\+idx}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{turn\+\_\+idx}{turn\_idx}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+turn\+\_\+idx}



Definition at line 195 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a0be08870bfc570382e035bc0b6119b62}\label{classimage__chat__collection_1_1worlds_1_1MTurkImageChatWorld_a0be08870bfc570382e035bc0b6119b62}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}!world\+\_\+tag@{world\+\_\+tag}}
\index{world\+\_\+tag@{world\+\_\+tag}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+M\+Turk\+Image\+Chat\+World}}
\subsubsection{\texorpdfstring{world\+\_\+tag}{world\_tag}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+M\+Turk\+Image\+Chat\+World.\+world\+\_\+tag}



Definition at line 198 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/tasks/image\+\_\+chat/image\+\_\+chat\+\_\+collection/\hyperlink{parlai_2mturk_2tasks_2image__chat_2image__chat__collection_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
