\hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld}{}\section{parlai.\+core.\+worlds.\+Multi\+World Class Reference}
\label{classparlai_1_1core_1_1worlds_1_1MultiWorld}\index{parlai.\+core.\+worlds.\+Multi\+World@{parlai.\+core.\+worlds.\+Multi\+World}}


Inheritance diagram for parlai.\+core.\+worlds.\+Multi\+World\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{de/d3e/classparlai_1_1core_1_1worlds_1_1MultiWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+core.\+worlds.\+Multi\+World\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{d6/dd4/classparlai_1_1core_1_1worlds_1_1MultiWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_abe32f537dd97543bbfdf51d417d81d9b}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1worlds_1_1World_a3640d92718acd3e6942a28c1ab3678bd}{opt}, \hyperlink{classparlai_1_1core_1_1worlds_1_1World_a728f75194cc26ea4035047c46cf62608}{agents}=None, shared=None, default\+\_\+world=None)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae62ad8500e4208ed99ffcf91707746e1}{num\+\_\+examples} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3efde7408bd94052b0a4880aefbc5d0a}{num\+\_\+episodes} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6e012b3db760d95f189baf3466fc55d0}{get\+\_\+agents} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a593c1eb833633014c2506abd80695317}{get\+\_\+task\+\_\+agent} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a73074f333544de25b4e07ffc48819896}{get\+\_\+acts} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae780a8cfd7c6b675727cca24b8321015}{share} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7034326fa264402e0857a98d1ec688de}{epoch\+\_\+done} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a9f2f4de7791e3b295359039e9d26a523}{parley\+\_\+init} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aae71b8182e17a1579352a52b56614b64}{parley} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a03a162a9c53ed806221e46762d3fcb52}{display} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa89365baa3672e08d8e239199df4eda7}{report} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_afcdadb92455ce41a8156390d876ebb96}{reset} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7d52dd60bfa5654bfc4ad656ccb07fa1}{reset\+\_\+metrics} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a4d72a950f8aae3d248a9694908f0fc85}{save\+\_\+agents} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_afd4cbc3c724de6b6bf8f55e6fc56964e}{worlds}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3d2a0158d96bed4eead1e3b4138d5242}{world\+\_\+idx}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_ac88454a3fca862db7f00fb165b483dc5}{new\+\_\+world}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4332cdcbb6a8f91d55fbdeaa412cbe3}{parleys}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa8e5d1fe78cd5ad37c142c95ff2a0a76}{random}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4264dd13f5d8e7f7883e3afd6d726e7}{cum\+\_\+task\+\_\+weights}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_af84190b29a206943d32a09e70301a5a2}{task\+\_\+choices}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a97cb387aa6641126af73571731042ece}{num\+\_\+exs}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6f874903b97f9bfd44354223ae38679e}{num\+\_\+eps}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Container for multiple worlds.

Container for a set of worlds where each world gets a turn in a round-robin fashion.
The same user_agents are placed in each, though each world may contain additional
agents according to the task that world represents.
\end{DoxyVerb}
 

Definition at line 539 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_abe32f537dd97543bbfdf51d417d81d9b}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_abe32f537dd97543bbfdf51d417d81d9b}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{agents = {\ttfamily None},  }\item[{}]{shared = {\ttfamily None},  }\item[{}]{default\+\_\+world = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 548 of file worlds.\+py.


\begin{DoxyCode}
548     \textcolor{keyword}{def }\_\_init\_\_(self, opt, agents=None, shared=None, default\_world=None):
549         super().\_\_init\_\_(opt)
550         self.worlds = []
551         \textcolor{keywordflow}{for} index, k \textcolor{keywordflow}{in} enumerate(opt[\textcolor{stringliteral}{'task'}].split(\textcolor{stringliteral}{','})):
552             k = k.strip()
553             \textcolor{keywordflow}{if} k:
554                 opt\_singletask = copy.deepcopy(opt)
555                 opt\_singletask[\textcolor{stringliteral}{'task'}] = k
556                 \textcolor{keywordflow}{if} shared:
557                     \textcolor{comment}{# Create worlds based on shared data.}
558                     s = shared[\textcolor{stringliteral}{'worlds'}][index]
559                     self.worlds.append(s[\textcolor{stringliteral}{'world\_class'}](s[\textcolor{stringliteral}{'opt'}], \textcolor{keywordtype}{None}, s))
560                 \textcolor{keywordflow}{else}:
561                     \textcolor{comment}{# Agents are already specified.}
562                     self.worlds.append(
563                         \hyperlink{namespaceparlai_1_1core_1_1worlds_a055ee493c9ed03ecff4832f52b408f8c}{create\_task\_world}(
564                             opt\_singletask, agents, default\_world=default\_world
565                         )
566                     )
567         self.world\_idx = -1
568         self.new\_world = \textcolor{keyword}{True}
569         self.parleys = -1
570         self.random = opt.get(\textcolor{stringliteral}{'datatype'}, \textcolor{keywordtype}{None}) == \textcolor{stringliteral}{'train'}
571         \textcolor{comment}{# Make multi-task task probabilities.}
572         self.cum\_task\_weights = [1] * len(self.worlds)
573         self.task\_choices = range(len(self.worlds))
574         weights = self.opt.get(\textcolor{stringliteral}{'multitask\_weights'}, [1])
575         sum = 0
576         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.task\_choices:
577             \textcolor{keywordflow}{if} len(weights) > i:
578                 weight = weights[i]
579             \textcolor{keywordflow}{else}:
580                 weight = 1
581             self.cum\_task\_weights[i] = weight + sum
582             sum += weight
583 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a03a162a9c53ed806221e46762d3fcb52}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a03a162a9c53ed806221e46762d3fcb52}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!display@{display}}
\index{display@{display}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{display()}{display()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+display (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Display all subworlds.
\end{DoxyVerb}
 

Definition at line 680 of file worlds.\+py.


\begin{DoxyCode}
680     \textcolor{keyword}{def }display(self):
681         \textcolor{stringliteral}{"""}
682 \textcolor{stringliteral}{        Display all subworlds.}
683 \textcolor{stringliteral}{        """}
684         \textcolor{keywordflow}{if} self.world\_idx != -1:
685             s = \textcolor{stringliteral}{''}
686             w = self.worlds[self.world\_idx]
687             \textcolor{keywordflow}{if} self.parleys == 0:
688                 s = \textcolor{stringliteral}{'[world '} + \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(self.world\_idx) + \textcolor{stringliteral}{':'} + w.getID() + \textcolor{stringliteral}{']\(\backslash\)n'}
689             s = s + w.display()
690             \textcolor{keywordflow}{return} s
691         \textcolor{keywordflow}{else}:
692             \textcolor{keywordflow}{return} \textcolor{stringliteral}{''}
693 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7034326fa264402e0857a98d1ec688de}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7034326fa264402e0857a98d1ec688de}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!epoch\+\_\+done@{epoch\+\_\+done}}
\index{epoch\+\_\+done@{epoch\+\_\+done}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{epoch\+\_\+done()}{epoch\_done()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+epoch\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return if *all* the subworlds are done.
\end{DoxyVerb}
 

Definition at line 636 of file worlds.\+py.


\begin{DoxyCode}
636     \textcolor{keyword}{def }epoch\_done(self):
637         \textcolor{stringliteral}{"""}
638 \textcolor{stringliteral}{        Return if *all* the subworlds are done.}
639 \textcolor{stringliteral}{        """}
640         \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} self.worlds:
641             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} t.epoch\_done():
642                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}
643         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
644 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a73074f333544de25b4e07ffc48819896}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a73074f333544de25b4e07ffc48819896}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!get\+\_\+acts@{get\+\_\+acts}}
\index{get\+\_\+acts@{get\+\_\+acts}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{get\+\_\+acts()}{get\_acts()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+get\+\_\+acts (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the acts in the *current* subworld.
\end{DoxyVerb}
 

Definition at line 620 of file worlds.\+py.


\begin{DoxyCode}
620     \textcolor{keyword}{def }get\_acts(self):
621         \textcolor{stringliteral}{"""}
622 \textcolor{stringliteral}{        Return the acts in the *current* subworld.}
623 \textcolor{stringliteral}{        """}
624         \textcolor{keywordflow}{return} self.worlds[self.world\_idx].get\_acts()
625 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6e012b3db760d95f189baf3466fc55d0}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6e012b3db760d95f189baf3466fc55d0}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!get\+\_\+agents@{get\+\_\+agents}}
\index{get\+\_\+agents@{get\+\_\+agents}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{get\+\_\+agents()}{get\_agents()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+get\+\_\+agents (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the agents in the *current* subworld.
\end{DoxyVerb}
 

Definition at line 608 of file worlds.\+py.


\begin{DoxyCode}
608     \textcolor{keyword}{def }get\_agents(self):
609         \textcolor{stringliteral}{"""}
610 \textcolor{stringliteral}{        Return the agents in the *current* subworld.}
611 \textcolor{stringliteral}{        """}
612         \textcolor{keywordflow}{return} self.worlds[self.world\_idx].get\_agents()
613 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a593c1eb833633014c2506abd80695317}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a593c1eb833633014c2506abd80695317}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!get\+\_\+task\+\_\+agent@{get\+\_\+task\+\_\+agent}}
\index{get\+\_\+task\+\_\+agent@{get\+\_\+task\+\_\+agent}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{get\+\_\+task\+\_\+agent()}{get\_task\_agent()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+get\+\_\+task\+\_\+agent (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Not possible/well-defined in this setting.
\end{DoxyVerb}
 

Definition at line 614 of file worlds.\+py.


\begin{DoxyCode}
614     \textcolor{keyword}{def }get\_task\_agent(self):
615         \textcolor{stringliteral}{"""}
616 \textcolor{stringliteral}{        Not possible/well-defined in this setting.}
617 \textcolor{stringliteral}{        """}
618         \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'get\_task\_agent not defined for Multiworld'})
619 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3efde7408bd94052b0a4880aefbc5d0a}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3efde7408bd94052b0a4880aefbc5d0a}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!num\+\_\+episodes@{num\+\_\+episodes}}
\index{num\+\_\+episodes@{num\+\_\+episodes}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{num\+\_\+episodes()}{num\_episodes()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+num\+\_\+episodes (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return sum of each subworld's number of episodes.
\end{DoxyVerb}
 

Definition at line 596 of file worlds.\+py.


\begin{DoxyCode}
596     \textcolor{keyword}{def }num\_episodes(self):
597         \textcolor{stringliteral}{"""}
598 \textcolor{stringliteral}{        Return sum of each subworld's number of episodes.}
599 \textcolor{stringliteral}{        """}
600         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} hasattr(self, \textcolor{stringliteral}{'num\_eps'}):
601             worlds\_num\_eps = [w.num\_episodes() \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds]
602             \textcolor{keywordflow}{if} any(num \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{for} num \textcolor{keywordflow}{in} worlds\_num\_eps):
603                 self.num\_eps = \textcolor{keywordtype}{None}
604             \textcolor{keywordflow}{else}:
605                 self.num\_eps = sum(worlds\_num\_eps)
606         \textcolor{keywordflow}{return} self.num\_eps
607 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae62ad8500e4208ed99ffcf91707746e1}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae62ad8500e4208ed99ffcf91707746e1}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!num\+\_\+examples@{num\+\_\+examples}}
\index{num\+\_\+examples@{num\+\_\+examples}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{num\+\_\+examples()}{num\_examples()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+num\+\_\+examples (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return sum of each subworld's number of examples.
\end{DoxyVerb}
 

Definition at line 584 of file worlds.\+py.


\begin{DoxyCode}
584     \textcolor{keyword}{def }num\_examples(self):
585         \textcolor{stringliteral}{"""}
586 \textcolor{stringliteral}{        Return sum of each subworld's number of examples.}
587 \textcolor{stringliteral}{        """}
588         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} hasattr(self, \textcolor{stringliteral}{'num\_exs'}):
589             worlds\_num\_exs = [w.num\_examples() \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds]
590             \textcolor{keywordflow}{if} any(num \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{for} num \textcolor{keywordflow}{in} worlds\_num\_exs):
591                 self.num\_exs = \textcolor{keywordtype}{None}
592             \textcolor{keywordflow}{else}:
593                 self.num\_exs = sum(worlds\_num\_exs)
594         \textcolor{keywordflow}{return} self.num\_exs
595 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aae71b8182e17a1579352a52b56614b64}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aae71b8182e17a1579352a52b56614b64}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!parley@{parley}}
\index{parley@{parley}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{parley()}{parley()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+parley (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Parley the *current* subworld.
\end{DoxyVerb}
 

Definition at line 672 of file worlds.\+py.


\begin{DoxyCode}
672     \textcolor{keyword}{def }parley(self):
673         \textcolor{stringliteral}{"""}
674 \textcolor{stringliteral}{        Parley the *current* subworld.}
675 \textcolor{stringliteral}{        """}
676         self.parley\_init()
677         self.worlds[self.world\_idx].parley()
678         self.update\_counters()
679 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a9f2f4de7791e3b295359039e9d26a523}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a9f2f4de7791e3b295359039e9d26a523}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!parley\+\_\+init@{parley\+\_\+init}}
\index{parley\+\_\+init@{parley\+\_\+init}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{parley\+\_\+init()}{parley\_init()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+parley\+\_\+init (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Update the current subworld.

If we are in the middle of an episode, keep the same world and finish this
episode. If we have finished this episode, pick a new world (either in a random
or round-robin fashion).
\end{DoxyVerb}
 

Definition at line 645 of file worlds.\+py.


\begin{DoxyCode}
645     \textcolor{keyword}{def }parley\_init(self):
646         \textcolor{stringliteral}{"""}
647 \textcolor{stringliteral}{        Update the current subworld.}
648 \textcolor{stringliteral}{}
649 \textcolor{stringliteral}{        If we are in the middle of an episode, keep the same world and finish this}
650 \textcolor{stringliteral}{        episode. If we have finished this episode, pick a new world (either in a random}
651 \textcolor{stringliteral}{        or round-robin fashion).}
652 \textcolor{stringliteral}{        """}
653         self.parleys = self.parleys + 1
654         \textcolor{keywordflow}{if} self.world\_idx >= 0 \textcolor{keywordflow}{and} self.worlds[self.world\_idx].episode\_done():
655             self.new\_world = \textcolor{keyword}{True}
656         \textcolor{keywordflow}{if} self.new\_world:
657             self.new\_world = \textcolor{keyword}{False}
658             self.parleys = 0
659             \textcolor{keywordflow}{if} self.random:
660                 \textcolor{comment}{# select random world}
661                 self.world\_idx = random.choices(
662                     self.task\_choices, cum\_weights=self.cum\_task\_weights
663                 )[0]
664             \textcolor{keywordflow}{else}:
665                 \textcolor{comment}{# do at most one full loop looking for unfinished world}
666                 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(len(self.worlds)):
667                     self.world\_idx = (self.world\_idx + 1) % len(self.worlds)
668                     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.worlds[self.world\_idx].epoch\_done():
669                         \textcolor{comment}{# if this world has examples ready, break}
670                         \textcolor{keywordflow}{break}
671 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa89365baa3672e08d8e239199df4eda7}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa89365baa3672e08d8e239199df4eda7}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!report@{report}}
\index{report@{report}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{report()}{report()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+report (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Report aggregate metrics across all subworlds.
\end{DoxyVerb}
 

Definition at line 694 of file worlds.\+py.


\begin{DoxyCode}
694     \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1convai2_1_1eval__f1_a01a47b9c08dad189837a51f085defc45}{report}(self):
695         \textcolor{stringliteral}{"""}
696 \textcolor{stringliteral}{        Report aggregate metrics across all subworlds.}
697 \textcolor{stringliteral}{        """}
698         metrics = \hyperlink{namespaceparlai_1_1core_1_1metrics_aa4ed5491962e06684b235fffe1b20fec}{aggregate\_metrics}(self.worlds)
699         self.total\_exs += metrics.get(\textcolor{stringliteral}{'exs'}, 0)
700         \textcolor{keywordflow}{return} metrics
701 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_afcdadb92455ce41a8156390d876ebb96}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_afcdadb92455ce41a8156390d876ebb96}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!reset@{reset}}
\index{reset@{reset}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+reset (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset all subworlds.
\end{DoxyVerb}
 

Definition at line 702 of file worlds.\+py.


\begin{DoxyCode}
702     \textcolor{keyword}{def }reset(self):
703         \textcolor{stringliteral}{"""}
704 \textcolor{stringliteral}{        Reset all subworlds.}
705 \textcolor{stringliteral}{        """}
706         \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds:
707             w.reset()
708 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7d52dd60bfa5654bfc4ad656ccb07fa1}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7d52dd60bfa5654bfc4ad656ccb07fa1}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!reset\+\_\+metrics@{reset\+\_\+metrics}}
\index{reset\+\_\+metrics@{reset\+\_\+metrics}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{reset\+\_\+metrics()}{reset\_metrics()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+reset\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset metrics in all subworlds.
\end{DoxyVerb}
 

Definition at line 709 of file worlds.\+py.


\begin{DoxyCode}
709     \textcolor{keyword}{def }reset\_metrics(self):
710         \textcolor{stringliteral}{"""}
711 \textcolor{stringliteral}{        Reset metrics in all subworlds.}
712 \textcolor{stringliteral}{        """}
713         \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds:
714             w.reset\_metrics()
715 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a4d72a950f8aae3d248a9694908f0fc85}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a4d72a950f8aae3d248a9694908f0fc85}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!save\+\_\+agents@{save\+\_\+agents}}
\index{save\+\_\+agents@{save\+\_\+agents}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{save\+\_\+agents()}{save\_agents()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+save\+\_\+agents (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save agents in all subworlds.
\end{DoxyVerb}
 

Definition at line 716 of file worlds.\+py.


\begin{DoxyCode}
716     \textcolor{keyword}{def }save\_agents(self):
717         \textcolor{stringliteral}{"""}
718 \textcolor{stringliteral}{        Save agents in all subworlds.}
719 \textcolor{stringliteral}{        """}
720         \textcolor{comment}{# Assumes all worlds have same agents, picks first to save.}
721         self.worlds[0].save\_agents()
722 
723 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae780a8cfd7c6b675727cca24b8321015}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae780a8cfd7c6b675727cca24b8321015}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!share@{share}}
\index{share@{share}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{share()}{share()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+share (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Share all the subworlds.
\end{DoxyVerb}
 

Definition at line 626 of file worlds.\+py.


\begin{DoxyCode}
626     \textcolor{keyword}{def }share(self):
627         \textcolor{stringliteral}{"""}
628 \textcolor{stringliteral}{        Share all the subworlds.}
629 \textcolor{stringliteral}{        """}
630         shared\_data = \{\}
631         shared\_data[\textcolor{stringliteral}{'world\_class'}] = \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(self)
632         shared\_data[\textcolor{stringliteral}{'opt'}] = self.opt
633         shared\_data[\textcolor{stringliteral}{'worlds'}] = [w.share() \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds]
634         \textcolor{keywordflow}{return} shared\_data
635 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4264dd13f5d8e7f7883e3afd6d726e7}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4264dd13f5d8e7f7883e3afd6d726e7}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!cum\+\_\+task\+\_\+weights@{cum\+\_\+task\+\_\+weights}}
\index{cum\+\_\+task\+\_\+weights@{cum\+\_\+task\+\_\+weights}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{cum\+\_\+task\+\_\+weights}{cum\_task\_weights}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+cum\+\_\+task\+\_\+weights}



Definition at line 572 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_ac88454a3fca862db7f00fb165b483dc5}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_ac88454a3fca862db7f00fb165b483dc5}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!new\+\_\+world@{new\+\_\+world}}
\index{new\+\_\+world@{new\+\_\+world}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{new\+\_\+world}{new\_world}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+new\+\_\+world}



Definition at line 568 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6f874903b97f9bfd44354223ae38679e}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6f874903b97f9bfd44354223ae38679e}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!num\+\_\+eps@{num\+\_\+eps}}
\index{num\+\_\+eps@{num\+\_\+eps}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{num\+\_\+eps}{num\_eps}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+num\+\_\+eps}



Definition at line 603 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a97cb387aa6641126af73571731042ece}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a97cb387aa6641126af73571731042ece}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!num\+\_\+exs@{num\+\_\+exs}}
\index{num\+\_\+exs@{num\+\_\+exs}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{num\+\_\+exs}{num\_exs}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+num\+\_\+exs}



Definition at line 591 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4332cdcbb6a8f91d55fbdeaa412cbe3}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4332cdcbb6a8f91d55fbdeaa412cbe3}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!parleys@{parleys}}
\index{parleys@{parleys}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{parleys}{parleys}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+parleys}



Definition at line 569 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa8e5d1fe78cd5ad37c142c95ff2a0a76}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa8e5d1fe78cd5ad37c142c95ff2a0a76}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!random@{random}}
\index{random@{random}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{random}{random}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+random}



Definition at line 570 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_af84190b29a206943d32a09e70301a5a2}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_af84190b29a206943d32a09e70301a5a2}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!task\+\_\+choices@{task\+\_\+choices}}
\index{task\+\_\+choices@{task\+\_\+choices}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{task\+\_\+choices}{task\_choices}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+task\+\_\+choices}



Definition at line 573 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3d2a0158d96bed4eead1e3b4138d5242}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3d2a0158d96bed4eead1e3b4138d5242}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!world\+\_\+idx@{world\+\_\+idx}}
\index{world\+\_\+idx@{world\+\_\+idx}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{world\+\_\+idx}{world\_idx}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+world\+\_\+idx}



Definition at line 567 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_afd4cbc3c724de6b6bf8f55e6fc56964e}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_afd4cbc3c724de6b6bf8f55e6fc56964e}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!worlds@{worlds}}
\index{worlds@{worlds}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{worlds}{worlds}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+worlds}



Definition at line 550 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/core/\hyperlink{parlai_2core_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
