\hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld}{}\section{parlai.\+core.\+worlds.\+Multi\+World Class Reference}
\label{classparlai_1_1core_1_1worlds_1_1MultiWorld}\index{parlai.\+core.\+worlds.\+Multi\+World@{parlai.\+core.\+worlds.\+Multi\+World}}


Inheritance diagram for parlai.\+core.\+worlds.\+Multi\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{de/d3e/classparlai_1_1core_1_1worlds_1_1MultiWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+core.\+worlds.\+Multi\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{d6/dd4/classparlai_1_1core_1_1worlds_1_1MultiWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aba482213da390b05a216cedb070e28ee}{\+\_\+\+\_\+init\+\_\+\+\_\+}
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae62ad8500e4208ed99ffcf91707746e1}{num\+\_\+examples} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3efde7408bd94052b0a4880aefbc5d0a}{num\+\_\+episodes} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6e012b3db760d95f189baf3466fc55d0}{get\+\_\+agents} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a593c1eb833633014c2506abd80695317}{get\+\_\+task\+\_\+agent} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a73074f333544de25b4e07ffc48819896}{get\+\_\+acts} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae780a8cfd7c6b675727cca24b8321015}{share} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7034326fa264402e0857a98d1ec688de}{epoch\+\_\+done} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a9f2f4de7791e3b295359039e9d26a523}{parley\+\_\+init} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aae71b8182e17a1579352a52b56614b64}{parley} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a03a162a9c53ed806221e46762d3fcb52}{display} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa89365baa3672e08d8e239199df4eda7}{report} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_afcdadb92455ce41a8156390d876ebb96}{reset} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7d52dd60bfa5654bfc4ad656ccb07fa1}{reset\+\_\+metrics} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a4d72a950f8aae3d248a9694908f0fc85}{save\+\_\+agents} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3d2a0158d96bed4eead1e3b4138d5242}{world\+\_\+idx}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_ac88454a3fca862db7f00fb165b483dc5}{new\+\_\+world}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4332cdcbb6a8f91d55fbdeaa412cbe3}{parleys}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa8e5d1fe78cd5ad37c142c95ff2a0a76}{random}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4264dd13f5d8e7f7883e3afd6d726e7}{cum\+\_\+task\+\_\+weights}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_af84190b29a206943d32a09e70301a5a2}{task\+\_\+choices}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a97cb387aa6641126af73571731042ece}{num\+\_\+exs}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6f874903b97f9bfd44354223ae38679e}{num\+\_\+eps}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Container for multiple worlds.

Container for a set of worlds where each world gets a turn in a round-robin fashion.
The same user_agents are placed in each, though each world may contain additional
agents according to the task that world represents.
\end{DoxyVerb}
 

Definition at line 546 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aba482213da390b05a216cedb070e28ee}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aba482213da390b05a216cedb070e28ee}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 555 of file worlds.\+py.


\begin{DoxyCode}
555     \textcolor{keyword}{def }\_\_init\_\_(self, opt: Opt, agents=\textcolor{keywordtype}{None}, shared=\textcolor{keywordtype}{None}, default\_world=\textcolor{keywordtype}{None}):
556         super().\_\_init\_\_(opt)
557         self.worlds: List[World] = []
558         \textcolor{keywordflow}{for} index, k \textcolor{keywordflow}{in} enumerate(opt[\textcolor{stringliteral}{'task'}].split(\textcolor{stringliteral}{','})):
559             k = k.strip()
560             \textcolor{keywordflow}{if} k:
561                 opt\_singletask = copy.deepcopy(opt)
562                 opt\_singletask[\textcolor{stringliteral}{'task'}] = k
563                 \textcolor{keywordflow}{if} shared:
564                     \textcolor{comment}{# Create worlds based on shared data.}
565                     s = shared[\textcolor{stringliteral}{'worlds'}][index]
566                     self.worlds.append(s[\textcolor{stringliteral}{'world\_class'}](s[\textcolor{stringliteral}{'opt'}], \textcolor{keywordtype}{None}, s))
567                 \textcolor{keywordflow}{else}:
568                     \textcolor{comment}{# Agents are already specified.}
569                     self.worlds.append(
570                         \hyperlink{namespaceparlai_1_1core_1_1worlds_ae4ed098adcaad6ec7563e665485ccdcf}{create\_task\_world}(
571                             opt\_singletask, agents, default\_world=default\_world
572                         )
573                     )
574         self.world\_idx = -1
575         self.new\_world = \textcolor{keyword}{True}
576         self.parleys = -1
577         self.random = opt.get(\textcolor{stringliteral}{'datatype'}, \textcolor{keywordtype}{None}) == \textcolor{stringliteral}{'train'}
578         \textcolor{comment}{# Make multi-task task probabilities.}
579         self.cum\_task\_weights = [1] * len(self.worlds)
580         self.task\_choices = range(len(self.worlds))
581         weights = self.opt.get(\textcolor{stringliteral}{'multitask\_weights'}, [1])
582         sum = 0
583         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.task\_choices:
584             \textcolor{keywordflow}{if} len(weights) > i:
585                 weight = weights[i]
586             \textcolor{keywordflow}{else}:
587                 weight = 1
588             self.cum\_task\_weights[i] = weight + sum
589             sum += weight
590 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a03a162a9c53ed806221e46762d3fcb52}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a03a162a9c53ed806221e46762d3fcb52}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!display@{display}}
\index{display@{display}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{display()}{display()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+display (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Display all subworlds.
\end{DoxyVerb}
 

Definition at line 687 of file worlds.\+py.


\begin{DoxyCode}
687     \textcolor{keyword}{def }display(self):
688         \textcolor{stringliteral}{"""}
689 \textcolor{stringliteral}{        Display all subworlds.}
690 \textcolor{stringliteral}{        """}
691         \textcolor{keywordflow}{if} self.world\_idx != -1:
692             s = \textcolor{stringliteral}{''}
693             w = self.worlds[self.world\_idx]
694             \textcolor{keywordflow}{if} self.parleys == 0:
695                 s = \textcolor{stringliteral}{'[world '} + \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(self.world\_idx) + \textcolor{stringliteral}{':'} + w.getID() + \textcolor{stringliteral}{']\(\backslash\)n'}
696             s = s + w.display()
697             \textcolor{keywordflow}{return} s
698         \textcolor{keywordflow}{else}:
699             \textcolor{keywordflow}{return} \textcolor{stringliteral}{''}
700 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7034326fa264402e0857a98d1ec688de}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7034326fa264402e0857a98d1ec688de}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!epoch\+\_\+done@{epoch\+\_\+done}}
\index{epoch\+\_\+done@{epoch\+\_\+done}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{epoch\+\_\+done()}{epoch\_done()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+epoch\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return if *all* the subworlds are done.
\end{DoxyVerb}
 

Definition at line 643 of file worlds.\+py.


\begin{DoxyCode}
643     \textcolor{keyword}{def }epoch\_done(self):
644         \textcolor{stringliteral}{"""}
645 \textcolor{stringliteral}{        Return if *all* the subworlds are done.}
646 \textcolor{stringliteral}{        """}
647         \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} self.worlds:
648             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} t.epoch\_done():
649                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}
650         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
651 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a73074f333544de25b4e07ffc48819896}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a73074f333544de25b4e07ffc48819896}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!get\+\_\+acts@{get\+\_\+acts}}
\index{get\+\_\+acts@{get\+\_\+acts}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{get\+\_\+acts()}{get\_acts()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+get\+\_\+acts (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the acts in the *current* subworld.
\end{DoxyVerb}
 

Definition at line 627 of file worlds.\+py.


\begin{DoxyCode}
627     \textcolor{keyword}{def }get\_acts(self):
628         \textcolor{stringliteral}{"""}
629 \textcolor{stringliteral}{        Return the acts in the *current* subworld.}
630 \textcolor{stringliteral}{        """}
631         \textcolor{keywordflow}{return} self.worlds[self.world\_idx].get\_acts()
632 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6e012b3db760d95f189baf3466fc55d0}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6e012b3db760d95f189baf3466fc55d0}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!get\+\_\+agents@{get\+\_\+agents}}
\index{get\+\_\+agents@{get\+\_\+agents}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{get\+\_\+agents()}{get\_agents()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+get\+\_\+agents (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the agents in the *current* subworld.
\end{DoxyVerb}
 

Definition at line 615 of file worlds.\+py.


\begin{DoxyCode}
615     \textcolor{keyword}{def }get\_agents(self):
616         \textcolor{stringliteral}{"""}
617 \textcolor{stringliteral}{        Return the agents in the *current* subworld.}
618 \textcolor{stringliteral}{        """}
619         \textcolor{keywordflow}{return} self.worlds[self.world\_idx].get\_agents()
620 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a593c1eb833633014c2506abd80695317}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a593c1eb833633014c2506abd80695317}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!get\+\_\+task\+\_\+agent@{get\+\_\+task\+\_\+agent}}
\index{get\+\_\+task\+\_\+agent@{get\+\_\+task\+\_\+agent}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{get\+\_\+task\+\_\+agent()}{get\_task\_agent()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+get\+\_\+task\+\_\+agent (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Not possible/well-defined in this setting.
\end{DoxyVerb}
 

Definition at line 621 of file worlds.\+py.


\begin{DoxyCode}
621     \textcolor{keyword}{def }get\_task\_agent(self):
622         \textcolor{stringliteral}{"""}
623 \textcolor{stringliteral}{        Not possible/well-defined in this setting.}
624 \textcolor{stringliteral}{        """}
625         \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'get\_task\_agent not defined for Multiworld'})
626 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3efde7408bd94052b0a4880aefbc5d0a}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3efde7408bd94052b0a4880aefbc5d0a}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!num\+\_\+episodes@{num\+\_\+episodes}}
\index{num\+\_\+episodes@{num\+\_\+episodes}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{num\+\_\+episodes()}{num\_episodes()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+num\+\_\+episodes (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return sum of each subworld's number of episodes.
\end{DoxyVerb}
 

Definition at line 603 of file worlds.\+py.


\begin{DoxyCode}
603     \textcolor{keyword}{def }num\_episodes(self):
604         \textcolor{stringliteral}{"""}
605 \textcolor{stringliteral}{        Return sum of each subworld's number of episodes.}
606 \textcolor{stringliteral}{        """}
607         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} hasattr(self, \textcolor{stringliteral}{'num\_eps'}):
608             worlds\_num\_eps = [w.num\_episodes() \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds]
609             \textcolor{keywordflow}{if} any(num \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{for} num \textcolor{keywordflow}{in} worlds\_num\_eps):
610                 self.num\_eps = \textcolor{keywordtype}{None}
611             \textcolor{keywordflow}{else}:
612                 self.num\_eps = sum(worlds\_num\_eps)
613         \textcolor{keywordflow}{return} self.num\_eps
614 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae62ad8500e4208ed99ffcf91707746e1}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae62ad8500e4208ed99ffcf91707746e1}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!num\+\_\+examples@{num\+\_\+examples}}
\index{num\+\_\+examples@{num\+\_\+examples}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{num\+\_\+examples()}{num\_examples()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+num\+\_\+examples (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return sum of each subworld's number of examples.
\end{DoxyVerb}
 

Definition at line 591 of file worlds.\+py.


\begin{DoxyCode}
591     \textcolor{keyword}{def }num\_examples(self):
592         \textcolor{stringliteral}{"""}
593 \textcolor{stringliteral}{        Return sum of each subworld's number of examples.}
594 \textcolor{stringliteral}{        """}
595         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} hasattr(self, \textcolor{stringliteral}{'num\_exs'}):
596             worlds\_num\_exs = [w.num\_examples() \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds]
597             \textcolor{keywordflow}{if} any(num \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{for} num \textcolor{keywordflow}{in} worlds\_num\_exs):
598                 self.num\_exs = \textcolor{keywordtype}{None}
599             \textcolor{keywordflow}{else}:
600                 self.num\_exs = sum(worlds\_num\_exs)
601         \textcolor{keywordflow}{return} self.num\_exs
602 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aae71b8182e17a1579352a52b56614b64}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aae71b8182e17a1579352a52b56614b64}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!parley@{parley}}
\index{parley@{parley}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{parley()}{parley()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+parley (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Parley the *current* subworld.
\end{DoxyVerb}
 

Definition at line 679 of file worlds.\+py.


\begin{DoxyCode}
679     \textcolor{keyword}{def }parley(self):
680         \textcolor{stringliteral}{"""}
681 \textcolor{stringliteral}{        Parley the *current* subworld.}
682 \textcolor{stringliteral}{        """}
683         self.parley\_init()
684         self.worlds[self.world\_idx].parley()
685         self.update\_counters()
686 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a9f2f4de7791e3b295359039e9d26a523}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a9f2f4de7791e3b295359039e9d26a523}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!parley\+\_\+init@{parley\+\_\+init}}
\index{parley\+\_\+init@{parley\+\_\+init}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{parley\+\_\+init()}{parley\_init()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+parley\+\_\+init (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Update the current subworld.

If we are in the middle of an episode, keep the same world and finish this
episode. If we have finished this episode, pick a new world (either in a random
or round-robin fashion).
\end{DoxyVerb}
 

Definition at line 652 of file worlds.\+py.


\begin{DoxyCode}
652     \textcolor{keyword}{def }parley\_init(self):
653         \textcolor{stringliteral}{"""}
654 \textcolor{stringliteral}{        Update the current subworld.}
655 \textcolor{stringliteral}{}
656 \textcolor{stringliteral}{        If we are in the middle of an episode, keep the same world and finish this}
657 \textcolor{stringliteral}{        episode. If we have finished this episode, pick a new world (either in a random}
658 \textcolor{stringliteral}{        or round-robin fashion).}
659 \textcolor{stringliteral}{        """}
660         self.parleys = self.parleys + 1
661         \textcolor{keywordflow}{if} self.world\_idx >= 0 \textcolor{keywordflow}{and} self.worlds[self.world\_idx].episode\_done():
662             self.new\_world = \textcolor{keyword}{True}
663         \textcolor{keywordflow}{if} self.new\_world:
664             self.new\_world = \textcolor{keyword}{False}
665             self.parleys = 0
666             \textcolor{keywordflow}{if} self.random:
667                 \textcolor{comment}{# select random world}
668                 self.world\_idx = random.choices(
669                     self.task\_choices, cum\_weights=self.cum\_task\_weights
670                 )[0]
671             \textcolor{keywordflow}{else}:
672                 \textcolor{comment}{# do at most one full loop looking for unfinished world}
673                 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(len(self.worlds)):
674                     self.world\_idx = (self.world\_idx + 1) % len(self.worlds)
675                     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.worlds[self.world\_idx].epoch\_done():
676                         \textcolor{comment}{# if this world has examples ready, break}
677                         \textcolor{keywordflow}{break}
678 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa89365baa3672e08d8e239199df4eda7}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa89365baa3672e08d8e239199df4eda7}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!report@{report}}
\index{report@{report}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{report()}{report()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+report (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Report aggregate metrics across all subworlds.
\end{DoxyVerb}
 

Definition at line 701 of file worlds.\+py.


\begin{DoxyCode}
701     \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1convai2_1_1eval__f1_a01a47b9c08dad189837a51f085defc45}{report}(self):
702         \textcolor{stringliteral}{"""}
703 \textcolor{stringliteral}{        Report aggregate metrics across all subworlds.}
704 \textcolor{stringliteral}{        """}
705         metrics = \hyperlink{namespaceparlai_1_1core_1_1metrics_aa4ed5491962e06684b235fffe1b20fec}{aggregate\_metrics}(self.worlds)
706         self.total\_exs += metrics.get(\textcolor{stringliteral}{'exs'}, 0)
707         \textcolor{keywordflow}{return} metrics
708 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_afcdadb92455ce41a8156390d876ebb96}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_afcdadb92455ce41a8156390d876ebb96}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!reset@{reset}}
\index{reset@{reset}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+reset (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset all subworlds.
\end{DoxyVerb}
 

Definition at line 709 of file worlds.\+py.


\begin{DoxyCode}
709     \textcolor{keyword}{def }reset(self):
710         \textcolor{stringliteral}{"""}
711 \textcolor{stringliteral}{        Reset all subworlds.}
712 \textcolor{stringliteral}{        """}
713         \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds:
714             w.reset()
715 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7d52dd60bfa5654bfc4ad656ccb07fa1}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a7d52dd60bfa5654bfc4ad656ccb07fa1}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!reset\+\_\+metrics@{reset\+\_\+metrics}}
\index{reset\+\_\+metrics@{reset\+\_\+metrics}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{reset\+\_\+metrics()}{reset\_metrics()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+reset\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset metrics in all subworlds.
\end{DoxyVerb}
 

Definition at line 716 of file worlds.\+py.


\begin{DoxyCode}
716     \textcolor{keyword}{def }reset\_metrics(self):
717         \textcolor{stringliteral}{"""}
718 \textcolor{stringliteral}{        Reset metrics in all subworlds.}
719 \textcolor{stringliteral}{        """}
720         \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds:
721             w.reset\_metrics()
722 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a4d72a950f8aae3d248a9694908f0fc85}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a4d72a950f8aae3d248a9694908f0fc85}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!save\+\_\+agents@{save\+\_\+agents}}
\index{save\+\_\+agents@{save\+\_\+agents}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{save\+\_\+agents()}{save\_agents()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+save\+\_\+agents (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save agents in all subworlds.
\end{DoxyVerb}
 

Definition at line 723 of file worlds.\+py.


\begin{DoxyCode}
723     \textcolor{keyword}{def }save\_agents(self):
724         \textcolor{stringliteral}{"""}
725 \textcolor{stringliteral}{        Save agents in all subworlds.}
726 \textcolor{stringliteral}{        """}
727         \textcolor{comment}{# Assumes all worlds have same agents, picks first to save.}
728         self.worlds[0].save\_agents()
729 
730 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae780a8cfd7c6b675727cca24b8321015}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_ae780a8cfd7c6b675727cca24b8321015}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!share@{share}}
\index{share@{share}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{share()}{share()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Multi\+World.\+share (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Share all the subworlds.
\end{DoxyVerb}
 

Definition at line 633 of file worlds.\+py.


\begin{DoxyCode}
633     \textcolor{keyword}{def }share(self):
634         \textcolor{stringliteral}{"""}
635 \textcolor{stringliteral}{        Share all the subworlds.}
636 \textcolor{stringliteral}{        """}
637         shared\_data = \{\}
638         shared\_data[\textcolor{stringliteral}{'world\_class'}] = \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(self)
639         shared\_data[\textcolor{stringliteral}{'opt'}] = self.opt
640         shared\_data[\textcolor{stringliteral}{'worlds'}] = [w.share() \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds]
641         \textcolor{keywordflow}{return} shared\_data
642 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4264dd13f5d8e7f7883e3afd6d726e7}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4264dd13f5d8e7f7883e3afd6d726e7}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!cum\+\_\+task\+\_\+weights@{cum\+\_\+task\+\_\+weights}}
\index{cum\+\_\+task\+\_\+weights@{cum\+\_\+task\+\_\+weights}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{cum\+\_\+task\+\_\+weights}{cum\_task\_weights}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+cum\+\_\+task\+\_\+weights}



Definition at line 579 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_ac88454a3fca862db7f00fb165b483dc5}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_ac88454a3fca862db7f00fb165b483dc5}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!new\+\_\+world@{new\+\_\+world}}
\index{new\+\_\+world@{new\+\_\+world}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{new\+\_\+world}{new\_world}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+new\+\_\+world}



Definition at line 575 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6f874903b97f9bfd44354223ae38679e}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a6f874903b97f9bfd44354223ae38679e}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!num\+\_\+eps@{num\+\_\+eps}}
\index{num\+\_\+eps@{num\+\_\+eps}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{num\+\_\+eps}{num\_eps}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+num\+\_\+eps}



Definition at line 610 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a97cb387aa6641126af73571731042ece}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a97cb387aa6641126af73571731042ece}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!num\+\_\+exs@{num\+\_\+exs}}
\index{num\+\_\+exs@{num\+\_\+exs}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{num\+\_\+exs}{num\_exs}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+num\+\_\+exs}



Definition at line 598 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4332cdcbb6a8f91d55fbdeaa412cbe3}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa4332cdcbb6a8f91d55fbdeaa412cbe3}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!parleys@{parleys}}
\index{parleys@{parleys}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{parleys}{parleys}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+parleys}



Definition at line 576 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa8e5d1fe78cd5ad37c142c95ff2a0a76}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_aa8e5d1fe78cd5ad37c142c95ff2a0a76}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!random@{random}}
\index{random@{random}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{random}{random}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+random}



Definition at line 577 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_af84190b29a206943d32a09e70301a5a2}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_af84190b29a206943d32a09e70301a5a2}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!task\+\_\+choices@{task\+\_\+choices}}
\index{task\+\_\+choices@{task\+\_\+choices}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{task\+\_\+choices}{task\_choices}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+task\+\_\+choices}



Definition at line 580 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3d2a0158d96bed4eead1e3b4138d5242}\label{classparlai_1_1core_1_1worlds_1_1MultiWorld_a3d2a0158d96bed4eead1e3b4138d5242}} 
\index{parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}!world\+\_\+idx@{world\+\_\+idx}}
\index{world\+\_\+idx@{world\+\_\+idx}!parlai\+::core\+::worlds\+::\+Multi\+World@{parlai\+::core\+::worlds\+::\+Multi\+World}}
\subsubsection{\texorpdfstring{world\+\_\+idx}{world\_idx}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Multi\+World.\+world\+\_\+idx}



Definition at line 574 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/core/\hyperlink{parlai_2core_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
