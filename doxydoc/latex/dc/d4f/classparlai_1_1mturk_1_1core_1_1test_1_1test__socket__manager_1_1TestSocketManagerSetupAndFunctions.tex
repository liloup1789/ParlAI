\hypertarget{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions}{}\section{parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions Class Reference}
\label{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions}\index{parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions}}


Inheritance diagram for parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=265pt]{d3/da1/classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=265pt]{db/d68/classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a58c5e2c63f7b7728a69c0f364c5fc275}{set\+Up} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a3cd4ba7916ff558f21b5eaa06158e33f}{tear\+Down} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_acde5a585fd9dcb1c11edf46ba887eb81}{test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a9bc007a9f1035e2491fb701d163edf0d}{assert\+Equal\+By} (self, val\+\_\+func, val, max\+\_\+time)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a3195b9685afde3d96d5d1e6a2cf625a4}{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a0f825d0f19915160c055aa62f1c1e34f}{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a6512d80f63f187d55bef6e2ae01084ec}{test\+\_\+init\+\_\+world\+\_\+dead} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_ad8a72a5abd683838bf08af5386561e85}{fake\+\_\+socket}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Unit/integration tests for starting up a socket.
\end{DoxyVerb}
 

Definition at line 461 of file test\+\_\+socket\+\_\+manager.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a9bc007a9f1035e2491fb701d163edf0d}\label{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a9bc007a9f1035e2491fb701d163edf0d}} 
\index{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!assert\+Equal\+By@{assert\+Equal\+By}}
\index{assert\+Equal\+By@{assert\+Equal\+By}!parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{assert\+Equal\+By()}{assertEqualBy()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+assert\+Equal\+By (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{val\+\_\+func,  }\item[{}]{val,  }\item[{}]{max\+\_\+time }\end{DoxyParamCaption})}



Definition at line 508 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
508     \textcolor{keyword}{def }assertEqualBy(self, val\_func, val, max\_time):
509         start\_time = time.time()
510         \textcolor{keywordflow}{while} val\_func() != val:
511             \textcolor{keyword}{assert} time.time() - start\_time < max\_time, (
512                 \textcolor{stringliteral}{"Value was not attained in specified time, was \{\} rather "}
513                 \textcolor{stringliteral}{"than \{\}"}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(val\_func(), val)
514             )
515             time.sleep(0.1)
516 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a58c5e2c63f7b7728a69c0f364c5fc275}\label{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a58c5e2c63f7b7728a69c0f364c5fc275}} 
\index{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!set\+Up@{set\+Up}}
\index{set\+Up@{set\+Up}!parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{set\+Up()}{setUp()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+set\+Up (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 466 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
466     \textcolor{keyword}{def }setUp(self):
467         self.fake\_socket = MockSocket()
468         time.sleep(1)
469 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a3cd4ba7916ff558f21b5eaa06158e33f}\label{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a3cd4ba7916ff558f21b5eaa06158e33f}} 
\index{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!tear\+Down@{tear\+Down}}
\index{tear\+Down@{tear\+Down}!parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{tear\+Down()}{tearDown()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+tear\+Down (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 470 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
470     \textcolor{keyword}{def }tearDown(self):
471         self.fake\_socket.close()
472 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_acde5a585fd9dcb1c11edf46ba887eb81}\label{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_acde5a585fd9dcb1c11edf46ba887eb81}} 
\index{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown@{test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown}}
\index{test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown@{test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown}!parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown()}{test\_init\_and\_reg\_shutdown()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+test\+\_\+init\+\_\+and\+\_\+reg\+\_\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test initialization of a socket manager.
\end{DoxyVerb}
 

Definition at line 473 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
473     \textcolor{keyword}{def }test\_init\_and\_reg\_shutdown(self):
474         \textcolor{stringliteral}{"""}
475 \textcolor{stringliteral}{        Test initialization of a socket manager.}
476 \textcolor{stringliteral}{        """}
477         self.assertFalse(self.fake\_socket.connected)
478 
479         \textcolor{comment}{# Callbacks should never trigger during proper setup and shutdown}
480         nop\_called = \textcolor{keyword}{False}
481 
482         \textcolor{keyword}{def }nop(*args):
483             nonlocal nop\_called  \textcolor{comment}{# noqa 999 we don't support py2}
484             nop\_called = \textcolor{keyword}{True}
485 
486         socket\_manager = SocketManager(
487             \textcolor{stringliteral}{'https://127.0.0.1'},
488             self.fake\_socket.port,
489             nop,
490             nop,
491             nop,
492             TASK\_GROUP\_ID\_1,
493             0.3,
494             nop,
495         )
496         self.assertTrue(self.fake\_socket.connected)
497         self.assertFalse(nop\_called)
498 
499         \textcolor{comment}{# Test shutdown}
500         self.assertFalse(self.fake\_socket.disconnected)
501         self.assertFalse(socket\_manager.is\_shutdown)
502         self.assertTrue(socket\_manager.alive)
503         socket\_manager.shutdown()
504         self.assertTrue(self.fake\_socket.disconnected)
505         self.assertTrue(socket\_manager.is\_shutdown)
506         self.assertFalse(nop\_called)
507 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a3195b9685afde3d96d5d1e6a2cf625a4}\label{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a3195b9685afde3d96d5d1e6a2cf625a4}} 
\index{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown@{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown}}
\index{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown@{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown}!parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown()}{test\_init\_and\_socket\_shutdown()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test initialization of a socket manager with a failed shutdown.
\end{DoxyVerb}
 

Definition at line 517 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
517     \textcolor{keyword}{def }test\_init\_and\_socket\_shutdown(self):
518         \textcolor{stringliteral}{"""}
519 \textcolor{stringliteral}{        Test initialization of a socket manager with a failed shutdown.}
520 \textcolor{stringliteral}{        """}
521         self.assertFalse(self.fake\_socket.connected)
522 
523         \textcolor{comment}{# Callbacks should never trigger during proper setup and shutdown}
524         nop\_called = \textcolor{keyword}{False}
525 
526         \textcolor{keyword}{def }nop(*args):
527             nonlocal nop\_called  \textcolor{comment}{# noqa 999 we don't support py2}
528             nop\_called = \textcolor{keyword}{True}
529 
530         server\_death\_called = \textcolor{keyword}{False}
531 
532         \textcolor{keyword}{def }server\_death(*args):
533             nonlocal server\_death\_called
534             server\_death\_called = \textcolor{keyword}{True}
535 
536         socket\_manager = SocketManager(
537             \textcolor{stringliteral}{'https://127.0.0.1'},
538             self.fake\_socket.port,
539             nop,
540             nop,
541             nop,
542             TASK\_GROUP\_ID\_1,
543             0.4,
544             server\_death,
545         )
546         self.assertTrue(self.fake\_socket.connected)
547         self.assertFalse(nop\_called)
548         self.assertFalse(server\_death\_called)
549 
550         \textcolor{comment}{# Test shutdown}
551         self.assertFalse(self.fake\_socket.disconnected)
552         self.assertFalse(socket\_manager.is\_shutdown)
553         self.assertTrue(socket\_manager.alive)
554         self.fake\_socket.close()
555         self.assertEqualBy(
556             \textcolor{keyword}{lambda}: socket\_manager.alive, \textcolor{keyword}{False}, 8 * socket\_manager.HEARTBEAT\_RATE
557         )
558         self.assertEqualBy(
559             \textcolor{keyword}{lambda}: server\_death\_called, \textcolor{keyword}{True}, 4 * socket\_manager.HEARTBEAT\_RATE
560         )
561         self.assertFalse(nop\_called)
562         socket\_manager.shutdown()
563 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a0f825d0f19915160c055aa62f1c1e34f}\label{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a0f825d0f19915160c055aa62f1c1e34f}} 
\index{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart@{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart}}
\index{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart@{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart}!parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart()}{test\_init\_and\_socket\_shutdown\_then\_restart()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+test\+\_\+init\+\_\+and\+\_\+socket\+\_\+shutdown\+\_\+then\+\_\+restart (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test restoring connection to a socket.
\end{DoxyVerb}
 

Definition at line 564 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
564     \textcolor{keyword}{def }test\_init\_and\_socket\_shutdown\_then\_restart(self):
565         \textcolor{stringliteral}{"""}
566 \textcolor{stringliteral}{        Test restoring connection to a socket.}
567 \textcolor{stringliteral}{        """}
568         self.assertFalse(self.fake\_socket.connected)
569 
570         \textcolor{comment}{# Callbacks should never trigger during proper setup and shutdown}
571         nop\_called = \textcolor{keyword}{False}
572 
573         \textcolor{keyword}{def }nop(*args):
574             nonlocal nop\_called  \textcolor{comment}{# noqa 999 we don't support py2}
575             nop\_called = \textcolor{keyword}{True}
576 
577         server\_death\_called = \textcolor{keyword}{False}
578 
579         \textcolor{keyword}{def }server\_death(*args):
580             nonlocal server\_death\_called
581             server\_death\_called = \textcolor{keyword}{True}
582 
583         socket\_manager = SocketManager(
584             \textcolor{stringliteral}{'https://127.0.0.1'},
585             self.fake\_socket.port,
586             nop,
587             nop,
588             nop,
589             TASK\_GROUP\_ID\_1,
590             0.4,
591             server\_death,
592         )
593         self.assertTrue(self.fake\_socket.connected)
594         self.assertFalse(nop\_called)
595         self.assertFalse(server\_death\_called)
596 
597         \textcolor{comment}{# Test shutdown}
598         self.assertFalse(self.fake\_socket.disconnected)
599         self.assertFalse(socket\_manager.is\_shutdown)
600         self.assertTrue(socket\_manager.alive)
601         self.fake\_socket.close()
602         self.assertEqualBy(
603             \textcolor{keyword}{lambda}: socket\_manager.alive, \textcolor{keyword}{False}, 8 * socket\_manager.HEARTBEAT\_RATE
604         )
605         self.assertFalse(socket\_manager.alive)
606         self.fake\_socket = MockSocket()
607         self.assertEqualBy(
608             \textcolor{keyword}{lambda}: socket\_manager.alive, \textcolor{keyword}{True}, 4 * socket\_manager.HEARTBEAT\_RATE
609         )
610         self.assertFalse(nop\_called)
611         self.assertFalse(server\_death\_called)
612         socket\_manager.shutdown()
613 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a6512d80f63f187d55bef6e2ae01084ec}\label{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_a6512d80f63f187d55bef6e2ae01084ec}} 
\index{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!test\+\_\+init\+\_\+world\+\_\+dead@{test\+\_\+init\+\_\+world\+\_\+dead}}
\index{test\+\_\+init\+\_\+world\+\_\+dead@{test\+\_\+init\+\_\+world\+\_\+dead}!parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{test\+\_\+init\+\_\+world\+\_\+dead()}{test\_init\_world\_dead()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+test\+\_\+init\+\_\+world\+\_\+dead (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test initialization of a socket manager with a failed startup.
\end{DoxyVerb}
 

Definition at line 614 of file test\+\_\+socket\+\_\+manager.\+py.


\begin{DoxyCode}
614     \textcolor{keyword}{def }test\_init\_world\_dead(self):
615         \textcolor{stringliteral}{"""}
616 \textcolor{stringliteral}{        Test initialization of a socket manager with a failed startup.}
617 \textcolor{stringliteral}{        """}
618         self.assertFalse(self.fake\_socket.connected)
619         self.fake\_socket.close()
620 
621         \textcolor{comment}{# Callbacks should never trigger during proper setup and shutdown}
622         nop\_called = \textcolor{keyword}{False}
623 
624         \textcolor{keyword}{def }nop(*args):
625             nonlocal nop\_called  \textcolor{comment}{# noqa 999 we don't support py2}
626             nop\_called = \textcolor{keyword}{True}
627 
628         server\_death\_called = \textcolor{keyword}{False}
629 
630         \textcolor{keyword}{def }server\_death(*args):
631             nonlocal server\_death\_called
632             server\_death\_called = \textcolor{keyword}{True}
633 
634         with self.assertRaises(ConnectionRefusedError):
635             socket\_manager = SocketManager(
636                 \textcolor{stringliteral}{'https://127.0.0.1'},
637                 self.fake\_socket.port,
638                 nop,
639                 nop,
640                 nop,
641                 TASK\_GROUP\_ID\_1,
642                 0.4,
643                 server\_death,
644             )
645             self.assertIsNone(socket\_manager)
646 
647         self.assertFalse(nop\_called)
648         self.assertTrue(server\_death\_called)
649 
650 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_ad8a72a5abd683838bf08af5386561e85}\label{classparlai_1_1mturk_1_1core_1_1test_1_1test__socket__manager_1_1TestSocketManagerSetupAndFunctions_ad8a72a5abd683838bf08af5386561e85}} 
\index{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}!fake\+\_\+socket@{fake\+\_\+socket}}
\index{fake\+\_\+socket@{fake\+\_\+socket}!parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions@{parlai\+::mturk\+::core\+::test\+::test\+\_\+socket\+\_\+manager\+::\+Test\+Socket\+Manager\+Setup\+And\+Functions}}
\subsubsection{\texorpdfstring{fake\+\_\+socket}{fake\_socket}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+test.\+test\+\_\+socket\+\_\+manager.\+Test\+Socket\+Manager\+Setup\+And\+Functions.\+fake\+\_\+socket}



Definition at line 467 of file test\+\_\+socket\+\_\+manager.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/core/test/\hyperlink{test_2test__socket__manager_8py}{test\+\_\+socket\+\_\+manager.\+py}\end{DoxyCompactItemize}
