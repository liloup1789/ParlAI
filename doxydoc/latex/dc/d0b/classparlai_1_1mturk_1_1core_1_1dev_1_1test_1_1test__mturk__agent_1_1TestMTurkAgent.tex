\hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent}{}\section{parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent Class Reference}
\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent}\index{parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent@{parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent}}


Inheritance diagram for parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{d4/d83/classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{d8/d49/classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_af9ac563e4d2bc4deb3a804022bf98eab}{set\+Up} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ae8fbec62c492cb5ce4338ebff8dff264}{tear\+Down} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_a0ff58816506507267ff9084573c41934}{test\+\_\+init} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_af3269a504f0c00fc9de307153e55adbd}{test\+\_\+state\+\_\+wrappers} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_a978ff70bb9e6e752c06f5c6db8e63d52}{test\+\_\+connection\+\_\+id} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_aca082e5e552594724894f01f7dbc246b}{test\+\_\+status\+\_\+change} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_a2b8a45bfee86cdd9e2a5ae10905b6334}{test\+\_\+message\+\_\+queue} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ad7bb0c1f6343a03be96731bd27670b3b}{test\+\_\+message\+\_\+acts} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ad8d2342c8e1e931ecc4af9e55196857c}{opt}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_afd346baa958fb262d0e2681c3a39f298}{mturk\+\_\+manager}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_abd98f41844b1325e2ebe61baec9e1581}{worker\+\_\+manager}
\item 
\hyperlink{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ad9a5d68dacd93bc427ed4f9eca011c46}{turk\+\_\+agent}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Various unit tests for the MTurkAgent class.
\end{DoxyVerb}
 

Definition at line 142 of file test\+\_\+mturk\+\_\+agent.\+py.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_af9ac563e4d2bc4deb3a804022bf98eab}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_af9ac563e4d2bc4deb3a804022bf98eab}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!set\+Up@{set\+Up}}
\index{set\+Up@{set\+Up}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{set\+Up()}{setUp()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+set\+Up (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 147 of file test\+\_\+mturk\+\_\+agent.\+py.


\begin{DoxyCode}
147     \textcolor{keyword}{def }setUp(self):
148         argparser = ParlaiParser(\textcolor{keyword}{False}, \textcolor{keyword}{False})
149         argparser.add\_parlai\_data\_path()
150         argparser.add\_mturk\_args()
151         self.opt = argparser.parse\_args(print\_args=\textcolor{keyword}{False})
152         self.opt[\textcolor{stringliteral}{'task'}] = \textcolor{stringliteral}{'unittest'}
153         self.opt[\textcolor{stringliteral}{'assignment\_duration\_in\_seconds'}] = 6
154         mturk\_agent\_ids = [\textcolor{stringliteral}{'mturk\_agent\_1'}]
155         self.mturk\_manager = MTurkManager(
156             opt=self.opt.copy(), mturk\_agent\_ids=mturk\_agent\_ids
157         )
158         self.worker\_manager = self.mturk\_manager.worker\_manager
159         self.mturk\_manager.send\_message = mock.MagicMock()
160         self.mturk\_manager.send\_state\_change = mock.MagicMock()
161         self.mturk\_manager.send\_command = mock.MagicMock()
162 
163         self.turk\_agent = MTurkAgent(
164             self.opt.copy(),
165             self.mturk\_manager,
166             TEST\_HIT\_ID\_1,
167             TEST\_ASSIGNMENT\_ID\_1,
168             TEST\_WORKER\_ID\_1,
169         )
170 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ae8fbec62c492cb5ce4338ebff8dff264}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ae8fbec62c492cb5ce4338ebff8dff264}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!tear\+Down@{tear\+Down}}
\index{tear\+Down@{tear\+Down}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{tear\+Down()}{tearDown()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+tear\+Down (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 171 of file test\+\_\+mturk\+\_\+agent.\+py.


\begin{DoxyCode}
171     \textcolor{keyword}{def }tearDown(self):
172         self.mturk\_manager.shutdown()
173 
174         disconnect\_path = os.path.join(parent\_dir, \textcolor{stringliteral}{'disconnect-test.pickle'})
175         \textcolor{keywordflow}{if} os.path.exists(disconnect\_path):
176             os.remove(disconnect\_path)
177 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_a978ff70bb9e6e752c06f5c6db8e63d52}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_a978ff70bb9e6e752c06f5c6db8e63d52}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!test\+\_\+connection\+\_\+id@{test\+\_\+connection\+\_\+id}}
\index{test\+\_\+connection\+\_\+id@{test\+\_\+connection\+\_\+id}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{test\+\_\+connection\+\_\+id()}{test\_connection\_id()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+test\+\_\+connection\+\_\+id (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Ensure the connection_id hasn't changed.
\end{DoxyVerb}
 

Definition at line 224 of file test\+\_\+mturk\+\_\+agent.\+py.


\begin{DoxyCode}
224     \textcolor{keyword}{def }test\_connection\_id(self):
225         \textcolor{stringliteral}{"""}
226 \textcolor{stringliteral}{        Ensure the connection\_id hasn't changed.}
227 \textcolor{stringliteral}{        """}
228         connection\_id = \textcolor{stringliteral}{"\{\}\_\{\}"}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
229             self.turk\_agent.worker\_id, self.turk\_agent.assignment\_id
230         )
231         self.assertEqual(self.turk\_agent.get\_connection\_id(), connection\_id)
232 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_a0ff58816506507267ff9084573c41934}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_a0ff58816506507267ff9084573c41934}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!test\+\_\+init@{test\+\_\+init}}
\index{test\+\_\+init@{test\+\_\+init}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{test\+\_\+init()}{test\_init()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+test\+\_\+init (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test initialization of an agent.
\end{DoxyVerb}
 

Definition at line 178 of file test\+\_\+mturk\+\_\+agent.\+py.


\begin{DoxyCode}
178     \textcolor{keyword}{def }test\_init(self):
179         \textcolor{stringliteral}{"""}
180 \textcolor{stringliteral}{        Test initialization of an agent.}
181 \textcolor{stringliteral}{        """}
182         self.assertIsNotNone(self.turk\_agent.creation\_time)
183         self.assertIsNone(self.turk\_agent.id)
184         self.assertIsNone(self.turk\_agent.message\_request\_time)
185         self.assertIsNone(self.turk\_agent.conversation\_id)
186         self.assertFalse(self.turk\_agent.some\_agent\_disconnected)
187         self.assertFalse(self.turk\_agent.hit\_is\_expired)
188         self.assertFalse(self.turk\_agent.hit\_is\_abandoned)
189         self.assertFalse(self.turk\_agent.hit\_is\_returned)
190         self.assertFalse(self.turk\_agent.hit\_is\_complete)
191         self.assertFalse(self.turk\_agent.disconnected)
192 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ad7bb0c1f6343a03be96731bd27670b3b}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ad7bb0c1f6343a03be96731bd27670b3b}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!test\+\_\+message\+\_\+acts@{test\+\_\+message\+\_\+acts}}
\index{test\+\_\+message\+\_\+acts@{test\+\_\+message\+\_\+acts}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{test\+\_\+message\+\_\+acts()}{test\_message\_acts()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+test\+\_\+message\+\_\+acts (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 290 of file test\+\_\+mturk\+\_\+agent.\+py.


\begin{DoxyCode}
290     \textcolor{keyword}{def }test\_message\_acts(self):
291         self.mturk\_manager.handle\_turker\_timeout = mock.MagicMock()
292 
293         \textcolor{comment}{# non-Blocking check}
294         self.assertIsNone(self.turk\_agent.message\_request\_time)
295         returned\_act = self.turk\_agent.act(blocking=\textcolor{keyword}{False})
296         self.assertIsNotNone(self.turk\_agent.message\_request\_time)
297         self.assertIsNone(returned\_act)
298         self.turk\_agent.id = AGENT\_ID
299         self.turk\_agent.put\_data(MESSAGE\_ID\_1, ACT\_1)
300         returned\_act = self.turk\_agent.act(blocking=\textcolor{keyword}{False})
301         self.assertIsNone(self.turk\_agent.message\_request\_time)
302         self.assertEqual(returned\_act, ACT\_1)
303         self.mturk\_manager.send\_command.assert\_called\_once()
304 
305         \textcolor{comment}{# non-Blocking timeout check}
306         with self.assertRaises(AgentTimeoutError):
307             self.mturk\_manager.send\_command = mock.MagicMock()
308             returned\_act = self.turk\_agent.act(timeout=0.07, blocking=\textcolor{keyword}{False})
309             self.assertIsNotNone(self.turk\_agent.message\_request\_time)
310             self.assertIsNone(returned\_act)
311             \textcolor{keywordflow}{while} returned\_act \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
312                 returned\_act = self.turk\_agent.act(timeout=0.07, blocking=\textcolor{keyword}{False})
313 
314         \textcolor{comment}{# Blocking timeout check}
315         with self.assertRaises(AgentTimeoutError):
316             returned\_act = self.turk\_agent.act(timeout=0.07)
317 
318 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_a2b8a45bfee86cdd9e2a5ae10905b6334}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_a2b8a45bfee86cdd9e2a5ae10905b6334}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!test\+\_\+message\+\_\+queue@{test\+\_\+message\+\_\+queue}}
\index{test\+\_\+message\+\_\+queue@{test\+\_\+message\+\_\+queue}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{test\+\_\+message\+\_\+queue()}{test\_message\_queue()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+test\+\_\+message\+\_\+queue (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Ensure observations and acts work as expected.
\end{DoxyVerb}
 

Definition at line 241 of file test\+\_\+mturk\+\_\+agent.\+py.


\begin{DoxyCode}
241     \textcolor{keyword}{def }test\_message\_queue(self):
242         \textcolor{stringliteral}{"""}
243 \textcolor{stringliteral}{        Ensure observations and acts work as expected.}
244 \textcolor{stringliteral}{        """}
245         self.turk\_agent.observe(ACT\_1)
246         self.mturk\_manager.send\_message.assert\_called\_with(
247             TEST\_WORKER\_ID\_1, TEST\_ASSIGNMENT\_ID\_1, ACT\_1
248         )
249 
250         \textcolor{comment}{# First act comes through the queue and returns properly}
251         self.assertTrue(self.turk\_agent.msg\_queue.empty())
252         self.turk\_agent.id = AGENT\_ID
253         self.turk\_agent.put\_data(MESSAGE\_ID\_1, ACT\_1)
254         self.assertTrue(self.turk\_agent.recieved\_packets[MESSAGE\_ID\_1])
255         self.assertFalse(self.turk\_agent.msg\_queue.empty())
256         returned\_act = self.turk\_agent.get\_new\_act\_message()
257         self.assertEqual(returned\_act, ACT\_1)
258 
259         \textcolor{comment}{# Repeat act is ignored}
260         self.turk\_agent.put\_data(MESSAGE\_ID\_1, ACT\_1)
261         self.assertTrue(self.turk\_agent.msg\_queue.empty())
262 
263         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(100):
264             self.turk\_agent.put\_data(\hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(i), ACT\_1)
265         self.assertEqual(self.turk\_agent.msg\_queue.qsize(), 100)
266         self.turk\_agent.flush\_msg\_queue()
267         self.assertTrue(self.turk\_agent.msg\_queue.empty())
268 
269         \textcolor{comment}{# Test non-act messages}
270         blank\_message = self.turk\_agent.get\_new\_act\_message()
271         self.assertIsNone(blank\_message)
272 
273         self.turk\_agent.disconnected = \textcolor{keyword}{True}
274         with self.assertRaises(AgentDisconnectedError):
275             \textcolor{comment}{# Expect this to be a disconnect message}
276             self.turk\_agent.get\_new\_act\_message()
277         self.turk\_agent.disconnected = \textcolor{keyword}{False}
278 
279         self.turk\_agent.hit\_is\_returned = \textcolor{keyword}{True}
280         with self.assertRaises(AgentReturnedError):
281             \textcolor{comment}{# Expect this to be a returned message}
282             self.turk\_agent.get\_new\_act\_message()
283         self.turk\_agent.hit\_is\_returned = \textcolor{keyword}{False}
284 
285         \textcolor{comment}{# Reduce state}
286         self.turk\_agent.reduce\_state()
287         self.assertIsNone(self.turk\_agent.msg\_queue)
288         self.assertIsNone(self.turk\_agent.recieved\_packets)
289 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_af3269a504f0c00fc9de307153e55adbd}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_af3269a504f0c00fc9de307153e55adbd}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!test\+\_\+state\+\_\+wrappers@{test\+\_\+state\+\_\+wrappers}}
\index{test\+\_\+state\+\_\+wrappers@{test\+\_\+state\+\_\+wrappers}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{test\+\_\+state\+\_\+wrappers()}{test\_state\_wrappers()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+test\+\_\+state\+\_\+wrappers (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Test the mturk agent wrappers around its state.
\end{DoxyVerb}
 

Definition at line 193 of file test\+\_\+mturk\+\_\+agent.\+py.


\begin{DoxyCode}
193     \textcolor{keyword}{def }test\_state\_wrappers(self):
194         \textcolor{stringliteral}{"""}
195 \textcolor{stringliteral}{        Test the mturk agent wrappers around its state.}
196 \textcolor{stringliteral}{        """}
197         \textcolor{keywordflow}{for} status \textcolor{keywordflow}{in} statuses:
198             self.turk\_agent.set\_status(status)
199             self.assertEqual(self.turk\_agent.get\_status(), status)
200         \textcolor{keywordflow}{for} status \textcolor{keywordflow}{in} [AssignState.STATUS\_DONE, AssignState.STATUS\_PARTNER\_DISCONNECT]:
201             self.turk\_agent.set\_status(status)
202             self.assertTrue(self.turk\_agent.submitted\_hit())
203 
204         \textcolor{keywordflow}{for} status \textcolor{keywordflow}{in} active\_statuses:
205             self.turk\_agent.set\_status(status)
206             self.assertFalse(self.turk\_agent.is\_final())
207 
208         \textcolor{keywordflow}{for} status \textcolor{keywordflow}{in} complete\_statuses:
209             self.turk\_agent.set\_status(status)
210             self.assertTrue(self.turk\_agent.is\_final())
211 
212         self.turk\_agent.state.append\_message(MESSAGE\_1)
213         self.assertEqual(len(self.turk\_agent.get\_messages()), 1)
214         self.turk\_agent.state.append\_message(MESSAGE\_2)
215         self.assertEqual(len(self.turk\_agent.get\_messages()), 2)
216         self.turk\_agent.state.append\_message(MESSAGE\_1)
217         self.assertEqual(len(self.turk\_agent.get\_messages()), 2)
218         self.assertIn(MESSAGE\_1, self.turk\_agent.get\_messages())
219         self.assertIn(MESSAGE\_2, self.turk\_agent.get\_messages())
220 
221         self.turk\_agent.clear\_messages()
222         self.assertEqual(len(self.turk\_agent.get\_messages()), 0)
223 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_aca082e5e552594724894f01f7dbc246b}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_aca082e5e552594724894f01f7dbc246b}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!test\+\_\+status\+\_\+change@{test\+\_\+status\+\_\+change}}
\index{test\+\_\+status\+\_\+change@{test\+\_\+status\+\_\+change}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{test\+\_\+status\+\_\+change()}{test\_status\_change()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+test\+\_\+status\+\_\+change (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 233 of file test\+\_\+mturk\+\_\+agent.\+py.


\begin{DoxyCode}
233     \textcolor{keyword}{def }test\_status\_change(self):
234         self.turk\_agent.set\_status(AssignState.STATUS\_ONBOARDING)
235         time.sleep(0.07)
236         self.assertEqual(self.turk\_agent.get\_status(), AssignState.STATUS\_ONBOARDING)
237         self.turk\_agent.set\_status(AssignState.STATUS\_WAITING)
238         time.sleep(0.07)
239         self.assertEqual(self.turk\_agent.get\_status(), AssignState.STATUS\_WAITING)
240 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_afd346baa958fb262d0e2681c3a39f298}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_afd346baa958fb262d0e2681c3a39f298}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!mturk\+\_\+manager@{mturk\+\_\+manager}}
\index{mturk\+\_\+manager@{mturk\+\_\+manager}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{mturk\+\_\+manager}{mturk\_manager}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+mturk\+\_\+manager}



Definition at line 155 of file test\+\_\+mturk\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ad8d2342c8e1e931ecc4af9e55196857c}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ad8d2342c8e1e931ecc4af9e55196857c}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!opt@{opt}}
\index{opt@{opt}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+opt}



Definition at line 151 of file test\+\_\+mturk\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ad9a5d68dacd93bc427ed4f9eca011c46}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_ad9a5d68dacd93bc427ed4f9eca011c46}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!turk\+\_\+agent@{turk\+\_\+agent}}
\index{turk\+\_\+agent@{turk\+\_\+agent}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{turk\+\_\+agent}{turk\_agent}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+turk\+\_\+agent}



Definition at line 163 of file test\+\_\+mturk\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_abd98f41844b1325e2ebe61baec9e1581}\label{classparlai_1_1mturk_1_1core_1_1dev_1_1test_1_1test__mturk__agent_1_1TestMTurkAgent_abd98f41844b1325e2ebe61baec9e1581}} 
\index{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}!worker\+\_\+manager@{worker\+\_\+manager}}
\index{worker\+\_\+manager@{worker\+\_\+manager}!parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent@{parlai\+::mturk\+::core\+::dev\+::test\+::test\+\_\+mturk\+\_\+agent\+::\+Test\+M\+Turk\+Agent}}
\subsubsection{\texorpdfstring{worker\+\_\+manager}{worker\_manager}}
{\footnotesize\ttfamily parlai.\+mturk.\+core.\+dev.\+test.\+test\+\_\+mturk\+\_\+agent.\+Test\+M\+Turk\+Agent.\+worker\+\_\+manager}



Definition at line 158 of file test\+\_\+mturk\+\_\+agent.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/core/dev/test/\hyperlink{dev_2test_2test__mturk__agent_8py}{test\+\_\+mturk\+\_\+agent.\+py}\end{DoxyCompactItemize}
