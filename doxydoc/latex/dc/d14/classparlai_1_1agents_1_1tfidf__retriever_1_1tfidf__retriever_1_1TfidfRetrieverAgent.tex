\hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent}{}\section{parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent Class Reference}
\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent}\index{parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent@{parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent}}


Inheritance diagram for parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{d0/d17/classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{d6/da4/classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a41828d27aad3bd78da51c74d24350f46}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1agents_1_1Agent_ab3b45d2754244608c75d4068b90cd051}{opt}, shared=None)
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_afb395d155be90f557a1e8fc0cb38e94e}{share} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a4d9e8962cb44451758ea13b09b8dbd86}{reset} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_abc3ce26084466682f25980e176d3ce38}{train} (self, mode=True)
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a97a3e0824539ff7df230ccaee5cdda20}{eval} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_af3dec5fd8d3fb89229f00d919bfcd565}{doc2txt} (self, docid)
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a434a29fe242e98aef091ec1e277d420f}{rebuild} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_af740335de006f8ead33b632afa1c4dcd}{save} (self, path=None)
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a424c899b5755606c32c7d6a85989ce92}{train\+\_\+act} (self)
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a6113bcdd2792d70156ca64cc57187692}{act} (self)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a3d8b2fdf6981564efc1a4db42029b4f0}{add\+\_\+cmdline\+\_\+args} (parser)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_aed60a70d24ee40222693ee15f3bb7400}{id}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a2ef924a4c453d858e3f219ec9b3b5ccf}{db\+\_\+path}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a505cd0341627439a8648726aa122e02c}{tfidf\+\_\+path}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a531f5122614612a3b386926632f1ae32}{tfidf\+\_\+args}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_abd5c27e6f3d7456f3e1c3f86e150b623}{db}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_aef0b3013cea8b9f2b1564a350a2d5ce2}{ranker}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_ab32af649d68ec82588e0b200f8ff11ac}{ret\+\_\+mode}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a452d71ce3d6e2a52d37d8f305c6ffc2a}{cands\+\_\+hash}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a7f513dbbd924cff1eb534294e59cec75}{triples\+\_\+to\+\_\+add}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a7578f4be8dd7922d5fbf7ca3148066f3}{context\+\_\+length}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_af88bd8f286096dfa2da00ac418ddba60}{include\+\_\+labels}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a47f6aa16c2ed129ea197b1a6c2094f1c}{episode\+\_\+done}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a31354a5f1b5f330864fd4dc89d24a858}{current}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_ae783880e187479263a6c70a9aa5e4192}{context}
\item 
\hyperlink{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a45b473e654ccb533f900903e154430fd}{training}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}TFIDF-based retriever agent.

If given a task to specify, will first store entries of that task into
a SQLite database and then build a sparse tfidf matrix of those entries.
If not, will build it on-the-fly whenever it sees observations with labels.

This agent generates responses by building a sparse entry of the incoming
text observation, and then returning the highest-scoring documents
(calculated via sparse matrix multiplication) from the tfidf matrix.

By default, this will return the "value" (the response) of the closest
entries. For example, saying "What is your favorite movie?" will not return
the text "Which movie is your favorite?" (high match) but rather the reply
to that (e.g. "Jurassic Park"). To use this agent for retrieving texts
(e.g. Wikipedia Entries), you can store label-less examples with the
'--retriever-task' argument and switch '--retriever-mode' to 'keys'.
\end{DoxyVerb}
 

Definition at line 34 of file tfidf\+\_\+retriever.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a41828d27aad3bd78da51c74d24350f46}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a41828d27aad3bd78da51c74d24350f46}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 133 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
133     \textcolor{keyword}{def }\_\_init\_\_(self, opt, shared=None):
134         super().\_\_init\_\_(opt, shared)
135         self.id = \textcolor{stringliteral}{'SparseTfidfRetrieverAgent'}
136         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} opt.get(\textcolor{stringliteral}{'model\_file'}) \textcolor{keywordflow}{or} opt[\textcolor{stringliteral}{'model\_file'}] == \textcolor{stringliteral}{''}:
137             \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'Must set --model\_file'})
138 
139         opt[\textcolor{stringliteral}{'retriever\_dbpath'}] = opt[\textcolor{stringliteral}{'model\_file'}] + \textcolor{stringliteral}{'.db'}
140         opt[\textcolor{stringliteral}{'retriever\_tfidfpath'}] = opt[\textcolor{stringliteral}{'model\_file'}] + \textcolor{stringliteral}{'.tfidf'}
141 
142         self.db\_path = opt[\textcolor{stringliteral}{'retriever\_dbpath'}]
143         self.tfidf\_path = opt[\textcolor{stringliteral}{'retriever\_tfidfpath'}]
144 
145         self.tfidf\_args = AttrDict(
146             \{
147                 \textcolor{stringliteral}{'db\_path'}: opt[\textcolor{stringliteral}{'retriever\_dbpath'}],
148                 \textcolor{stringliteral}{'out\_dir'}: opt[\textcolor{stringliteral}{'retriever\_tfidfpath'}],
149                 \textcolor{stringliteral}{'ngram'}: opt[\textcolor{stringliteral}{'retriever\_ngram'}],
150                 \textcolor{stringliteral}{'hash\_size'}: opt[\textcolor{stringliteral}{'retriever\_hashsize'}],
151                 \textcolor{stringliteral}{'tokenizer'}: opt[\textcolor{stringliteral}{'retriever\_tokenizer'}],
152                 \textcolor{stringliteral}{'num\_workers'}: opt[\textcolor{stringliteral}{'retriever\_numworkers'}],
153             \}
154         )
155 
156         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(self.db\_path):
157             conn = sqlite3.connect(self.db\_path)
158             c = conn.cursor()
159             c.execute(
160                 \textcolor{stringliteral}{'CREATE TABLE documents '} \textcolor{stringliteral}{'(id INTEGER PRIMARY KEY, text, value);'}
161             )
162             conn.commit()
163             conn.close()
164 
165         self.db = DocDB(db\_path=opt[\textcolor{stringliteral}{'retriever\_dbpath'}])
166         \textcolor{keywordflow}{if} os.path.exists(self.tfidf\_path + \textcolor{stringliteral}{'.npz'}):
167             \textcolor{keywordflow}{if} shared \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
168                 self.ranker = TfidfDocRanker(
169                     tfidf\_path=opt[\textcolor{stringliteral}{'retriever\_tfidfpath'}], strict=\textcolor{keyword}{False}
170                 )
171             \textcolor{keywordflow}{else}:
172                 self.ranker = shared[\textcolor{stringliteral}{'doc\_ranker'}]
173         self.ret\_mode = opt[\textcolor{stringliteral}{'retriever\_mode'}]
174         self.cands\_hash = \{\}  \textcolor{comment}{# cache for candidates}
175         self.triples\_to\_add = []  \textcolor{comment}{# in case we want to add more entries}
176 
177         clen = opt.get(\textcolor{stringliteral}{'tfidf\_context\_length'}, -1)
178         self.context\_length = clen \textcolor{keywordflow}{if} clen >= 0 \textcolor{keywordflow}{else} \textcolor{keywordtype}{None}
179         self.include\_labels = opt.get(\textcolor{stringliteral}{'tfidf\_include\_labels'}, \textcolor{keyword}{True})
180         self.reset()
181 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a6113bcdd2792d70156ca64cc57187692}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a6113bcdd2792d70156ca64cc57187692}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!act@{act}}
\index{act@{act}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{act()}{act()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+act (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 266 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
266     \textcolor{keyword}{def }act(self):
267         obs = self.observation
268         reply = \{\}
269         reply[\textcolor{stringliteral}{'id'}] = self.getID()
270         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'labels'} \textcolor{keywordflow}{in} obs:
271             \textcolor{keywordflow}{return} self.train\_act()
272         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'text'} \textcolor{keywordflow}{in} obs:
273             self.rebuild()  \textcolor{comment}{# no-op if nothing has been queued to store}
274             doc\_ids, doc\_scores = self.ranker.closest\_docs(
275                 obs[\textcolor{stringliteral}{'text'}], self.opt.get(\textcolor{stringliteral}{'retriever\_num\_retrieved'}, 5)
276             )
277 
278             \textcolor{keywordflow}{if} \textcolor{keyword}{False} \textcolor{keywordflow}{and} obs.get(\textcolor{stringliteral}{'label\_candidates'}):  \textcolor{comment}{# TODO: Alex (doesn't work)}
279                 \textcolor{comment}{# these are better selection than stored facts}
280                 \textcolor{comment}{# rank these options instead}
281                 cands = obs[\textcolor{stringliteral}{'label\_candidates'}]
282                 cands\_id = \hyperlink{namespacegenerate__task__list_a78e725c3dd7e8fbdb5c3044ec1bc3a81}{id}(cands)
283                 \textcolor{keywordflow}{if} cands\_id \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.cands\_hash:
284                     \textcolor{comment}{# cache candidate set}
285                     \textcolor{comment}{# will not update if cand set changes contents}
286                     c\_list = list(cands)
287                     self.cands\_hash[cands\_id] = (
288                         \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_acce651a5b40c5a3b4009181f22c69eaa}{get\_tfidf\_matrix}(\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_af51dc8629608fd04435739ba76b1e8f2}{live\_count\_matrix}(self.tfidf\_args
      , c\_list)),
289                         c\_list,
290                     )
291                 c\_ids, c\_scores = self.ranker.closest\_docs(
292                     obs[\textcolor{stringliteral}{'text'}],
293                     self.opt.get(\textcolor{stringliteral}{'retriever\_num\_retrieved'}, 5),
294                     matrix=self.cands\_hash[cands\_id][0],
295                 )
296                 reply[\textcolor{stringliteral}{'text\_candidates'}] = [
297                     self.cands\_hash[cands\_id][1][cid] \textcolor{keywordflow}{for} cid \textcolor{keywordflow}{in} c\_ids
298                 ]
299                 reply[\textcolor{stringliteral}{'candidate\_scores'}] = c\_scores
300                 \textcolor{keywordflow}{if} len(reply[\textcolor{stringliteral}{'text\_candidates'}]) > 0:
301                     reply[\textcolor{stringliteral}{'text'}] = reply[\textcolor{stringliteral}{'text\_candidates'}][0]
302                 \textcolor{keywordflow}{else}:
303                     reply[\textcolor{stringliteral}{'text'}] = \textcolor{stringliteral}{''}
304             \textcolor{keywordflow}{elif} len(doc\_ids) > 0:
305                 \textcolor{comment}{# return stored fact}
306                 \textcolor{comment}{# total = sum(doc\_scores)}
307                 \textcolor{comment}{# doc\_probs = [d / total for d in doc\_scores]}
308 
309                 \textcolor{comment}{# returned}
310                 picks = [self.doc2txt(\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(did)) \textcolor{keywordflow}{for} did \textcolor{keywordflow}{in} doc\_ids]
311                 pick = self.doc2txt(\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(doc\_ids[0]))  \textcolor{comment}{# select best response}
312 
313                 \textcolor{keywordflow}{if} self.opt.get(\textcolor{stringliteral}{'remove\_title'}, \textcolor{keyword}{False}):
314                     picks = [\textcolor{stringliteral}{'\(\backslash\)n'}.join(p.split(\textcolor{stringliteral}{'\(\backslash\)n'})[1:]) \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} picks]
315                     pick = \textcolor{stringliteral}{'\(\backslash\)n'}.join(pick.split(\textcolor{stringliteral}{'\(\backslash\)n'})[1:])
316                 reply[\textcolor{stringliteral}{'text\_candidates'}] = picks
317                 reply[\textcolor{stringliteral}{'candidate\_scores'}] = doc\_scores
318 
319                 \textcolor{comment}{# could pick single choice based on probability scores?}
320                 \textcolor{comment}{# pick = int(choice(doc\_ids, p=doc\_probs))}
321                 reply[\textcolor{stringliteral}{'text'}] = pick
322             \textcolor{keywordflow}{else}:
323                 \textcolor{comment}{# no cands and nothing found, return generic response}
324                 reply[\textcolor{stringliteral}{'text'}] = choice(
325                     [
326                         \textcolor{stringliteral}{'Can you say something more interesting?'},
327                         \textcolor{stringliteral}{'Why are you being so short with me?'},
328                         \textcolor{stringliteral}{'What are you really thinking?'},
329                         \textcolor{stringliteral}{'Can you expand on that?'},
330                     ]
331                 )
332 
333         \textcolor{keywordflow}{return} reply
334 \end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a3d8b2fdf6981564efc1a4db42029b4f0}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a3d8b2fdf6981564efc1a4db42029b4f0}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}}
\index{add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{add\+\_\+cmdline\+\_\+args()}{add\_cmdline\_args()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+add\+\_\+cmdline\+\_\+args (\begin{DoxyParamCaption}\item[{}]{parser }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 55 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
55     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1drqa_1_1config_a62fdd5554f1da6be0cba185271058320}{add\_cmdline\_args}(parser):
56         parser = parser.add\_argument\_group(\textcolor{stringliteral}{'Retriever Arguments'})
57         parser.add\_argument(
58             \textcolor{stringliteral}{'--retriever-numworkers'},
59             type=int,
60             default=\textcolor{keywordtype}{None},
61             help=\textcolor{stringliteral}{'Number of CPU processes (for tokenizing, etc)'},
62         )
63         parser.add\_argument(
64             \textcolor{stringliteral}{'--retriever-ngram'},
65             type=int,
66             default=2,
67             help=\textcolor{stringliteral}{'Use up to N-size n-grams (e.g. 2 = unigrams + bigrams)'},
68         )
69         parser.add\_argument(
70             \textcolor{stringliteral}{'--retriever-hashsize'},
71             type=int,
72             default=\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(math.pow(2, 24)),
73             help=\textcolor{stringliteral}{'Number of buckets to use for hashing ngrams'},
74         )
75         parser.add\_argument(
76             \textcolor{stringliteral}{'--retriever-tokenizer'},
77             type=str,
78             default=\textcolor{stringliteral}{'simple'},
79             help=\textcolor{stringliteral}{'String option specifying tokenizer type to use '} \textcolor{stringliteral}{'(e.g. "corenlp")'},
80         )
81         parser.add\_argument(
82             \textcolor{stringliteral}{'--retriever-num-retrieved'},
83             default=5,
84             type=int,
85             help=\textcolor{stringliteral}{'How many docs to retrieve.'},
86         )
87         parser.add\_argument(
88             \textcolor{stringliteral}{'--retriever-mode'},
89             choices=[\textcolor{stringliteral}{'keys'}, \textcolor{stringliteral}{'values'}],
90             default=\textcolor{stringliteral}{'values'},
91             help=\textcolor{stringliteral}{'Whether to retrieve the stored key or the stored value.'},
92         )
93         parser.add\_argument(
94             \textcolor{stringliteral}{'--remove-title'},
95             type=\textcolor{stringliteral}{'bool'},
96             default=\textcolor{keyword}{False},
97             help=\textcolor{stringliteral}{'Whether to remove the title from the retrieved passage'},
98         )
99         parser.add\_argument(
100             \textcolor{stringliteral}{'--retriever-mode'},
101             choices=[\textcolor{stringliteral}{'keys'}, \textcolor{stringliteral}{'values'}],
102             default=\textcolor{stringliteral}{'values'},
103             help=\textcolor{stringliteral}{'Whether to retrieve the stored key or the stored value. For '}
104             \textcolor{stringliteral}{'example, if you want to return the text of an example, use '}
105             \textcolor{stringliteral}{'keys here; if you want to return the label, use values here.'},
106         )
107         parser.add\_argument(
108             \textcolor{stringliteral}{'--index-by-int-id'},
109             type=\textcolor{stringliteral}{'bool'},
110             default=\textcolor{keyword}{True},
111             help=\textcolor{stringliteral}{'Whether to index into database by doc id as an integer. This \(\backslash\)}
112 \textcolor{stringliteral}{                  defaults to true for DBs built using ParlAI; for the DrQA \(\backslash\)}
113 \textcolor{stringliteral}{                  wiki dump, it is necessary to set this to False to \(\backslash\)}
114 \textcolor{stringliteral}{                  index into the DB appropriately'},
115         )
116         parser.add\_argument(
117             \textcolor{stringliteral}{'--tfidf-context-length'},
118             default=-1,
119             type=int,
120             help=\textcolor{stringliteral}{'Number of past utterances to remember when '}
121             \textcolor{stringliteral}{'building flattened batches of data in multi-'}
122             \textcolor{stringliteral}{'example episodes.'},
123         )
124         parser.add\_argument(
125             \textcolor{stringliteral}{'--tfidf-include-labels'},
126             default=\textcolor{keyword}{True},
127             type=\textcolor{stringliteral}{'bool'},
128             help=\textcolor{stringliteral}{'Specifies whether or not to include labels '}
129             \textcolor{stringliteral}{'as past utterances when building flattened '}
130             \textcolor{stringliteral}{'batches of data in multi-example episodes.'},
131         )
132 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_af3dec5fd8d3fb89229f00d919bfcd565}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_af3dec5fd8d3fb89229f00d919bfcd565}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!doc2txt@{doc2txt}}
\index{doc2txt@{doc2txt}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{doc2txt()}{doc2txt()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+doc2txt (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{docid }\end{DoxyParamCaption})}



Definition at line 199 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
199     \textcolor{keyword}{def }doc2txt(self, docid):
200         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.opt.get(\textcolor{stringliteral}{'index\_by\_int\_id'}, \textcolor{keyword}{True}):
201             docid = self.ranker.get\_doc\_id(docid)
202         \textcolor{keywordflow}{if} self.ret\_mode == \textcolor{stringliteral}{'keys'}:
203             \textcolor{keywordflow}{return} self.db.get\_doc\_text(docid)
204         \textcolor{keywordflow}{elif} self.ret\_mode == \textcolor{stringliteral}{'values'}:
205             \textcolor{keywordflow}{return} self.db.get\_doc\_value(docid)
206         \textcolor{keywordflow}{else}:
207             \textcolor{keywordflow}{raise} RuntimeError(
208                 \textcolor{stringliteral}{'Retrieve mode \{\} not yet supported.'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.ret\_mode)
209             )
210 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a97a3e0824539ff7df230ccaee5cdda20}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a97a3e0824539ff7df230ccaee5cdda20}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!eval@{eval}}
\index{eval@{eval}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{eval()}{eval()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+eval (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 196 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
196     \textcolor{keyword}{def }eval(self):
197         self.training = \textcolor{keyword}{False}
198 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a434a29fe242e98aef091ec1e277d420f}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a434a29fe242e98aef091ec1e277d420f}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!rebuild@{rebuild}}
\index{rebuild@{rebuild}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{rebuild()}{rebuild()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+rebuild (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 211 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
211     \textcolor{keyword}{def }rebuild(self):
212         \textcolor{keywordflow}{if} len(self.triples\_to\_add) > 0:
213             self.db.add(self.triples\_to\_add)
214             self.triples\_to\_add.clear()
215             \textcolor{comment}{# rebuild tfidf}
216             build\_tfidf(self.tfidf\_args)
217             self.ranker = TfidfDocRanker(tfidf\_path=self.tfidf\_path, strict=\textcolor{keyword}{False})
218 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a4d9e8962cb44451758ea13b09b8dbd86}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a4d9e8962cb44451758ea13b09b8dbd86}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!reset@{reset}}
\index{reset@{reset}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+reset (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 187 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
187     \textcolor{keyword}{def }reset(self):
188         super().reset()
189         self.episode\_done = \textcolor{keyword}{False}
190         self.current = []
191         self.context = deque(maxlen=self.context\_length)
192 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_af740335de006f8ead33b632afa1c4dcd}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_af740335de006f8ead33b632afa1c4dcd}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!save@{save}}
\index{save@{save}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+save (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{path = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 219 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
219     \textcolor{keyword}{def }save(self, path=None):
220         self.rebuild()
221         with open(self.opt[\textcolor{stringliteral}{'model\_file'}] + \textcolor{stringliteral}{'.opt'}, \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} handle:
222             json.dump(self.opt, handle)
223         with open(self.opt[\textcolor{stringliteral}{'model\_file'}], \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} f:
224             f.write(\textcolor{stringliteral}{'\(\backslash\)n'})
225 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_afb395d155be90f557a1e8fc0cb38e94e}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_afb395d155be90f557a1e8fc0cb38e94e}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!share@{share}}
\index{share@{share}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{share()}{share()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+share (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 182 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
182     \textcolor{keyword}{def }share(self):
183         shared = super().share()
184         shared[\textcolor{stringliteral}{'doc\_ranker'}] = self.ranker
185         \textcolor{keywordflow}{return} shared
186 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_abc3ce26084466682f25980e176d3ce38}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_abc3ce26084466682f25980e176d3ce38}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!train@{train}}
\index{train@{train}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{train()}{train()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+train (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{mode = {\ttfamily True} }\end{DoxyParamCaption})}



Definition at line 193 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
193     \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a36a5f4f6f9df0611a6818610518d2cf0}{train}(self, mode=True):
194         self.training = mode
195 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a424c899b5755606c32c7d6a85989ce92}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a424c899b5755606c32c7d6a85989ce92}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!train\+\_\+act@{train\+\_\+act}}
\index{train\+\_\+act@{train\+\_\+act}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{train\+\_\+act()}{train\_act()}}
{\footnotesize\ttfamily def parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+train\+\_\+act (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 226 of file tfidf\+\_\+retriever.\+py.


\begin{DoxyCode}
226     \textcolor{keyword}{def }train\_act(self):
227         \textcolor{keywordflow}{if} (
228             \textcolor{stringliteral}{'ordered'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.opt.get(\textcolor{stringliteral}{'datatype'}, \textcolor{stringliteral}{'train:ordered'})
229             \textcolor{keywordflow}{or} self.opt.get(\textcolor{stringliteral}{'batchsize'}, 1) != 1
230             \textcolor{keywordflow}{or} self.opt.get(\textcolor{stringliteral}{'numthreads'}, 1) != 1
231             \textcolor{keywordflow}{or} self.opt.get(\textcolor{stringliteral}{'num\_epochs'}, 1) != 1
232         ):
233             \textcolor{keywordflow}{raise} RuntimeError(
234                 \textcolor{stringliteral}{'Need to set --batchsize 1, --numthreads 1, \(\backslash\)}
235 \textcolor{stringliteral}{            --datatype train:ordered, --num\_epochs 1'}
236             )
237         obs = self.observation
238         self.current.append(obs)
239         self.episode\_done = obs.get(\textcolor{stringliteral}{'episode\_done'}, \textcolor{keyword}{False})
240 
241         \textcolor{keywordflow}{if} self.episode\_done:
242             \textcolor{keywordflow}{for} ex \textcolor{keywordflow}{in} self.current:
243                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'text'} \textcolor{keywordflow}{in} ex:
244                     text = ex[\textcolor{stringliteral}{'text'}]
245                     self.context.append(text)
246                     \textcolor{keywordflow}{if} len(self.context) > 1:
247                         text = \textcolor{stringliteral}{'\(\backslash\)n'}.join(self.context)
248 
249                 \textcolor{comment}{# add labels to context}
250                 labels = ex.get(\textcolor{stringliteral}{'labels'}, ex.get(\textcolor{stringliteral}{'eval\_labels'}))
251                 label = \textcolor{keywordtype}{None}
252                 \textcolor{keywordflow}{if} labels \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
253                     label = random.choice(labels)
254                     \textcolor{keywordflow}{if} self.include\_labels:
255                         self.context.append(label)
256                 \textcolor{comment}{# use None for ID to auto-assign doc ids--we don't need to}
257                 \textcolor{comment}{# ever reverse-lookup them}
258                 self.triples\_to\_add.append((\textcolor{keywordtype}{None}, text, label))
259 
260             self.episode\_done = \textcolor{keyword}{False}
261             self.current.clear()
262             self.context.clear()
263 
264         \textcolor{keywordflow}{return} \{\textcolor{stringliteral}{'id'}: self.getID(), \textcolor{stringliteral}{'text'}: obs.get(\textcolor{stringliteral}{'labels'}, [\textcolor{stringliteral}{'I don\(\backslash\)'t know'}])[0]\}
265 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a452d71ce3d6e2a52d37d8f305c6ffc2a}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a452d71ce3d6e2a52d37d8f305c6ffc2a}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!cands\+\_\+hash@{cands\+\_\+hash}}
\index{cands\+\_\+hash@{cands\+\_\+hash}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{cands\+\_\+hash}{cands\_hash}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+cands\+\_\+hash}



Definition at line 174 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_ae783880e187479263a6c70a9aa5e4192}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_ae783880e187479263a6c70a9aa5e4192}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!context@{context}}
\index{context@{context}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{context}{context}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+context}



Definition at line 191 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a7578f4be8dd7922d5fbf7ca3148066f3}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a7578f4be8dd7922d5fbf7ca3148066f3}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!context\+\_\+length@{context\+\_\+length}}
\index{context\+\_\+length@{context\+\_\+length}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{context\+\_\+length}{context\_length}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+context\+\_\+length}



Definition at line 178 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a31354a5f1b5f330864fd4dc89d24a858}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a31354a5f1b5f330864fd4dc89d24a858}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!current@{current}}
\index{current@{current}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{current}{current}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+current}



Definition at line 190 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_abd5c27e6f3d7456f3e1c3f86e150b623}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_abd5c27e6f3d7456f3e1c3f86e150b623}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!db@{db}}
\index{db@{db}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{db}{db}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+db}



Definition at line 165 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a2ef924a4c453d858e3f219ec9b3b5ccf}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a2ef924a4c453d858e3f219ec9b3b5ccf}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!db\+\_\+path@{db\+\_\+path}}
\index{db\+\_\+path@{db\+\_\+path}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{db\+\_\+path}{db\_path}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+db\+\_\+path}



Definition at line 142 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a47f6aa16c2ed129ea197b1a6c2094f1c}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a47f6aa16c2ed129ea197b1a6c2094f1c}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!episode\+\_\+done@{episode\+\_\+done}}
\index{episode\+\_\+done@{episode\+\_\+done}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{episode\+\_\+done}{episode\_done}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+episode\+\_\+done}



Definition at line 189 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_aed60a70d24ee40222693ee15f3bb7400}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_aed60a70d24ee40222693ee15f3bb7400}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!id@{id}}
\index{id@{id}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{id}{id}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+id}



Definition at line 135 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_af88bd8f286096dfa2da00ac418ddba60}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_af88bd8f286096dfa2da00ac418ddba60}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!include\+\_\+labels@{include\+\_\+labels}}
\index{include\+\_\+labels@{include\+\_\+labels}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{include\+\_\+labels}{include\_labels}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+include\+\_\+labels}



Definition at line 179 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_aef0b3013cea8b9f2b1564a350a2d5ce2}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_aef0b3013cea8b9f2b1564a350a2d5ce2}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!ranker@{ranker}}
\index{ranker@{ranker}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{ranker}{ranker}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+ranker}



Definition at line 168 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_ab32af649d68ec82588e0b200f8ff11ac}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_ab32af649d68ec82588e0b200f8ff11ac}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!ret\+\_\+mode@{ret\+\_\+mode}}
\index{ret\+\_\+mode@{ret\+\_\+mode}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{ret\+\_\+mode}{ret\_mode}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+ret\+\_\+mode}



Definition at line 173 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a531f5122614612a3b386926632f1ae32}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a531f5122614612a3b386926632f1ae32}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!tfidf\+\_\+args@{tfidf\+\_\+args}}
\index{tfidf\+\_\+args@{tfidf\+\_\+args}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{tfidf\+\_\+args}{tfidf\_args}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+tfidf\+\_\+args}



Definition at line 145 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a505cd0341627439a8648726aa122e02c}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a505cd0341627439a8648726aa122e02c}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!tfidf\+\_\+path@{tfidf\+\_\+path}}
\index{tfidf\+\_\+path@{tfidf\+\_\+path}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{tfidf\+\_\+path}{tfidf\_path}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+tfidf\+\_\+path}



Definition at line 143 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a45b473e654ccb533f900903e154430fd}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a45b473e654ccb533f900903e154430fd}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!training@{training}}
\index{training@{training}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{training}{training}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+training}



Definition at line 194 of file tfidf\+\_\+retriever.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a7f513dbbd924cff1eb534294e59cec75}\label{classparlai_1_1agents_1_1tfidf__retriever_1_1tfidf__retriever_1_1TfidfRetrieverAgent_a7f513dbbd924cff1eb534294e59cec75}} 
\index{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}!triples\+\_\+to\+\_\+add@{triples\+\_\+to\+\_\+add}}
\index{triples\+\_\+to\+\_\+add@{triples\+\_\+to\+\_\+add}!parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent@{parlai\+::agents\+::tfidf\+\_\+retriever\+::tfidf\+\_\+retriever\+::\+Tfidf\+Retriever\+Agent}}
\subsubsection{\texorpdfstring{triples\+\_\+to\+\_\+add}{triples\_to\_add}}
{\footnotesize\ttfamily parlai.\+agents.\+tfidf\+\_\+retriever.\+tfidf\+\_\+retriever.\+Tfidf\+Retriever\+Agent.\+triples\+\_\+to\+\_\+add}



Definition at line 175 of file tfidf\+\_\+retriever.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/agents/tfidf\+\_\+retriever/\hyperlink{agents_2tfidf__retriever_2tfidf__retriever_8py}{tfidf\+\_\+retriever.\+py}\end{DoxyCompactItemize}
