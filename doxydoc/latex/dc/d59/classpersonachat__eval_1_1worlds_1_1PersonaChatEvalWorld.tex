\hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld}{}\section{personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World Class Reference}
\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld}\index{personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World}}


Inheritance diagram for personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=208pt]{db/df0/classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=208pt]{db/d1d/classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a84445a3daf6d694a74e90e3ca0ba65dd}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1worlds_1_1World_a3640d92718acd3e6942a28c1ab3678bd}{opt}, \hyperlink{classparlai_1_1core_1_1worlds_1_1MultiAgentDialogWorld_a05fc93525cb86edef121980fc55f9926}{agents}=None, shared=None, \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a5207a70758bc6eb4943e27e784f68073}{range\+\_\+turn}=(4, 7), \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_ab70b116a8516577ca23c3243d1b54f07}{max\+\_\+turn}=10, \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_af539606fe73799a280c061ed2cdf221b}{max\+\_\+resp\+\_\+time}=120, model\+\_\+agent\+\_\+opt=None, \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a47e3c2213ce2f77d7aafe62aaf771328}{world\+\_\+tag}=\textquotesingle{}N\+O\+NE\textquotesingle{}, \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_abec22d8906eed060d0a9f61d414f3902}{agent\+\_\+timeout\+\_\+shutdown}=120)
\item 
def \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_ac004d69692fbc9b4f0c1c88525de052a}{parley} (self)
\item 
def \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a4adecbc6dcc81ec27b249956d9d8efbf}{episode\+\_\+done} (self)
\item 
def \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_adc9e9dea06a5ede71146239f46957840}{get\+\_\+instruction} (self, agent\+\_\+id=None, tag=\textquotesingle{}first\textquotesingle{})
\item 
def \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a1e6d0c1ef81b0a0b4602d243560dece2}{save\+\_\+data} (self)
\item 
def \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a5d13b07cdfbfd8c54f458a25cf8019ef}{is\+\_\+exact\+\_\+match} (self, act, ag, tolerance=0)
\item 
def \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_af434d8a5840ede3afeb33dd1695aecec}{is\+\_\+msg\+\_\+tooshortlong} (self, act, ag, th\+\_\+min=5, th\+\_\+max=17)
\item 
def \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_ac1264c19866e4ecfa0f38f66c674c0d2}{reset\+\_\+random} (self)
\item 
def \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a679af39a8c51b3721340baea526f1f41}{check\+\_\+timeout} (self, act)
\item 
def \hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a64b6b480061fb606fa41cf6c8b21b943}{review\+\_\+work} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_add33bcde1c71e280efa0a77301e4e552}{turn\+\_\+idx}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a5207a70758bc6eb4943e27e784f68073}{range\+\_\+turn}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_ab70b116a8516577ca23c3243d1b54f07}{max\+\_\+turn}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a75ab1cfe81b98bb2ddd012d599d73536}{n\+\_\+turn}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a8a449c6ca335a73b294776e8a5abf715}{dialog}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a6981b7aa030250b3234750df43a80e50}{task\+\_\+type}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_aa5c8b95b025859d9a4bdb157576832d6}{chat\+\_\+done}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a46dd6910dd3d3f4727d879325d14c322}{n\+\_\+personas}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a827ffc088d6d929acf1e8ca3ba5f3249}{fluency\+\_\+score}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a5efa76866fa27206dc0fa4eaf27090df}{eng\+\_\+score}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a4d58a7f5c0e11e42bb1893503c9ed600}{consistent\+\_\+score}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_acbf918e7115fbd180d8c931d79af46c4}{persona\+\_\+picked}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a47e3c2213ce2f77d7aafe62aaf771328}{world\+\_\+tag}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a7ff6b62f00f998d07cc3cf45e236a83e}{model\+\_\+agent}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_af539606fe73799a280c061ed2cdf221b}{max\+\_\+resp\+\_\+time}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_abec22d8906eed060d0a9f61d414f3902}{agent\+\_\+timeout\+\_\+shutdown}
\item 
\hyperlink{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_aa73f926de1bb6b60465f658f28e96d98}{personas}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 156 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a84445a3daf6d694a74e90e3ca0ba65dd}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a84445a3daf6d694a74e90e3ca0ba65dd}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{agents = {\ttfamily None},  }\item[{}]{shared = {\ttfamily None},  }\item[{}]{range\+\_\+turn = {\ttfamily (4,~7)},  }\item[{}]{max\+\_\+turn = {\ttfamily 10},  }\item[{}]{max\+\_\+resp\+\_\+time = {\ttfamily 120},  }\item[{}]{model\+\_\+agent\+\_\+opt = {\ttfamily None},  }\item[{}]{world\+\_\+tag = {\ttfamily \textquotesingle{}NONE\textquotesingle{}},  }\item[{}]{agent\+\_\+timeout\+\_\+shutdown = {\ttfamily 120} }\end{DoxyParamCaption})}



Definition at line 168 of file worlds.\+py.


\begin{DoxyCode}
168     ):
169         self.turn\_idx = 0
170         self.range\_turn = range\_turn
171         self.max\_turn = max\_turn
172         self.n\_turn = np.random.randint(self.range\_turn[0], self.range\_turn[1]) + 1
173         self.dialog = []
174         self.task\_type = \textcolor{stringliteral}{'sandbox'} \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'is\_sandbox'}] \textcolor{keywordflow}{else} \textcolor{stringliteral}{'live'}
175         self.chat\_done = \textcolor{keyword}{False}
176         self.n\_personas = []
177         self.fluency\_score = len(agents) * [-1]
178         self.eng\_score = len(agents) * [-1]
179         self.consistent\_score = len(agents) * [-1]
180         self.persona\_picked = len(agents) * [\textcolor{keywordtype}{None}]
181         self.world\_tag = world\_tag
182 
183         \textcolor{comment}{# set up model agent}
184         self.model\_agent = \hyperlink{namespaceparlai_1_1core_1_1agents_ad0d54074d4bcc148bb415ab5515a53b5}{create\_agent}(model\_agent\_opt)
185 
186         \textcolor{comment}{# below are timeout protocols}
187         self.max\_resp\_time = max\_resp\_time  \textcolor{comment}{# in secs}
188         self.agent\_timeout\_shutdown = agent\_timeout\_shutdown
189         super().\_\_init\_\_(opt, agents, shared)
190         self.personas = [
191             (ag.persona\_data \textcolor{keywordflow}{if} hasattr(ag, \textcolor{stringliteral}{'persona\_data'}) \textcolor{keywordflow}{else} \textcolor{keywordtype}{None})
192             \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents
193         ]
194 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a679af39a8c51b3721340baea526f1f41}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a679af39a8c51b3721340baea526f1f41}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!check\+\_\+timeout@{check\+\_\+timeout}}
\index{check\+\_\+timeout@{check\+\_\+timeout}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{check\+\_\+timeout()}{check\_timeout()}}
{\footnotesize\ttfamily def personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+check\+\_\+timeout (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{act }\end{DoxyParamCaption})}



Definition at line 595 of file worlds.\+py.


\begin{DoxyCode}
595     \textcolor{keyword}{def }check\_timeout(self, act):
596         \textcolor{keywordflow}{if} act[\textcolor{stringliteral}{'text'}] == \textcolor{stringliteral}{'[TIMEOUT]'} \textcolor{keywordflow}{and} act[\textcolor{stringliteral}{'episode\_done'}]:
597             control\_msg = \{\textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{True}\}
598             control\_msg[\textcolor{stringliteral}{'id'}] = \textcolor{stringliteral}{'SYSTEM'}
599             control\_msg[\textcolor{stringliteral}{'text'}] = self.get\_instruction(
600                 agent\_id=act[\textcolor{stringliteral}{'id'}], tag=\textcolor{stringliteral}{'timeout'}
601             )
602             \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents:
603                 \textcolor{keywordflow}{if} ag.id != act[\textcolor{stringliteral}{'id'}]:
604                     ag.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
605             self.chat\_done = \textcolor{keyword}{True}
606             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
607         \textcolor{keywordflow}{else}:
608             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
609 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a4adecbc6dcc81ec27b249956d9d8efbf}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a4adecbc6dcc81ec27b249956d9d8efbf}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!episode\+\_\+done@{episode\+\_\+done}}
\index{episode\+\_\+done@{episode\+\_\+done}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{episode\+\_\+done()}{episode\_done()}}
{\footnotesize\ttfamily def personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+episode\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 434 of file worlds.\+py.


\begin{DoxyCode}
434     \textcolor{keyword}{def }episode\_done(self):
435         \textcolor{keywordflow}{return} self.chat\_done
436 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_adc9e9dea06a5ede71146239f46957840}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_adc9e9dea06a5ede71146239f46957840}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!get\+\_\+instruction@{get\+\_\+instruction}}
\index{get\+\_\+instruction@{get\+\_\+instruction}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{get\+\_\+instruction()}{get\_instruction()}}
{\footnotesize\ttfamily def personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+get\+\_\+instruction (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+id = {\ttfamily None},  }\item[{}]{tag = {\ttfamily \textquotesingle{}first\textquotesingle{}} }\end{DoxyParamCaption})}



Definition at line 437 of file worlds.\+py.


\begin{DoxyCode}
437     \textcolor{keyword}{def }get\_instruction(self, agent\_id=None, tag='first'):
438         \textcolor{keywordflow}{if} tag == \textcolor{stringliteral}{'start'}:
439             \textcolor{keywordflow}{return} (
440                 \textcolor{stringliteral}{'\(\backslash\)nSuccessfully matched. Now let\(\backslash\)'s get to know each other through the chat! \(\backslash\)n\(\backslash\)}
441 \textcolor{stringliteral}{                    You need to finish at least <b>'}
442                 + \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(self.n\_turn)
443                 + \textcolor{stringliteral}{' chat turns</b>, \(\backslash\)}
444 \textcolor{stringliteral}{                    after that you can click the "Done" button to end the chat. \(\backslash\)n \(\backslash\)}
445 \textcolor{stringliteral}{                    <b>You can track your character description on the left.</b> \(\backslash\)}
446 \textcolor{stringliteral}{                    \(\backslash\)n <span style="color:blue"><b>Please try to speak to the other person as if you are
       the character assigned.</b></span> \(\backslash\)n \(\backslash\)}
447 \textcolor{stringliteral}{                    <span style="color:blue"><b>Do not trivially copy the character descriptions into the
       message.</b></span>'}
448             )
449 
450         \textcolor{keywordflow}{if} tag == \textcolor{stringliteral}{'chat\_not\_done'}:
451             \textcolor{keywordflow}{return} (
452                 \textcolor{stringliteral}{'Sorry, we need at least <b>'}
453                 + \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(self.n\_turn + 1 - self.turn\_idx)
454                 + \textcolor{stringliteral}{' more turn(s)</b> to finish. '}
455                 + \textcolor{stringliteral}{'Please send a new message:'}
456             )
457 
458         \textcolor{keywordflow}{if} tag == \textcolor{stringliteral}{'timeout'}:
459             \textcolor{keywordflow}{return} \textcolor{stringliteral}{'<b>\{\}</b> is timeout. \(\backslash\)}
460 \textcolor{stringliteral}{                    Please click the "Done with this HIT" button below to exit this HIT. No rejections.'}.
      \hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
461                 agent\_id
462             )
463 
464         \textcolor{keywordflow}{if} tag == \textcolor{stringliteral}{'exceed\_min\_turns'}:
465             \textcolor{keywordflow}{return} \textcolor{stringliteral}{'\(\backslash\)n \{\} chat turns finished! \(\backslash\)n Keep chatting or you can click the "Done" button to end
       the chat if it\(\backslash\)'s your turn.'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
466                 self.n\_turn
467             )
468 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a5d13b07cdfbfd8c54f458a25cf8019ef}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a5d13b07cdfbfd8c54f458a25cf8019ef}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!is\+\_\+exact\+\_\+match@{is\+\_\+exact\+\_\+match}}
\index{is\+\_\+exact\+\_\+match@{is\+\_\+exact\+\_\+match}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{is\+\_\+exact\+\_\+match()}{is\_exact\_match()}}
{\footnotesize\ttfamily def personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+is\+\_\+exact\+\_\+match (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{act,  }\item[{}]{ag,  }\item[{}]{tolerance = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 537 of file worlds.\+py.


\begin{DoxyCode}
537     \textcolor{keyword}{def }is\_exact\_match(self, act, ag, tolerance=0):
538         \textcolor{keywordflow}{if} act[\textcolor{stringliteral}{'episode\_done'}]:
539             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
540 
541         control\_msg = \{\textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{False}\}
542         control\_msg[\textcolor{stringliteral}{'id'}] = \textcolor{stringliteral}{'SYSTEM'}
543 
544         text = act[\textcolor{stringliteral}{'text'}]
545         \textcolor{keywordflow}{if} text \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} [\textcolor{stringliteral}{''}, \textcolor{stringliteral}{' '}, \textcolor{stringliteral}{'  '}, \textcolor{stringliteral}{'   '}]:
546             n\_word\_match = 0
547             \textcolor{keywordflow}{for} per \textcolor{keywordflow}{in} ag.persona\_data:
548                 per\_parse = per.split(\textcolor{stringliteral}{' '})
549                 regular\_words = [\textcolor{stringliteral}{''}, \textcolor{stringliteral}{' '}, \textcolor{stringliteral}{'I'}, \textcolor{stringliteral}{'I\(\backslash\)'m'}, \textcolor{stringliteral}{'My'}, \textcolor{stringliteral}{'i'}]
550                 \textcolor{keywordflow}{for} r\_w \textcolor{keywordflow}{in} regular\_words:
551                     \textcolor{keywordflow}{if} r\_w \textcolor{keywordflow}{in} per\_parse:
552                         per\_parse.remove(r\_w)
553                 per\_subseq = [
554                     \textcolor{stringliteral}{' '}.join(per\_parse[i : i + len(per\_parse) - tolerance])
555                     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(tolerance + 1)
556                 ]
557                 \textcolor{keywordflow}{for} pp \textcolor{keywordflow}{in} per\_subseq:
558                     \textcolor{keywordflow}{if} pp \textcolor{keywordflow}{in} [\textcolor{stringliteral}{''}, \textcolor{stringliteral}{' '}, \textcolor{stringliteral}{'  '}, \textcolor{stringliteral}{'   '}]:
559                         per\_subseq.remove(pp)
560                 n\_word\_match += sum([(paa \textcolor{keywordflow}{in} text) \textcolor{keywordflow}{for} paa \textcolor{keywordflow}{in} per\_subseq])
561             \textcolor{keywordflow}{if} n\_word\_match > 0:
562                 control\_msg[
563                     \textcolor{stringliteral}{'text'}
564                 ] = \textcolor{stringliteral}{'We found that you <b><span style="color:red">trivially copied character
       descriptions</span></b>. Please rephrase your message again.'}
565                 ag.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
566                 \textcolor{keywordflow}{return} \textcolor{keyword}{True}
567             \textcolor{keywordflow}{else}:
568                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}
569 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_af434d8a5840ede3afeb33dd1695aecec}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_af434d8a5840ede3afeb33dd1695aecec}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!is\+\_\+msg\+\_\+tooshortlong@{is\+\_\+msg\+\_\+tooshortlong}}
\index{is\+\_\+msg\+\_\+tooshortlong@{is\+\_\+msg\+\_\+tooshortlong}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{is\+\_\+msg\+\_\+tooshortlong()}{is\_msg\_tooshortlong()}}
{\footnotesize\ttfamily def personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+is\+\_\+msg\+\_\+tooshortlong (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{act,  }\item[{}]{ag,  }\item[{}]{th\+\_\+min = {\ttfamily 5},  }\item[{}]{th\+\_\+max = {\ttfamily 17} }\end{DoxyParamCaption})}



Definition at line 570 of file worlds.\+py.


\begin{DoxyCode}
570     \textcolor{keyword}{def }is\_msg\_tooshortlong(self, act, ag, th\_min=5, th\_max=17):
571         \textcolor{keywordflow}{if} act[\textcolor{stringliteral}{'episode\_done'}]:
572             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
573 
574         control\_msg = \{\textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{False}\}
575         control\_msg[\textcolor{stringliteral}{'id'}] = \textcolor{stringliteral}{'SYSTEM'}
576 
577         msg\_len = len(act[\textcolor{stringliteral}{'text'}].split(\textcolor{stringliteral}{' '}))
578         \textcolor{keywordflow}{if} msg\_len < th\_min:
579             control\_msg[
580                 \textcolor{stringliteral}{'text'}
581             ] = \textcolor{stringliteral}{'Your message is too short, please make it more than <b><span style="color:red">5
       words</span></b>.'}
582             ag.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
583             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
584         \textcolor{keywordflow}{if} msg\_len > th\_max:
585             control\_msg[
586                 \textcolor{stringliteral}{'text'}
587             ] = \textcolor{stringliteral}{'Your message is too long, please make it less than <b><span style="color:red">15
       words</span></b>.'}
588             ag.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
589             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
590         \textcolor{keywordflow}{return} \textcolor{keyword}{False}
591 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_ac004d69692fbc9b4f0c1c88525de052a}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_ac004d69692fbc9b4f0c1c88525de052a}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!parley@{parley}}
\index{parley@{parley}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{parley()}{parley()}}
{\footnotesize\ttfamily def personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+parley (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 195 of file worlds.\+py.


\begin{DoxyCode}
195     \textcolor{keyword}{def }parley(self):
196         self.turn\_idx += 1
197 
198         control\_msg = \{\textcolor{stringliteral}{'episode\_done'}: \textcolor{keyword}{False}\}
199         control\_msg[\textcolor{stringliteral}{'id'}] = \textcolor{stringliteral}{'SYSTEM'}
200 
201         print(self.world\_tag + \textcolor{stringliteral}{' is at turn \{\}...'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.turn\_idx))
202 
203         \textcolor{stringliteral}{'''If at first turn, we need to give each agent their persona'''}
204         \textcolor{keywordflow}{if} self.turn\_idx == 1:
205             \textcolor{keywordflow}{for} idx, agent \textcolor{keywordflow}{in} enumerate(self.agents):
206                 persona\_text = \textcolor{stringliteral}{''}
207                 \textcolor{keywordflow}{for} s \textcolor{keywordflow}{in} self.personas[idx]:
208                     persona\_text += (
209                         \textcolor{stringliteral}{'<b><span style="color:blue">'}
210                         \textcolor{stringliteral}{'\{\}\(\backslash\)n</span></b>'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(s.strip())
211                     )
212                 control\_msg[\textcolor{stringliteral}{'persona\_text'}] = persona\_text
213                 control\_msg[\textcolor{stringliteral}{'text'}] = self.get\_instruction(
214                     tag=\textcolor{stringliteral}{'start'}, agent\_id=agent.id
215                 )
216                 agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
217                 \textcolor{keywordflow}{if} idx == 0:
218                     time.sleep(3)
219 
220         \textcolor{stringliteral}{'''If we get to the min turns, inform turker that they can end if they}
221 \textcolor{stringliteral}{           want}
222 \textcolor{stringliteral}{        '''}
223         \textcolor{keywordflow}{if} self.turn\_idx == self.n\_turn + 1:
224             \textcolor{keywordflow}{for} idx, agent \textcolor{keywordflow}{in} enumerate(self.agents):
225                 control\_msg[\textcolor{stringliteral}{'text'}] = self.get\_instruction(idx, tag=\textcolor{stringliteral}{'exceed\_min\_turns'})
226                 control\_msg[\textcolor{stringliteral}{'exceed\_min\_turns'}] = \textcolor{keyword}{True}
227                 agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
228 
229         \textcolor{stringliteral}{'''Otherwise, we proceed accordingly'''}
230         acts = []
231         \textcolor{comment}{# MTurk agent turn}
232         idx = 0
233         agent = self.agents[0]  \textcolor{comment}{# Mturk agent}
234         acts.append(agent.act(timeout=self.max\_resp\_time))
235         \textcolor{keywordflow}{if} acts[idx] \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
236             \textcolor{keywordflow}{if} acts[idx][\textcolor{stringliteral}{'text'}] == \textcolor{stringliteral}{'PERSONA'}:
237                 \_text = \textcolor{stringliteral}{''}
238                 \textcolor{keywordflow}{for} s \textcolor{keywordflow}{in} agent.model\_persona[1][\textcolor{stringliteral}{'persona'}]:
239                     \_text += (
240                         \textcolor{stringliteral}{'<b><span style="color:blue">'} + s.strip() + \textcolor{stringliteral}{'</span></b><br>'}
241                     )
242                 control\_msg[\textcolor{stringliteral}{'text'}] = \textcolor{stringliteral}{'The model persona is: \(\backslash\)n'} + \_text
243                 agent.observe(control\_msg)
244                 \textcolor{keywordflow}{return}
245             \textcolor{keywordflow}{while} self.is\_msg\_tooshortlong(acts[idx], agent) \textcolor{keywordflow}{or} self.is\_exact\_match(
246                 acts[idx], agent
247             ):
248                 acts[idx] = agent.act()
249 
250             \textcolor{keywordflow}{if} acts[idx][\textcolor{stringliteral}{'episode\_done'}]:
251                 self.chat\_done = \textcolor{keyword}{True}
252                 self.check\_timeout(acts[idx])
253                 \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents:
254                     \textcolor{keywordflow}{if} ag != agent \textcolor{keywordflow}{and} ag.some\_agent\_disconnected:
255                         control\_msg[
256                             \textcolor{stringliteral}{'text'}
257                         ] = \textcolor{stringliteral}{'The other worker unexpectedly diconnected. \(\backslash\)n \(\backslash\)}
258 \textcolor{stringliteral}{                            Please click <span style="color:blue"><b>Done with this HIT</b></span> button
       below to exit this HIT. No rejections.'}
259                         ag.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
260                         \textcolor{keywordflow}{return}
261                 \textcolor{keywordflow}{if} self.turn\_idx > self.n\_turn:
262                     acts = [\textcolor{keywordtype}{None}]
263 
264                     \textcolor{comment}{# Fluency Check}
265                     \textcolor{keywordflow}{for} idx, agent \textcolor{keywordflow}{in} enumerate(self.agents):
266                         control\_msg[
267                             \textcolor{stringliteral}{'text'}
268                         ] = \textcolor{stringliteral}{'Now the conversation is completed! \(\backslash\)n Please evaluate the other person\(\backslash\)'s \(\backslash\)}
269 \textcolor{stringliteral}{                                               <span style="color:blue"><b>fluency</b></span> during this
       conversation by \(\backslash\)}
270 \textcolor{stringliteral}{                                               <b>entering a score from [1, 2, 3, 4, 5]</b> below, \(\backslash\)}
271 \textcolor{stringliteral}{                                               <span style="color:blue">fluency reflects whether the other
       people\(\backslash\)'s words are accurate, and whether you can read it quickly and with ease.</span>\(\backslash\)}
272 \textcolor{stringliteral}{                                               (1 means "not fluent at all" and 5 means "extremely fluent",
       e.g., You can enter 3 for an OK fluency)'}
273                         agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
274                         acts[idx] = agent.act(timeout=self.max\_resp\_time)
275                         \textcolor{keywordflow}{while} acts[idx][\textcolor{stringliteral}{'text'}] \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'1'}, \textcolor{stringliteral}{'2'}, \textcolor{stringliteral}{'3'}, \textcolor{stringliteral}{'4'}, \textcolor{stringliteral}{'5'}]:
276                             control\_msg[
277                                 \textcolor{stringliteral}{'text'}
278                             ] = \textcolor{stringliteral}{"The score you entered must be in [1, 2, 3, 4, 5]. Remember to click the
       SEND button and not the DONE button. Please try again:"}
279                             agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
280                             acts[idx] = agent.act(timeout=self.max\_resp\_time)
281                         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'text'} \textcolor{keywordflow}{in} acts[idx] \textcolor{keywordflow}{and} acts[idx][\textcolor{stringliteral}{'text'}] \textcolor{keywordflow}{in} [
282                             \textcolor{stringliteral}{'1'},
283                             \textcolor{stringliteral}{'2'},
284                             \textcolor{stringliteral}{'3'},
285                             \textcolor{stringliteral}{'4'},
286                             \textcolor{stringliteral}{'5'},
287                         ]:
288                             self.fluency\_score[idx] = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(acts[idx][\textcolor{stringliteral}{'text'}])
289 
290                     \textcolor{comment}{# Engagingness Check}
291                     \textcolor{keywordflow}{for} idx, agent \textcolor{keywordflow}{in} enumerate(self.agents):
292                         control\_msg[
293                             \textcolor{stringliteral}{'text'}
294                         ] = \textcolor{stringliteral}{'Now please evaluate the other people\(\backslash\)'s \(\backslash\)}
295 \textcolor{stringliteral}{                                              <span style="color:blue"><b>engagingness DISREGARDING the
       fluency</b></span> \(\backslash\)}
296 \textcolor{stringliteral}{                                              during this conversation by <b>entering a score from [1, 2,
       3, 4, 5]</b> below: \(\backslash\)}
297 \textcolor{stringliteral}{                                               (1 means "not engaging at all" and 5 means "extremely
       engaging", e.g., You can enter 3 for an OK dialog)'}
298                         agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
299                         acts[idx] = agent.act(timeout=self.max\_resp\_time)
300                         \textcolor{keywordflow}{while} acts[idx][\textcolor{stringliteral}{'text'}] \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'1'}, \textcolor{stringliteral}{'2'}, \textcolor{stringliteral}{'3'}, \textcolor{stringliteral}{'4'}, \textcolor{stringliteral}{'5'}]:
301                             control\_msg[
302                                 \textcolor{stringliteral}{'text'}
303                             ] = \textcolor{stringliteral}{"The score you entered must be in [1, 2, 3, 4, 5]. Remember to click the
       SEND button and not the DONE button. Please try again:"}
304                             agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
305                             acts[idx] = agent.act(timeout=self.max\_resp\_time)
306                         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'text'} \textcolor{keywordflow}{in} acts[idx] \textcolor{keywordflow}{and} acts[idx][\textcolor{stringliteral}{'text'}] \textcolor{keywordflow}{in} [
307                             \textcolor{stringliteral}{'1'},
308                             \textcolor{stringliteral}{'2'},
309                             \textcolor{stringliteral}{'3'},
310                             \textcolor{stringliteral}{'4'},
311                             \textcolor{stringliteral}{'5'},
312                         ]:
313                             self.eng\_score[idx] = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(acts[idx][\textcolor{stringliteral}{'text'}])
314 
315                     \textcolor{comment}{# Check Consistency}
316                     \textcolor{keywordflow}{for} idx, agent \textcolor{keywordflow}{in} enumerate(self.agents):
317                         control\_msg[
318                             \textcolor{stringliteral}{'text'}
319                         ] = \textcolor{stringliteral}{'Now please evaluate the other people\(\backslash\)'s \(\backslash\)}
320 \textcolor{stringliteral}{                                              <span style="color:blue"><b>consistency of persona</b></span>
       \(\backslash\)}
321 \textcolor{stringliteral}{                                              (e.g., "I have a dog" followed by "I have no pets" is not
       consistent)\(\backslash\)}
322 \textcolor{stringliteral}{                                              during this conversation by <b>entering a score from [1, 2,
       3, 4, 5]</b> below: \(\backslash\)}
323 \textcolor{stringliteral}{                                               (1 means "not consistent at all" and 5 means "extremely
       consistent", e.g., You can enter 3 for an OK consistency)'}
324                         agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
325                         acts[idx] = agent.act(timeout=self.max\_resp\_time)
326                         \textcolor{keywordflow}{while} acts[idx][\textcolor{stringliteral}{'text'}] \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'1'}, \textcolor{stringliteral}{'2'}, \textcolor{stringliteral}{'3'}, \textcolor{stringliteral}{'4'}, \textcolor{stringliteral}{'5'}]:
327                             control\_msg[
328                                 \textcolor{stringliteral}{'text'}
329                             ] = \textcolor{stringliteral}{"The score you entered must be in [1, 2, 3, 4, 5]. Remember to click the
       SEND button and not the DONE button. Please try again:"}
330                             agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
331                             acts[idx] = agent.act(timeout=self.max\_resp\_time)
332                         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'text'} \textcolor{keywordflow}{in} acts[idx] \textcolor{keywordflow}{and} acts[idx][\textcolor{stringliteral}{'text'}] \textcolor{keywordflow}{in} [
333                             \textcolor{stringliteral}{'1'},
334                             \textcolor{stringliteral}{'2'},
335                             \textcolor{stringliteral}{'3'},
336                             \textcolor{stringliteral}{'4'},
337                             \textcolor{stringliteral}{'5'},
338                         ]:
339                             self.consistent\_score[idx] = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(acts[idx][\textcolor{stringliteral}{'text'}])
340 
341                     \textcolor{comment}{# Persona Selection}
342                     \textcolor{keywordflow}{for} idx, agent \textcolor{keywordflow}{in} enumerate(self.agents):
343                         model\_idx = agent.model\_persona[0]
344                         self\_idx = agent.persona\_idx
345                         false\_idx\_list = [
346                             x
347                             \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} range(
348                                 len(agent.persona\_generator.personas\_name\_list)
349                             )
350                         ]
351                         false\_idx\_list.remove(self\_idx)
352                         false\_idx\_list.remove(model\_idx)
353                         false\_idx = random.choice(false\_idx\_list)
354                         false\_data = np.load(
355                             os.path.join(
356                                 agent.persona\_generator.personas\_path,
357                                 agent.persona\_generator.personas\_name\_list[false\_idx],
358                             )
359                         )
360                         cand\_text = []
361                         \textcolor{keywordflow}{for} dt \textcolor{keywordflow}{in} [agent.model\_persona[1], false\_data]:
362                             \textcolor{keywordflow}{if} dt == agent.model\_persona[1]:
363                                 is\_correct = \textcolor{keyword}{True}
364                             \textcolor{keywordflow}{else}:
365                                 is\_correct = \textcolor{keyword}{False}
366                             \_text = \textcolor{stringliteral}{''}
367                             \textcolor{keywordflow}{for} s \textcolor{keywordflow}{in} dt:
368                                 \_text += (
369                                     \textcolor{stringliteral}{'<b><span style="color:blue">'}
370                                     + s.strip()
371                                     + \textcolor{stringliteral}{'</span></b><br>'}
372                                 )
373                             cand\_text.append((is\_correct, \_text))
374                         random.shuffle(cand\_text)
375 
376                         control\_msg[\textcolor{stringliteral}{'text'}] = (
377                             \textcolor{stringliteral}{'Now we show you two personas below, please select the one that is more likely
       to match \(\backslash\)}
378 \textcolor{stringliteral}{                                               with the person you just talked to, by entering 1 or 2: \(\backslash\)n'}
379                             + \textcolor{stringliteral}{'1.<br>'}
380                             + cand\_text[0][1]
381                             + \textcolor{stringliteral}{'<br>'}
382                             + \textcolor{stringliteral}{'2.<br>'}
383                             + cand\_text[1][1]
384                         )
385                         agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
386                         acts[idx] = agent.act(timeout=self.max\_resp\_time)
387                         \textcolor{keywordflow}{while} acts[idx][\textcolor{stringliteral}{'text'}] \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'1'}, \textcolor{stringliteral}{'2'}]:
388                             control\_msg[
389                                 \textcolor{stringliteral}{'text'}
390                             ] = \textcolor{stringliteral}{"The Persona index you entered must be 1 or 2. Remember to click the SEND
       button and not the DONE button. Please try again:"}
391                             agent.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
392                             acts[idx] = agent.act(timeout=self.max\_resp\_time)
393 
394                         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'text'} \textcolor{keywordflow}{in} acts[idx] \textcolor{keywordflow}{and} acts[idx][\textcolor{stringliteral}{'text'}] \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'1'}, \textcolor{stringliteral}{'2'}]:
395                             self.persona\_picked[idx] = cand\_text[
396                                 \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(acts[idx][\textcolor{stringliteral}{'text'}]) - 1
397                             ][0]
398 
399                     \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents:
400                         ag.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(acts[idx]))
401                         control\_msg[
402                             \textcolor{stringliteral}{'text'}
403                         ] = \textcolor{stringliteral}{'One of you ended the chat. Thanks for your time! \(\backslash\)nPlease click <span style="
      color:blue"><b>Done with this HIT</b></span> button below to finish this HIT.'}
404                         ag.observe(\hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(control\_msg))
405                 \textcolor{keywordflow}{return}
406 
407             self.dialog.append((idx, acts[idx][\textcolor{stringliteral}{'text'}]))
408             acts[idx][\textcolor{stringliteral}{'eval\_labels'}] = [\textcolor{stringliteral}{'\_\_NULL\_\_'}]
409             self.model\_agent.observe(acts[idx])
410 
411         \textcolor{comment}{# Model\_agent turn}
412         idx = 1
413         acts.append(self.model\_agent.act())
414 
415         \textcolor{keywordflow}{for} (sb\_0, sb\_1) \textcolor{keywordflow}{in} [
416             (\textcolor{stringliteral}{' .'}, \textcolor{stringliteral}{'.'}),
417             (\textcolor{stringliteral}{' ,'}, \textcolor{stringliteral}{','}),
418             (\textcolor{stringliteral}{' ?'}, \textcolor{stringliteral}{'?'}),
419             (\textcolor{stringliteral}{' !'}, \textcolor{stringliteral}{'!'}),
420             (\textcolor{stringliteral}{'i '}, \textcolor{stringliteral}{'I '}),
421         ]:
422             acts[idx][\textcolor{stringliteral}{'text'}] = acts[idx][\textcolor{stringliteral}{'text'}].replace(sb\_0, sb\_1)
423         acts[idx][\textcolor{stringliteral}{'text'}].capitalize()
424         acts[idx][\textcolor{stringliteral}{'id'}] = \textcolor{stringliteral}{'PERSON\_2'}
425         acts[idx][\textcolor{stringliteral}{'message\_id'}] = (
426             acts[0][\textcolor{stringliteral}{'message\_id'}][:-1] + \textcolor{stringliteral}{'0'}
427             \textcolor{keywordflow}{if} acts[0][\textcolor{stringliteral}{'message\_id'}][-1] != \textcolor{stringliteral}{'0'}
428             \textcolor{keywordflow}{else} acts[0][\textcolor{stringliteral}{'message\_id'}][:-1] + \textcolor{stringliteral}{'1'}
429         )
430         self.dialog.append((idx, acts[idx][\textcolor{stringliteral}{'text'}]))
431         time.sleep(len(acts[idx][\textcolor{stringliteral}{'text'}].split(\textcolor{stringliteral}{' '})) * 0.5)
432         agent.observe(acts[idx])
433 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_ac1264c19866e4ecfa0f38f66c674c0d2}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_ac1264c19866e4ecfa0f38f66c674c0d2}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!reset\+\_\+random@{reset\+\_\+random}}
\index{reset\+\_\+random@{reset\+\_\+random}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{reset\+\_\+random()}{reset\_random()}}
{\footnotesize\ttfamily def personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+reset\+\_\+random (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 592 of file worlds.\+py.


\begin{DoxyCode}
592     \textcolor{keyword}{def }reset\_random(self):
593         self.n\_turn = np.random.randint(self.range\_turn[0], self.range\_turn[1]) + 1
594 
\end{DoxyCode}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a64b6b480061fb606fa41cf6c8b21b943}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a64b6b480061fb606fa41cf6c8b21b943}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!review\+\_\+work@{review\+\_\+work}}
\index{review\+\_\+work@{review\+\_\+work}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{review\+\_\+work()}{review\_work()}}
{\footnotesize\ttfamily def personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+review\+\_\+work (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 610 of file worlds.\+py.


\begin{DoxyCode}
610     \textcolor{keyword}{def }review\_work(self):
611         \textcolor{keyword}{global} review\_agent
612 
613         \textcolor{keyword}{def }review\_agent(ag):
614             \textcolor{keywordflow}{if} hasattr(ag, \textcolor{stringliteral}{'not\_approve'}):
615                 \textcolor{keywordflow}{pass}
616             \textcolor{keywordflow}{else}:
617                 ag.approve\_work()
618 
619         Parallel(n\_jobs=len(self.agents), backend=\textcolor{stringliteral}{'threading'})(
620             delayed(review\_agent)(agent) \textcolor{keywordflow}{for} agent \textcolor{keywordflow}{in} self.agents
621         )
622 \end{DoxyCode}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a1e6d0c1ef81b0a0b4602d243560dece2}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a1e6d0c1ef81b0a0b4602d243560dece2}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!save\+\_\+data@{save\+\_\+data}}
\index{save\+\_\+data@{save\+\_\+data}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{save\+\_\+data()}{save\_data()}}
{\footnotesize\ttfamily def personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+save\+\_\+data (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 469 of file worlds.\+py.


\begin{DoxyCode}
469     \textcolor{keyword}{def }save\_data(self):
470         \textcolor{comment}{# save persona\_idx\_stack}
471         convo\_finished = \textcolor{keyword}{True}
472         bad\_workers = []
473         \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents:
474             \textcolor{keywordflow}{if} (
475                 ag.hit\_is\_abandoned
476                 \textcolor{keywordflow}{or} ag.hit\_is\_returned
477                 \textcolor{keywordflow}{or} ag.disconnected
478                 \textcolor{keywordflow}{or} ag.hit\_is\_expired
479             ):
480                 bad\_workers.append(ag.worker\_id)
481                 convo\_finished = \textcolor{keyword}{False}
482         \textcolor{keywordflow}{if} (
483             \textcolor{keywordflow}{not} convo\_finished
484             \textcolor{keywordflow}{or} self.dialog == []
485             \textcolor{keywordflow}{or} self.eng\_score[0] == -1
486             \textcolor{keywordflow}{or} self.fluency\_score[0] == -1
487             \textcolor{keywordflow}{or} self.consistent\_score[0] == -1
488         ):
489             \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents:
490                 ag.not\_approve = \textcolor{keyword}{True}
491                 ag.persona\_generator.push\_persona(ag.persona\_idx)
492                 print(
493                     \textcolor{stringliteral}{"\(\backslash\)n******* Push persona \{\} back to stack. *******\(\backslash\)n"}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
494                         ag.persona\_idx
495                     )
496                 )
497 
498         data\_path = self.opt[\textcolor{stringliteral}{'data\_path'}]
499         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(data\_path):
500             os.makedirs(data\_path)
501         \textcolor{keywordflow}{if} convo\_finished:
502             filename = os.path.join(
503                 data\_path,
504                 \textcolor{stringliteral}{'\{\}\_\{\}\_\{\}.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
505                     time.strftime(\textcolor{stringliteral}{"%Y%m%d-%H%M%S"}),
506                     np.random.randint(0, 1000),
507                     self.task\_type,
508                 ),
509             )
510         \textcolor{keywordflow}{else}:
511             filename = os.path.join(
512                 data\_path,
513                 \textcolor{stringliteral}{'\{\}\_\{\}\_\{\}\_incomplete.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
514                     time.strftime(\textcolor{stringliteral}{"%Y%m%d-%H%M%S"}),
515                     np.random.randint(0, 1000),
516                     self.task\_type,
517                 ),
518             )
519         print(self.world\_tag + \textcolor{stringliteral}{': Data successfully saved at \{\}.'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(filename))
520         self.personas.append(self.agents[0].model\_persona[1])
521         pickle.dump(
522             \{
523                 \textcolor{stringliteral}{'personas'}: self.personas,
524                 \textcolor{stringliteral}{'dialog'}: self.dialog,
525                 \textcolor{stringliteral}{'workers'}: [ag.worker\_id \textcolor{keywordflow}{for} ag \textcolor{keywordflow}{in} self.agents],
526                 \textcolor{stringliteral}{'bad\_workers'}: bad\_workers,
527                 \textcolor{stringliteral}{'n\_turn'}: self.n\_turn,
528                 \textcolor{stringliteral}{'fluency\_score'}: self.fluency\_score,
529                 \textcolor{stringliteral}{'eng\_score'}: self.eng\_score,
530                 \textcolor{stringliteral}{'consistent\_score'}: self.consistent\_score,
531                 \textcolor{stringliteral}{'persona\_picked'}: self.persona\_picked,
532                 \textcolor{stringliteral}{'n\_personas'}: self.n\_personas,
533             \},
534             open(filename, \textcolor{stringliteral}{'wb'}),
535         )
536 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_abec22d8906eed060d0a9f61d414f3902}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_abec22d8906eed060d0a9f61d414f3902}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!agent\+\_\+timeout\+\_\+shutdown@{agent\+\_\+timeout\+\_\+shutdown}}
\index{agent\+\_\+timeout\+\_\+shutdown@{agent\+\_\+timeout\+\_\+shutdown}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{agent\+\_\+timeout\+\_\+shutdown}{agent\_timeout\_shutdown}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+agent\+\_\+timeout\+\_\+shutdown}



Definition at line 188 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_aa5c8b95b025859d9a4bdb157576832d6}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_aa5c8b95b025859d9a4bdb157576832d6}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!chat\+\_\+done@{chat\+\_\+done}}
\index{chat\+\_\+done@{chat\+\_\+done}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{chat\+\_\+done}{chat\_done}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+chat\+\_\+done}



Definition at line 175 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a4d58a7f5c0e11e42bb1893503c9ed600}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a4d58a7f5c0e11e42bb1893503c9ed600}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!consistent\+\_\+score@{consistent\+\_\+score}}
\index{consistent\+\_\+score@{consistent\+\_\+score}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{consistent\+\_\+score}{consistent\_score}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+consistent\+\_\+score}



Definition at line 179 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a8a449c6ca335a73b294776e8a5abf715}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a8a449c6ca335a73b294776e8a5abf715}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!dialog@{dialog}}
\index{dialog@{dialog}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{dialog}{dialog}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+dialog}



Definition at line 173 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a5efa76866fa27206dc0fa4eaf27090df}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a5efa76866fa27206dc0fa4eaf27090df}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!eng\+\_\+score@{eng\+\_\+score}}
\index{eng\+\_\+score@{eng\+\_\+score}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{eng\+\_\+score}{eng\_score}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+eng\+\_\+score}



Definition at line 178 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a827ffc088d6d929acf1e8ca3ba5f3249}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a827ffc088d6d929acf1e8ca3ba5f3249}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!fluency\+\_\+score@{fluency\+\_\+score}}
\index{fluency\+\_\+score@{fluency\+\_\+score}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{fluency\+\_\+score}{fluency\_score}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+fluency\+\_\+score}



Definition at line 177 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_af539606fe73799a280c061ed2cdf221b}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_af539606fe73799a280c061ed2cdf221b}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!max\+\_\+resp\+\_\+time@{max\+\_\+resp\+\_\+time}}
\index{max\+\_\+resp\+\_\+time@{max\+\_\+resp\+\_\+time}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{max\+\_\+resp\+\_\+time}{max\_resp\_time}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+max\+\_\+resp\+\_\+time}



Definition at line 187 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_ab70b116a8516577ca23c3243d1b54f07}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_ab70b116a8516577ca23c3243d1b54f07}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!max\+\_\+turn@{max\+\_\+turn}}
\index{max\+\_\+turn@{max\+\_\+turn}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{max\+\_\+turn}{max\_turn}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+max\+\_\+turn}



Definition at line 171 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a7ff6b62f00f998d07cc3cf45e236a83e}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a7ff6b62f00f998d07cc3cf45e236a83e}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!model\+\_\+agent@{model\+\_\+agent}}
\index{model\+\_\+agent@{model\+\_\+agent}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{model\+\_\+agent}{model\_agent}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+model\+\_\+agent}



Definition at line 184 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a46dd6910dd3d3f4727d879325d14c322}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a46dd6910dd3d3f4727d879325d14c322}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!n\+\_\+personas@{n\+\_\+personas}}
\index{n\+\_\+personas@{n\+\_\+personas}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{n\+\_\+personas}{n\_personas}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+n\+\_\+personas}



Definition at line 176 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a75ab1cfe81b98bb2ddd012d599d73536}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a75ab1cfe81b98bb2ddd012d599d73536}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!n\+\_\+turn@{n\+\_\+turn}}
\index{n\+\_\+turn@{n\+\_\+turn}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{n\+\_\+turn}{n\_turn}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+n\+\_\+turn}



Definition at line 172 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_acbf918e7115fbd180d8c931d79af46c4}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_acbf918e7115fbd180d8c931d79af46c4}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!persona\+\_\+picked@{persona\+\_\+picked}}
\index{persona\+\_\+picked@{persona\+\_\+picked}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{persona\+\_\+picked}{persona\_picked}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+persona\+\_\+picked}



Definition at line 180 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_aa73f926de1bb6b60465f658f28e96d98}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_aa73f926de1bb6b60465f658f28e96d98}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!personas@{personas}}
\index{personas@{personas}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{personas}{personas}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+personas}



Definition at line 190 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a5207a70758bc6eb4943e27e784f68073}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a5207a70758bc6eb4943e27e784f68073}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!range\+\_\+turn@{range\+\_\+turn}}
\index{range\+\_\+turn@{range\+\_\+turn}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{range\+\_\+turn}{range\_turn}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+range\+\_\+turn}



Definition at line 170 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a6981b7aa030250b3234750df43a80e50}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a6981b7aa030250b3234750df43a80e50}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!task\+\_\+type@{task\+\_\+type}}
\index{task\+\_\+type@{task\+\_\+type}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{task\+\_\+type}{task\_type}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+task\+\_\+type}



Definition at line 174 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_add33bcde1c71e280efa0a77301e4e552}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_add33bcde1c71e280efa0a77301e4e552}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!turn\+\_\+idx@{turn\+\_\+idx}}
\index{turn\+\_\+idx@{turn\+\_\+idx}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{turn\+\_\+idx}{turn\_idx}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+turn\+\_\+idx}



Definition at line 169 of file worlds.\+py.

\mbox{\Hypertarget{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a47e3c2213ce2f77d7aafe62aaf771328}\label{classpersonachat__eval_1_1worlds_1_1PersonaChatEvalWorld_a47e3c2213ce2f77d7aafe62aaf771328}} 
\index{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}!world\+\_\+tag@{world\+\_\+tag}}
\index{world\+\_\+tag@{world\+\_\+tag}!personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World@{personachat\+\_\+eval\+::worlds\+::\+Persona\+Chat\+Eval\+World}}
\subsubsection{\texorpdfstring{world\+\_\+tag}{world\_tag}}
{\footnotesize\ttfamily personachat\+\_\+eval.\+worlds.\+Persona\+Chat\+Eval\+World.\+world\+\_\+tag}



Definition at line 181 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
projects/personachat/mturk/personachat\+\_\+eval/\hyperlink{projects_2personachat_2mturk_2personachat__eval_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
