\hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run}{}\section{projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run Namespace Reference}
\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run}\index{projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run@{projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\+\_\+and\+\_\+log} (s)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ab07d5984a91787cd069fa0a7deba945f}{log\+\_\+only} (s)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a7f8196f264013bc16be3e85fe5c68f0d}{get\+\_\+output\+\_\+dir} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, round\+\_\+index, version\+\_\+num=None)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}{get\+\_\+init\+\_\+data} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, base\+\_\+only=False, delta\+\_\+only=False, version\+\_\+num=None, resplit=True)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9acbe1fe240a624b01fed3f073cc780}{get\+\_\+rest\+\_\+data} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, version\+\_\+num=None)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a68c9d28aae4d256af00522c8617f93f1}{overall\+\_\+split} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt})
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a36a5f4f6f9df0611a6818610518d2cf0}{train} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, round\+\_\+index, machine\+\_\+index, file\+\_\+index, train\+\_\+data, valid\+\_\+data, valid\+\_\+weights=None, save\+\_\+all=True, return\+\_\+acc\+\_\+len=False, \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acae9db44a348a4b21fda3b408f0cb7d9}{seq2seq}=False)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1b5b55764d0ead5087efdcc429514c3e}{batch\+\_\+train} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, round\+\_\+index, round\+\_\+train\+\_\+data, round\+\_\+valid\+\_\+data, round\+\_\+valid\+\_\+weights=None, save\+\_\+all=True, file\+\_\+indices=None, return\+\_\+acc\+\_\+len=False, \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acae9db44a348a4b21fda3b408f0cb7d9}{seq2seq}=False)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a179bf2b92b1beed2a6edb67b152cd659}{batch\+\_\+valid} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, round\+\_\+index, \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a58ed2597b635cdea32b478602c3734fc}{constrain\+\_\+}=True)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_af40bd2583024f251c70529d0d0863258}{batch\+\_\+valid\+\_\+with\+\_\+data} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, round\+\_\+index, file\+\_\+index, valid\+\_\+filename, \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a58ed2597b635cdea32b478602c3734fc}{constrain\+\_\+}=True)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a09ef624249e781a7cb8a9b65993aa370}{overall\+\_\+ablation} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt})
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a55b47a72699011efdf0578b82e34083c}{overall\+\_\+run} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acae9db44a348a4b21fda3b408f0cb7d9}{seq2seq}=False)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_aec4fee521da5b1a9373636c337af064c}{overall\+\_\+run\+\_\+data\+\_\+breakdown} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acae9db44a348a4b21fda3b408f0cb7d9}{seq2seq}=False)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a04a37a5385ef9596da2f6ec2aa7ac6e6}{overall\+\_\+add\+\_\+val} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acae9db44a348a4b21fda3b408f0cb7d9}{seq2seq}=False, \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a58ed2597b635cdea32b478602c3734fc}{constrain\+\_\+}=True)
\item 
def \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bd2ed10dc695764b3b3f40163c98dae}{overall\+\_\+run\+\_\+rounds\+\_\+breakdown} (\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}, \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acae9db44a348a4b21fda3b408f0cb7d9}{seq2seq}=False)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1a278519da6e3a4f26c825ba3e5308c1}{S\+T\+A\+R\+T\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+M\+E\+O\+UT}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ab906f496406f366fa9a0890f218382fc}{parent\+\_\+dir}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9ff32a31f22bf6e12fc9d6f7e6b7866}{checkpoint\+\_\+dir}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a402778951c7151a46a1a7d74f1a21026}{cur\+\_\+dir}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae62c7962cac2f39a21dc264912b974c0}{argparser}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a0d607cd3866953f5de198f609be7c0fc}{type}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a693eb03afbb820bbfe8b47b12e69e519}{int}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1315d0bb7e5868ecaadd5daf60275bb1}{default}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a6fc0c9b519a36f82b65bcd398f1fbb9d}{bool}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a2b2eac696023a001430f5e711592c0d9}{float}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a6289bcc1c9938537f4b6fc4283868a53}{str}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a4c97e66fe88390114c31d1916192cb95}{action}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}{opt}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acae9db44a348a4b21fda3b408f0cb7d9}{seq2seq}
\item 
\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a58ed2597b635cdea32b478602c3734fc}{constrain\+\_\+}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1b5b55764d0ead5087efdcc429514c3e}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1b5b55764d0ead5087efdcc429514c3e}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!batch\+\_\+train@{batch\+\_\+train}}
\index{batch\+\_\+train@{batch\+\_\+train}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{batch\+\_\+train()}{batch\_train()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+batch\+\_\+train (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{round\+\_\+index,  }\item[{}]{round\+\_\+train\+\_\+data,  }\item[{}]{round\+\_\+valid\+\_\+data,  }\item[{}]{round\+\_\+valid\+\_\+weights = {\ttfamily None},  }\item[{}]{save\+\_\+all = {\ttfamily True},  }\item[{}]{file\+\_\+indices = {\ttfamily None},  }\item[{}]{return\+\_\+acc\+\_\+len = {\ttfamily False},  }\item[{}]{seq2seq = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 317 of file run.\+py.


\begin{DoxyCode}
317 ):
318     i = 0
319     perfs = []
320     M = len(round\_train\_data)
321     \textcolor{keywordflow}{while} i < M:
322         j = min(i + opt[\textcolor{stringliteral}{'num\_machines'}], M)
323         cur\_perfs = Parallel(n\_jobs=j - i, backend=\textcolor{stringliteral}{'threading'})(
324             delayed(train)(
325                 opt,
326                 round\_index,
327                 train\_index,
328                 file\_indices[train\_index] \textcolor{keywordflow}{if} file\_indices \textcolor{keywordflow}{else} train\_index,
329                 round\_train\_data[train\_index],
330                 round\_valid\_data[train\_index],
331                 valid\_weights=round\_valid\_weights[train\_index]
332                 \textcolor{keywordflow}{if} round\_valid\_weights
333                 \textcolor{keywordflow}{else} \textcolor{keywordtype}{None},
334                 save\_all=save\_all,
335                 return\_acc\_len=return\_acc\_len,
336                 seq2seq=seq2seq,
337             )
338             \textcolor{keywordflow}{for} train\_index \textcolor{keywordflow}{in} range(i, j)
339         )
340         perfs.extend(cur\_perfs)
341         i = j
342 
343     error\_indices, valid\_indices = [], []
344     \textcolor{keywordflow}{for} i, perf \textcolor{keywordflow}{in} enumerate(perfs):
345         \textcolor{keywordflow}{if} perf == 0.0 \textcolor{keywordflow}{or} \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a0d607cd3866953f5de198f609be7c0fc}{type}(perf) == tuple \textcolor{keywordflow}{and} perf[0] == 0.0:
346             error\_indices.append(i)
347         \textcolor{keywordflow}{elif} i < opt[\textcolor{stringliteral}{'num\_machines'}]:
348             valid\_indices.append(i)
349 
350     M = len(error\_indices)
351     TMP\_NUM\_MACHINES = len(valid\_indices)
352     \textcolor{keywordflow}{if} M > 0 \textcolor{keywordflow}{and} TMP\_NUM\_MACHINES > 0:
353         i = 0
354         error\_perfs = []
355         \textcolor{keywordflow}{while} i < M:
356             j = min(i + TMP\_NUM\_MACHINES, M)
357             cur\_perfs = Parallel(n\_jobs=j - i, backend=\textcolor{stringliteral}{'threading'})(
358                 delayed(train)(
359                     opt,
360                     round\_index,
361                     valid\_indices[train\_index],
362                     file\_indices[error\_indices[train\_index]]
363                     \textcolor{keywordflow}{if} file\_indices
364                     \textcolor{keywordflow}{else} error\_indices[train\_index],
365                     round\_train\_data[error\_indices[train\_index]],
366                     round\_valid\_data[error\_indices[train\_index]],
367                     valid\_weights=round\_valid\_weights[error\_indices[train\_index]]
368                     \textcolor{keywordflow}{if} round\_valid\_weights
369                     \textcolor{keywordflow}{else} \textcolor{keywordtype}{None},
370                     save\_all=save\_all,
371                     return\_acc\_len=return\_acc\_len,
372                     seq2seq=seq2seq,
373                 )
374                 \textcolor{keywordflow}{for} train\_index \textcolor{keywordflow}{in} range(i, j)
375             )
376             error\_perfs.extend(cur\_perfs)
377             i = j
378         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(M):
379             perfs[error\_indices[i]] = error\_perfs[i]
380 
381     \textcolor{keywordflow}{return} perfs
382 
383 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a179bf2b92b1beed2a6edb67b152cd659}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a179bf2b92b1beed2a6edb67b152cd659}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!batch\+\_\+valid@{batch\+\_\+valid}}
\index{batch\+\_\+valid@{batch\+\_\+valid}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{batch\+\_\+valid()}{batch\_valid()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+batch\+\_\+valid (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{round\+\_\+index,  }\item[{}]{constrain\+\_\+ = {\ttfamily True} }\end{DoxyParamCaption})}



Definition at line 384 of file run.\+py.


\begin{DoxyCode}
384 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a179bf2b92b1beed2a6edb67b152cd659}{batch\_valid}(opt, round\_index, constrain\_=True):
385     perfs = []
386     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(100000):
387         model\_filename = join(cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_model.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, i))
388         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(model\_filename):
389             \textcolor{keywordflow}{break}
390         data\_agent\_filename = join(
391             cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_data\_agent.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, i)
392         )
393         valid\_filename = join(cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_valid.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, i))
394         model = pickle.load(open(model\_filename, \textcolor{stringliteral}{'rb'}))
395         data\_agent = pickle.load(open(data\_agent\_filename, \textcolor{stringliteral}{'rb'}))
396         perf = \hyperlink{namespacegraph__world2_1_1train_aaff96a1b7f0cafac9dab96cbc02ae4d0}{additional\_validate}(
397             opt, model, data\_agent, valid\_filename, constrain\_=constrain\_
398         )
399         print(\textcolor{stringliteral}{'batch\_valid \{\} \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, i))
400         perfs.append(perf)
401     \textcolor{keywordflow}{return} perfs
402 
403 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_af40bd2583024f251c70529d0d0863258}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_af40bd2583024f251c70529d0d0863258}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!batch\+\_\+valid\+\_\+with\+\_\+data@{batch\+\_\+valid\+\_\+with\+\_\+data}}
\index{batch\+\_\+valid\+\_\+with\+\_\+data@{batch\+\_\+valid\+\_\+with\+\_\+data}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{batch\+\_\+valid\+\_\+with\+\_\+data()}{batch\_valid\_with\_data()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+batch\+\_\+valid\+\_\+with\+\_\+data (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{round\+\_\+index,  }\item[{}]{file\+\_\+index,  }\item[{}]{valid\+\_\+filename,  }\item[{}]{constrain\+\_\+ = {\ttfamily True} }\end{DoxyParamCaption})}



Definition at line 406 of file run.\+py.


\begin{DoxyCode}
406 ):
407     model\_filename = join(cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_model.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, file\_index))
408     data\_agent\_filename = join(
409         cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_data\_agent.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, file\_index)
410     )
411     model = pickle.load(open(model\_filename, \textcolor{stringliteral}{'rb'}))
412     data\_agent = pickle.load(open(data\_agent\_filename, \textcolor{stringliteral}{'rb'}))
413     perf = \hyperlink{namespacegraph__world2_1_1train_aaff96a1b7f0cafac9dab96cbc02ae4d0}{additional\_validate}(
414         opt, model, data\_agent, valid\_filename, constrain\_=constrain\_, no\_hits=\textcolor{keyword}{True}
415     )
416     \textcolor{keywordflow}{return} perf
417 
418 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!get\+\_\+init\+\_\+data@{get\+\_\+init\+\_\+data}}
\index{get\+\_\+init\+\_\+data@{get\+\_\+init\+\_\+data}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{get\+\_\+init\+\_\+data()}{get\_init\_data()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+get\+\_\+init\+\_\+data (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{base\+\_\+only = {\ttfamily False},  }\item[{}]{delta\+\_\+only = {\ttfamily False},  }\item[{}]{version\+\_\+num = {\ttfamily None},  }\item[{}]{resplit = {\ttfamily True} }\end{DoxyParamCaption})}



Definition at line 65 of file run.\+py.


\begin{DoxyCode}
65 ):
66     RESPLIT\_PREFIX = \textcolor{stringliteral}{'resplit\_'} \textcolor{keywordflow}{if} resplit \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}
67     TRAIN\_DIR, VALID\_DIR = (
68         join(opt[\textcolor{stringliteral}{'datapath'}], \textcolor{stringliteral}{'graph\_world2'}, \textcolor{stringliteral}{'train'}),
69         join(opt[\textcolor{stringliteral}{'datapath'}], \textcolor{stringliteral}{'graph\_world2'}, \textcolor{stringliteral}{'valid'}),
70     )
71 
72     \textcolor{keywordflow}{if} delta\_only \textcolor{keywordflow}{and} opt[\textcolor{stringliteral}{'start\_round'}] > 1:
73         output\_dir = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a7f8196f264013bc16be3e85fe5c68f0d}{get\_output\_dir}(
74             opt, opt[\textcolor{stringliteral}{'start\_round'}] - 1, version\_num=version\_num
75         )
76         delta\_train\_data = pickle.load(
77             open(
78                 join(output\_dir, \textcolor{stringliteral}{'\{\}delta\_train\_data.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(RESPLIT\_PREFIX)), \textcolor{stringliteral}{'rb'}
79             )
80         )
81         delta\_valid\_data = pickle.load(
82             open(
83                 join(output\_dir, \textcolor{stringliteral}{'\{\}delta\_valid\_data.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(RESPLIT\_PREFIX)), \textcolor{stringliteral}{'rb'}
84             )
85         )
86         \textcolor{keywordflow}{return} delta\_train\_data, delta\_valid\_data
87 
88     \textcolor{keyword}{def }read\_data(data\_path):
89         data = []
90         \textcolor{keywordflow}{for} filename \textcolor{keywordflow}{in} os.listdir(data\_path):
91             \textcolor{keywordflow}{if} filename.endswith(\textcolor{stringliteral}{'pkl'}):
92                 data.append(pickle.load(open(join(data\_path, filename), \textcolor{stringliteral}{'rb'})))
93         \textcolor{keywordflow}{return} data
94 
95     train\_data, valid\_data = read\_data(TRAIN\_DIR), read\_data(VALID\_DIR)
96     \textcolor{keywordflow}{if} base\_only \textcolor{keywordflow}{or} delta\_only:
97         \textcolor{keywordflow}{return} train\_data, valid\_data
98 
99     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(1, opt[\textcolor{stringliteral}{'start\_round'}]):
100         \textcolor{keywordflow}{try}:
101             output\_dir = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a7f8196f264013bc16be3e85fe5c68f0d}{get\_output\_dir}(opt, i, version\_num=version\_num)
102             delta\_train\_data = pickle.load(
103                 open(
104                     join(output\_dir, \textcolor{stringliteral}{'\{\}delta\_train\_data.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(RESPLIT\_PREFIX)),
105                     \textcolor{stringliteral}{'rb'},
106                 )
107             )
108             delta\_valid\_data = pickle.load(
109                 open(
110                     join(output\_dir, \textcolor{stringliteral}{'\{\}delta\_valid\_data.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(RESPLIT\_PREFIX)),
111                     \textcolor{stringliteral}{'rb'},
112                 )
113             )
114             train\_data.extend(delta\_train\_data)
115             valid\_data.extend(delta\_valid\_data)
116         \textcolor{keywordflow}{except}:
117             \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(\textcolor{stringliteral}{'Error: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(traceback.format\_exc()))
118     \textcolor{keywordflow}{return} train\_data, valid\_data
119 
120 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a7f8196f264013bc16be3e85fe5c68f0d}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a7f8196f264013bc16be3e85fe5c68f0d}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!get\+\_\+output\+\_\+dir@{get\+\_\+output\+\_\+dir}}
\index{get\+\_\+output\+\_\+dir@{get\+\_\+output\+\_\+dir}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{get\+\_\+output\+\_\+dir()}{get\_output\_dir()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+get\+\_\+output\+\_\+dir (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{round\+\_\+index,  }\item[{}]{version\+\_\+num = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 54 of file run.\+py.


\begin{DoxyCode}
54 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a7f8196f264013bc16be3e85fe5c68f0d}{get\_output\_dir}(opt, round\_index, version\_num=None):
55     output\_dir = join(
56         opt[\textcolor{stringliteral}{'datapath'}], \textcolor{stringliteral}{'graph\_world2\_v\{\}\_r\{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(version\_num, round\_index)
57     )
58     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(output\_dir):
59         os.makedirs(output\_dir)
60     \textcolor{keywordflow}{return} output\_dir
61 
62 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9acbe1fe240a624b01fed3f073cc780}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9acbe1fe240a624b01fed3f073cc780}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!get\+\_\+rest\+\_\+data@{get\+\_\+rest\+\_\+data}}
\index{get\+\_\+rest\+\_\+data@{get\+\_\+rest\+\_\+data}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{get\+\_\+rest\+\_\+data()}{get\_rest\_data()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+get\+\_\+rest\+\_\+data (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{version\+\_\+num = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 121 of file run.\+py.


\begin{DoxyCode}
121 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9acbe1fe240a624b01fed3f073cc780}{get\_rest\_data}(opt, version\_num=None):
122     output\_dir = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a7f8196f264013bc16be3e85fe5c68f0d}{get\_output\_dir}(opt, opt[\textcolor{stringliteral}{'start\_round'}] - 1, version\_num=version\_num)
123     rest\_data = pickle.load(open(join(output\_dir, \textcolor{stringliteral}{'resplit\_rest\_data.pkl'}), \textcolor{stringliteral}{'rb'}))
124     \textcolor{keywordflow}{return} rest\_data
125 
126 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ab07d5984a91787cd069fa0a7deba945f}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ab07d5984a91787cd069fa0a7deba945f}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!log\+\_\+only@{log\+\_\+only}}
\index{log\+\_\+only@{log\+\_\+only}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{log\+\_\+only()}{log\_only()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+log\+\_\+only (\begin{DoxyParamCaption}\item[{}]{s }\end{DoxyParamCaption})}



Definition at line 48 of file run.\+py.


\begin{DoxyCode}
48 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ab07d5984a91787cd069fa0a7deba945f}{log\_only}(s):
49     f\_log = open(join(cur\_dir, \textcolor{stringliteral}{'mtd\_log.txt'}), \textcolor{stringliteral}{'a+'})
50     f\_log.write(s + \textcolor{stringliteral}{'\(\backslash\)n'})
51     f\_log.close()
52 
53 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a09ef624249e781a7cb8a9b65993aa370}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a09ef624249e781a7cb8a9b65993aa370}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!overall\+\_\+ablation@{overall\+\_\+ablation}}
\index{overall\+\_\+ablation@{overall\+\_\+ablation}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{overall\+\_\+ablation()}{overall\_ablation()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+overall\+\_\+ablation (\begin{DoxyParamCaption}\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 419 of file run.\+py.


\begin{DoxyCode}
419 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a09ef624249e781a7cb8a9b65993aa370}{overall\_ablation}(opt):
420     VERSIONS = [13, 14, 15, \textcolor{stringliteral}{'BASELINE\_2'}]
421     NAMES = [\textcolor{stringliteral}{'MTD LIMIT'}, \textcolor{stringliteral}{'MTD'}, \textcolor{stringliteral}{'MTD NO MODEL FEEDBACK'}, \textcolor{stringliteral}{'BASELINE'}]
422 
423     all\_train\_data, all\_valid\_data, all\_rest\_data = [], [], []
424     \textcolor{keywordflow}{for} v\_id, version \textcolor{keywordflow}{in} enumerate(VERSIONS):
425         version\_train\_data, version\_valid\_data, version\_rest\_data = [], [], []
426         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(2, 7):
427             final\_opt = deepcopy(opt)
428             final\_opt[\textcolor{stringliteral}{'start\_round'}] = i
429             final\_opt[\textcolor{stringliteral}{'datapath'}] = final\_opt[\textcolor{stringliteral}{'datapath'}].replace(\textcolor{stringliteral}{'/data'}, \textcolor{stringliteral}{'/new\_data'})
430             cur\_train\_data, cur\_valid\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}{get\_init\_data}(
431                 final\_opt, delta\_only=\textcolor{keyword}{True}, version\_num=version, resplit=\textcolor{keyword}{True}
432             )
433             cur\_rest\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9acbe1fe240a624b01fed3f073cc780}{get\_rest\_data}(final\_opt, version\_num=version)
434             version\_train\_data.extend(cur\_train\_data)
435             version\_valid\_data.extend(cur\_valid\_data)
436             version\_rest\_data.extend(cur\_rest\_data)
437         print(
438             \textcolor{stringliteral}{'\{\}: train \{\} test \{\} rest \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
439                 NAMES[v\_id],
440                 len(version\_train\_data),
441                 len(version\_valid\_data),
442                 len(version\_rest\_data),
443             )
444         )
445         all\_train\_data.append(version\_train\_data)
446         all\_valid\_data.append(version\_valid\_data)
447         all\_rest\_data.append(version\_rest\_data)
448 
449     init\_train\_data, init\_valid\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}{get\_init\_data}(opt, base\_only=\textcolor{keyword}{True})
450     init\_valid\_data.extend(init\_train\_data)
451     print(\textcolor{stringliteral}{'init: test \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(len(init\_valid\_data)))
452 
453     final\_valid\_data = copy(init\_valid\_data)
454     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(all\_rest\_data)):
455         final\_valid\_data.extend(all\_valid\_data[i])
456         final\_valid\_data.extend(all\_rest\_data[i])
457     print(\textcolor{stringliteral}{'all: test \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(len(final\_valid\_data)))
458 
459     final\_train\_data = all\_train\_data[1]
460 
461     train\_filename = join(cur\_dir, \textcolor{stringliteral}{'ABLATION\_train.pkl'})
462     valid\_filename = join(cur\_dir, \textcolor{stringliteral}{'ABLATION\_valid.pkl'})
463 
464     pickle.dump(final\_train\_data, open(train\_filename, \textcolor{stringliteral}{'wb'}))
465     pickle.dump(final\_valid\_data, open(valid\_filename, \textcolor{stringliteral}{'wb'}))
466 
467     model\_filename = join(cur\_dir, \textcolor{stringliteral}{'ABLATION\_model.pkl'})
468     data\_agent\_filename = join(cur\_dir, \textcolor{stringliteral}{'ABLATION\_data\_agent.pkl'})
469     wrong\_data\_filename = join(cur\_dir, \textcolor{stringliteral}{'ABLATION\_wrong\_data.pkl'})
470 
471     names = [\textcolor{stringliteral}{'ac'}, \textcolor{stringliteral}{'ac - counter'}, \textcolor{stringliteral}{'ac - counter - room'}, \textcolor{stringliteral}{'seq2seq'}]
472     seq2seq\_options = [\textcolor{keyword}{False}, \textcolor{keyword}{False}, \textcolor{keyword}{False}, \textcolor{keyword}{True}]
473     counter\_ablations = [\textcolor{keyword}{False}, \textcolor{keyword}{True}, \textcolor{keyword}{True}, \textcolor{keyword}{False}]
474     room\_ablations = [\textcolor{keyword}{False}, \textcolor{keyword}{False}, \textcolor{keyword}{True}, \textcolor{keyword}{False}]
475 
476     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(1, 3):
477         new\_opt = deepcopy(opt)
478         new\_opt.update(
479             \{
480                 \textcolor{stringliteral}{'max\_iter'}: opt[\textcolor{stringliteral}{'max\_iter'}],
481                 \textcolor{stringliteral}{'num\_runs'}: 1,
482                 \textcolor{stringliteral}{'train\_data\_file'}: train\_filename,
483                 \textcolor{stringliteral}{'valid\_data\_file'}: valid\_filename,
484                 \textcolor{stringliteral}{'model\_file'}: model\_filename,
485                 \textcolor{stringliteral}{'data\_agent\_file'}: data\_agent\_filename,
486                 \textcolor{stringliteral}{'wrong\_data\_file'}: wrong\_data\_filename,
487                 \textcolor{stringliteral}{'task'}: \textcolor{stringliteral}{'parlai\_internal.tasks.graph\_world2.agents'},
488                 \textcolor{stringliteral}{'batchsize'}: 1,
489                 \textcolor{stringliteral}{'rnn\_h'}: opt[\textcolor{stringliteral}{'rnn\_h'}],
490                 \textcolor{stringliteral}{'embedding\_dim'}: opt[\textcolor{stringliteral}{'embedding\_dim'}],
491                 \textcolor{stringliteral}{'cuda'}: \textcolor{keyword}{True},
492                 \textcolor{stringliteral}{'seq2seq'}: seq2seq\_options[i],
493                 \textcolor{stringliteral}{'counter\_ablation'}: counter\_ablations[i],
494                 \textcolor{stringliteral}{'room\_ablation'}: room\_ablations[i],
495                 \textcolor{stringliteral}{'weight\_file'}: \textcolor{stringliteral}{''},
496                 \textcolor{stringliteral}{'datatype'}: \textcolor{stringliteral}{'train'},
497             \}
498         )
499         perf = \hyperlink{namespacegraph__world2_1_1train_a4a2155646856189e143dbc828baef945}{ablation\_exp}(new\_opt)
500         print(names[i], perf)
501 
502 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a04a37a5385ef9596da2f6ec2aa7ac6e6}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a04a37a5385ef9596da2f6ec2aa7ac6e6}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!overall\+\_\+add\+\_\+val@{overall\+\_\+add\+\_\+val}}
\index{overall\+\_\+add\+\_\+val@{overall\+\_\+add\+\_\+val}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{overall\+\_\+add\+\_\+val()}{overall\_add\_val()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+overall\+\_\+add\+\_\+val (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{seq2seq = {\ttfamily False},  }\item[{}]{constrain\+\_\+ = {\ttfamily True} }\end{DoxyParamCaption})}



Definition at line 692 of file run.\+py.


\begin{DoxyCode}
692 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a04a37a5385ef9596da2f6ec2aa7ac6e6}{overall\_add\_val}(opt, seq2seq=False, constrain\_=True):
693     NAMES = [\textcolor{stringliteral}{'MTD LIMIT'}, \textcolor{stringliteral}{'MTD'}, \textcolor{stringliteral}{'MTD NO MODEL FEEDBACK'}, \textcolor{stringliteral}{'BASELINE'}]
694 
695     \textcolor{keyword}{def }get\_scores\_and\_std(perfs):
696         \textcolor{keyword}{def }\_get\_mean(l):
697             \textcolor{keywordflow}{return} sum(l) * 1.0 / len(l)
698 
699         \textcolor{keyword}{def }\_get\_std(l):
700             \textcolor{keywordflow}{return} np.std(np.array(l), dtype=np.float64)
701 
702         ret = dd(list)
703         \textcolor{keywordflow}{for} perf \textcolor{keywordflow}{in} perfs:
704             \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} perf.items():
705                 ret[k].append(v)
706         final\_ret = \{\}
707         \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} ret.items():
708             final\_ret[k + \textcolor{stringliteral}{'\_mean'}] = \_get\_mean(v)
709             final\_ret[k + \textcolor{stringliteral}{'\_std'}] = \_get\_std(v)
710         \textcolor{keywordflow}{return} final\_ret
711 
712     perfs = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a179bf2b92b1beed2a6edb67b152cd659}{batch\_valid}(
713         opt, \textcolor{stringliteral}{'OVERALL\_TEST'} \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} seq2seq \textcolor{keywordflow}{else} \textcolor{stringliteral}{'SEQ2SEQ\_TEST'}, constrain\_=constrain\_
714     )
715     M = opt[\textcolor{stringliteral}{'num\_runs'}]
716     start, end = 0, M
717     \textcolor{keywordflow}{for} train\_name \textcolor{keywordflow}{in} NAMES:
718         \textcolor{keywordflow}{for} valid\_name \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'INIT'}, \textcolor{stringliteral}{'ALL'}]:
719             sub\_perfs = perfs[start:end]
720             scores = get\_scores\_and\_std(sub\_perfs)
721             \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(\textcolor{stringliteral}{'\{\} on \{\}: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(train\_name, valid\_name, scores))
722             start = end
723             end = start + M
724 
725 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a55b47a72699011efdf0578b82e34083c}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a55b47a72699011efdf0578b82e34083c}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!overall\+\_\+run@{overall\+\_\+run}}
\index{overall\+\_\+run@{overall\+\_\+run}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{overall\+\_\+run()}{overall\_run()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+overall\+\_\+run (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{seq2seq = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 503 of file run.\+py.


\begin{DoxyCode}
503 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a55b47a72699011efdf0578b82e34083c}{overall\_run}(opt, seq2seq=False):
504     VERSIONS = [13, 14, 15, \textcolor{stringliteral}{'BASELINE\_2'}]
505     NAMES = [\textcolor{stringliteral}{'MTD LIMIT'}, \textcolor{stringliteral}{'MTD'}, \textcolor{stringliteral}{'MTD NO MODEL FEEDBACK'}, \textcolor{stringliteral}{'BASELINE'}]
506 
507     all\_train\_data, all\_valid\_data, all\_rest\_data = [], [], []
508     \textcolor{keywordflow}{for} v\_id, version \textcolor{keywordflow}{in} enumerate(VERSIONS):
509         version\_train\_data, version\_valid\_data, version\_rest\_data = [], [], []
510         \textcolor{comment}{# for i in range(2, 7):}
511         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(2, 3):
512             final\_opt = deepcopy(opt)
513             final\_opt[\textcolor{stringliteral}{'start\_round'}] = i
514             cur\_train\_data, cur\_valid\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}{get\_init\_data}(
515                 final\_opt, delta\_only=\textcolor{keyword}{True}, version\_num=version, resplit=\textcolor{keyword}{True}
516             )
517             cur\_rest\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9acbe1fe240a624b01fed3f073cc780}{get\_rest\_data}(final\_opt, version\_num=version)
518             version\_train\_data.extend(cur\_train\_data)
519             version\_valid\_data.extend(cur\_valid\_data)
520             version\_rest\_data.extend(cur\_rest\_data)
521         print(
522             \textcolor{stringliteral}{'\{\}: train \{\} test \{\} rest \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
523                 NAMES[v\_id],
524                 len(version\_train\_data),
525                 len(version\_valid\_data),
526                 len(version\_rest\_data),
527             )
528         )
529         all\_train\_data.append(version\_train\_data)
530         all\_valid\_data.append(version\_valid\_data)
531         all\_rest\_data.append(version\_rest\_data)
532 
533     init\_train\_data, init\_valid\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}{get\_init\_data}(opt, base\_only=\textcolor{keyword}{True})
534     init\_valid\_data.extend(init\_train\_data)
535     print(\textcolor{stringliteral}{'init: test \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(len(init\_valid\_data)))
536 
537     final\_valid\_data = copy(init\_valid\_data)
538     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(all\_rest\_data)):
539         final\_valid\_data.extend(all\_valid\_data[i])
540         final\_valid\_data.extend(all\_rest\_data[i])
541     print(\textcolor{stringliteral}{'all: test \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(len(final\_valid\_data)))
542 
543     round\_train\_data, round\_valid\_data = [], []
544     M = opt[\textcolor{stringliteral}{'num\_runs'}]
545     \textcolor{keywordflow}{for} cur\_train\_data \textcolor{keywordflow}{in} all\_train\_data:
546         \textcolor{keywordflow}{for} cur\_valid\_data \textcolor{keywordflow}{in} [init\_valid\_data, final\_valid\_data]:
547             \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(M):
548                 round\_train\_data.append(cur\_train\_data)
549                 round\_valid\_data.append(cur\_valid\_data)
550 
551     final\_opt = deepcopy(opt)
552     final\_opt[\textcolor{stringliteral}{'num\_runs'}] = 1
553     perfs = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1b5b55764d0ead5087efdcc429514c3e}{batch\_train}(
554         final\_opt,
555         \textcolor{stringliteral}{'OVERALL\_TEST'} \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} seq2seq \textcolor{keywordflow}{else} \textcolor{stringliteral}{'SEQ2SEQ\_TEST'},
556         round\_train\_data,
557         round\_valid\_data,
558         save\_all=\textcolor{keyword}{True},
559         return\_acc\_len=\textcolor{keyword}{True},
560         seq2seq=seq2seq,
561     )
562 
563     \textcolor{keyword}{def }get\_acc\_and\_acc\_len(perfs):
564         acc, acc\_len, cnts = 0.0, [0.0 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(4)], 0
565         accs = []
566         \textcolor{keywordflow}{for} i, (cur\_acc, cur\_acc\_len) \textcolor{keywordflow}{in} enumerate(perfs):
567             \textcolor{keywordflow}{if} cur\_acc == 0:
568                 \textcolor{keywordflow}{continue}
569             acc += cur\_acc
570             accs.append(cur\_acc)
571             \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} range(4):
572                 acc\_len[j] += cur\_acc\_len[j]
573             cnts += 1
574         \textcolor{keywordflow}{if} cnts == 0:
575             \textcolor{keywordflow}{return} acc, acc\_len
576         acc /= cnts
577         \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} range(4):
578             acc\_len[j] /= cnts
579         stddev = np.std(np.array(accs), dtype=np.float64)
580         \textcolor{keywordflow}{return} acc, acc\_len, stddev
581 
582     start, end = 0, M
583     \textcolor{keywordflow}{for} train\_name \textcolor{keywordflow}{in} NAMES:
584         \textcolor{keywordflow}{for} valid\_name \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'INIT'}, \textcolor{stringliteral}{'ALL'}]:
585             sub\_perfs = perfs[start:end]
586             acc, acc\_len, stddev = get\_acc\_and\_acc\_len(sub\_perfs)
587             \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(
588                 \textcolor{stringliteral}{'\{\} on \{\}: acc \{\} stddev \{\} acc\_len \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
589                     train\_name, valid\_name, acc, stddev, acc\_len
590                 )
591             )
592             \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ab07d5984a91787cd069fa0a7deba945f}{log\_only}(\textcolor{stringliteral}{'\{\} on \{\}: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(train\_name, valid\_name, sub\_perfs))
593             start = end
594             end = start + M
595 
596 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_aec4fee521da5b1a9373636c337af064c}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_aec4fee521da5b1a9373636c337af064c}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!overall\+\_\+run\+\_\+data\+\_\+breakdown@{overall\+\_\+run\+\_\+data\+\_\+breakdown}}
\index{overall\+\_\+run\+\_\+data\+\_\+breakdown@{overall\+\_\+run\+\_\+data\+\_\+breakdown}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{overall\+\_\+run\+\_\+data\+\_\+breakdown()}{overall\_run\_data\_breakdown()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+overall\+\_\+run\+\_\+data\+\_\+breakdown (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{seq2seq = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 597 of file run.\+py.


\begin{DoxyCode}
597 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_aec4fee521da5b1a9373636c337af064c}{overall\_run\_data\_breakdown}(opt, seq2seq=False):
598     VERSIONS = [13, 14, 15, \textcolor{stringliteral}{'BASELINE\_2'}]
599     NAMES = [\textcolor{stringliteral}{'MTD LIMIT'}, \textcolor{stringliteral}{'MTD'}, \textcolor{stringliteral}{'MTD NO MODEL FEEDBACK'}, \textcolor{stringliteral}{'BASELINE'}]
600 
601     all\_train\_data, all\_valid\_data, all\_rest\_data = [], [], []
602     \textcolor{keywordflow}{for} v\_id, version \textcolor{keywordflow}{in} enumerate(VERSIONS):
603         version\_train\_data, version\_valid\_data, version\_rest\_data = [], [], []
604         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(2, 7):
605             final\_opt = deepcopy(opt)
606             final\_opt[\textcolor{stringliteral}{'start\_round'}] = i
607             cur\_train\_data, cur\_valid\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}{get\_init\_data}(
608                 final\_opt, delta\_only=\textcolor{keyword}{True}, version\_num=version, resplit=\textcolor{keyword}{True}
609             )
610             cur\_rest\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9acbe1fe240a624b01fed3f073cc780}{get\_rest\_data}(final\_opt, version\_num=version)
611             version\_train\_data.extend(cur\_train\_data)
612             version\_valid\_data.extend(cur\_valid\_data)
613             version\_rest\_data.extend(cur\_rest\_data)
614         print(
615             \textcolor{stringliteral}{'\{\}: train \{\} test \{\} rest \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
616                 NAMES[v\_id],
617                 len(version\_train\_data),
618                 len(version\_valid\_data),
619                 len(version\_rest\_data),
620             )
621         )
622         all\_train\_data.append(version\_train\_data)
623         all\_valid\_data.append(version\_valid\_data)
624         all\_rest\_data.append(version\_rest\_data)
625 
626     init\_train\_data, init\_valid\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}{get\_init\_data}(opt, base\_only=\textcolor{keyword}{True})
627     init\_valid\_data.extend(init\_train\_data)
628     print(\textcolor{stringliteral}{'init: test \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(len(init\_valid\_data)))
629 
630     final\_valid\_data = copy(init\_valid\_data)
631     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(all\_rest\_data)):
632         final\_valid\_data.extend(all\_valid\_data[i])
633         final\_valid\_data.extend(all\_rest\_data[i])
634     print(\textcolor{stringliteral}{'all: test \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(len(final\_valid\_data)))
635 
636     round\_train\_data, round\_valid\_data = [], []
637     M = opt[\textcolor{stringliteral}{'num\_runs'}]
638     \textcolor{keywordflow}{for} cur\_train\_data \textcolor{keywordflow}{in} all\_train\_data:
639         \textcolor{keywordflow}{for} cur\_valid\_data \textcolor{keywordflow}{in} [init\_valid\_data, final\_valid\_data]:
640             \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(M):
641                 round\_train\_data.append(cur\_train\_data)
642                 round\_valid\_data.append(cur\_valid\_data)
643 
644     \textcolor{keyword}{def }get\_scores\_and\_std(perfs):
645         \textcolor{keyword}{def }\_get\_mean(l):
646             \textcolor{keywordflow}{return} sum(l) * 1.0 / len(l)
647 
648         \textcolor{keyword}{def }\_get\_std(l):
649             \textcolor{keywordflow}{return} np.std(np.array(l), dtype=np.float64)
650 
651         ret = dd(list)
652         \textcolor{keywordflow}{for} perf \textcolor{keywordflow}{in} perfs:
653             \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} perf.items():
654                 ret[k].append(v)
655         final\_ret = \{\}
656         \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} ret.items():
657             final\_ret[k + \textcolor{stringliteral}{'\_mean'}] = \_get\_mean(v)
658             final\_ret[k + \textcolor{stringliteral}{'\_std'}] = \_get\_std(v)
659         \textcolor{keywordflow}{return} final\_ret
660 
661     file\_index = 0
662     my\_valid\_data = [
663         all\_valid\_data[0] + all\_rest\_data[0],
664         all\_valid\_data[-1] + all\_rest\_data[-1],
665     ]
666     my\_valid\_names = [\textcolor{stringliteral}{'MTD'}, \textcolor{stringliteral}{'BASELINE'}]
667     \textcolor{keywordflow}{for} train\_name \textcolor{keywordflow}{in} NAMES:
668         \textcolor{keywordflow}{for} valid\_name \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'INIT'}, \textcolor{stringliteral}{'ALL'}]:
669             \textcolor{keywordflow}{if} train\_name \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'MTD'}, \textcolor{stringliteral}{'BASELINE'}] \textcolor{keywordflow}{or} valid\_name == \textcolor{stringliteral}{'INIT'}:
670                 file\_index += M
671                 \textcolor{keywordflow}{continue}
672             \textcolor{keywordflow}{for} valid\_id \textcolor{keywordflow}{in} range(2):
673                 valid\_filename = join(cur\_dir, \textcolor{stringliteral}{'DATA\_BREAK\_data.pkl'})
674                 pickle.dump(my\_valid\_data[valid\_id], open(valid\_filename, \textcolor{stringliteral}{'wb'}))
675                 perfs = []
676                 \textcolor{keywordflow}{for} m \textcolor{keywordflow}{in} range(M):
677                     perf = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_af40bd2583024f251c70529d0d0863258}{batch\_valid\_with\_data}(
678                         opt,
679                         \textcolor{stringliteral}{'OVERALL\_TEST'} \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} seq2seq \textcolor{keywordflow}{else} \textcolor{stringliteral}{'SEQ2SEQ\_TEST'},
680                         file\_index + m,
681                         valid\_filename,
682                         constrain\_=\textcolor{keyword}{True},
683                     )
684                     perfs.append(perf)
685                 scores = get\_scores\_and\_std(perfs)
686                 \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(
687                     \textcolor{stringliteral}{'\{\} on \{\}: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(train\_name, my\_valid\_names[valid\_id], scores)
688                 )
689             file\_index += M
690 
691 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bd2ed10dc695764b3b3f40163c98dae}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bd2ed10dc695764b3b3f40163c98dae}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!overall\+\_\+run\+\_\+rounds\+\_\+breakdown@{overall\+\_\+run\+\_\+rounds\+\_\+breakdown}}
\index{overall\+\_\+run\+\_\+rounds\+\_\+breakdown@{overall\+\_\+run\+\_\+rounds\+\_\+breakdown}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{overall\+\_\+run\+\_\+rounds\+\_\+breakdown()}{overall\_run\_rounds\_breakdown()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+overall\+\_\+run\+\_\+rounds\+\_\+breakdown (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{seq2seq = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 726 of file run.\+py.


\begin{DoxyCode}
726 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bd2ed10dc695764b3b3f40163c98dae}{overall\_run\_rounds\_breakdown}(opt, seq2seq=False):
727     VERSIONS = [13, 14, 15, \textcolor{stringliteral}{'BASELINE\_2'}]
728     NAMES = [\textcolor{stringliteral}{'MTD LIMIT'}, \textcolor{stringliteral}{'MTD'}, \textcolor{stringliteral}{'MTD NO MODEL FEEDBACK'}, \textcolor{stringliteral}{'BASELINE'}]
729 
730     all\_train\_data, all\_valid\_data, all\_rest\_data = [], [], []
731     \textcolor{keywordflow}{for} v\_id, version \textcolor{keywordflow}{in} enumerate(VERSIONS):
732         version\_train\_data, version\_valid\_data, version\_rest\_data = [], [], []
733         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(2, 7):
734             final\_opt = deepcopy(opt)
735             final\_opt[\textcolor{stringliteral}{'start\_round'}] = i
736             cur\_train\_data, cur\_valid\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}{get\_init\_data}(
737                 final\_opt, delta\_only=\textcolor{keyword}{True}, version\_num=version, resplit=\textcolor{keyword}{True}
738             )
739             cur\_rest\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9acbe1fe240a624b01fed3f073cc780}{get\_rest\_data}(final\_opt, version\_num=version)
740             version\_train\_data.append(cur\_train\_data)
741             version\_valid\_data.extend(cur\_valid\_data)
742             version\_rest\_data.extend(cur\_rest\_data)
743         print(
744             \textcolor{stringliteral}{'\{\}: train \{\} test \{\} rest \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
745                 NAMES[v\_id],
746                 len(version\_train\_data),
747                 len(version\_valid\_data),
748                 len(version\_rest\_data),
749             )
750         )
751         all\_train\_data.append(version\_train\_data)
752         all\_valid\_data.append(version\_valid\_data)
753         all\_rest\_data.append(version\_rest\_data)
754 
755     init\_train\_data, init\_valid\_data = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae84843b54586b020d47c60d95340e1d7}{get\_init\_data}(opt, base\_only=\textcolor{keyword}{True})
756     init\_valid\_data.extend(init\_train\_data)
757     print(\textcolor{stringliteral}{'init: test \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(len(init\_valid\_data)))
758 
759     final\_valid\_data = copy(init\_valid\_data)
760     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(all\_rest\_data)):
761         final\_valid\_data.extend(all\_valid\_data[i])
762         final\_valid\_data.extend(all\_rest\_data[i])
763     print(\textcolor{stringliteral}{'all: test \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(len(final\_valid\_data)))
764 
765     round\_train\_data, round\_valid\_data = [], []
766     M = opt[\textcolor{stringliteral}{'num\_runs'}]
767     \textcolor{keywordflow}{for} cur\_train\_data \textcolor{keywordflow}{in} all\_train\_data:
768         \textcolor{keywordflow}{for} cur\_valid\_data \textcolor{keywordflow}{in} [init\_valid\_data, final\_valid\_data]:
769             \textcolor{keywordflow}{for} round\_index \textcolor{keywordflow}{in} range(5):
770                 tmp\_train\_data = []
771                 \textcolor{keywordflow}{for} tmp\_round\_index \textcolor{keywordflow}{in} range(round\_index + 1):
772                     tmp\_train\_data.extend(cur\_train\_data[tmp\_round\_index])
773                 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(M):
774                     round\_train\_data.append(tmp\_train\_data)
775                     round\_valid\_data.append(cur\_valid\_data)
776 
777     final\_opt = deepcopy(opt)
778     final\_opt[\textcolor{stringliteral}{'num\_runs'}] = 1
779     perfs = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1b5b55764d0ead5087efdcc429514c3e}{batch\_train}(
780         final\_opt,
781         \textcolor{stringliteral}{'OVERALL\_ROUND\_BREAK'} \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} seq2seq \textcolor{keywordflow}{else} \textcolor{stringliteral}{'SEQ2SEQ\_ROUND\_BREAK'},
782         round\_train\_data,
783         round\_valid\_data,
784         save\_all=\textcolor{keyword}{True},
785         return\_acc\_len=\textcolor{keyword}{True},
786         seq2seq=seq2seq,
787     )
788 
789     \textcolor{keyword}{def }get\_acc\_and\_acc\_len(perfs):
790         acc, acc\_len, cnts = 0.0, [0.0 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(4)], 0
791         accs = []
792         \textcolor{keywordflow}{for} i, (cur\_acc, cur\_acc\_len) \textcolor{keywordflow}{in} enumerate(perfs):
793             \textcolor{keywordflow}{if} cur\_acc == 0:
794                 \textcolor{keywordflow}{continue}
795             acc += cur\_acc
796             accs.append(cur\_acc)
797             \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} range(4):
798                 acc\_len[j] += cur\_acc\_len[j]
799             cnts += 1
800         \textcolor{keywordflow}{if} cnts == 0:
801             \textcolor{keywordflow}{return} acc, acc\_len
802         acc /= cnts
803         \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} range(4):
804             acc\_len[j] /= cnts
805         stddev = np.std(np.array(accs), dtype=np.float64)
806         \textcolor{keywordflow}{return} acc, acc\_len, stddev
807 
808     start, end = 0, M
809     \textcolor{keywordflow}{for} train\_name \textcolor{keywordflow}{in} NAMES:
810         \textcolor{keywordflow}{for} valid\_name \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'INIT'}, \textcolor{stringliteral}{'ALL'}]:
811             \textcolor{keywordflow}{for} round\_index \textcolor{keywordflow}{in} range(5):
812                 sub\_perfs = perfs[start:end]
813                 acc, acc\_len, stddev = get\_acc\_and\_acc\_len(sub\_perfs)
814                 \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(
815                     \textcolor{stringliteral}{'\{\} on \{\} round\{\}: acc \{\} stddev \{\} acc\_len \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
816                         train\_name, valid\_name, round\_index, acc, stddev, acc\_len
817                     )
818                 )
819                 \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ab07d5984a91787cd069fa0a7deba945f}{log\_only}(
820                     \textcolor{stringliteral}{'\{\} on \{\} round \{\}: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
821                         train\_name, valid\_name, round\_index, sub\_perfs
822                     )
823                 )
824                 start = end
825                 end = start + M
826 
827 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a68c9d28aae4d256af00522c8617f93f1}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a68c9d28aae4d256af00522c8617f93f1}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!overall\+\_\+split@{overall\+\_\+split}}
\index{overall\+\_\+split@{overall\+\_\+split}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{overall\+\_\+split()}{overall\_split()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+overall\+\_\+split (\begin{DoxyParamCaption}\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 127 of file run.\+py.


\begin{DoxyCode}
127 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a68c9d28aae4d256af00522c8617f93f1}{overall\_split}(opt):
128     VERSIONS = [13, 14, 15, \textcolor{stringliteral}{'BASELINE\_2'}]
129 
130     min\_for\_round = [1000 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(5)]
131 
132     \textcolor{keywordflow}{for} version \textcolor{keywordflow}{in} VERSIONS:
133         \textcolor{keywordflow}{for} round\_index \textcolor{keywordflow}{in} range(1, 6):
134             output\_dir = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a7f8196f264013bc16be3e85fe5c68f0d}{get\_output\_dir}(opt, round\_index, version\_num=version)
135             filtered\_data\_list = pickle.load(
136                 open(join(output\_dir, \textcolor{stringliteral}{'filtered\_data\_list.pkl'}), \textcolor{stringliteral}{'rb'})
137             )
138             min\_for\_round[round\_index - 1] = min(
139                 min\_for\_round[round\_index - 1], len(filtered\_data\_list)
140             )
141 
142     \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controls_a0db4b9d9584cef90aa2515a75e741774}{flatten}(a):
143         \textcolor{keywordflow}{return} [e \textcolor{keywordflow}{for} aa \textcolor{keywordflow}{in} a \textcolor{keywordflow}{for} e \textcolor{keywordflow}{in} aa]
144 
145     \textcolor{keywordflow}{for} round\_index \textcolor{keywordflow}{in} range(1, 6):
146         min\_num = min\_for\_round[round\_index - 1]
147         train\_num, test\_num = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a693eb03afbb820bbfe8b47b12e69e519}{int}(min\_num * 0.8), \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a693eb03afbb820bbfe8b47b12e69e519}{int}(min\_num * 0.2)
148         \textcolor{keywordflow}{for} version \textcolor{keywordflow}{in} VERSIONS:
149             output\_dir = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a7f8196f264013bc16be3e85fe5c68f0d}{get\_output\_dir}(opt, round\_index, version\_num=version)
150             filtered\_data\_list = pickle.load(
151                 open(join(output\_dir, \textcolor{stringliteral}{'filtered\_data\_list.pkl'}), \textcolor{stringliteral}{'rb'})
152             )
153             random.seed(13)
154             random.shuffle(filtered\_data\_list)
155             train\_list, test\_list, rest\_list = (
156                 \hyperlink{namespaceprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controls_a0db4b9d9584cef90aa2515a75e741774}{flatten}(filtered\_data\_list[:train\_num]),
157                 \hyperlink{namespaceprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controls_a0db4b9d9584cef90aa2515a75e741774}{flatten}(filtered\_data\_list[train\_num : train\_num + test\_num]),
158                 \hyperlink{namespaceprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controls_a0db4b9d9584cef90aa2515a75e741774}{flatten}(filtered\_data\_list[train\_num + test\_num :]),
159             )
160             pickle.dump(
161                 train\_list, open(join(output\_dir, \textcolor{stringliteral}{'resplit\_delta\_train\_data.pkl'}), \textcolor{stringliteral}{'wb'})
162             )
163             pickle.dump(
164                 test\_list, open(join(output\_dir, \textcolor{stringliteral}{'resplit\_delta\_valid\_data.pkl'}), \textcolor{stringliteral}{'wb'})
165             )
166             pickle.dump(
167                 rest\_list, open(join(output\_dir, \textcolor{stringliteral}{'resplit\_rest\_data.pkl'}), \textcolor{stringliteral}{'wb'})
168             )
169 
170 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!print\+\_\+and\+\_\+log@{print\+\_\+and\+\_\+log}}
\index{print\+\_\+and\+\_\+log@{print\+\_\+and\+\_\+log}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{print\+\_\+and\+\_\+log()}{print\_and\_log()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+print\+\_\+and\+\_\+log (\begin{DoxyParamCaption}\item[{}]{s }\end{DoxyParamCaption})}



Definition at line 41 of file run.\+py.


\begin{DoxyCode}
41 \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(s):
42     print(s)
43     f\_log = open(join(cur\_dir, \textcolor{stringliteral}{'mtd\_log.txt'}), \textcolor{stringliteral}{'a+'})
44     f\_log.write(s + \textcolor{stringliteral}{'\(\backslash\)n'})
45     f\_log.close()
46 
47 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a36a5f4f6f9df0611a6818610518d2cf0}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a36a5f4f6f9df0611a6818610518d2cf0}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!train@{train}}
\index{train@{train}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{train()}{train()}}
{\footnotesize\ttfamily def projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+train (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{round\+\_\+index,  }\item[{}]{machine\+\_\+index,  }\item[{}]{file\+\_\+index,  }\item[{}]{train\+\_\+data,  }\item[{}]{valid\+\_\+data,  }\item[{}]{valid\+\_\+weights = {\ttfamily None},  }\item[{}]{save\+\_\+all = {\ttfamily True},  }\item[{}]{return\+\_\+acc\+\_\+len = {\ttfamily False},  }\item[{}]{seq2seq = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 182 of file run.\+py.


\begin{DoxyCode}
182 ):
183     \textcolor{keywordflow}{if} valid\_weights \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
184         \textcolor{keyword}{assert} len(valid\_data) == len(valid\_weights), (
185             len(valid\_data),
186             len(valid\_weights),
187         )
188 
189     train\_filename = join(cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_train.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, file\_index))
190     valid\_filename = join(cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_valid.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, file\_index))
191     out\_filename = join(cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_out.txt'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, file\_index))
192 
193     pickle.dump(train\_data, open(train\_filename, \textcolor{stringliteral}{'wb'}))
194     pickle.dump(valid\_data, open(valid\_filename, \textcolor{stringliteral}{'wb'}))
195 
196     \textcolor{keywordflow}{if} valid\_weights \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
197         weight\_filename = join(
198             cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_weights.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, file\_index)
199         )
200         pickle.dump(valid\_weights, open(weight\_filename, \textcolor{stringliteral}{'wb'}))
201     \textcolor{keywordflow}{else}:
202         weight\_filename = \textcolor{stringliteral}{''}
203 
204     \textcolor{keywordflow}{if} save\_all:
205         model\_filename = join(
206             cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_model.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, file\_index)
207         )
208         data\_agent\_filename = join(
209             cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_data\_agent.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, file\_index)
210         )
211         wrong\_data\_filename = join(
212             cur\_dir, \textcolor{stringliteral}{'\{\}\_\{\}\_wrong\_data.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(round\_index, file\_index)
213         )
214     \textcolor{keywordflow}{else}:
215         model\_filename = \textcolor{stringliteral}{''}
216         data\_agent\_filename = \textcolor{stringliteral}{''}
217         wrong\_data\_filename = \textcolor{stringliteral}{''}
218 
219     new\_opt = \{
220         \textcolor{stringliteral}{'max\_iter'}: opt[\textcolor{stringliteral}{'max\_iter'}],
221         \textcolor{stringliteral}{'num\_runs'}: opt[\textcolor{stringliteral}{'num\_runs'}],
222         \textcolor{stringliteral}{'train\_data\_file'}: train\_filename,
223         \textcolor{stringliteral}{'valid\_data\_file'}: valid\_filename,
224         \textcolor{stringliteral}{'perf\_out\_file'}: out\_filename,
225         \textcolor{stringliteral}{'weight\_file'}: weight\_filename,
226         \textcolor{stringliteral}{'model\_file'}: model\_filename,
227         \textcolor{stringliteral}{'data\_agent\_file'}: data\_agent\_filename,
228         \textcolor{stringliteral}{'wrong\_data\_file'}: wrong\_data\_filename,
229         \textcolor{stringliteral}{'task'}: \textcolor{stringliteral}{'projects.mastering\_the\_dungeon.tasks.graph\_world2.agents'},
230         \textcolor{stringliteral}{'batchsize'}: 1,
231         \textcolor{stringliteral}{'rnn\_h'}: opt[\textcolor{stringliteral}{'rnn\_h'}],
232         \textcolor{stringliteral}{'embedding\_dim'}: opt[\textcolor{stringliteral}{'embedding\_dim'}],
233         \textcolor{stringliteral}{'cuda'}: \textcolor{keyword}{True},
234         \textcolor{stringliteral}{'seq2seq'}: seq2seq,
235     \}
236     os.chdir(parent\_dir)
237 
238     job\_num = machine\_index % opt[\textcolor{stringliteral}{'num\_machines'}]
239     job\_in\_file = \textcolor{stringliteral}{'../../../projects/graph\_world2/job-in-\{\}.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(job\_num)
240     job\_out\_file = \textcolor{stringliteral}{'../../../projects/graph\_world2/job-out-\{\}.txt'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(job\_num)
241 
242     \textcolor{keywordflow}{if} os.path.isfile(job\_out\_file):
243         os.remove(job\_out\_file)
244     \textcolor{keywordflow}{if} os.path.isfile(job\_in\_file):
245         os.remove(job\_in\_file)
246 
247     with open(job\_in\_file, \textcolor{stringliteral}{'wb'}) \textcolor{keyword}{as} f\_job\_in:
248         pickle.dump(new\_opt, f\_job\_in)
249 
250     start\_time = time.time()
251     \textcolor{keywordflow}{while} \textcolor{keyword}{True}:
252         time.sleep(5)
253         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isfile(job\_in\_file):
254             \textcolor{keywordflow}{break}
255         \textcolor{keywordflow}{if} time.time() - start\_time > 60 * 5:
256             \textcolor{keywordflow}{try}:
257                 os.remove(job\_in\_file)
258             \textcolor{keywordflow}{except}:
259                 \textcolor{keywordflow}{pass}
260             \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(\textcolor{stringliteral}{'job \{\} timeout'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(job\_num))
261             \textcolor{keywordflow}{if} return\_acc\_len:
262                 \textcolor{keywordflow}{return} 0.0, [0.0 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(4)]
263             \textcolor{keywordflow}{return} 0.0
264 
265     start\_time = time.time()
266     \textcolor{keywordflow}{while} \textcolor{keyword}{True}:
267         time.sleep(5)
268         \textcolor{keywordflow}{if} time.time() - start\_time > opt[\textcolor{stringliteral}{'job\_timeout'}]:
269             \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(
270                 \textcolor{stringliteral}{'job \{\} tiemout after \{\} seconds, bad gpu'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
271                     job\_num, opt[\textcolor{stringliteral}{'job\_timeout'}]
272                 )
273             )
274             \textcolor{keywordflow}{if} return\_acc\_len:
275                 \textcolor{keywordflow}{return} 0.0, [0.0 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(4)]
276             \textcolor{keywordflow}{return} 0.0
277 
278         \textcolor{keywordflow}{if} os.path.isfile(job\_out\_file):
279             with open(job\_out\_file) \textcolor{keyword}{as} f\_job\_out:
280                 result = f\_job\_out.read().strip()
281             os.remove(job\_out\_file)
282             \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(\textcolor{stringliteral}{'job \{\} exited: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(job\_num, result))
283             \textcolor{keywordflow}{if} result != \textcolor{stringliteral}{'0'}:
284                 \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(\textcolor{stringliteral}{'job \{\} abandoned'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(job\_num))
285                 \textcolor{keywordflow}{if} return\_acc\_len:
286                     \textcolor{keywordflow}{return} 0.0, [0.0 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(4)]
287                 \textcolor{keywordflow}{return} 0.0
288             \textcolor{keywordflow}{try}:
289                 f\_perf = open(out\_filename)
290                 perf = \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a2b2eac696023a001430f5e711592c0d9}{float}(f\_perf.readline().strip())
291                 f\_perf.close()
292                 \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(\textcolor{stringliteral}{'job \{\} perf: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(job\_num, perf))
293                 \textcolor{keywordflow}{if} return\_acc\_len:
294                     f\_acc\_len = open(out\_filename + \textcolor{stringliteral}{'.len'})
295                     acc\_len = list(map(float, f\_acc\_len.readline().strip().split()))
296                     f\_acc\_len.close()
297                     \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(\textcolor{stringliteral}{'job \{\} acc\_len: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(job\_num, acc\_len))
298                     \textcolor{keywordflow}{return} perf, acc\_len
299                 \textcolor{keywordflow}{return} perf
300             \textcolor{keywordflow}{except}:
301                 \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acdf4e0fae33f363cf0b352a72788f9bd}{print\_and\_log}(\textcolor{stringliteral}{'Error: \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(traceback.format\_exc()))
302                 \textcolor{keywordflow}{if} return\_acc\_len:
303                     \textcolor{keywordflow}{return} 0.0, [0.0 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(4)]
304                 \textcolor{keywordflow}{return} 0.0
305 
306 
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a4c97e66fe88390114c31d1916192cb95}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a4c97e66fe88390114c31d1916192cb95}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!action@{action}}
\index{action@{action}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{action}{action}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+action}



Definition at line 865 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae62c7962cac2f39a21dc264912b974c0}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae62c7962cac2f39a21dc264912b974c0}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!argparser@{argparser}}
\index{argparser@{argparser}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{argparser}{argparser}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+argparser}



Definition at line 829 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a6fc0c9b519a36f82b65bcd398f1fbb9d}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a6fc0c9b519a36f82b65bcd398f1fbb9d}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!bool@{bool}}
\index{bool@{bool}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{bool}{bool}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+bool}



Definition at line 833 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9ff32a31f22bf6e12fc9d6f7e6b7866}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ae9ff32a31f22bf6e12fc9d6f7e6b7866}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!checkpoint\+\_\+dir@{checkpoint\+\_\+dir}}
\index{checkpoint\+\_\+dir@{checkpoint\+\_\+dir}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{checkpoint\+\_\+dir}{checkpoint\_dir}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+checkpoint\+\_\+dir}



Definition at line 32 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a58ed2597b635cdea32b478602c3734fc}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a58ed2597b635cdea32b478602c3734fc}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!constrain\+\_\+@{constrain\+\_\+}}
\index{constrain\+\_\+@{constrain\+\_\+}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{constrain\+\_\+}{constrain\_}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+constrain\+\_\+}



Definition at line 892 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a402778951c7151a46a1a7d74f1a21026}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a402778951c7151a46a1a7d74f1a21026}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!cur\+\_\+dir@{cur\+\_\+dir}}
\index{cur\+\_\+dir@{cur\+\_\+dir}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{cur\+\_\+dir}{cur\_dir}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+cur\+\_\+dir}



Definition at line 33 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1315d0bb7e5868ecaadd5daf60275bb1}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1315d0bb7e5868ecaadd5daf60275bb1}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!default@{default}}
\index{default@{default}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{default}{default}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+default}



Definition at line 832 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a2b2eac696023a001430f5e711592c0d9}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a2b2eac696023a001430f5e711592c0d9}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!float@{float}}
\index{float@{float}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{float}{float}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+float}



Definition at line 834 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a693eb03afbb820bbfe8b47b12e69e519}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a693eb03afbb820bbfe8b47b12e69e519}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!int@{int}}
\index{int@{int}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{int}{int}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+int}



Definition at line 832 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a9bc5bb7f931e20fd8bad9fbad46b6886}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!opt@{opt}}
\index{opt@{opt}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+opt}



Definition at line 876 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ab906f496406f366fa9a0890f218382fc}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_ab906f496406f366fa9a0890f218382fc}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!parent\+\_\+dir@{parent\+\_\+dir}}
\index{parent\+\_\+dir@{parent\+\_\+dir}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{parent\+\_\+dir}{parent\_dir}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+parent\+\_\+dir}



Definition at line 31 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acae9db44a348a4b21fda3b408f0cb7d9}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_acae9db44a348a4b21fda3b408f0cb7d9}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!seq2seq@{seq2seq}}
\index{seq2seq@{seq2seq}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{seq2seq}{seq2seq}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+seq2seq}



Definition at line 889 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1a278519da6e3a4f26c825ba3e5308c1}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a1a278519da6e3a4f26c825ba3e5308c1}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!S\+T\+A\+R\+T\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+M\+E\+O\+UT@{S\+T\+A\+R\+T\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+M\+E\+O\+UT}}
\index{S\+T\+A\+R\+T\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+M\+E\+O\+UT@{S\+T\+A\+R\+T\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+M\+E\+O\+UT}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{S\+T\+A\+R\+T\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+M\+E\+O\+UT}{START\_TASK\_TIMEOUT}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+S\+T\+A\+R\+T\+\_\+\+T\+A\+S\+K\+\_\+\+T\+I\+M\+E\+O\+UT}



Definition at line 30 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a6289bcc1c9938537f4b6fc4283868a53}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a6289bcc1c9938537f4b6fc4283868a53}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!str@{str}}
\index{str@{str}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{str}{str}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+str}



Definition at line 847 of file run.\+py.

\mbox{\Hypertarget{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a0d607cd3866953f5de198f609be7c0fc}\label{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a0d607cd3866953f5de198f609be7c0fc}} 
\index{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}!type@{type}}
\index{type@{type}!projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run@{projects\+::mastering\+\_\+the\+\_\+dungeon\+::mturk\+::tasks\+::\+M\+T\+D\+::run}}
\subsubsection{\texorpdfstring{type}{type}}
{\footnotesize\ttfamily projects.\+mastering\+\_\+the\+\_\+dungeon.\+mturk.\+tasks.\+M\+T\+D.\+run.\+type}



Definition at line 832 of file run.\+py.

