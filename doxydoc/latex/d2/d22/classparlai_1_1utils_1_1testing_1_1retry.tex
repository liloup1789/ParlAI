\hypertarget{classparlai_1_1utils_1_1testing_1_1retry}{}\section{parlai.\+utils.\+testing.\+retry Class Reference}
\label{classparlai_1_1utils_1_1testing_1_1retry}\index{parlai.\+utils.\+testing.\+retry@{parlai.\+utils.\+testing.\+retry}}


Inheritance diagram for parlai.\+utils.\+testing.\+retry\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=196pt]{de/d71/classparlai_1_1utils_1_1testing_1_1retry__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+utils.\+testing.\+retry\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=196pt]{d0/d6b/classparlai_1_1utils_1_1testing_1_1retry__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1utils_1_1testing_1_1retry_afa31eb1816cd31f1a22747e7289747c6}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1utils_1_1testing_1_1retry_abd5233dc28b07a53cd11347e5e44c44f}{ntries}=3, \hyperlink{classparlai_1_1utils_1_1testing_1_1retry_a69ead6d82dec33d05ba94a3d561e6dfc}{log\+\_\+retry}=False)
\item 
def \hyperlink{classparlai_1_1utils_1_1testing_1_1retry_ac034808bb9ab13c8f8314d7069c6325e}{\+\_\+\+\_\+call\+\_\+\+\_\+} (self, testfn)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1utils_1_1testing_1_1retry_abd5233dc28b07a53cd11347e5e44c44f}{ntries}
\item 
\hyperlink{classparlai_1_1utils_1_1testing_1_1retry_a69ead6d82dec33d05ba94a3d561e6dfc}{log\+\_\+retry}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Decorator for flaky tests. Test is run up to ntries times, retrying on failure.

:param ntries:
    the number of tries to attempt
:param log_retry:
    if True, prints to stdout on retry to avoid being seen as "hanging"

On the last time, the test will simply fail.

>>> @retry(ntries=10)
... def test_flaky(self):
...     import random
...     self.assertLess(0.5, random.random())
\end{DoxyVerb}
 

Definition at line 95 of file testing.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1utils_1_1testing_1_1retry_afa31eb1816cd31f1a22747e7289747c6}\label{classparlai_1_1utils_1_1testing_1_1retry_afa31eb1816cd31f1a22747e7289747c6}} 
\index{parlai\+::utils\+::testing\+::retry@{parlai\+::utils\+::testing\+::retry}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::utils\+::testing\+::retry@{parlai\+::utils\+::testing\+::retry}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+utils.\+testing.\+retry.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{ntries = {\ttfamily 3},  }\item[{}]{log\+\_\+retry = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 112 of file testing.\+py.


\begin{DoxyCode}
112     \textcolor{keyword}{def }\_\_init\_\_(self, ntries=3, log\_retry=False):
113         self.ntries = ntries
114         self.log\_retry = log\_retry
115 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1utils_1_1testing_1_1retry_ac034808bb9ab13c8f8314d7069c6325e}\label{classparlai_1_1utils_1_1testing_1_1retry_ac034808bb9ab13c8f8314d7069c6325e}} 
\index{parlai\+::utils\+::testing\+::retry@{parlai\+::utils\+::testing\+::retry}!\+\_\+\+\_\+call\+\_\+\+\_\+@{\+\_\+\+\_\+call\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+call\+\_\+\+\_\+@{\+\_\+\+\_\+call\+\_\+\+\_\+}!parlai\+::utils\+::testing\+::retry@{parlai\+::utils\+::testing\+::retry}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+call\+\_\+\+\_\+()}{\_\_call\_\_()}}
{\footnotesize\ttfamily def parlai.\+utils.\+testing.\+retry.\+\_\+\+\_\+call\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{testfn }\end{DoxyParamCaption})}

\begin{DoxyVerb}Call testfn(), possibly multiple times on failureException.
\end{DoxyVerb}
 

Definition at line 116 of file testing.\+py.


\begin{DoxyCode}
116     \textcolor{keyword}{def }\_\_call\_\_(self, testfn):
117         \textcolor{stringliteral}{"""}
118 \textcolor{stringliteral}{        Call testfn(), possibly multiple times on failureException.}
119 \textcolor{stringliteral}{        """}
120         \textcolor{keyword}{from} functools \textcolor{keyword}{import} wraps
121 
122         @wraps(testfn)
123         \textcolor{keyword}{def }\_wrapper(testself, *args, **kwargs):
124             \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(self.ntries - 1):
125                 \textcolor{keywordflow}{try}:
126                     \textcolor{keywordflow}{return} testfn(testself, *args, **kwargs)
127                 \textcolor{keywordflow}{except} testself.failureException:
128                     \textcolor{keywordflow}{if} self.log\_retry:
129                         print(\textcolor{stringliteral}{"Retrying \{\}"}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(testfn))
130             \textcolor{comment}{# last time, actually throw any errors there may be}
131             \textcolor{keywordflow}{return} testfn(testself, *args, **kwargs)
132 
133         \textcolor{keywordflow}{return} \_wrapper
134 
135 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1utils_1_1testing_1_1retry_a69ead6d82dec33d05ba94a3d561e6dfc}\label{classparlai_1_1utils_1_1testing_1_1retry_a69ead6d82dec33d05ba94a3d561e6dfc}} 
\index{parlai\+::utils\+::testing\+::retry@{parlai\+::utils\+::testing\+::retry}!log\+\_\+retry@{log\+\_\+retry}}
\index{log\+\_\+retry@{log\+\_\+retry}!parlai\+::utils\+::testing\+::retry@{parlai\+::utils\+::testing\+::retry}}
\subsubsection{\texorpdfstring{log\+\_\+retry}{log\_retry}}
{\footnotesize\ttfamily parlai.\+utils.\+testing.\+retry.\+log\+\_\+retry}



Definition at line 114 of file testing.\+py.

\mbox{\Hypertarget{classparlai_1_1utils_1_1testing_1_1retry_abd5233dc28b07a53cd11347e5e44c44f}\label{classparlai_1_1utils_1_1testing_1_1retry_abd5233dc28b07a53cd11347e5e44c44f}} 
\index{parlai\+::utils\+::testing\+::retry@{parlai\+::utils\+::testing\+::retry}!ntries@{ntries}}
\index{ntries@{ntries}!parlai\+::utils\+::testing\+::retry@{parlai\+::utils\+::testing\+::retry}}
\subsubsection{\texorpdfstring{ntries}{ntries}}
{\footnotesize\ttfamily parlai.\+utils.\+testing.\+retry.\+ntries}



Definition at line 113 of file testing.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/utils/\hyperlink{testing_8py}{testing.\+py}\end{DoxyCompactItemize}
