\hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent}{}\section{parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent Class Reference}
\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent}\index{parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent@{parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent}}


Inheritance diagram for parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{df/dc5/classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=305pt]{dc/da1/classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_aedf3441c187fc809926e490a9cab9875}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6c0d7c9c31b38e99b747be88395d689f}{opt})
\item 
def \hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a407dcd1aa927f8065334a825b2d099d9}{txt2vec} (self, text, vec\+\_\+type=list)
\item 
def \hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a6269b15dc01bfaac5dd1b5da995f2f0f}{vec2txt} (self, vec)
\item 
def \hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a35cefbd011319119e4a395afd6618ac6}{act} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a255b3fa65375a03d2e74e0c2b2cc0fad}{tokenizer}
\item 
\hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a5b59ef24fb4aba9be417dd1c5ebd63af}{start\+\_\+token}
\item 
\hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a73ca2778d48882faa1bba25e33841d9c}{end\+\_\+token}
\item 
\hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a19f8c6b3d3954b4db246df54a4f8cb90}{null\+\_\+token}
\item 
\hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_abbfc373c86a5d10c89b022c7082a051b}{start\+\_\+idx}
\item 
\hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a108b974b0f3048fc15aafd83cd0774f6}{end\+\_\+idx}
\item 
\hyperlink{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a27aa43e578c745c4f7a340973a9e9eff}{pad\+\_\+idx}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\begin{DoxyVerb}Allow to use the Torch Agent with the wordpiece dictionary of Hugging Face.
\end{DoxyVerb}
 

Definition at line 22 of file bert\+\_\+dictionary.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_aedf3441c187fc809926e490a9cab9875}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_aedf3441c187fc809926e490a9cab9875}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 27 of file bert\+\_\+dictionary.\+py.


\begin{DoxyCode}
27     \textcolor{keyword}{def }\_\_init\_\_(self, opt):
28         super().\_\_init\_\_(opt)
29         \textcolor{comment}{# initialize from vocab path}
30         \hyperlink{namespaceparlai_1_1core_1_1build__data_ab74f0e428f05e5d91fa93c8afb367622}{download}(opt[\textcolor{stringliteral}{'datapath'}])
31         vocab\_path = os.path.join(opt[\textcolor{stringliteral}{'datapath'}], \textcolor{stringliteral}{'models'}, \textcolor{stringliteral}{'bert\_models'}, VOCAB\_PATH)
32         self.tokenizer = BertTokenizer.from\_pretrained(vocab\_path)
33 
34         self.start\_token = \textcolor{stringliteral}{'[CLS]'}
35         self.end\_token = \textcolor{stringliteral}{'[SEP]'}
36         self.null\_token = \textcolor{stringliteral}{'[PAD]'}
37         self.start\_idx = self.tokenizer.convert\_tokens\_to\_ids([\textcolor{stringliteral}{'[CLS]'}])[
38             0
39         ]  \textcolor{comment}{# should be 101}
40         self.end\_idx = self.tokenizer.convert\_tokens\_to\_ids([\textcolor{stringliteral}{'[SEP]'}])[
41             0
42         ]  \textcolor{comment}{# should be 102}
43         self.pad\_idx = self.tokenizer.convert\_tokens\_to\_ids([\textcolor{stringliteral}{'[PAD]'}])[0]  \textcolor{comment}{# should be 0}
44         \textcolor{comment}{# set tok2ind for special tokens}
45         self.tok2ind[self.start\_token] = self.start\_idx
46         self.tok2ind[self.end\_token] = self.end\_idx
47         self.tok2ind[self.null\_token] = self.pad\_idx
48         \textcolor{comment}{# set ind2tok for special tokens}
49         self.ind2tok[self.start\_idx] = self.start\_token
50         self.ind2tok[self.end\_idx] = self.end\_token
51         self.ind2tok[self.pad\_idx] = self.null\_token
52 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a35cefbd011319119e4a395afd6618ac6}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a35cefbd011319119e4a395afd6618ac6}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!act@{act}}
\index{act@{act}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{act()}{act()}}
{\footnotesize\ttfamily def parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+act (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 67 of file bert\+\_\+dictionary.\+py.


\begin{DoxyCode}
67     \textcolor{keyword}{def }act(self):
68         \textcolor{keywordflow}{return} \{\}
69 \end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a407dcd1aa927f8065334a825b2d099d9}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a407dcd1aa927f8065334a825b2d099d9}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!txt2vec@{txt2vec}}
\index{txt2vec@{txt2vec}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{txt2vec()}{txt2vec()}}
{\footnotesize\ttfamily def parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+txt2vec (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text,  }\item[{}]{vec\+\_\+type = {\ttfamily list} }\end{DoxyParamCaption})}



Definition at line 53 of file bert\+\_\+dictionary.\+py.


\begin{DoxyCode}
53     \textcolor{keyword}{def }txt2vec(self, text, vec\_type=list):
54         tokens = self.tokenizer.\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(text)
55         tokens\_id = self.tokenizer.convert\_tokens\_to\_ids(tokens)
56         \textcolor{keywordflow}{return} tokens\_id
57 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a6269b15dc01bfaac5dd1b5da995f2f0f}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a6269b15dc01bfaac5dd1b5da995f2f0f}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!vec2txt@{vec2txt}}
\index{vec2txt@{vec2txt}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{vec2txt()}{vec2txt()}}
{\footnotesize\ttfamily def parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+vec2txt (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{vec }\end{DoxyParamCaption})}



Definition at line 58 of file bert\+\_\+dictionary.\+py.


\begin{DoxyCode}
58     \textcolor{keyword}{def }vec2txt(self, vec):
59         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} isinstance(vec, list):
60             \textcolor{comment}{# assume tensor}
61             idxs = [idx.item() \textcolor{keywordflow}{for} idx \textcolor{keywordflow}{in} vec.cpu()]
62         \textcolor{keywordflow}{else}:
63             idxs = vec
64         toks = self.tokenizer.convert\_ids\_to\_tokens(idxs)
65         \textcolor{keywordflow}{return} \textcolor{stringliteral}{' '}.join(toks)
66 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a108b974b0f3048fc15aafd83cd0774f6}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a108b974b0f3048fc15aafd83cd0774f6}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!end\+\_\+idx@{end\+\_\+idx}}
\index{end\+\_\+idx@{end\+\_\+idx}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{end\+\_\+idx}{end\_idx}}
{\footnotesize\ttfamily parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+end\+\_\+idx}



Definition at line 40 of file bert\+\_\+dictionary.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a73ca2778d48882faa1bba25e33841d9c}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a73ca2778d48882faa1bba25e33841d9c}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!end\+\_\+token@{end\+\_\+token}}
\index{end\+\_\+token@{end\+\_\+token}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{end\+\_\+token}{end\_token}}
{\footnotesize\ttfamily parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+end\+\_\+token}



Definition at line 35 of file bert\+\_\+dictionary.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a19f8c6b3d3954b4db246df54a4f8cb90}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a19f8c6b3d3954b4db246df54a4f8cb90}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!null\+\_\+token@{null\+\_\+token}}
\index{null\+\_\+token@{null\+\_\+token}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{null\+\_\+token}{null\_token}}
{\footnotesize\ttfamily parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+null\+\_\+token}



Definition at line 36 of file bert\+\_\+dictionary.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a27aa43e578c745c4f7a340973a9e9eff}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a27aa43e578c745c4f7a340973a9e9eff}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!pad\+\_\+idx@{pad\+\_\+idx}}
\index{pad\+\_\+idx@{pad\+\_\+idx}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{pad\+\_\+idx}{pad\_idx}}
{\footnotesize\ttfamily parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+pad\+\_\+idx}



Definition at line 43 of file bert\+\_\+dictionary.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_abbfc373c86a5d10c89b022c7082a051b}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_abbfc373c86a5d10c89b022c7082a051b}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!start\+\_\+idx@{start\+\_\+idx}}
\index{start\+\_\+idx@{start\+\_\+idx}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{start\+\_\+idx}{start\_idx}}
{\footnotesize\ttfamily parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+start\+\_\+idx}



Definition at line 37 of file bert\+\_\+dictionary.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a5b59ef24fb4aba9be417dd1c5ebd63af}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a5b59ef24fb4aba9be417dd1c5ebd63af}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!start\+\_\+token@{start\+\_\+token}}
\index{start\+\_\+token@{start\+\_\+token}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{start\+\_\+token}{start\_token}}
{\footnotesize\ttfamily parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+start\+\_\+token}



Definition at line 34 of file bert\+\_\+dictionary.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a255b3fa65375a03d2e74e0c2b2cc0fad}\label{classparlai_1_1agents_1_1bert__ranker_1_1bert__dictionary_1_1BertDictionaryAgent_a255b3fa65375a03d2e74e0c2b2cc0fad}} 
\index{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}!tokenizer@{tokenizer}}
\index{tokenizer@{tokenizer}!parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent@{parlai\+::agents\+::bert\+\_\+ranker\+::bert\+\_\+dictionary\+::\+Bert\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{tokenizer}{tokenizer}}
{\footnotesize\ttfamily parlai.\+agents.\+bert\+\_\+ranker.\+bert\+\_\+dictionary.\+Bert\+Dictionary\+Agent.\+tokenizer}



Definition at line 32 of file bert\+\_\+dictionary.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/agents/bert\+\_\+ranker/\hyperlink{bert__dictionary_8py}{bert\+\_\+dictionary.\+py}\end{DoxyCompactItemize}
