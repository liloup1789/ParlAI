\hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent}{}\section{projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent Class Reference}
\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent}\index{projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent@{projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent}}


Inheritance diagram for projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=256pt]{dd/d65/classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1Transresne338fb5588380d3711de280a8e865f48d}
\end{center}
\end{figure}


Collaboration diagram for projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=256pt]{df/d49/classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_aeb8b0b2c932460122db8e86c155c3fa4}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classprojects_1_1personality__captions_1_1transresnet_1_1transresnet_1_1TransresnetAgent_a4a66af4ad244944bef1de1010d4f2c1e}{opt}, shared=None)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a645c89d60d3358862f86d192f92a2313}{share} (self)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a8bb118477544ab35e45194dc1f08f4ce}{observe} (self, \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ac52daf43de7ffecd6e1e658e8b472ed6}{observation})
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a5836026083146df8a7b4ed354ecf1070}{train\+\_\+step} (self, valid\+\_\+obs, image\+\_\+feats, personalities, dialogue\+\_\+histories)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a8f934968183ae14794bcec65abaef624}{eval\+\_\+step} (self, valid\+\_\+obs, image\+\_\+feats, personalities, dialogue\+\_\+histories)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a446c248cfc8d115d4944fcddb3bd05cf}{batch\+\_\+act} (self, observations)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ac6efbef147b54cd3e5129b86df095687}{extract\+\_\+texts} (self, obs)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a20dffaa1e8baf3dcaae7601946fa5724}{get\+\_\+dialogue\+\_\+history} (self, obs)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a57fb284e1f2308c4524c72af053c9397}{update\+\_\+metrics} (self, loss, num\+\_\+correct, num\+\_\+samples, dialogue\+\_\+round, med\+\_\+rank=None)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a912122759d9ade4a11ddd1a5b5961069}{receive\+\_\+metrics} (self, metrics\+\_\+dict)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a69f4b7af1d416cb67b9a10159a297e01}{reset} (self)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a3637844305cec03781959fedcbf11457}{reset\+\_\+metrics} (self)
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a3fdcebd154e706f6d0ad6b2dd9fbdbbe}{report} (self)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a79a0a51097fb1cb89751a17879b519e1}{add\+\_\+cmdline\+\_\+args} (argparser)
\begin{DoxyCompactList}\small\item\em Initialization and argument parsers. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a268a551b1ba50a0c8f9352b7576b1e8b}{metrics}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ae162ba43b0f869887558ee6183c4415d}{optimizer}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a85b2589c1a46ad84ba109f09c1450fd1}{history}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_acd2f07e8994da4f38ced44267a8961dc}{personality\+\_\+override}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a2425b6300fe0eba01dfbbc8fa17cdd10}{model}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a4a922732237f28673e03326d3b22d5ba}{fixed\+\_\+cands}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a208f6e1e8025ed7593637eb90eee13b9}{fixed\+\_\+cands\+\_\+enc}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ac52daf43de7ffecd6e1e658e8b472ed6}{observation}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ab075199ab9fa28737825e90f8e3eba2e}{freeze\+\_\+impatience}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a43412e28fc694b66d8d6ecf1e8a53855}{freeze\+\_\+best\+\_\+metric}
\item 
\hyperlink{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a4a9b3b849c8cb771cce4733dd63a0831}{is\+\_\+frozen}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Model from "Engaging Image Chat: Modeling Personality in Grounded Dialogue".

See paper for more details: (https://arxiv.org/abs/1811.00945)

An extension of the model from https://arxiv.org/abs/1810.10665; given
an image, personality, and dialogue history, predicts the next utterance
in a dialogue.
\end{DoxyVerb}
 

Definition at line 25 of file transresnet\+\_\+multimodal.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_aeb8b0b2c932460122db8e86c155c3fa4}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_aeb8b0b2c932460122db8e86c155c3fa4}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 65 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
65     \textcolor{keyword}{def }\_\_init\_\_(self, opt, shared=None):
66         super().\_\_init\_\_(opt, shared)
67         self.metrics = \{
68             k: \{\textcolor{stringliteral}{"hits@1/100"}: 0.0, \textcolor{stringliteral}{"loss"}: 0.0, \textcolor{stringliteral}{"num\_samples"}: 0, \textcolor{stringliteral}{"med\_rank"}: []\}
69             \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} [\textcolor{stringliteral}{"first\_round"}, \textcolor{stringliteral}{"second\_round"}, \textcolor{stringliteral}{"third\_round+"}]
70         \}
71         \textcolor{keywordflow}{if} shared \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
72             self.optimizer = optim.Adam(
73                 filter(\textcolor{keyword}{lambda} p: p.requires\_grad, self.model.parameters()),
74                 self.opt[\textcolor{stringliteral}{"learningrate"}],
75             )
76         \textcolor{keywordflow}{else}:
77             self.optimizer = shared[\textcolor{stringliteral}{"optimizer"}]
78 
79         self.history = deque(maxlen=\textcolor{keywordtype}{None})
80         self.personality\_override = opt.get(\textcolor{stringliteral}{"personality\_override"})
81 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a79a0a51097fb1cb89751a17879b519e1}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a79a0a51097fb1cb89751a17879b519e1}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}}
\index{add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{add\+\_\+cmdline\+\_\+args()}{add\_cmdline\_args()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+add\+\_\+cmdline\+\_\+args (\begin{DoxyParamCaption}\item[{}]{argparser }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Initialization and argument parsers. 

\begin{DoxyVerb}Override to add personality-override option.
\end{DoxyVerb}
 

Definition at line 41 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
41     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1drqa_1_1config_a62fdd5554f1da6be0cba185271058320}{add\_cmdline\_args}(argparser):
42         \textcolor{stringliteral}{"""}
43 \textcolor{stringliteral}{        Override to add personality-override option.}
44 \textcolor{stringliteral}{        """}
45         TransresnetMultimodalModel.add\_cmdline\_args(argparser)
46         TransresnetAgent.add\_cmdline\_args(argparser)
47         arg\_group = argparser.add\_argument\_group(\textcolor{stringliteral}{"TransresnetMultimodal Arguments"})
48         argparser.add\_argument(
49             \textcolor{stringliteral}{"--personality-override"},
50             type=str,
51             default=\textcolor{keywordtype}{None},
52             help=\textcolor{stringliteral}{"for use in other tasks where no personality "}
53             \textcolor{stringliteral}{"is given. This will give the model a personality "}
54             \textcolor{stringliteral}{"(whichever is specifed)."},
55         )
56         argparser.add\_argument(
57             \textcolor{stringliteral}{"--personalities-path"},
58             type=str,
59             default=\textcolor{keywordtype}{None},
60             help=\textcolor{stringliteral}{"Path to personalities list"},
61         )
62         DictionaryAgent.add\_cmdline\_args(argparser)
63         \textcolor{keywordflow}{return} arg\_group
64 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a446c248cfc8d115d4944fcddb3bd05cf}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a446c248cfc8d115d4944fcddb3bd05cf}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!batch\+\_\+act@{batch\+\_\+act}}
\index{batch\+\_\+act@{batch\+\_\+act}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{batch\+\_\+act()}{batch\_act()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+batch\+\_\+act (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{observations }\end{DoxyParamCaption})}

\begin{DoxyVerb}Act on a batch of observations.

:param observations:
    list of observations

:return:
    A list of acts, one for each observation
\end{DoxyVerb}
 

Definition at line 251 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
251     \textcolor{keyword}{def }batch\_act(self, observations):
252         \textcolor{stringliteral}{"""}
253 \textcolor{stringliteral}{        Act on a batch of observations.}
254 \textcolor{stringliteral}{}
255 \textcolor{stringliteral}{        :param observations:}
256 \textcolor{stringliteral}{            list of observations}
257 \textcolor{stringliteral}{}
258 \textcolor{stringliteral}{        :return:}
259 \textcolor{stringliteral}{            A list of acts, one for each observation}
260 \textcolor{stringliteral}{        """}
261         is\_training = any([\textcolor{stringliteral}{"labels"} \textcolor{keywordflow}{in} obs \textcolor{keywordflow}{for} obs \textcolor{keywordflow}{in} observations])
262         valid\_obs, valid\_indexes = self.filter\_valid\_obs(observations, is\_training)
263         image\_feats = self.extract\_image\_feats(valid\_obs)
264         personalities, dialogue\_histories, dialogue\_round = self.extract\_texts(
265             valid\_obs
266         )
267         chosen\_responses = \textcolor{keywordtype}{None}
268         med\_rank = \textcolor{keywordtype}{None}
269         \textcolor{keywordflow}{if} is\_training:
270             self.optimizer.zero\_grad()
271             loss, num\_correct = self.train\_step(
272                 valid\_obs, image\_feats, personalities, dialogue\_histories
273             )
274             loss.backward()
275             self.optimizer.step()
276         \textcolor{keywordflow}{else}:
277             loss, num\_correct, med\_rank, chosen\_responses = self.eval\_step(
278                 valid\_obs, image\_feats, personalities, dialogue\_histories
279             )
280         self.update\_metrics(loss, num\_correct, len(valid\_obs), dialogue\_round, med\_rank)
281         result = [
282             \{\textcolor{stringliteral}{"text"}: \textcolor{stringliteral}{"No Response During Traiing"}, \textcolor{stringliteral}{"id"}: self.getID()\}
283             \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(len(observations))
284         ]
285         \textcolor{keywordflow}{if} chosen\_responses \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
286             \textcolor{keywordflow}{for} i, index\_obs \textcolor{keywordflow}{in} enumerate(valid\_indexes):
287                 result[index\_obs][\textcolor{stringliteral}{"text"}] = chosen\_responses[i][0]
288                 result[index\_obs][\textcolor{stringliteral}{"text\_candidates"}] = chosen\_responses[i]
289         \textcolor{keywordflow}{return} result
290 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a8f934968183ae14794bcec65abaef624}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a8f934968183ae14794bcec65abaef624}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!eval\+\_\+step@{eval\+\_\+step}}
\index{eval\+\_\+step@{eval\+\_\+step}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{eval\+\_\+step()}{eval\_step()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+eval\+\_\+step (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{valid\+\_\+obs,  }\item[{}]{image\+\_\+feats,  }\item[{}]{personalities,  }\item[{}]{dialogue\+\_\+histories }\end{DoxyParamCaption})}

\begin{DoxyVerb}Model eval step.

:param valid_obs:
    list of valid observations

:param image_feats:
    list of image features, one per example

:param personalities:
    list of personalities, one per example

:param dialogue_histories:
    list of dialogue histories, one per example

:return:
    the total loss, number of correct examples,
    the ranked position of each correct caption,
    and the ranked lists of candidates (one per example)
\end{DoxyVerb}
 

Definition at line 191 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
191     \textcolor{keyword}{def }eval\_step(self, valid\_obs, image\_feats, personalities, dialogue\_histories):
192         \textcolor{stringliteral}{"""}
193 \textcolor{stringliteral}{        Model eval step.}
194 \textcolor{stringliteral}{}
195 \textcolor{stringliteral}{        :param valid\_obs:}
196 \textcolor{stringliteral}{            list of valid observations}
197 \textcolor{stringliteral}{}
198 \textcolor{stringliteral}{        :param image\_feats:}
199 \textcolor{stringliteral}{            list of image features, one per example}
200 \textcolor{stringliteral}{}
201 \textcolor{stringliteral}{        :param personalities:}
202 \textcolor{stringliteral}{            list of personalities, one per example}
203 \textcolor{stringliteral}{}
204 \textcolor{stringliteral}{        :param dialogue\_histories:}
205 \textcolor{stringliteral}{            list of dialogue histories, one per example}
206 \textcolor{stringliteral}{}
207 \textcolor{stringliteral}{        :return:}
208 \textcolor{stringliteral}{            the total loss, number of correct examples,}
209 \textcolor{stringliteral}{            the ranked position of each correct caption,}
210 \textcolor{stringliteral}{            and the ranked lists of candidates (one per example)}
211 \textcolor{stringliteral}{        """}
212         self.model.eval()
213         med\_rank = \textcolor{keywordtype}{None}
214         chosen\_responses = \textcolor{keywordtype}{None}
215         candidates\_encoded = \textcolor{keywordtype}{None}
216 
217         \textcolor{keywordflow}{if} self.fixed\_cands \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
218             candidates\_encoded = self.fixed\_cands\_enc
219             candidates = self.fixed\_cands
220         \textcolor{keywordflow}{else}:
221             candidates = [v[\textcolor{stringliteral}{"label\_candidates"}] \textcolor{keywordflow}{for} v \textcolor{keywordflow}{in} valid\_obs]
222         chosen\_responses = self.model.choose\_best\_response(
223             image\_feats,
224             personalities,
225             dialogue\_histories,
226             candidates,
227             candidates\_encoded=candidates\_encoded,
228             k=-1 \textcolor{keywordflow}{if} self.fixed\_cands \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} 100,
229             batchsize=len(valid\_obs),
230         )
231         loss = -1
232         \textcolor{keywordflow}{if} self.fixed\_cands \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
233             num\_correct = 0
234         \textcolor{keywordflow}{else}:
235             labels = [v.get(\textcolor{stringliteral}{"eval\_labels"}) \textcolor{keywordflow}{for} v \textcolor{keywordflow}{in} valid\_obs]
236             equality\_list = [
237                 1 \textcolor{keywordflow}{if} chosen\_responses[i][0] \textcolor{keywordflow}{in} labels[i] \textcolor{keywordflow}{else} 0
238                 \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(labels))
239             ]
240             \textcolor{comment}{# calculate med ranks}
241             med\_rank = []
242             \textcolor{keywordflow}{for} i, e\_list \textcolor{keywordflow}{in} enumerate(chosen\_responses):
243                 lowest\_rank = len(e\_list) + 1
244                 \textcolor{keywordflow}{for} c \textcolor{keywordflow}{in} labels[i]:
245                     lowest\_rank = min(lowest\_rank, e\_list.index(c) + 1)
246                 med\_rank.append(lowest\_rank)
247             num\_correct = sum(equality\_list)
248 
249         \textcolor{keywordflow}{return} loss, num\_correct, med\_rank, chosen\_responses
250 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ac6efbef147b54cd3e5129b86df095687}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ac6efbef147b54cd3e5129b86df095687}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!extract\+\_\+texts@{extract\+\_\+texts}}
\index{extract\+\_\+texts@{extract\+\_\+texts}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{extract\+\_\+texts()}{extract\_texts()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+extract\+\_\+texts (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{obs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Extract the personalities and dialogue histories from observations.

Additionally determine which dialogue round we are in.

Note that this function assumes that the personality is the
last line of the `text` field in the observation.

:param obs:
    list of observations

:return:
    a list of personalities, a list of dialogue histories, and the
    current dialogue round (either first, second, or third+)
\end{DoxyVerb}
 

Definition at line 291 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
291     \textcolor{keyword}{def }extract\_texts(self, obs):
292         \textcolor{stringliteral}{"""}
293 \textcolor{stringliteral}{        Extract the personalities and dialogue histories from observations.}
294 \textcolor{stringliteral}{}
295 \textcolor{stringliteral}{        Additionally determine which dialogue round we are in.}
296 \textcolor{stringliteral}{}
297 \textcolor{stringliteral}{        Note that this function assumes that the personality is the}
298 \textcolor{stringliteral}{        last line of the `text` field in the observation.}
299 \textcolor{stringliteral}{}
300 \textcolor{stringliteral}{        :param obs:}
301 \textcolor{stringliteral}{            list of observations}
302 \textcolor{stringliteral}{}
303 \textcolor{stringliteral}{        :return:}
304 \textcolor{stringliteral}{            a list of personalities, a list of dialogue histories, and the}
305 \textcolor{stringliteral}{            current dialogue round (either first, second, or third+)}
306 \textcolor{stringliteral}{        """}
307         splits = [v.get(\textcolor{stringliteral}{"text"}).split(\textcolor{stringliteral}{"\(\backslash\)n"}) \textcolor{keywordflow}{for} v \textcolor{keywordflow}{in} obs]
308         \textcolor{keywordflow}{if} self.personality\_override:
309             splits = [s + [self.personality\_override] \textcolor{keywordflow}{for} s \textcolor{keywordflow}{in} splits]
310         personalities = [t[-1] \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} splits]
311         dialogue\_histories = \textcolor{keywordtype}{None}
312         dialogue\_round = \textcolor{stringliteral}{"first\_round"}
313         \textcolor{keywordflow}{if} len(splits[0]) >= 2:
314             dialogue\_round = \textcolor{stringliteral}{"second\_round"} \textcolor{keywordflow}{if} len(splits[0]) == 2 \textcolor{keywordflow}{else} \textcolor{stringliteral}{"third\_round+"}
315             dialogue\_histories = [\textcolor{stringliteral}{"\(\backslash\)n"}.join(t[:-1]) \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} splits]
316 
317         \textcolor{keywordflow}{return} personalities, dialogue\_histories, dialogue\_round
318 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a20dffaa1e8baf3dcaae7601946fa5724}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a20dffaa1e8baf3dcaae7601946fa5724}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!get\+\_\+dialogue\+\_\+history@{get\+\_\+dialogue\+\_\+history}}
\index{get\+\_\+dialogue\+\_\+history@{get\+\_\+dialogue\+\_\+history}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{get\+\_\+dialogue\+\_\+history()}{get\_dialogue\_history()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+get\+\_\+dialogue\+\_\+history (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{obs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get dialogue history for an observation.

:param obs:
    observation

:return:
    the observation with the dialogue history in the `text` field
\end{DoxyVerb}
 

Definition at line 319 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
319     \textcolor{keyword}{def }get\_dialogue\_history(self, obs):
320         \textcolor{stringliteral}{"""}
321 \textcolor{stringliteral}{        Get dialogue history for an observation.}
322 \textcolor{stringliteral}{}
323 \textcolor{stringliteral}{        :param obs:}
324 \textcolor{stringliteral}{            observation}
325 \textcolor{stringliteral}{}
326 \textcolor{stringliteral}{        :return:}
327 \textcolor{stringliteral}{            the observation with the dialogue history in the `text` field}
328 \textcolor{stringliteral}{        """}
329         \textcolor{keywordflow}{if} len(self.history) > 0:
330             obs.force\_set(\textcolor{stringliteral}{"text"}, \textcolor{stringliteral}{"\(\backslash\)n"}.join(self.history) + \textcolor{stringliteral}{"\(\backslash\)n"} + obs[\textcolor{stringliteral}{"text"}])
331         \textcolor{keywordflow}{if} \textcolor{stringliteral}{"labels"} \textcolor{keywordflow}{in} obs:
332             self.history.append(random.choice(obs[\textcolor{stringliteral}{"labels"}]))
333         \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"eval\_labels"} \textcolor{keywordflow}{in} obs:
334             self.history.append(random.choice(obs[\textcolor{stringliteral}{"eval\_labels"}]))
335         \textcolor{keywordflow}{if} obs.get(\textcolor{stringliteral}{"episode\_done"}, \textcolor{keyword}{True}):
336             \textcolor{comment}{# end of this episode, clear the history}
337             self.history.clear()
338 
339         \textcolor{keywordflow}{return} obs
340 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a8bb118477544ab35e45194dc1f08f4ce}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a8bb118477544ab35e45194dc1f08f4ce}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!observe@{observe}}
\index{observe@{observe}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{observe()}{observe()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+observe (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{observation }\end{DoxyParamCaption})}

\begin{DoxyVerb}Observe an observation.

Additionally retrieves the dialogue history for the observation.

:param observation:
    observation

:return:
    the observation, with dialogue history included.
\end{DoxyVerb}
 

Definition at line 144 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
144     \textcolor{keyword}{def }observe(self, observation):
145         \textcolor{stringliteral}{"""}
146 \textcolor{stringliteral}{        Observe an observation.}
147 \textcolor{stringliteral}{}
148 \textcolor{stringliteral}{        Additionally retrieves the dialogue history for the observation.}
149 \textcolor{stringliteral}{}
150 \textcolor{stringliteral}{        :param observation:}
151 \textcolor{stringliteral}{            observation}
152 \textcolor{stringliteral}{}
153 \textcolor{stringliteral}{        :return:}
154 \textcolor{stringliteral}{            the observation, with dialogue history included.}
155 \textcolor{stringliteral}{        """}
156         observation = Message(observation)  \textcolor{comment}{# TODO: eventually this will not be}
157         \textcolor{comment}{# necessary as we migrate all teachers to return Message objects}
158         self.observation = self.get\_dialogue\_history(observation)
159         \textcolor{keywordflow}{return} self.observation
160 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a912122759d9ade4a11ddd1a5b5961069}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a912122759d9ade4a11ddd1a5b5961069}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!receive\+\_\+metrics@{receive\+\_\+metrics}}
\index{receive\+\_\+metrics@{receive\+\_\+metrics}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{receive\+\_\+metrics()}{receive\_metrics()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+receive\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{metrics\+\_\+dict }\end{DoxyParamCaption})}

\begin{DoxyVerb}Receive the metrics from validation.

Unfreeze text encoder weights after a certain number of rounds without improvement.

Override to account for different dialogue rounds.

:param metrics_dict:
    the metrics dictionary
\end{DoxyVerb}
 

Definition at line 364 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
364     \textcolor{keyword}{def }receive\_metrics(self, metrics\_dict):
365         \textcolor{stringliteral}{"""}
366 \textcolor{stringliteral}{        Receive the metrics from validation.}
367 \textcolor{stringliteral}{}
368 \textcolor{stringliteral}{        Unfreeze text encoder weights after a certain number of rounds without improvement.}
369 \textcolor{stringliteral}{}
370 \textcolor{stringliteral}{        Override to account for different dialogue rounds.}
371 \textcolor{stringliteral}{}
372 \textcolor{stringliteral}{        :param metrics\_dict:}
373 \textcolor{stringliteral}{            the metrics dictionary}
374 \textcolor{stringliteral}{        """}
375         \textcolor{keywordflow}{if} \textcolor{stringliteral}{"tasks"} \textcolor{keywordflow}{in} metrics\_dict:
376             metrics\_dict = metrics\_dict[\textcolor{stringliteral}{"tasks"}][\textcolor{stringliteral}{"internal:comment\_battle:imageDialog"}]
377         \textcolor{keywordflow}{if} self.freeze\_patience != -1 \textcolor{keywordflow}{and} self.is\_frozen:
378             m\_key = \textcolor{stringliteral}{"hits@1/100"}
379             ms = [
380                 metrics\_dict[r].get(m\_key, -1)
381                 \textcolor{keywordflow}{for} r \textcolor{keywordflow}{in} [\textcolor{stringliteral}{"first\_round"}, \textcolor{stringliteral}{"second\_round"}, \textcolor{stringliteral}{"third\_round+"}]
382             ]
383             m = sum(ms) / len([m \textcolor{keywordflow}{for} m \textcolor{keywordflow}{in} ms \textcolor{keywordflow}{if} m >= 0])
384             \textcolor{keywordflow}{if} m > self.freeze\_best\_metric:
385                 self.freeze\_impatience = 0
386                 self.freeze\_best\_metric = m
387                 print(\textcolor{stringliteral}{"performance not good enough to unfreeze the model."})
388             \textcolor{keywordflow}{else}:
389                 self.freeze\_impatience += 1
390                 print(\textcolor{stringliteral}{"Growing impatience for unfreezing"})
391                 \textcolor{keywordflow}{if} self.freeze\_impatience >= self.freeze\_patience:
392                     self.is\_frozen = \textcolor{keyword}{False}
393                     print(
394                         \textcolor{stringliteral}{"Reached impatience for fine tuning. "}
395                         \textcolor{stringliteral}{"Reloading the best model so far."}
396                     )
397                     self.\_build\_model(self.model\_file)
398                     \textcolor{keywordflow}{if} self.use\_cuda:
399                         self.model = self.model.cuda()
400                     print(\textcolor{stringliteral}{"Unfreezing."})
401                     self.model.unfreeze\_text\_encoder()
402                     print(\textcolor{stringliteral}{"Done"})
403 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a3fdcebd154e706f6d0ad6b2dd9fbdbbe}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a3fdcebd154e706f6d0ad6b2dd9fbdbbe}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!report@{report}}
\index{report@{report}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{report()}{report()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+report (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Report per-dialogue round metrics.
\end{DoxyVerb}
 

Definition at line 422 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
422     \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1convai2_1_1eval__f1_a01a47b9c08dad189837a51f085defc45}{report}(self):
423         \textcolor{stringliteral}{"""}
424 \textcolor{stringliteral}{        Report per-dialogue round metrics.}
425 \textcolor{stringliteral}{        """}
426         m = \{k: \{\} \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} [\textcolor{stringliteral}{"first\_round"}, \textcolor{stringliteral}{"second\_round"}, \textcolor{stringliteral}{"third\_round+"}]\}
427         \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} self.metrics.items():
428             \textcolor{keywordflow}{if} v[\textcolor{stringliteral}{"num\_samples"}] > 0:
429                 m[k][\textcolor{stringliteral}{"hits@1/100"}] = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(
430                     v[\textcolor{stringliteral}{"hits@1/100"}] / v[\textcolor{stringliteral}{"num\_samples"}], 4
431                 )
432                 m[k][\textcolor{stringliteral}{"loss"}] = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_af377ec61bfc0423461e7b409ffc883b9}{round\_sigfigs}(v[\textcolor{stringliteral}{"loss"}] / v[\textcolor{stringliteral}{"num\_samples"}], 4)
433                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{"med\_rank"} \textcolor{keywordflow}{in} v:
434                     m[k][\textcolor{stringliteral}{"med\_rank"}] = np.median(v[\textcolor{stringliteral}{"med\_rank"}])
435         \textcolor{keywordflow}{return} m
436 \end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a69f4b7af1d416cb67b9a10159a297e01}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a69f4b7af1d416cb67b9a10159a297e01}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!reset@{reset}}
\index{reset@{reset}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+reset (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Override to reset dialogue history.
\end{DoxyVerb}
 

Definition at line 404 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
404     \textcolor{keyword}{def }reset(self):
405         \textcolor{stringliteral}{"""}
406 \textcolor{stringliteral}{        Override to reset dialogue history.}
407 \textcolor{stringliteral}{        """}
408         super().reset()
409         self.history.clear()
410 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a3637844305cec03781959fedcbf11457}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a3637844305cec03781959fedcbf11457}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!reset\+\_\+metrics@{reset\+\_\+metrics}}
\index{reset\+\_\+metrics@{reset\+\_\+metrics}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{reset\+\_\+metrics()}{reset\_metrics()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+reset\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset per-dialogue round metrics.
\end{DoxyVerb}
 

Definition at line 411 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
411     \textcolor{keyword}{def }reset\_metrics(self):
412         \textcolor{stringliteral}{"""}
413 \textcolor{stringliteral}{        Reset per-dialogue round metrics.}
414 \textcolor{stringliteral}{        """}
415         \textcolor{keywordflow}{for} v \textcolor{keywordflow}{in} self.metrics.values():
416             v[\textcolor{stringliteral}{"hits@1/100"}] = 0.0
417             v[\textcolor{stringliteral}{"loss"}] = 0.0
418             v[\textcolor{stringliteral}{"num\_samples"}] = 0.0
419             \textcolor{keywordflow}{if} \textcolor{stringliteral}{"med\_rank"} \textcolor{keywordflow}{in} v:
420                 v[\textcolor{stringliteral}{"med\_rank"}] = []
421 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a645c89d60d3358862f86d192f92a2313}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a645c89d60d3358862f86d192f92a2313}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!share@{share}}
\index{share@{share}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{share()}{share()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+share (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Override to share optimizer.
\end{DoxyVerb}
 

Definition at line 136 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
136     \textcolor{keyword}{def }share(self):
137         \textcolor{stringliteral}{"""}
138 \textcolor{stringliteral}{        Override to share optimizer.}
139 \textcolor{stringliteral}{        """}
140         shared = super().share()
141         shared[\textcolor{stringliteral}{"optimizer"}] = self.optimizer
142         \textcolor{keywordflow}{return} shared
143 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a5836026083146df8a7b4ed354ecf1070}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a5836026083146df8a7b4ed354ecf1070}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!train\+\_\+step@{train\+\_\+step}}
\index{train\+\_\+step@{train\+\_\+step}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{train\+\_\+step()}{train\_step()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+train\+\_\+step (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{valid\+\_\+obs,  }\item[{}]{image\+\_\+feats,  }\item[{}]{personalities,  }\item[{}]{dialogue\+\_\+histories }\end{DoxyParamCaption})}

\begin{DoxyVerb}Model train step.

:param valid_obs:
    list of valid observations

:param image_feats:
    list of image features, one per example

:param personalities:
    list of personalities, one per example

:param dialogue_histories:
    list of dialogue histories, one per example

:return:
    the total loss and the number of correct examples
\end{DoxyVerb}
 

Definition at line 161 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
161     \textcolor{keyword}{def }train\_step(self, valid\_obs, image\_feats, personalities, dialogue\_histories):
162         \textcolor{stringliteral}{"""}
163 \textcolor{stringliteral}{        Model train step.}
164 \textcolor{stringliteral}{}
165 \textcolor{stringliteral}{        :param valid\_obs:}
166 \textcolor{stringliteral}{            list of valid observations}
167 \textcolor{stringliteral}{}
168 \textcolor{stringliteral}{        :param image\_feats:}
169 \textcolor{stringliteral}{            list of image features, one per example}
170 \textcolor{stringliteral}{}
171 \textcolor{stringliteral}{        :param personalities:}
172 \textcolor{stringliteral}{            list of personalities, one per example}
173 \textcolor{stringliteral}{}
174 \textcolor{stringliteral}{        :param dialogue\_histories:}
175 \textcolor{stringliteral}{            list of dialogue histories, one per example}
176 \textcolor{stringliteral}{}
177 \textcolor{stringliteral}{        :return:}
178 \textcolor{stringliteral}{            the total loss and the number of correct examples}
179 \textcolor{stringliteral}{        """}
180         self.model.\hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1mturk_1_1tasks_1_1MTD_1_1run_a36a5f4f6f9df0611a6818610518d2cf0}{train}()
181         labels = [random.choice(v[\textcolor{stringliteral}{"labels"}]) \textcolor{keywordflow}{for} v \textcolor{keywordflow}{in} valid\_obs]
182         loss, num\_correct, \_ = self.model(
183             image\_feats,
184             personalities,
185             dialogue\_histories,
186             labels,
187             batchsize=len(valid\_obs),
188         )
189         \textcolor{keywordflow}{return} loss, num\_correct
190 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a57fb284e1f2308c4524c72af053c9397}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a57fb284e1f2308c4524c72af053c9397}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!update\+\_\+metrics@{update\+\_\+metrics}}
\index{update\+\_\+metrics@{update\+\_\+metrics}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{update\+\_\+metrics()}{update\_metrics()}}
{\footnotesize\ttfamily def projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+update\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{loss,  }\item[{}]{num\+\_\+correct,  }\item[{}]{num\+\_\+samples,  }\item[{}]{dialogue\+\_\+round,  }\item[{}]{med\+\_\+rank = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Update Metrics.

Overriden to include dialogue round

:param loss:
    float loss
:param num_correct:
    number of examples for which chosen caption is correct
:param num_samples:
    total number of examples
:param med_rank:
    rank of correct caption for each example
\end{DoxyVerb}
 

Definition at line 343 of file transresnet\+\_\+multimodal.\+py.


\begin{DoxyCode}
343     ):
344         \textcolor{stringliteral}{"""}
345 \textcolor{stringliteral}{        Update Metrics.}
346 \textcolor{stringliteral}{}
347 \textcolor{stringliteral}{        Overriden to include dialogue round}
348 \textcolor{stringliteral}{}
349 \textcolor{stringliteral}{        :param loss:}
350 \textcolor{stringliteral}{            float loss}
351 \textcolor{stringliteral}{        :param num\_correct:}
352 \textcolor{stringliteral}{            number of examples for which chosen caption is correct}
353 \textcolor{stringliteral}{        :param num\_samples:}
354 \textcolor{stringliteral}{            total number of examples}
355 \textcolor{stringliteral}{        :param med\_rank:}
356 \textcolor{stringliteral}{            rank of correct caption for each example}
357 \textcolor{stringliteral}{        """}
358         self.metrics[dialogue\_round][\textcolor{stringliteral}{"hits@1/100"}] += num\_correct
359         self.metrics[dialogue\_round][\textcolor{stringliteral}{"loss"}] += loss
360         self.metrics[dialogue\_round][\textcolor{stringliteral}{"num\_samples"}] += num\_samples
361         \textcolor{keywordflow}{if} med\_rank:
362             self.metrics[dialogue\_round][\textcolor{stringliteral}{"med\_rank"}] += med\_rank
363 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a4a922732237f28673e03326d3b22d5ba}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a4a922732237f28673e03326d3b22d5ba}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!fixed\+\_\+cands@{fixed\+\_\+cands}}
\index{fixed\+\_\+cands@{fixed\+\_\+cands}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{fixed\+\_\+cands}{fixed\_cands}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+fixed\+\_\+cands}



Definition at line 103 of file transresnet\+\_\+multimodal.\+py.

\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a208f6e1e8025ed7593637eb90eee13b9}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a208f6e1e8025ed7593637eb90eee13b9}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!fixed\+\_\+cands\+\_\+enc@{fixed\+\_\+cands\+\_\+enc}}
\index{fixed\+\_\+cands\+\_\+enc@{fixed\+\_\+cands\+\_\+enc}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{fixed\+\_\+cands\+\_\+enc}{fixed\_cands\_enc}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+fixed\+\_\+cands\+\_\+enc}



Definition at line 104 of file transresnet\+\_\+multimodal.\+py.

\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a43412e28fc694b66d8d6ecf1e8a53855}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a43412e28fc694b66d8d6ecf1e8a53855}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!freeze\+\_\+best\+\_\+metric@{freeze\+\_\+best\+\_\+metric}}
\index{freeze\+\_\+best\+\_\+metric@{freeze\+\_\+best\+\_\+metric}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{freeze\+\_\+best\+\_\+metric}{freeze\_best\_metric}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+freeze\+\_\+best\+\_\+metric}



Definition at line 386 of file transresnet\+\_\+multimodal.\+py.

\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ab075199ab9fa28737825e90f8e3eba2e}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ab075199ab9fa28737825e90f8e3eba2e}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!freeze\+\_\+impatience@{freeze\+\_\+impatience}}
\index{freeze\+\_\+impatience@{freeze\+\_\+impatience}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{freeze\+\_\+impatience}{freeze\_impatience}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+freeze\+\_\+impatience}



Definition at line 385 of file transresnet\+\_\+multimodal.\+py.

\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a85b2589c1a46ad84ba109f09c1450fd1}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a85b2589c1a46ad84ba109f09c1450fd1}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!history@{history}}
\index{history@{history}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{history}{history}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+history}



Definition at line 79 of file transresnet\+\_\+multimodal.\+py.

\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a4a9b3b849c8cb771cce4733dd63a0831}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a4a9b3b849c8cb771cce4733dd63a0831}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!is\+\_\+frozen@{is\+\_\+frozen}}
\index{is\+\_\+frozen@{is\+\_\+frozen}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{is\+\_\+frozen}{is\_frozen}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+is\+\_\+frozen}



Definition at line 392 of file transresnet\+\_\+multimodal.\+py.

\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a268a551b1ba50a0c8f9352b7576b1e8b}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a268a551b1ba50a0c8f9352b7576b1e8b}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!metrics@{metrics}}
\index{metrics@{metrics}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{metrics}{metrics}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+metrics}



Definition at line 67 of file transresnet\+\_\+multimodal.\+py.

\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a2425b6300fe0eba01dfbbc8fa17cdd10}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_a2425b6300fe0eba01dfbbc8fa17cdd10}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!model@{model}}
\index{model@{model}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{model}{model}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+model}



Definition at line 91 of file transresnet\+\_\+multimodal.\+py.

\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ac52daf43de7ffecd6e1e658e8b472ed6}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ac52daf43de7ffecd6e1e658e8b472ed6}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!observation@{observation}}
\index{observation@{observation}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{observation}{observation}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+observation}



Definition at line 158 of file transresnet\+\_\+multimodal.\+py.

\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ae162ba43b0f869887558ee6183c4415d}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_ae162ba43b0f869887558ee6183c4415d}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!optimizer@{optimizer}}
\index{optimizer@{optimizer}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{optimizer}{optimizer}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+optimizer}



Definition at line 72 of file transresnet\+\_\+multimodal.\+py.

\mbox{\Hypertarget{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_acd2f07e8994da4f38ced44267a8961dc}\label{classprojects_1_1image__chat_1_1transresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent_acd2f07e8994da4f38ced44267a8961dc}} 
\index{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}!personality\+\_\+override@{personality\+\_\+override}}
\index{personality\+\_\+override@{personality\+\_\+override}!projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent@{projects\+::image\+\_\+chat\+::transresnet\+\_\+multimodal\+::transresnet\+\_\+multimodal\+::\+Transresnet\+Multimodal\+Agent}}
\subsubsection{\texorpdfstring{personality\+\_\+override}{personality\_override}}
{\footnotesize\ttfamily projects.\+image\+\_\+chat.\+transresnet\+\_\+multimodal.\+transresnet\+\_\+multimodal.\+Transresnet\+Multimodal\+Agent.\+personality\+\_\+override}



Definition at line 80 of file transresnet\+\_\+multimodal.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
projects/image\+\_\+chat/transresnet\+\_\+multimodal/\hyperlink{projects_2image__chat_2transresnet__multimodal_2transresnet__multimodal_8py}{transresnet\+\_\+multimodal.\+py}\end{DoxyCompactItemize}
