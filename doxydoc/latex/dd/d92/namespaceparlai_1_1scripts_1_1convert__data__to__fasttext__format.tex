\hypertarget{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format}{}\section{parlai.\+scripts.\+convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format Namespace Reference}
\label{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format}\index{parlai.\+scripts.\+convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format@{parlai.\+scripts.\+convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format_a8222f98bd2353f75b192224da0e07733}{dump\+\_\+data} (opt)
\item 
def \hyperlink{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format_adef5d250b1de0b6c868a9eb4e699a81f}{main} ()
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format_a8222f98bd2353f75b192224da0e07733}\label{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format_a8222f98bd2353f75b192224da0e07733}} 
\index{parlai\+::scripts\+::convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format@{parlai\+::scripts\+::convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format}!dump\+\_\+data@{dump\+\_\+data}}
\index{dump\+\_\+data@{dump\+\_\+data}!parlai\+::scripts\+::convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format@{parlai\+::scripts\+::convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format}}
\subsubsection{\texorpdfstring{dump\+\_\+data()}{dump\_data()}}
{\footnotesize\ttfamily def parlai.\+scripts.\+convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format.\+dump\+\_\+data (\begin{DoxyParamCaption}\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 25 of file convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format.\+py.


\begin{DoxyCode}
25 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format_a8222f98bd2353f75b192224da0e07733}{dump\_data}(opt):
26     \textcolor{comment}{# create repeat label agent and assign it to the specified task}
27     agent = RepeatLabelAgent(opt)
28     world = \hyperlink{namespaceparlai_1_1core_1_1worlds_a79969c7ba76d4b3c500f5bb776444dc6}{create\_task}(opt, agent)
29     \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'outfile'}] \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
30         outfile = tempfile.mkstemp(
31             prefix=\textcolor{stringliteral}{'\{\}\_\{\}\_'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(opt[\textcolor{stringliteral}{'task'}], opt[\textcolor{stringliteral}{'datatype'}]), suffix=\textcolor{stringliteral}{'.txt'}
32         )[1]
33     \textcolor{keywordflow}{else}:
34         outfile = opt[\textcolor{stringliteral}{'outfile'}]
35 
36     \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'num\_examples'}] == -1:
37         num\_examples = world.num\_examples()
38     \textcolor{keywordflow}{else}:
39         num\_examples = opt[\textcolor{stringliteral}{'num\_examples'}]
40     log\_timer = TimeLogger()
41 
42     print(\textcolor{stringliteral}{'[ starting to convert.. ]'})
43     print(\textcolor{stringliteral}{'[ saving output to \{\} ]'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(outfile))
44     fw = open(outfile, \textcolor{stringliteral}{'w'})
45     text = \textcolor{stringliteral}{''}
46     \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(num\_examples):
47         world.parley()
48         world.acts[0][\textcolor{stringliteral}{'labels'}] = world.acts[0].get(
49             \textcolor{stringliteral}{'labels'}, world.acts[0].pop(\textcolor{stringliteral}{'eval\_labels'}, \textcolor{keywordtype}{None})
50         )
51 
52         samp = world.acts[0]
53         text += samp[\textcolor{stringliteral}{"text"}].replace(\textcolor{stringliteral}{"\(\backslash\)n"}, \textcolor{stringliteral}{" "}) + \textcolor{stringliteral}{" "}
54         fw.write(\textcolor{stringliteral}{"\_\_label\_\_%s %s\(\backslash\)n"} % (samp[\textcolor{stringliteral}{"labels"}][0].replace(\textcolor{stringliteral}{' '}, \textcolor{stringliteral}{'\_'}), text))
55         \textcolor{keywordflow}{if} world.acts[0].get(\textcolor{stringliteral}{'episode\_done'}, \textcolor{keyword}{False}):
56             text = \textcolor{stringliteral}{''}
57 
58         \textcolor{keywordflow}{if} log\_timer.time() > opt[\textcolor{stringliteral}{'log\_every\_n\_secs'}]:
59             text, \_log = log\_timer.log(world.total\_parleys, world.num\_examples())
60             print(text)
61 
62         \textcolor{keywordflow}{if} world.epoch\_done():
63             print(\textcolor{stringliteral}{'EPOCH DONE'})
64             \textcolor{keywordflow}{break}
65     fw.close()
66 
67 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format_adef5d250b1de0b6c868a9eb4e699a81f}\label{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format_adef5d250b1de0b6c868a9eb4e699a81f}} 
\index{parlai\+::scripts\+::convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format@{parlai\+::scripts\+::convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format}!main@{main}}
\index{main@{main}!parlai\+::scripts\+::convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format@{parlai\+::scripts\+::convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def parlai.\+scripts.\+convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format.\+main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 68 of file convert\+\_\+data\+\_\+to\+\_\+fasttext\+\_\+format.\+py.


\begin{DoxyCode}
68 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format_adef5d250b1de0b6c868a9eb4e699a81f}{main}():
69     random.seed(42)
70     \textcolor{comment}{# Get command line arguments}
71     parser = ParlaiParser()
72     parser.add\_argument(
73         \textcolor{stringliteral}{'-n'},
74         \textcolor{stringliteral}{'--num-examples'},
75         default=-1,
76         type=int,
77         help=\textcolor{stringliteral}{'Total number of exs to convert, -1 to convert \(\backslash\)}
78 \textcolor{stringliteral}{                                all examples'},
79     )
80     parser.add\_argument(
81         \textcolor{stringliteral}{'-of'},
82         \textcolor{stringliteral}{'--outfile'},
83         default=\textcolor{keywordtype}{None},
84         type=str,
85         help=\textcolor{stringliteral}{'Output file where to save, by default will be \(\backslash\)}
86 \textcolor{stringliteral}{                                created in /tmp'},
87     )
88     parser.add\_argument(\textcolor{stringliteral}{'-ltim'}, \textcolor{stringliteral}{'--log-every-n-secs'}, type=float, default=2)
89     parser.set\_defaults(datatype=\textcolor{stringliteral}{'train:ordered'})
90     opt = parser.parse\_args()
91     \hyperlink{namespaceparlai_1_1scripts_1_1convert__data__to__fasttext__format_a8222f98bd2353f75b192224da0e07733}{dump\_data}(opt)
92 
93 
\end{DoxyCode}
