\hypertarget{classlight__chats_1_1graph_1_1Graph}{}\section{light\+\_\+chats.\+graph.\+Graph Class Reference}
\label{classlight__chats_1_1graph_1_1Graph}\index{light\+\_\+chats.\+graph.\+Graph@{light\+\_\+chats.\+graph.\+Graph}}


Inheritance diagram for light\+\_\+chats.\+graph.\+Graph\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=200pt]{df/d22/classlight__chats_1_1graph_1_1Graph__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for light\+\_\+chats.\+graph.\+Graph\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=200pt]{d6/d4c/classlight__chats_1_1graph_1_1Graph__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a5bd7cc4e21edc98dcbbac1040f68c878}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, opt)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a4897dcda9b389f41be824fdffce5055b}{copy} (self)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a1fc2b40195b1c7d3ed3a26dbd26fe79b}{\+\_\+\+\_\+deepcopy\+\_\+\+\_\+} (self, memo)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a604091edb800be1aad16f3a64f13d6da}{populate\+\_\+ids} (self)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a5f54739484e05010202517a4714af30f}{unique\+\_\+hash} (self)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a56d79ef43ac8f25d399228cc57f5fa25}{\+\_\+\+\_\+eq\+\_\+\+\_\+} (self, other)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a1200144ee93bfb6e3abae4a41ba10cf0}{all\+\_\+node\+\_\+ids} (self)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_aa61c4fbc35d423277f0755cd8a16a43f}{freeze} (self, freeze=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a7094a23385f250b9ea06d07c515ad14c}{version} (self)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ad445b8282327b777a3419b2a5309237a}{add\+\_\+message\+\_\+callback} (self, id, func)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a43ff743c3d16850dc7d68d809c88c97d}{has\+\_\+remaining\+\_\+player\+\_\+slots} (self)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a89bb38305c3d42c4ce2ae8dcc966ab6e}{get\+\_\+unused\+\_\+player\+\_\+id} (self)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_aa40b8fea9737da5d3f329dfb00c42c6f}{register\+\_\+callbacks} (self, \hyperlink{classlight__chats_1_1graph_1_1Graph_a95a1a4d31dbd607eebd593579b2d6cdd}{callbacks}, \hyperlink{classlight__chats_1_1graph_1_1Graph_a29a00f3191fb45f73bd784ed12cc2c2e}{variables})
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a7f86299224bed2c821ed4ffa853cd669}{get\+\_\+player} (self, id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ad965678de8b784a4c1506a8814f39767}{get\+\_\+obj} (self, id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a4130e8f504f9a6eeafbc83a8a38a6efb}{set\+\_\+player} (self, state)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ac46849fddce61ce035feb6ea683b9009}{set\+\_\+obj} (self, state)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a5356cdaf2e48b3a128773c70957cb38a}{add\+\_\+node} (self, desc, props, is\+\_\+player=False, uid=\textquotesingle{}\textquotesingle{})
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ad9d86fc2b41fef8960a90b517d80cd81}{new\+\_\+agent} (self, id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a703188eb5340371b8ad793ddebd2af30}{delete\+\_\+node} (self, id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ab343f587ca9bf3b7576fbe93e537dbca}{add\+\_\+edge} (self, id1, edge, id2, edge\+\_\+label=None, locked\+\_\+with=None, edge\+\_\+desc=None, full\+\_\+label=False)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ae7da5d306e949414cc4df9d49bc0678d}{add\+\_\+one\+\_\+path\+\_\+to} (self, id1, id2, label=None, locked\+\_\+with=None, desc=None, full\+\_\+label=False)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a4335de6c1c70dbbab982149a5c1e1586}{add\+\_\+path\+\_\+to} (self, id1, id2, desc1=None, desc2=None, locked\+\_\+with=None, examine1=None, examine2=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a04cfd7a5cc3c2df0c1bfec920d89d84c}{is\+\_\+path\+\_\+to} (self, id1, id2)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_aaf9882eb0e887eadf75e4f2460732c05}{node\+\_\+contains} (self, loc)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a764ec9d5d95e071d857644b1947a2385}{add\+\_\+contained\+\_\+in} (self, id1, id2)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a6afbdb89ba9db7f792506d9171f9e287}{node\+\_\+contained\+\_\+in} (self, id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a729d07bc1da395a60d3431cec5bb439b}{set\+\_\+follow} (self, id1, id2)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_add43b11ac4acd2b8db044599c492564a}{get\+\_\+followers} (self, agent\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a1f4c0ccc957a89dcec003a73553914b7}{get\+\_\+following} (self, agent\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a96afb6e22927414bb55693609a5e89cb}{combine\+\_\+classed\+\_\+descs} (descs)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a1e8203ba71f1edd33e989ba4a72d8533}{lock\+\_\+path} (self, id1, id2, key\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a7a4820f5a9eff4261a81df8537937ac1}{unlock\+\_\+path} (self, id1, id2, key\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_aeeb122366f2f098d889309fa53d19917}{path\+\_\+is\+\_\+locked} (self, id1, id2)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_af857c9968c7787d742ac731d1cd7cb2c}{get\+\_\+path\+\_\+locked\+\_\+with} (self, id1, id2)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a6039eea576e68156be7fcaa7a3929358}{set\+\_\+desc} (self, id, desc)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ab0dd6685d8eb353d76eca8de20a39914}{node\+\_\+exists} (self, id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a30483d3bbb88924bb7b98fb72b2e23fe}{get\+\_\+prop} (self, id, prop, default=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a4b2f6d6d7714ea3b82ff7a01f3199123}{extract\+\_\+classed\+\_\+from\+\_\+dict} (self, prop\+\_\+d, viewer=None, default=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a33e205ecb0e7d4d2626162250ef585f1}{get\+\_\+classed\+\_\+prop} (self, id, prop, viewer, default=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ad12090e48ff11063ece35c115b91d2aa}{get\+\_\+props\+\_\+from\+\_\+either} (self, id1, id2, prop)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ae2c69adb1ea1477aaa6d9af693b30fa1}{set\+\_\+prop} (self, id, prop, val=True)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_aa8a44c495d154f033ea3ced4d6f2e85d}{has\+\_\+prop} (self, id, prop)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a871d833484089923fa5d1d4bb357ec7a}{inc\+\_\+prop} (self, id, prop, val=1)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ac98ed988f74d9571e195aa9592f84b76}{delete\+\_\+prop} (self, id, prop)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_acb4a884cb1259a506399e8d1eb7a2f33}{add\+\_\+class} (self, object\+\_\+id, class\+\_\+name)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ab799f6160a4e8dd1550b2e245cdd2d53}{remove\+\_\+class} (self, object\+\_\+id, class\+\_\+name)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a33bf40491bd3aa15e65987377b3d580f}{location} (self, thing)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a90e0b9f3f4a4acc29c49cc730aad1539}{room} (self, thing)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a67fd9624112a695cd6e1a0b92ec3139b}{desc\+\_\+to\+\_\+nodes} (self, desc, nearbyid=None, nearbytype=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a4d86c4e411c724a8e169060335314d90}{get\+\_\+all\+\_\+by\+\_\+prop} (self, prop)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a20da62a3d5411d93fe820accdd06fa33}{node\+\_\+path\+\_\+to} (self, id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a04cea64dfded92bfd69055e184aa390d}{get\+\_\+actionable\+\_\+ids} (self, actor\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a4fa84ee088a8086336cf51a1c41a0477}{get\+\_\+local\+\_\+ids} (self, actor\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a8f2b0882918768e199aee89cf08bde41}{get\+\_\+inventory\+\_\+text\+\_\+for} (self, id, give\+\_\+empty=True)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a3709592a97b55342b767bedb9db16267}{health} (self, id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ac6f61220197d0eb8314fb98f6dd6f135}{get\+\_\+action\+\_\+history} (self, agent\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a9ed5168f4d2a93b6a9f3f3ddd07660d4}{node\+\_\+to\+\_\+desc} (self, id, from\+\_\+id=False, use\+\_\+the=False)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_adf4ddcd30a97e5d02bc23f5c0a09c8bb}{get\+\_\+path\+\_\+ex\+\_\+desc} (self, id1, id2, looker\+\_\+id=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_afd47e9b4f058dc2cbb520164db920664}{path\+\_\+to\+\_\+desc} (self, id1, id2)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ae0b96f3393dd176f10c3f154649cdf25}{node\+\_\+to\+\_\+desc\+\_\+raw} (self, id, from\+\_\+id=False)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a2da14e9a8a4c547fea59eee63dd9f70c}{name\+\_\+prefix} (self, id, txt, use\+\_\+the)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a783ebf83adeed30c0ba89679f535d33c}{send\+\_\+action} (self, agent\+\_\+id, action)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a966d3719771ddc58c520f0821c18d959}{send\+\_\+msg} (self, agent\+\_\+id, txt, action=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ae53a707683cac4ddbafbefb0e0130bfa}{broadcast\+\_\+to\+\_\+room} (self, action, exclude\+\_\+agents=None, told\+\_\+by=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_aa28ea4b9a270d74783f277f04170d669}{clean\+\_\+props} (self, object\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_acc495d94797d39558b1711d0bbf6346d}{create} (self, agent\+\_\+id, params)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a3d44dae0701925da960433cb98229c21}{split\+\_\+params} (self, params, word)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_af7460b9c8069563289b8b6b11f831b63}{obj\+\_\+fits} (self, object\+\_\+id, container\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a8a92252320777766ddab522549671f43}{move\+\_\+object} (self, object\+\_\+id, container\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a74bc5374a9c9f411008e726fac4cd7f1}{die} (self, id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a2588a6f893b108eb25c9125db8036c0a}{get\+\_\+room\+\_\+edge\+\_\+text} (self, room\+\_\+descs, past=False)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a4d24052d36cff3896424e2e3bce2d554}{get\+\_\+room\+\_\+object\+\_\+text} (self, object\+\_\+descs, ents, past=False, give\+\_\+empty=True)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_abe32388ae807a26036573890d1293e2a}{get\+\_\+room\+\_\+agent\+\_\+text} (self, agent\+\_\+descs, past=False)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a1d2efb53425d6f495516d656124413c0}{get\+\_\+room\+\_\+edges} (self, room\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a3830f1a541b3a892a6e37c314b5b5205}{get\+\_\+nondescribed\+\_\+room\+\_\+objects} (self, room\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ad078aab1d28474ac43e8b58ba0fb586b}{get\+\_\+room\+\_\+objects} (self, room\+\_\+id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ae8a732327aed100ff96fb2349246738c}{get\+\_\+nondescribed\+\_\+room\+\_\+agents} (self, \hyperlink{classlight__chats_1_1graph_1_1Graph_a90e0b9f3f4a4acc29c49cc730aad1539}{room})
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a6e638e9bda7cd6e0f6d964d02a22dec6}{get\+\_\+room\+\_\+agents} (self, \hyperlink{classlight__chats_1_1graph_1_1Graph_a90e0b9f3f4a4acc29c49cc730aad1539}{room})
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a63268fea99420b5cb83436499cd0676b}{get\+\_\+text} (self, agent, clear\+\_\+actions=True)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ae416efe86bf6117aec6dc1de481d0ec1}{cnt\+\_\+obj} (self, obj, c, ents=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a32111f6e4bae319c37f6d8de8dd2bbbe}{display\+\_\+desc\+\_\+list} (self, descs, ents=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a9c3ce0d845610e465f9a5d9bee1cbd23}{display\+\_\+node\+\_\+list} (self, l, from\+\_\+id=False)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a34711f0bfabab728aa51d45bbde67580}{display\+\_\+node} (self, id)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a6a6d39a24244430a899bbc0b752baf25}{help} (self)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ad0c4f66ad462e7aa45324767c551030a}{args\+\_\+to\+\_\+descs} (self, args)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a40e6753f63c9c8d31dd57a5c38aaac3c}{get\+\_\+possible\+\_\+actions} (self, my\+\_\+agent\+\_\+id=\textquotesingle{}dragon\textquotesingle{}, use\+\_\+actions=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a5087252eb40253eacd115e777c092cd8}{parse} (self, inst)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_af644853db532d4cfa276a884f04c8544}{canonical\+\_\+action} (self, agentid, inst)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a7b3fe43bf1e2b53fe7a2e22a24d77ef2}{get\+\_\+reverse\+\_\+action} (self, agentid, action, old\+\_\+g)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_accd7dfd84e4f2bee3fc3fbac8d8577cd}{valid\+\_\+exec} (self, agentid, inst=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a9aede2dd27f6a9ab66f38eaa5f649195}{parse\+\_\+exec} (self, agentid, inst=None)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_ab4e757d18538326e65b8ed2dce71d9fa}{update\+\_\+world} (self)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a6eaae6c0b9fbcaf9f478a790ff356671}{parse\+\_\+static} (inst)
\item 
def \hyperlink{classlight__chats_1_1graph_1_1Graph_a27cddf5bb9b3718a70a66ac91c22cf96}{filter\+\_\+actions} (inst)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlight__chats_1_1graph_1_1Graph_a95a1a4d31dbd607eebd593579b2d6cdd}{callbacks}
\item 
\hyperlink{classlight__chats_1_1graph_1_1Graph_a29a00f3191fb45f73bd784ed12cc2c2e}{variables}
\item 
\hyperlink{classlight__chats_1_1graph_1_1Graph_ad461dca41746ab79ffdaf70f6a9b25c4}{npc\+\_\+say\+\_\+respond}
\item 
\hyperlink{classlight__chats_1_1graph_1_1Graph_a8ac9ab3b5c6208e0df9b28d436c7c425}{object\+\_\+ids}
\item 
\hyperlink{classlight__chats_1_1graph_1_1Graph_a79bd1a69e214458644ecf74d218e476c}{container\+\_\+ids}
\item 
\hyperlink{classlight__chats_1_1graph_1_1Graph_a2bd5d1191b6a64402e7bb1f992516265}{agent\+\_\+ids}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 2802 of file graph.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a5bd7cc4e21edc98dcbbac1040f68c878}\label{classlight__chats_1_1graph_1_1Graph_a5bd7cc4e21edc98dcbbac1040f68c878}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}

\begin{DoxyVerb}Initialize a graph for the game to run on. Creates all of the required
bookkeeping members and initializes them to empty. Most members of the graph are
keyed by a node's unique ids.

Development of this graph is very much still a work in progress, and it is only
provided in this form to be used for the light_dialog task as collected in the
'Learning to Speak and Act in a Fantasy Text Adventure Game' paper
\end{DoxyVerb}
 

Definition at line 2803 of file graph.\+py.


\begin{DoxyCode}
2803     \textcolor{keyword}{def }\_\_init\_\_(self, opt):
2804         \textcolor{stringliteral}{"""}
2805 \textcolor{stringliteral}{        Initialize a graph for the game to run on. Creates all of the required}
2806 \textcolor{stringliteral}{        bookkeeping members and initializes them to empty. Most members of the graph are}
2807 \textcolor{stringliteral}{        keyed by a node's unique ids.}
2808 \textcolor{stringliteral}{}
2809 \textcolor{stringliteral}{        Development of this graph is very much still a work in progress, and it is only}
2810 \textcolor{stringliteral}{        provided in this form to be used for the light\_dialog task as collected in the}
2811 \textcolor{stringliteral}{        'Learning to Speak and Act in a Fantasy Text Adventure Game' paper}
2812 \textcolor{stringliteral}{        """}
2813 
2814         \textcolor{comment}{# callbacks hold custom registered functions for the graph to execute}
2815         \textcolor{comment}{# under predefined constraints}
2816         self.callbacks = \{\}
2817         \textcolor{comment}{# Variables can be tied to custom callbacks to track custom variables}
2818         \textcolor{comment}{# that are parts of the graph state}
2819         self.variables = \{\}
2820 
2821         \textcolor{comment}{# ParlAI opt}
2822         self.\_opt = opt
2823 
2824         \textcolor{comment}{# Dict of edges from a given node, in the format of}
2825         \textcolor{comment}{# (edge\_type, target) -> dict of options for that pair. This format}
2826         \textcolor{comment}{# is subject to change, but new versions will include conversion}
2827         \textcolor{comment}{# functions}
2828         self.\_node\_to\_edges = \{\}
2829         \textcolor{comment}{# Dict of properties from a given node, in the format of}
2830         \textcolor{comment}{# prop\_name -> value}
2831         self.\_node\_to\_prop = \{\}
2832         \textcolor{comment}{# dict of node -> node for what nodes are contained in what}
2833         self.\_node\_contained\_in = \{\}
2834         \textcolor{comment}{# dict of node -> node list for what nodes a node contains}
2835         self.\_node\_contains = \{\}
2836         \textcolor{comment}{# dict of node -> node for what nodes a node is following}
2837         self.\_node\_follows = \{\}
2838         \textcolor{comment}{# dict of node -> node list for what nodes a node is following}
2839         self.\_node\_followed\_by = \{\}
2840         \textcolor{comment}{# dict of node -> string description for that node}
2841         self.\_node\_to\_desc = \{\}
2842 
2843         \textcolor{comment}{# dict of node -> set of room ids that that agent has visited so far}
2844         self.\_visited\_rooms = \{\}
2845         \textcolor{comment}{# dict of node -> immediately previous room id the agent has been in.}
2846         \textcolor{comment}{# to enable "go back"}
2847         self.\_last\_rooms = \{\}
2848         \textcolor{comment}{# dict of node -> agent for the last agent that an actor used a tell}
2849         \textcolor{comment}{# command on. Useful for trying to determine who an agent is talking}
2850         \textcolor{comment}{# to once they start using say rather than tell.}
2851         self.\_last\_tell\_target = \{\}
2852 
2853         \textcolor{comment}{# non-player characters that we move during update\_world func.}
2854         self.\_node\_npcs = set()
2855         \textcolor{comment}{# flag for if the graph is to be frozen, stopping time steps}
2856         self.\_node\_freeze = \textcolor{keyword}{False}
2857         \textcolor{comment}{# count of nodes in the graph}
2858         self.\_cnt = 0
2859 
2860         \textcolor{comment}{# buffers for holding actions until an agent is able to observe them}
2861         self.\_node\_to\_text\_buffer = \{\}
2862         self.\_node\_to\_observations = \{\}
2863 
2864         \textcolor{comment}{# node ids that can be associated with an agent}
2865         self.\_player\_ids = []
2866         \textcolor{comment}{# node ids of the player\_ids that have already been registered to by}
2867         \textcolor{comment}{# an agent}
2868         self.\_used\_player\_ids = []
2869 
2870         \textcolor{comment}{# special member function to register callback events to}
2871         \textcolor{comment}{# \_node\_to\_text\_buffer and \_node\_to\_observations for cases where}
2872         \textcolor{comment}{# polling the graph is not appropriate}
2873         self.\_\_message\_callbacks = \{\}
2874 
2875         \textcolor{comment}{# global variable for if NPCs should respond to Says or only Tells}
2876         self.npc\_say\_respond = \textcolor{keyword}{True}
2877 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a1fc2b40195b1c7d3ed3a26dbd26fe79b}\label{classlight__chats_1_1graph_1_1Graph_a1fc2b40195b1c7d3ed3a26dbd26fe79b}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!\+\_\+\+\_\+deepcopy\+\_\+\+\_\+@{\+\_\+\+\_\+deepcopy\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+deepcopy\+\_\+\+\_\+@{\+\_\+\+\_\+deepcopy\+\_\+\+\_\+}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+deepcopy\+\_\+\+\_\+()}{\_\_deepcopy\_\_()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+\_\+\+\_\+deepcopy\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{memo }\end{DoxyParamCaption})}



Definition at line 2886 of file graph.\+py.


\begin{DoxyCode}
2886     \textcolor{keyword}{def }\_\_deepcopy\_\_(self, memo):
2887         cls = self.\_\_class\_\_
2888         result = cls.\_\_new\_\_(cls)
2889         memo[\hyperlink{namespacegenerate__task__list_a78e725c3dd7e8fbdb5c3044ec1bc3a81}{id}(self)] = result
2890         \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} self.\_\_dict\_\_.items():
2891             \textcolor{keywordflow}{if} \textcolor{stringliteral}{'\_\_message\_callbacks'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} k:  \textcolor{comment}{# we cant copy callback anchors}
2892                 setattr(result, k, deepcopy(v, memo))
2893             \textcolor{keywordflow}{else}:
2894                 setattr(result, k, \{\})
2895         \textcolor{keywordflow}{return} result
2896 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a56d79ef43ac8f25d399228cc57f5fa25}\label{classlight__chats_1_1graph_1_1Graph_a56d79ef43ac8f25d399228cc57f5fa25}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!\+\_\+\+\_\+eq\+\_\+\+\_\+@{\+\_\+\+\_\+eq\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+eq\+\_\+\+\_\+@{\+\_\+\+\_\+eq\+\_\+\+\_\+}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+eq\+\_\+\+\_\+()}{\_\_eq\_\_()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+\_\+\+\_\+eq\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{other }\end{DoxyParamCaption})}



Definition at line 2925 of file graph.\+py.


\begin{DoxyCode}
2925     \textcolor{keyword}{def }\_\_eq\_\_(self, other):
2926         \textcolor{keywordflow}{return} self.unique\_hash() == other.unique\_hash()
2927 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_acb4a884cb1259a506399e8d1eb7a2f33}\label{classlight__chats_1_1graph_1_1Graph_acb4a884cb1259a506399e8d1eb7a2f33}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!add\+\_\+class@{add\+\_\+class}}
\index{add\+\_\+class@{add\+\_\+class}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{add\+\_\+class()}{add\_class()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+add\+\_\+class (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{object\+\_\+id,  }\item[{}]{class\+\_\+name }\end{DoxyParamCaption})}



Definition at line 3386 of file graph.\+py.


\begin{DoxyCode}
3386     \textcolor{keyword}{def }add\_class(self, object\_id, class\_name):
3387         curr\_classes = self.get\_prop(object\_id, \textcolor{stringliteral}{'classes'})
3388         curr\_classes.append(class\_name)
3389 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a764ec9d5d95e071d857644b1947a2385}\label{classlight__chats_1_1graph_1_1Graph_a764ec9d5d95e071d857644b1947a2385}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!add\+\_\+contained\+\_\+in@{add\+\_\+contained\+\_\+in}}
\index{add\+\_\+contained\+\_\+in@{add\+\_\+contained\+\_\+in}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{add\+\_\+contained\+\_\+in()}{add\_contained\_in()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+add\+\_\+contained\+\_\+in (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2 }\end{DoxyParamCaption})}



Definition at line 3200 of file graph.\+py.


\begin{DoxyCode}
3200     \textcolor{keyword}{def }add\_contained\_in(self, id1, id2):
3201         \textcolor{keywordflow}{if} id1 \textcolor{keywordflow}{in} self.\_node\_contained\_in:
3202             i\_am\_in = self.\_node\_contained\_in[id1]
3203             self.\_node\_contains[i\_am\_in].remove(id1)
3204         self.\_node\_contained\_in[id1] = id2
3205         self.\_node\_contains[id2].add(id1)
3206         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
3207 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ab343f587ca9bf3b7576fbe93e537dbca}\label{classlight__chats_1_1graph_1_1Graph_ab343f587ca9bf3b7576fbe93e537dbca}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!add\+\_\+edge@{add\+\_\+edge}}
\index{add\+\_\+edge@{add\+\_\+edge}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{add\+\_\+edge()}{add\_edge()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+add\+\_\+edge (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{edge,  }\item[{}]{id2,  }\item[{}]{edge\+\_\+label = {\ttfamily None},  }\item[{}]{locked\+\_\+with = {\ttfamily None},  }\item[{}]{edge\+\_\+desc = {\ttfamily None},  }\item[{}]{full\+\_\+label = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Add an edge of the given type from id1 to id2.

Optionally can set a label for that edge
\end{DoxyVerb}
 

Definition at line 3138 of file graph.\+py.


\begin{DoxyCode}
3138     ):
3139         \textcolor{stringliteral}{"""}
3140 \textcolor{stringliteral}{        Add an edge of the given type from id1 to id2.}
3141 \textcolor{stringliteral}{}
3142 \textcolor{stringliteral}{        Optionally can set a label for that edge}
3143 \textcolor{stringliteral}{        """}
3144         \textcolor{keywordflow}{if} edge\_desc \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
3145             edge\_desc = self.get\_props\_from\_either(id2, id1, \textcolor{stringliteral}{'path\_desc'})[0]
3146         \textcolor{keywordflow}{if} (edge, id2) \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.\_node\_to\_edges[id1]:
3147             self.\_node\_to\_edges[id1][(edge, id2)] = \{
3148                 \textcolor{stringliteral}{'label'}: edge\_label,
3149                 \textcolor{stringliteral}{'examine\_desc'}: edge\_desc,
3150                 \textcolor{comment}{# TODO get these from the lock or something idk}
3151                 \textcolor{stringliteral}{'locked\_desc'}: edge\_desc,
3152                 \textcolor{stringliteral}{'unlocked\_desc'}: edge\_desc,
3153                 \textcolor{stringliteral}{'locked\_with'}: locked\_with,
3154                 \textcolor{stringliteral}{'is\_locked'}: \textcolor{keyword}{False},
3155                 \textcolor{stringliteral}{'full\_label'}: full\_label,
3156             \}
3157 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ad445b8282327b777a3419b2a5309237a}\label{classlight__chats_1_1graph_1_1Graph_ad445b8282327b777a3419b2a5309237a}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!add\+\_\+message\+\_\+callback@{add\+\_\+message\+\_\+callback}}
\index{add\+\_\+message\+\_\+callback@{add\+\_\+message\+\_\+callback}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{add\+\_\+message\+\_\+callback()}{add\_message\_callback()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+add\+\_\+message\+\_\+callback (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{func }\end{DoxyParamCaption})}

\begin{DoxyVerb}Register a message callback to a given agent by their node id.

This function will be called on the graph and an action when the subscribed
actor is the subject of an action
\end{DoxyVerb}
 

Definition at line 2942 of file graph.\+py.


\begin{DoxyCode}
2942     \textcolor{keyword}{def }add\_message\_callback(self, id, func):
2943         \textcolor{stringliteral}{"""}
2944 \textcolor{stringliteral}{        Register a message callback to a given agent by their node id.}
2945 \textcolor{stringliteral}{}
2946 \textcolor{stringliteral}{        This function will be called on the graph and an action when the subscribed}
2947 \textcolor{stringliteral}{        actor is the subject of an action}
2948 \textcolor{stringliteral}{        """}
2949         self.\_\_message\_callbacks[id] = func
2950 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a5356cdaf2e48b3a128773c70957cb38a}\label{classlight__chats_1_1graph_1_1Graph_a5356cdaf2e48b3a128773c70957cb38a}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!add\+\_\+node@{add\+\_\+node}}
\index{add\+\_\+node@{add\+\_\+node}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{add\+\_\+node()}{add\_node()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+add\+\_\+node (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{desc,  }\item[{}]{props,  }\item[{}]{is\+\_\+player = {\ttfamily False},  }\item[{}]{uid = {\ttfamily \textquotesingle{}\textquotesingle{}} }\end{DoxyParamCaption})}



Definition at line 3047 of file graph.\+py.


\begin{DoxyCode}
3047     \textcolor{keyword}{def }add\_node(self, desc, props, is\_player=False, uid=''):
3048         id = desc.lower()
3049         \textcolor{keywordflow}{if} id != \textcolor{stringliteral}{'dragon'} \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} is\_player:
3050             id = \textcolor{stringliteral}{"\{\}\_\{\}"}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(id, self.\_cnt)
3051             \textcolor{keywordflow}{if} uid != \textcolor{stringliteral}{''}:
3052                 id += \textcolor{stringliteral}{'\_\{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(uid)
3053         self.\_cnt = self.\_cnt + 1
3054         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_edges:
3055             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
3056         self.\_node\_to\_edges[id] = \{\}
3057         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(props) == str:
3058             self.\_node\_to\_prop[id] = \{\}
3059             self.\_node\_to\_prop[id][props] = \textcolor{keyword}{True}
3060             self.set\_prop(id, \textcolor{stringliteral}{'classes'}, [props])
3061         \textcolor{keywordflow}{elif} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(props) == dict:
3062             self.\_node\_to\_prop[id] = \{\}
3063             \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} props:
3064                 self.\_node\_to\_prop[id][p] = props[p]
3065         \textcolor{keywordflow}{else}:
3066             self.\_node\_to\_prop[id] = \{\}
3067             \textcolor{keywordflow}{for} p \textcolor{keywordflow}{in} props:
3068                 self.\_node\_to\_prop[id][p] = \textcolor{keyword}{True}
3069         \textcolor{keywordflow}{if} self.\_node\_to\_prop[id].get(\textcolor{stringliteral}{'names'}) \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
3070             self.\_node\_to\_prop[id][\textcolor{stringliteral}{'names'}] = [desc]
3071         self.\_node\_to\_prop[id][\textcolor{stringliteral}{'is\_player'}] = is\_player
3072         self.\_node\_contains[id] = set()
3073         self.\_node\_to\_desc[id] = desc
3074         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'agent'} \textcolor{keywordflow}{in} self.\_node\_to\_prop[id][\textcolor{stringliteral}{'classes'}] \textcolor{keywordflow}{or} is\_player:
3075             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.has\_prop(id, \textcolor{stringliteral}{'health'}):
3076                 self.set\_prop(id, \textcolor{stringliteral}{'health'}, 2)
3077             self.new\_agent(id)
3078         \textcolor{keywordflow}{if} is\_player:
3079             self.\_player\_ids.append(id)
3080         \textcolor{keywordflow}{return} id
3081 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ae7da5d306e949414cc4df9d49bc0678d}\label{classlight__chats_1_1graph_1_1Graph_ae7da5d306e949414cc4df9d49bc0678d}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!add\+\_\+one\+\_\+path\+\_\+to@{add\+\_\+one\+\_\+path\+\_\+to}}
\index{add\+\_\+one\+\_\+path\+\_\+to@{add\+\_\+one\+\_\+path\+\_\+to}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{add\+\_\+one\+\_\+path\+\_\+to()}{add\_one\_path\_to()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+add\+\_\+one\+\_\+path\+\_\+to (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2,  }\item[{}]{label = {\ttfamily None},  }\item[{}]{locked\+\_\+with = {\ttfamily None},  }\item[{}]{desc = {\ttfamily None},  }\item[{}]{full\+\_\+label = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 3160 of file graph.\+py.


\begin{DoxyCode}
3160     ):
3161         \textcolor{keywordflow}{if} id1 == id2:
3162             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
3163         self.add\_edge(id1, \textcolor{stringliteral}{'path\_to'}, id2, label, locked\_with, desc, full\_label)
3164         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
3165 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a4335de6c1c70dbbab982149a5c1e1586}\label{classlight__chats_1_1graph_1_1Graph_a4335de6c1c70dbbab982149a5c1e1586}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!add\+\_\+path\+\_\+to@{add\+\_\+path\+\_\+to}}
\index{add\+\_\+path\+\_\+to@{add\+\_\+path\+\_\+to}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{add\+\_\+path\+\_\+to()}{add\_path\_to()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+add\+\_\+path\+\_\+to (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2,  }\item[{}]{desc1 = {\ttfamily None},  }\item[{}]{desc2 = {\ttfamily None},  }\item[{}]{locked\+\_\+with = {\ttfamily None},  }\item[{}]{examine1 = {\ttfamily None},  }\item[{}]{examine2 = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Create a path between two rooms.
\end{DoxyVerb}
 

Definition at line 3175 of file graph.\+py.


\begin{DoxyCode}
3175     ):
3176         \textcolor{stringliteral}{"""}
3177 \textcolor{stringliteral}{        Create a path between two rooms.}
3178 \textcolor{stringliteral}{        """}
3179         \textcolor{keywordflow}{if} id1 == id2:
3180             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
3181         self.add\_edge(id1, \textcolor{stringliteral}{'path\_to'}, id2, desc1, locked\_with, examine1)
3182         self.add\_edge(id2, \textcolor{stringliteral}{'path\_to'}, id1, desc2, locked\_with, examine2)
3183         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
3184 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a1200144ee93bfb6e3abae4a41ba10cf0}\label{classlight__chats_1_1graph_1_1Graph_a1200144ee93bfb6e3abae4a41ba10cf0}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!all\+\_\+node\+\_\+ids@{all\+\_\+node\+\_\+ids}}
\index{all\+\_\+node\+\_\+ids@{all\+\_\+node\+\_\+ids}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{all\+\_\+node\+\_\+ids()}{all\_node\_ids()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+all\+\_\+node\+\_\+ids (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}return a list of all the node ids in the graph.
\end{DoxyVerb}
 

Definition at line 2928 of file graph.\+py.


\begin{DoxyCode}
2928     \textcolor{keyword}{def }all\_node\_ids(self):
2929         \textcolor{stringliteral}{"""}
2930 \textcolor{stringliteral}{        return a list of all the node ids in the graph.}
2931 \textcolor{stringliteral}{        """}
2932         \textcolor{keywordflow}{return} list(self.\_node\_to\_prop.keys())
2933 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ad0c4f66ad462e7aa45324767c551030a}\label{classlight__chats_1_1graph_1_1Graph_ad0c4f66ad462e7aa45324767c551030a}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!args\+\_\+to\+\_\+descs@{args\+\_\+to\+\_\+descs}}
\index{args\+\_\+to\+\_\+descs@{args\+\_\+to\+\_\+descs}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{args\+\_\+to\+\_\+descs()}{args\_to\_descs()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+args\+\_\+to\+\_\+descs (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{args }\end{DoxyParamCaption})}



Definition at line 4260 of file graph.\+py.


\begin{DoxyCode}
4260     \textcolor{keyword}{def }args\_to\_descs(self, args):
4261         loc = self.location(args[0])
4262         \textcolor{keywordflow}{return} [self.node\_to\_desc\_raw(i, from\_id=loc) \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} args]
4263 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ae53a707683cac4ddbafbefb0e0130bfa}\label{classlight__chats_1_1graph_1_1Graph_ae53a707683cac4ddbafbefb0e0130bfa}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!broadcast\+\_\+to\+\_\+room@{broadcast\+\_\+to\+\_\+room}}
\index{broadcast\+\_\+to\+\_\+room@{broadcast\+\_\+to\+\_\+room}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{broadcast\+\_\+to\+\_\+room()}{broadcast\_to\_room()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+broadcast\+\_\+to\+\_\+room (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{action,  }\item[{}]{exclude\+\_\+agents = {\ttfamily None},  }\item[{}]{told\+\_\+by = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}send a message to everyone in a room.
\end{DoxyVerb}
 

Definition at line 3719 of file graph.\+py.


\begin{DoxyCode}
3719     \textcolor{keyword}{def }broadcast\_to\_room(self, action, exclude\_agents=None, told\_by=None):
3720         \textcolor{stringliteral}{"""}
3721 \textcolor{stringliteral}{        send a message to everyone in a room.}
3722 \textcolor{stringliteral}{        """}
3723         \textcolor{keywordflow}{if} exclude\_agents \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
3724             exclude\_agents = []
3725         \textcolor{keywordflow}{else}:
3726             exclude\_agents = list(exclude\_agents)
3727 
3728         agents\_list, \_descs = self.get\_room\_agents(action[\textcolor{stringliteral}{'room\_id'}])
3729         agents = set(agents\_list)
3730         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'actors'} \textcolor{keywordflow}{in} action:
3731             \textcolor{comment}{# send message to the actor first}
3732             actor = action[\textcolor{stringliteral}{'actors'}][0]
3733             \textcolor{keywordflow}{if} actor \textcolor{keywordflow}{in} agents \textcolor{keywordflow}{and} actor \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} exclude\_agents:
3734                 self.send\_action(actor, action)
3735                 exclude\_agents.append(actor)
3736 
3737         action[\textcolor{stringliteral}{'present\_agent\_ids'}] = agents
3738         \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} agents:
3739             \textcolor{keywordflow}{if} a \textcolor{keywordflow}{in} exclude\_agents:
3740                 \textcolor{keywordflow}{continue}
3741             self.send\_action(a, action)
3742 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_af644853db532d4cfa276a884f04c8544}\label{classlight__chats_1_1graph_1_1Graph_af644853db532d4cfa276a884f04c8544}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!canonical\+\_\+action@{canonical\+\_\+action}}
\index{canonical\+\_\+action@{canonical\+\_\+action}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{canonical\+\_\+action()}{canonical\_action()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+canonical\+\_\+action (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agentid,  }\item[{}]{inst }\end{DoxyParamCaption})}



Definition at line 4332 of file graph.\+py.


\begin{DoxyCode}
4332     \textcolor{keyword}{def }canonical\_action(self, agentid, inst):
4333         words = inst.split(\textcolor{stringliteral}{' '})
4334         \textcolor{keywordflow}{if} words[0].lower() \textcolor{keywordflow}{in} GRAPH\_FUNCTIONS.keys():
4335             func\_wrap = GRAPH\_FUNCTIONS[words[0].lower()]
4336             valid, args, \_canon\_args = func\_wrap.parse\_text\_to\_args(
4337                 self, agentid, words[1:]
4338             )
4339             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} valid:
4340                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, inst
4341             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, func\_wrap.get\_canonical\_form(self, args)
4342         \textcolor{keywordflow}{return} \textcolor{keyword}{False}, inst
4343 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_aa28ea4b9a270d74783f277f04170d669}\label{classlight__chats_1_1graph_1_1Graph_aa28ea4b9a270d74783f277f04170d669}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!clean\+\_\+props@{clean\+\_\+props}}
\index{clean\+\_\+props@{clean\+\_\+props}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{clean\+\_\+props()}{clean\_props()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+clean\+\_\+props (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{object\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}ensures all necessary props are set on items that might not have been on earlier
versions of graphworld.
\end{DoxyVerb}
 

Definition at line 3749 of file graph.\+py.


\begin{DoxyCode}
3749     \textcolor{keyword}{def }clean\_props(self, object\_id):
3750         \textcolor{stringliteral}{"""}
3751 \textcolor{stringliteral}{        ensures all necessary props are set on items that might not have been on earlier}
3752 \textcolor{stringliteral}{        versions of graphworld.}
3753 \textcolor{stringliteral}{        """}
3754         \textcolor{comment}{# TODO remove when all samples are converted}
3755         size = self.get\_prop(object\_id, \textcolor{stringliteral}{'size'})
3756         \textcolor{keywordflow}{if} size \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{or} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(size) == bool:
3757             self.set\_prop(object\_id, \textcolor{stringliteral}{'size'}, 1)
3758         contain\_size = self.get\_prop(object\_id, \textcolor{stringliteral}{'contain\_size'})
3759         \textcolor{keywordflow}{if} contain\_size \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{or} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(contain\_size) == bool:
3760             self.set\_prop(object\_id, \textcolor{stringliteral}{'contain\_size'}, 3)
3761         classes = self.get\_prop(object\_id, \textcolor{stringliteral}{'classes'})
3762         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(classes) == str:
3763             self.set\_prop(object\_id, \textcolor{stringliteral}{'classes'}, [classes])
3764         \textcolor{keywordflow}{elif} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(classes) != list:
3765             self.set\_prop(object\_id, \textcolor{stringliteral}{'classes'}, [])
3766 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ae416efe86bf6117aec6dc1de481d0ec1}\label{classlight__chats_1_1graph_1_1Graph_ae416efe86bf6117aec6dc1de481d0ec1}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!cnt\+\_\+obj@{cnt\+\_\+obj}}
\index{cnt\+\_\+obj@{cnt\+\_\+obj}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{cnt\+\_\+obj()}{cnt\_obj()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+cnt\+\_\+obj (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{obj,  }\item[{}]{c,  }\item[{}]{ents = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a text form of the count of an object.
\end{DoxyVerb}
 

Definition at line 4165 of file graph.\+py.


\begin{DoxyCode}
4165     \textcolor{keyword}{def }cnt\_obj(self, obj, c, ents=None):
4166         \textcolor{stringliteral}{"""}
4167 \textcolor{stringliteral}{        Return a text form of the count of an object.}
4168 \textcolor{stringliteral}{        """}
4169         cnt = c[obj]
4170         \textcolor{keywordflow}{if} cnt == 1:
4171             \textcolor{keywordflow}{return} obj
4172         \textcolor{keywordflow}{else}:
4173             \textcolor{keywordflow}{if} ents \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
4174                 \textcolor{keywordflow}{if} self.get\_prop(ents[obj], \textcolor{stringliteral}{'plural'}) \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
4175                     words = self.get\_prop(ents[obj], \textcolor{stringliteral}{'plural'}).split(\textcolor{stringliteral}{' '})
4176                 \textcolor{keywordflow}{else}:
4177                     words = (obj + \textcolor{stringliteral}{'s'}).split(\textcolor{stringliteral}{' '})
4178             f = [
4179                 \textcolor{stringliteral}{'two'},
4180                 \textcolor{stringliteral}{'three'},
4181                 \textcolor{stringliteral}{'four'},
4182                 \textcolor{stringliteral}{'five'},
4183                 \textcolor{stringliteral}{'six'},
4184                 \textcolor{stringliteral}{'seven'},
4185                 \textcolor{stringliteral}{'eight'},
4186                 \textcolor{stringliteral}{'nine'},
4187                 \textcolor{stringliteral}{'a lot of'},
4188             ]
4189             rep = [\textcolor{stringliteral}{'a'}, \textcolor{stringliteral}{'an'}, \textcolor{stringliteral}{'the'}]
4190             cnt = cnt - 2
4191             \textcolor{keywordflow}{if} cnt > 8:
4192                 cnt = 8
4193             cnt = f[cnt]
4194             \textcolor{keywordflow}{if} words[0] \textcolor{keywordflow}{in} rep:
4195                 \textcolor{keywordflow}{return} cnt + \textcolor{stringliteral}{' '} + \textcolor{stringliteral}{' '}.join(words[1:])
4196             \textcolor{keywordflow}{else}:
4197                 \textcolor{keywordflow}{return} cnt + \textcolor{stringliteral}{' '} + \textcolor{stringliteral}{' '}.join(words)
4198 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a96afb6e22927414bb55693609a5e89cb}\label{classlight__chats_1_1graph_1_1Graph_a96afb6e22927414bb55693609a5e89cb}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!combine\+\_\+classed\+\_\+descs@{combine\+\_\+classed\+\_\+descs}}
\index{combine\+\_\+classed\+\_\+descs@{combine\+\_\+classed\+\_\+descs}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{combine\+\_\+classed\+\_\+descs()}{combine\_classed\_descs()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+combine\+\_\+classed\+\_\+descs (\begin{DoxyParamCaption}\item[{}]{descs }\end{DoxyParamCaption})}



Definition at line 3247 of file graph.\+py.


\begin{DoxyCode}
3247     \textcolor{keyword}{def }combine\_classed\_descs(descs):
3248         adj\_descs = [\{\textcolor{stringliteral}{'default'}: d\} \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(d) \textcolor{keywordflow}{is} str \textcolor{keywordflow}{else} d \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} descs]
3249         last\_round\_descs = \{\textcolor{stringliteral}{'default'}: \textcolor{stringliteral}{''}\}
3250         \textcolor{keywordflow}{for} desc\_set \textcolor{keywordflow}{in} [adj\_descs]:
3251             round\_descs = \{\}
3252             \textcolor{keywordflow}{for} class\_name \textcolor{keywordflow}{in} desc\_set:
3253                 \textcolor{keywordflow}{if} class\_name \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} last\_round\_descs:
3254                     old\_d = last\_round\_descs[\textcolor{stringliteral}{'default'}].strip()
3255                     new\_d = desc\_set[class\_name].strip()
3256                     round\_descs[class\_name] = (old\_d + \textcolor{stringliteral}{' '} + new\_d).strip()
3257                 \textcolor{keywordflow}{else}:
3258                     old\_d = last\_round\_descs[class\_name].strip()
3259                     new\_d = desc\_set[class\_name].strip()
3260                     round\_descs[class\_name] = (old\_d + \textcolor{stringliteral}{' '} + new\_d).strip()
3261             last\_round\_descs = round\_descs
3262         \textcolor{keywordflow}{return} last\_round\_descs
3263 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a4897dcda9b389f41be824fdffce5055b}\label{classlight__chats_1_1graph_1_1Graph_a4897dcda9b389f41be824fdffce5055b}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!copy@{copy}}
\index{copy@{copy}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+copy (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}return a copy of this graph.
\end{DoxyVerb}
 

Definition at line 2880 of file graph.\+py.


\begin{DoxyCode}
2880     \textcolor{keyword}{def }copy(self):
2881         \textcolor{stringliteral}{"""}
2882 \textcolor{stringliteral}{        return a copy of this graph.}
2883 \textcolor{stringliteral}{        """}
2884         \textcolor{keywordflow}{return} deepcopy(self)
2885 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_acc495d94797d39558b1711d0bbf6346d}\label{classlight__chats_1_1graph_1_1Graph_acc495d94797d39558b1711d0bbf6346d}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!create@{create}}
\index{create@{create}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{create()}{create()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+create (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+id,  }\item[{}]{params }\end{DoxyParamCaption})}



Definition at line 3769 of file graph.\+py.


\begin{DoxyCode}
3769     \textcolor{keyword}{def }create(self, agent\_id, params):
3770         \textcolor{comment}{# -- create commands: --}
3771         \textcolor{comment}{# *create room kitchen  -> creates room with path from this room}
3772         \textcolor{comment}{# *create path kitchen  -> create path to that room from this one}
3773         \textcolor{comment}{# *create agent orc}
3774         \textcolor{comment}{# *create object ring}
3775         \textcolor{comment}{# *create key golden key}
3776         \textcolor{comment}{# create lockable tower with golden key}
3777         \textcolor{comment}{# create container box}
3778         \textcolor{comment}{# create [un]freeze}
3779         \textcolor{comment}{# create reset/load/save [fname]}
3780         \textcolor{comment}{# create rename <node> <value>    <-- **crashes*}
3781         \textcolor{comment}{# create delete <node>}
3782         \textcolor{comment}{# create set\_prop orc to health=5}
3783         \textcolor{keyword}{from} parlai\_internal.tasks.graph\_world3.class\_nodes \textcolor{keyword}{import} (
3784             create\_thing,
3785             CLASS\_NAMES,
3786         )
3787 
3788         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.has\_prop(agent\_id, \textcolor{stringliteral}{'agent'}):
3789             \textcolor{keywordflow}{return} \textcolor{keyword}{False}, \textcolor{stringliteral}{'create'}
3790         \textcolor{keywordflow}{if} params \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
3791             \textcolor{keywordflow}{return} \textcolor{keyword}{False}, \textcolor{stringliteral}{'create'}
3792         room\_id = self.room(agent\_id)
3793         all\_params = \textcolor{stringliteral}{' '}.join(params)
3794         txt = \textcolor{stringliteral}{' '}.join(params[1:])
3795         resp = \textcolor{stringliteral}{'create '} + \textcolor{stringliteral}{' '}.join(params)
3796         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} (all\_params \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'save'}, \textcolor{stringliteral}{'load'}, \textcolor{stringliteral}{'freeze'}, \textcolor{stringliteral}{'unfreeze'}]):
3797             \textcolor{keywordflow}{if} txt == \textcolor{stringliteral}{''}:
3798                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3799         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'print'}:
3800             ids = self.desc\_to\_nodes(txt, nearbyid=agent\_id, nearbytype=\textcolor{stringliteral}{'all'})
3801             \textcolor{keywordflow}{if} len(ids) == 0:
3802                 self.send\_msg(agent\_id, \textcolor{stringliteral}{"Not found.\(\backslash\)n "})
3803                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3804             id = ids[0]
3805             self.send\_msg(agent\_id, id + \textcolor{stringliteral}{" has:\(\backslash\)n\{\}"}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.\_node\_to\_prop[id]))
3806             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3807         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'save'}:
3808             self.save\_graph(txt)
3809             self.send\_msg(agent\_id, \textcolor{stringliteral}{"[ saved: "} + self.\_save\_fname + \textcolor{stringliteral}{' ]\(\backslash\)n'})
3810             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3811         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'load'} \textcolor{keywordflow}{or} params[0] == \textcolor{stringliteral}{'reset'}:
3812             self.load\_graph(txt)
3813             self.send\_msg(agent\_id, \textcolor{stringliteral}{"[ loaded: "} + self.\_save\_fname + \textcolor{stringliteral}{' ]\(\backslash\)n'})
3814             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3815         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'freeze'}:
3816             self.freeze(\textcolor{keyword}{True})
3817             self.send\_msg(agent\_id, \textcolor{stringliteral}{"Frozen.\(\backslash\)n"})
3818             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3819         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'unfreeze'}:
3820             self.freeze(\textcolor{keyword}{False})
3821             self.send\_msg(agent\_id, \textcolor{stringliteral}{"Unfrozen.\(\backslash\)n"})
3822             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3823         \textcolor{keywordflow}{if} params[0] \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'delete'}, \textcolor{stringliteral}{'del'}, \textcolor{stringliteral}{'rm'}]:
3824             ids = self.desc\_to\_nodes(txt, nearbyid=agent\_id, nearbytype=\textcolor{stringliteral}{'all'})
3825             \textcolor{keywordflow}{if} len(ids) == 0:
3826                 self.send\_msg(\textcolor{stringliteral}{"Not found.\(\backslash\)n "})
3827                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3828             id = ids[0]
3829             self.delete\_node(id)
3830             self.send\_msg(agent\_id, \textcolor{stringliteral}{"Deleted.\(\backslash\)n"})
3831             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3832         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'rename'}:
3833             params = self.split\_params(params[1:], \textcolor{stringliteral}{'to'})
3834             to\_ids = self.desc\_to\_nodes(params[0], nearbyid=agent\_id, nearbytype=\textcolor{stringliteral}{'all'})
3835             \textcolor{keywordflow}{if} len(to\_ids) == 0:
3836                 self.send\_msg(\textcolor{stringliteral}{"Not found.\(\backslash\)n "})
3837                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3838             to\_id = to\_ids[0]
3839             self.set\_desc(to\_id, params[1])
3840             self.send\_msg(agent\_id, \textcolor{stringliteral}{"Done.\(\backslash\)n"})
3841             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3842         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'agent'}:
3843             create\_thing(self, room\_id, params[0], force=\textcolor{keyword}{True}, use\_name=txt)
3844             self.send\_msg(agent\_id, \textcolor{stringliteral}{"Done.\(\backslash\)n"})
3845             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3846         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'room'}:
3847             new\_id = self.add\_node(txt, params[0])
3848             self.add\_path\_to(new\_id, room\_id)
3849             self.set\_prop(new\_id, \textcolor{stringliteral}{'contain\_size'}, 2000)
3850             self.send\_msg(agent\_id, \textcolor{stringliteral}{"Done.\(\backslash\)n"})
3851             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3852         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'set\_prop'}:
3853             params = self.split\_params(params[1:], \textcolor{stringliteral}{'to'})
3854             to\_ids = self.desc\_to\_nodes(params[0], nearbyid=agent\_id, nearbytype=\textcolor{stringliteral}{'all'})
3855             \textcolor{keywordflow}{if} len(to\_ids) == 0:
3856                 self.send\_msg(\textcolor{stringliteral}{"Not found.\(\backslash\)n "})
3857                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3858             to\_id = to\_ids[0]
3859             key = params[1]
3860             value = \textcolor{keyword}{True}
3861             \textcolor{keywordflow}{if} \textcolor{stringliteral}{'='} \textcolor{keywordflow}{in} key:
3862                 sp = key.split(\textcolor{stringliteral}{'='})
3863                 \textcolor{keywordflow}{if} len(sp) != 2:
3864                     \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3865                 key = sp[0]
3866                 value = sp[1]
3867                 \textcolor{keywordflow}{if} value == \textcolor{stringliteral}{'True'}:
3868                     value = \textcolor{keyword}{True}
3869                 \textcolor{keywordflow}{try}:
3870                     value = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(value)
3871                 \textcolor{keywordflow}{except} ValueError:
3872                     \textcolor{keywordflow}{pass}
3873             self.set\_prop(to\_id, key, value)
3874             self.send\_msg(agent\_id, \textcolor{stringliteral}{"Done.\(\backslash\)n"})
3875             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3876         \textcolor{keywordflow}{if} params[0] \textcolor{keywordflow}{in} CLASS\_NAMES:
3877             \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'key'} \textcolor{keywordflow}{and} txt.find(\textcolor{stringliteral}{'key'}) == -1:
3878                 self.send\_msg(agent\_id, \textcolor{stringliteral}{"Keys must be called keys!\(\backslash\)n"})
3879                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3880             create\_thing(self, room\_id, params[0], force=\textcolor{keyword}{True}, use\_name=txt)
3881             self.send\_msg(agent\_id, \textcolor{stringliteral}{"Done.\(\backslash\)n"})
3882             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3883         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'lockable'}:
3884             ps = self.split\_params(params[1:], \textcolor{stringliteral}{'with'})
3885             \textcolor{keywordflow}{if} len(ps) != 2:
3886                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3887             to\_ids = self.desc\_to\_nodes(ps[0], nearbyid=agent\_id, nearbytype=\textcolor{stringliteral}{'all'})
3888             with\_ids = self.desc\_to\_nodes(ps[1], nearbyid=agent\_id, nearbytype=\textcolor{stringliteral}{'all'})
3889             \textcolor{keywordflow}{if} len(to\_ids) == 0 \textcolor{keywordflow}{or} len(with\_ids) == 0:
3890                 self.send\_msg(\textcolor{stringliteral}{"Something was not found.\(\backslash\)n "})
3891                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3892             to\_id = to\_ids[0]
3893             with\_id = with\_ids[0]
3894             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.get\_prop(with\_id, \textcolor{stringliteral}{'key'}):
3895                 self.send\_msg(agent\_id, \textcolor{stringliteral}{"You need to use a key!\(\backslash\)n"})
3896                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3897             self.set\_prop(to\_id, \textcolor{stringliteral}{'locked\_with'}, with\_id)
3898             self.set\_prop(to\_id, \textcolor{stringliteral}{'locked'}, \textcolor{keyword}{True})
3899             self.send\_msg(agent\_id, \textcolor{stringliteral}{"Done.\(\backslash\)n"})
3900             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3901         \textcolor{keywordflow}{if} params[0] == \textcolor{stringliteral}{'path'}:
3902             to\_id = self.desc\_to\_nodes(txt)
3903             \textcolor{keywordflow}{if} to\_id \textcolor{keywordflow}{is} \textcolor{keyword}{False}:
3904                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3905             self.add\_path\_to(to\_id, room\_id)
3906             self.send\_msg(agent\_id, \textcolor{stringliteral}{"Done.\(\backslash\)n"})
3907             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, resp
3908         self.send\_msg(agent\_id, \textcolor{stringliteral}{'Create is not supported for: '} + resp)
3909         \textcolor{keywordflow}{return} \textcolor{keyword}{False}, resp
3910 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a703188eb5340371b8ad793ddebd2af30}\label{classlight__chats_1_1graph_1_1Graph_a703188eb5340371b8ad793ddebd2af30}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!delete\+\_\+node@{delete\+\_\+node}}
\index{delete\+\_\+node@{delete\+\_\+node}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{delete\+\_\+node()}{delete\_node()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+delete\+\_\+node (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Remove a node from the graph, keeping the reference for printing.
\end{DoxyVerb}
 

Definition at line 3092 of file graph.\+py.


\begin{DoxyCode}
3092     \textcolor{keyword}{def }delete\_node(self, id):
3093         \textcolor{stringliteral}{"""}
3094 \textcolor{stringliteral}{        Remove a node from the graph, keeping the reference for printing.}
3095 \textcolor{stringliteral}{        """}
3096         \textcolor{comment}{# Remove from the container}
3097         loc = self.location(id)
3098         \textcolor{keywordflow}{if} loc \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None} \textcolor{keywordflow}{and} id \textcolor{keywordflow}{in} self.\_node\_contains[loc]:
3099             self.\_node\_contains[self.location(id)].remove(id)
3100         \textcolor{comment}{# remove size from above object, then remove contained in edge}
3101         above\_id = self.node\_contained\_in(id)
3102         \textcolor{keywordflow}{if} above\_id \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
3103             size = self.get\_prop(id, \textcolor{stringliteral}{'size'})
3104             omax\_size = self.get\_prop(above\_id, \textcolor{stringliteral}{'contain\_size'})
3105             omax\_size = omax\_size + size
3106             self.set\_prop(above\_id, \textcolor{stringliteral}{'contain\_size'}, omax\_size)
3107             \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1tasks_1_1graph__world2_1_1graph_a0da062d03bdfbab1c65ea71371c0c469}{rm}(self.\_node\_contained\_in, id)
3108         \textcolor{comment}{# all things inside this are zapped too}
3109         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_contains:
3110             objs = deepcopy(self.\_node\_contains[id])
3111             \textcolor{keywordflow}{for} o \textcolor{keywordflow}{in} objs:
3112                 self.delete\_node(o)
3113         \textcolor{comment}{# now remove edges from other rooms}
3114         \textcolor{keywordflow}{for} r \textcolor{keywordflow}{in} self.\_node\_to\_edges[id]:
3115             \textcolor{keywordflow}{if} r[0] == \textcolor{stringliteral}{'path\_to'}:
3116                 self.\_node\_to\_edges[r[1]].remove([\textcolor{stringliteral}{'path\_to'}, id])
3117         \textcolor{comment}{# stop all agents from following this one}
3118         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_followed\_by:
3119             ags = deepcopy(self.\_node\_followed\_by[id])
3120             \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} ags:
3121                 self.set\_follow(a, \textcolor{keywordtype}{None})
3122         \hyperlink{namespaceprojects_1_1mastering__the__dungeon_1_1tasks_1_1graph__world2_1_1graph_a0da062d03bdfbab1c65ea71371c0c469}{rm}(self.\_node\_follows, id)
3123         \textcolor{comment}{# Remove from npc list}
3124         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_npcs:
3125             self.\_node\_npcs.remove(id)
3126 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ac98ed988f74d9571e195aa9592f84b76}\label{classlight__chats_1_1graph_1_1Graph_ac98ed988f74d9571e195aa9592f84b76}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!delete\+\_\+prop@{delete\+\_\+prop}}
\index{delete\+\_\+prop@{delete\+\_\+prop}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{delete\+\_\+prop()}{delete\_prop()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+delete\+\_\+prop (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{prop }\end{DoxyParamCaption})}

\begin{DoxyVerb}Remove a prop from the node_to_prop map.
\end{DoxyVerb}
 

Definition at line 3378 of file graph.\+py.


\begin{DoxyCode}
3378     \textcolor{keyword}{def }delete\_prop(self, id, prop):
3379         \textcolor{stringliteral}{"""}
3380 \textcolor{stringliteral}{        Remove a prop from the node\_to\_prop map.}
3381 \textcolor{stringliteral}{        """}
3382         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_prop:
3383             \textcolor{keywordflow}{if} prop \textcolor{keywordflow}{in} self.\_node\_to\_prop[id]:
3384                 del self.\_node\_to\_prop[id][prop]
3385 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a67fd9624112a695cd6e1a0b92ec3139b}\label{classlight__chats_1_1graph_1_1Graph_a67fd9624112a695cd6e1a0b92ec3139b}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!desc\+\_\+to\+\_\+nodes@{desc\+\_\+to\+\_\+nodes}}
\index{desc\+\_\+to\+\_\+nodes@{desc\+\_\+to\+\_\+nodes}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{desc\+\_\+to\+\_\+nodes()}{desc\_to\_nodes()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+desc\+\_\+to\+\_\+nodes (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{desc,  }\item[{}]{nearbyid = {\ttfamily None},  }\item[{}]{nearbytype = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get nodes nearby to a given node from that node's perspective.
\end{DoxyVerb}
 

Definition at line 3416 of file graph.\+py.


\begin{DoxyCode}
3416     \textcolor{keyword}{def }desc\_to\_nodes(self, desc, nearbyid=None, nearbytype=None):
3417         \textcolor{stringliteral}{"""}
3418 \textcolor{stringliteral}{        Get nodes nearby to a given node from that node's perspective.}
3419 \textcolor{stringliteral}{        """}
3420         from\_id = self.location(nearbyid)
3421         \textcolor{keywordflow}{if} nearbyid \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
3422             o = set()
3423             \textcolor{keywordflow}{if} \textcolor{stringliteral}{'all'} \textcolor{keywordflow}{in} nearbytype \textcolor{keywordflow}{and} \textcolor{stringliteral}{'here'} \textcolor{keywordflow}{in} nearbytype:
3424                 o = self.get\_local\_ids(nearbyid)
3425             \textcolor{keywordflow}{else}:
3426                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'path'} \textcolor{keywordflow}{in} nearbytype:
3427                     o1 = self.node\_path\_to(from\_id)
3428                     o = set(o).union(o1).union([from\_id])
3429                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'carrying'} \textcolor{keywordflow}{in} nearbytype:
3430                     o = set(o).union(set(self.node\_contains(nearbyid)))
3431                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'sameloc'} \textcolor{keywordflow}{in} nearbytype:
3432                     o1 = set(self.node\_contains(from\_id))
3433                     o = o.union(o1)
3434                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'all'} \textcolor{keywordflow}{in} nearbytype:
3435                     o1 = self.node\_contains(nearbyid)
3436                     o2 = self.node\_contains(from\_id)
3437                     o3 = self.node\_path\_to(from\_id)
3438                     o = o.union(o1).union(o2).union(o3)
3439                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'contains'} \textcolor{keywordflow}{in} nearbytype:
3440                     o = o.union(\{self.location(nearbyid)\})
3441                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'players'} \textcolor{keywordflow}{in} nearbytype:
3442                     o = o.union(self.\_used\_player\_ids)
3443                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'others'} \textcolor{keywordflow}{in} nearbytype:
3444                     \textcolor{keywordflow}{for} item \textcolor{keywordflow}{in} o:
3445                         \textcolor{keywordflow}{if} self.get\_prop(item, \textcolor{stringliteral}{'agent'}) \textcolor{keywordflow}{or} self.get\_prop(
3446                             item, \textcolor{stringliteral}{'container'}
3447                         ):
3448                             o = o.union(self.node\_contains(item))
3449                 \textcolor{comment}{# if len(o) == 0:}
3450                 \textcolor{comment}{#     o1 = self.node\_contains(nearbyid)}
3451                 \textcolor{comment}{#     o2 = self.node\_contains(self.location(nearbyid))}
3452                 \textcolor{comment}{#     o = o1.union(o2)}
3453         \textcolor{keywordflow}{else}:
3454             o = set(self.\_node\_to\_desc.keys())
3455         \textcolor{comment}{# Go through official in-game names}
3456         \textcolor{keywordflow}{if} nearbyid \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None} \textcolor{keywordflow}{and} self.room(nearbyid) \textcolor{keywordflow}{in} o \textcolor{keywordflow}{and} desc == \textcolor{stringliteral}{'room'}:
3457             \textcolor{keywordflow}{return} [self.room(nearbyid)]
3458 
3459         found\_pairs = [(id, self.node\_to\_desc(id, from\_id=from\_id).lower()) \textcolor{keywordflow}{for} id \textcolor{keywordflow}{in} o]
3460         valid\_ids\_1 = [
3461             (id, name) \textcolor{keywordflow}{for} (id, name) \textcolor{keywordflow}{in} found\_pairs \textcolor{keywordflow}{if} desc.lower() \textcolor{keywordflow}{in} name + \textcolor{stringliteral}{'s'}
3462         ]
3463 
3464         \textcolor{comment}{# Check the parent name trees for names that also could match in the}
3465         \textcolor{comment}{# case that nothing could be found}
3466         all\_subnames = [(id, self.get\_prop(id, \textcolor{stringliteral}{'names'})) \textcolor{keywordflow}{for} id \textcolor{keywordflow}{in} o]
3467         all\_pairs = [
3468             (id, name) \textcolor{keywordflow}{for} (id, name\_list) \textcolor{keywordflow}{in} all\_subnames \textcolor{keywordflow}{for} name \textcolor{keywordflow}{in} name\_list
3469         ]
3470         valid\_ids\_2 = [
3471             (id, name) \textcolor{keywordflow}{for} (id, name) \textcolor{keywordflow}{in} all\_pairs \textcolor{keywordflow}{if} desc.lower() \textcolor{keywordflow}{in} name + \textcolor{stringliteral}{'s'}
3472         ]
3473 
3474         valid\_ids\_1.sort(key=\textcolor{keyword}{lambda} x: len(x[0]))
3475         valid\_ids\_2.sort(key=\textcolor{keyword}{lambda} x: len(x[1]))
3476         valid\_ids = valid\_ids\_1 + valid\_ids\_2
3477         valid\_ids = [id \textcolor{keywordflow}{for} (id, \_name) \textcolor{keywordflow}{in} valid\_ids]
3478         \textcolor{keywordflow}{return} valid\_ids
3479 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a74bc5374a9c9f411008e726fac4cd7f1}\label{classlight__chats_1_1graph_1_1Graph_a74bc5374a9c9f411008e726fac4cd7f1}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!die@{die}}
\index{die@{die}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{die()}{die()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+die (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Update an agent into a dead state.
\end{DoxyVerb}
 

Definition at line 3956 of file graph.\+py.


\begin{DoxyCode}
3956     \textcolor{keyword}{def }die(self, id):
3957         \textcolor{stringliteral}{"""}
3958 \textcolor{stringliteral}{        Update an agent into a dead state.}
3959 \textcolor{stringliteral}{        """}
3960         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.has\_prop(id, \textcolor{stringliteral}{'agent'}):
3961             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
3962         \textcolor{keywordflow}{if} self.get\_prop(id, \textcolor{stringliteral}{'is\_player'}, \textcolor{keyword}{False}) \textcolor{keywordflow}{is} \textcolor{keyword}{True}:
3963             self.set\_follow(id, \textcolor{keywordtype}{None})
3964             room = self.location(id)
3965             add\_text = \textcolor{stringliteral}{''}
3966             contents = self.node\_contains(id)
3967             \textcolor{keywordflow}{if} len(contents) > 0:
3968                 add\_text += \textcolor{stringliteral}{'[*SPLIT*] Your travel companion leaves behind \{\}.'}.
      \hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
3969                     self.display\_node\_list(contents)
3970                 )
3971                 \textcolor{keywordflow}{for} content \textcolor{keywordflow}{in} contents:
3972                     self.move\_object(content, room)
3973             text = \{
3974                 \textcolor{stringliteral}{'elf'}: \textcolor{stringliteral}{"Josephine collapses to the ground! "}
3975                 \textcolor{stringliteral}{"She looks like she's asleep except for an awful "}
3976                 \textcolor{stringliteral}{"stillness about her. Although her home is in the "}
3977                 \textcolor{stringliteral}{"mountains, she seems a part of the woods as well. You "}
3978                 \textcolor{stringliteral}{"hope to meet her again in the next life. And as you "}
3979                 \textcolor{stringliteral}{"think this, a bright white light filters through the "}
3980                 \textcolor{stringliteral}{"trees, engulfing the troll's peaceful form. You stare in "}
3981                 \textcolor{stringliteral}{"wonder: when the light fades away, so does Josephine!"} + add\_text,
3982                 \textcolor{stringliteral}{'troll'}: \textcolor{stringliteral}{"You watch in horror as the elf drops lifelessly to the "}
3983                 \textcolor{stringliteral}{"ground. Lying there, Alixlior looks strangely peaceful "}
3984                 \textcolor{stringliteral}{"and as much a part of the woods as when alive. You know "}
3985                 \textcolor{stringliteral}{"that were your friend alive, you would be told not to "}
3986                 \textcolor{stringliteral}{"mourn and that all of this is a journey that will repeat "}
3987                 \textcolor{stringliteral}{"itself - where you will undoubtedly meet again. But for "}
3988                 \textcolor{stringliteral}{"now, this kind of blows. Before you can wonder if you "}
3989                 \textcolor{stringliteral}{"should conduct a burial ceremony, a strange white light "}
3990                 \textcolor{stringliteral}{"engulfs the elf's body, causing you to close your eyes. "}
3991                 \textcolor{stringliteral}{"When you open them, Alixlior is gone!"} + add\_text,
3992             \}
3993             self.broadcast\_to\_room(\{\textcolor{stringliteral}{'caller'}: \textcolor{keywordtype}{None}, \textcolor{stringliteral}{'room\_id'}: room, \textcolor{stringliteral}{'txt'}: text\}, [id])
3994             self.set\_prop(id, \textcolor{stringliteral}{'dead'}, \textcolor{keyword}{True})
3995             self.delete\_node(id)
3996             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
3997 
3998         agent\_desc = self.node\_to\_desc(id, use\_the=\textcolor{keyword}{True}).capitalize()
3999         self.broadcast\_to\_room(
4000             \{
4001                 \textcolor{stringliteral}{'caller'}: \textcolor{keywordtype}{None},
4002                 \textcolor{stringliteral}{'room\_id'}: self.location(id),
4003                 \textcolor{stringliteral}{'txt'}: agent\_desc + \textcolor{stringliteral}{' died!\(\backslash\)n'},
4004             \},
4005             [id],
4006         )
4007         self.set\_follow(id, \textcolor{keywordtype}{None})
4008         self.set\_prop(id, \textcolor{stringliteral}{'dead'}, \textcolor{keyword}{True})
4009         self.delete\_prop(id, \textcolor{stringliteral}{'agent'})
4010         self.remove\_class(id, \textcolor{stringliteral}{'agent'})
4011         self.add\_class(id, \textcolor{stringliteral}{'container'})
4012         self.add\_class(id, \textcolor{stringliteral}{'object'})
4013         self.add\_class(id, \textcolor{stringliteral}{'food'})
4014         self.set\_prop(id, \textcolor{stringliteral}{'container'})
4015         self.set\_prop(id, \textcolor{stringliteral}{'object'})
4016         self.set\_prop(id, \textcolor{stringliteral}{'food'})
4017         self.set\_prop(id, \textcolor{stringliteral}{'examined'}, \textcolor{keyword}{True})
4018         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
4019 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a32111f6e4bae319c37f6d8de8dd2bbbe}\label{classlight__chats_1_1graph_1_1Graph_a32111f6e4bae319c37f6d8de8dd2bbbe}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!display\+\_\+desc\+\_\+list@{display\+\_\+desc\+\_\+list}}
\index{display\+\_\+desc\+\_\+list@{display\+\_\+desc\+\_\+list}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{display\+\_\+desc\+\_\+list()}{display\_desc\_list()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+display\+\_\+desc\+\_\+list (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{descs,  }\item[{}]{ents = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 4199 of file graph.\+py.


\begin{DoxyCode}
4199     \textcolor{keyword}{def }display\_desc\_list(self, descs, ents=None):
4200         \textcolor{keywordflow}{if} len(descs) == 0:
4201             \textcolor{keywordflow}{return} \textcolor{stringliteral}{'nothing'}
4202         \textcolor{keywordflow}{if} len(descs) == 1:
4203             \textcolor{keywordflow}{return} descs[0]
4204         c = Counter(descs)
4205         unique\_items = set(descs)
4206         s = \textcolor{stringliteral}{''}
4207         cnt = 0
4208         \textcolor{keywordflow}{for} obj \textcolor{keywordflow}{in} unique\_items:
4209             s += self.cnt\_obj(obj, c, ents)
4210             \textcolor{keywordflow}{if} len(unique\_items) > 2 \textcolor{keywordflow}{and} cnt < len(unique\_items) - 1:
4211                 s += \textcolor{stringliteral}{','}
4212             s += \textcolor{stringliteral}{' '}
4213             cnt = cnt + 1
4214             \textcolor{keywordflow}{if} cnt == len(unique\_items) - 1:
4215                 s += \textcolor{stringliteral}{'and '}
4216         \textcolor{keywordflow}{return} s.rstrip(\textcolor{stringliteral}{' '})
4217 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a34711f0bfabab728aa51d45bbde67580}\label{classlight__chats_1_1graph_1_1Graph_a34711f0bfabab728aa51d45bbde67580}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!display\+\_\+node@{display\+\_\+node}}
\index{display\+\_\+node@{display\+\_\+node}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{display\+\_\+node()}{display\_node()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+display\+\_\+node (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id }\end{DoxyParamCaption})}



Definition at line 4223 of file graph.\+py.


\begin{DoxyCode}
4223     \textcolor{keyword}{def }display\_node(self, id):
4224         \textcolor{keywordflow}{if} self.get\_prop(id, \textcolor{stringliteral}{'surface\_type'}) == \textcolor{stringliteral}{'on'}:
4225             contents = self.node\_contains(id)
4226             content\_desc = self.display\_node\_list(contents)
4227             obj\_desc = self.node\_to\_desc(id, use\_the=\textcolor{keyword}{True})
4228             \textcolor{keywordflow}{return} \textcolor{stringliteral}{"There's \{\} on \{\}"}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(content\_desc, obj\_desc)
4229         \textcolor{keywordflow}{else}:
4230             s = self.node\_to\_desc(id, use\_the=\textcolor{keyword}{True}).capitalize() + \textcolor{stringliteral}{' contains '}
4231             contents = self.node\_contains(id)
4232             \textcolor{keywordflow}{return} s + self.display\_node\_list(contents) + \textcolor{stringliteral}{'.\(\backslash\)n'}
4233 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a9c3ce0d845610e465f9a5d9bee1cbd23}\label{classlight__chats_1_1graph_1_1Graph_a9c3ce0d845610e465f9a5d9bee1cbd23}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!display\+\_\+node\+\_\+list@{display\+\_\+node\+\_\+list}}
\index{display\+\_\+node\+\_\+list@{display\+\_\+node\+\_\+list}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{display\+\_\+node\+\_\+list()}{display\_node\_list()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+display\+\_\+node\+\_\+list (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{l,  }\item[{}]{from\+\_\+id = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 4218 of file graph.\+py.


\begin{DoxyCode}
4218     \textcolor{keyword}{def }display\_node\_list(self, l, from\_id=False):
4219         desc\_to\_ent = \{self.node\_to\_desc(ent, from\_id): ent \textcolor{keywordflow}{for} ent \textcolor{keywordflow}{in} l\}
4220         descs = [self.node\_to\_desc(ent, from\_id) \textcolor{keywordflow}{for} ent \textcolor{keywordflow}{in} l]
4221         \textcolor{keywordflow}{return} self.display\_desc\_list(descs, desc\_to\_ent)
4222 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a4b2f6d6d7714ea3b82ff7a01f3199123}\label{classlight__chats_1_1graph_1_1Graph_a4b2f6d6d7714ea3b82ff7a01f3199123}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!extract\+\_\+classed\+\_\+from\+\_\+dict@{extract\+\_\+classed\+\_\+from\+\_\+dict}}
\index{extract\+\_\+classed\+\_\+from\+\_\+dict@{extract\+\_\+classed\+\_\+from\+\_\+dict}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{extract\+\_\+classed\+\_\+from\+\_\+dict()}{extract\_classed\_from\_dict()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+extract\+\_\+classed\+\_\+from\+\_\+dict (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{prop\+\_\+d,  }\item[{}]{viewer = {\ttfamily None},  }\item[{}]{default = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 3317 of file graph.\+py.


\begin{DoxyCode}
3317     \textcolor{keyword}{def }extract\_classed\_from\_dict(self, prop\_d, viewer=None, default=None):
3318         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(prop\_d) \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} dict:
3319             \textcolor{keywordflow}{if} prop\_d \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
3320                 \textcolor{keywordflow}{return} default
3321             \textcolor{keywordflow}{return} prop\_d
3322         \textcolor{keywordflow}{if} viewer \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
3323             viewer\_class = self.get\_prop(viewer, \textcolor{stringliteral}{'class'})
3324             \textcolor{keywordflow}{if} viewer\_class \textcolor{keywordflow}{in} prop\_d:
3325                 \textcolor{keywordflow}{return} prop\_d[viewer\_class]
3326             \textcolor{keywordflow}{for} viewer\_class \textcolor{keywordflow}{in} self.get\_prop(viewer, \textcolor{stringliteral}{'classes'}):
3327                 \textcolor{keywordflow}{if} viewer\_class \textcolor{keywordflow}{in} prop\_d:
3328                     \textcolor{keywordflow}{return} prop\_d[viewer\_class]
3329         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'default'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} prop\_d:
3330             \textcolor{keywordflow}{return} default
3331         \textcolor{keywordflow}{return} prop\_d[\textcolor{stringliteral}{'default'}]
3332 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a27cddf5bb9b3718a70a66ac91c22cf96}\label{classlight__chats_1_1graph_1_1Graph_a27cddf5bb9b3718a70a66ac91c22cf96}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!filter\+\_\+actions@{filter\+\_\+actions}}
\index{filter\+\_\+actions@{filter\+\_\+actions}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{filter\+\_\+actions()}{filter\_actions()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+filter\+\_\+actions (\begin{DoxyParamCaption}\item[{}]{inst }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 4320 of file graph.\+py.


\begin{DoxyCode}
4320     \textcolor{keyword}{def }filter\_actions(inst):
4321         ret\_actions = []
4322         inst, symb\_points = Graph.parse\_static(inst)
4323         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(symb\_points) - 1):
4324             j, k = symb\_points[i], symb\_points[i + 1]
4325             \textcolor{keywordflow}{if} inst[j].lower() \textcolor{keywordflow}{in} GRAPH\_FUNCTIONS.keys():
4326                 ret\_actions.append(\textcolor{stringliteral}{' '}.join(inst[j:k]))
4327         \textcolor{keywordflow}{return} \textcolor{stringliteral}{' '}.join(ret\_actions), ret\_actions
4328 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_aa61c4fbc35d423277f0755cd8a16a43f}\label{classlight__chats_1_1graph_1_1Graph_aa61c4fbc35d423277f0755cd8a16a43f}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!freeze@{freeze}}
\index{freeze@{freeze}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{freeze()}{freeze()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+freeze (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{freeze = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 2934 of file graph.\+py.


\begin{DoxyCode}
2934     \textcolor{keyword}{def }freeze(self, freeze=None):
2935         \textcolor{keywordflow}{if} freeze \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
2936             self.\_node\_freeze = freeze
2937         \textcolor{keywordflow}{return} self.\_node\_freeze
2938 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ac6f61220197d0eb8314fb98f6dd6f135}\label{classlight__chats_1_1graph_1_1Graph_ac6f61220197d0eb8314fb98f6dd6f135}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+action\+\_\+history@{get\+\_\+action\+\_\+history}}
\index{get\+\_\+action\+\_\+history@{get\+\_\+action\+\_\+history}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+action\+\_\+history()}{get\_action\_history()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+action\+\_\+history (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+id }\end{DoxyParamCaption})}



Definition at line 3572 of file graph.\+py.


\begin{DoxyCode}
3572     \textcolor{keyword}{def }get\_action\_history(self, agent\_id):
3573         observations = self.\_node\_to\_observations[agent\_id]
3574         self.\_node\_to\_observations[agent\_id] = []
3575         \textcolor{keywordflow}{return} observations
3576 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a04cea64dfded92bfd69055e184aa390d}\label{classlight__chats_1_1graph_1_1Graph_a04cea64dfded92bfd69055e184aa390d}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+actionable\+\_\+ids@{get\+\_\+actionable\+\_\+ids}}
\index{get\+\_\+actionable\+\_\+ids@{get\+\_\+actionable\+\_\+ids}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+actionable\+\_\+ids()}{get\_actionable\_ids()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+actionable\+\_\+ids (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{actor\+\_\+id }\end{DoxyParamCaption})}



Definition at line 3491 of file graph.\+py.


\begin{DoxyCode}
3491     \textcolor{keyword}{def }get\_actionable\_ids(self, actor\_id):
3492         o = self.get\_local\_ids(actor\_id)
3493         new\_o = set(o)
3494         \textcolor{keywordflow}{for} obj \textcolor{keywordflow}{in} o:
3495             \textcolor{keywordflow}{if} self.get\_prop(obj, \textcolor{stringliteral}{'container'}) \textcolor{keywordflow}{or} self.get\_prop(obj, \textcolor{stringliteral}{'agent'}):
3496                 new\_o = new\_o.union(self.node\_contains(obj))
3497         \textcolor{keywordflow}{return} new\_o
3498 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a4d86c4e411c724a8e169060335314d90}\label{classlight__chats_1_1graph_1_1Graph_a4d86c4e411c724a8e169060335314d90}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+all\+\_\+by\+\_\+prop@{get\+\_\+all\+\_\+by\+\_\+prop}}
\index{get\+\_\+all\+\_\+by\+\_\+prop@{get\+\_\+all\+\_\+by\+\_\+prop}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+all\+\_\+by\+\_\+prop()}{get\_all\_by\_prop()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+all\+\_\+by\+\_\+prop (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{prop }\end{DoxyParamCaption})}



Definition at line 3480 of file graph.\+py.


\begin{DoxyCode}
3480     \textcolor{keyword}{def }get\_all\_by\_prop(self, prop):
3481         objects = self.all\_node\_ids()
3482         \textcolor{keywordflow}{return} [id \textcolor{keywordflow}{for} id \textcolor{keywordflow}{in} objects \textcolor{keywordflow}{if} self.get\_prop(id, prop)]
3483 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a33e205ecb0e7d4d2626162250ef585f1}\label{classlight__chats_1_1graph_1_1Graph_a33e205ecb0e7d4d2626162250ef585f1}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+classed\+\_\+prop@{get\+\_\+classed\+\_\+prop}}
\index{get\+\_\+classed\+\_\+prop@{get\+\_\+classed\+\_\+prop}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+classed\+\_\+prop()}{get\_classed\_prop()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+classed\+\_\+prop (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{prop,  }\item[{}]{viewer,  }\item[{}]{default = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 3333 of file graph.\+py.


\begin{DoxyCode}
3333     \textcolor{keyword}{def }get\_classed\_prop(self, id, prop, viewer, default=None):
3334         prop\_d = self.get\_prop(id, prop)
3335         val = self.extract\_classed\_from\_dict(prop\_d, viewer, default)
3336         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(val) \textcolor{keywordflow}{is} dict \textcolor{keywordflow}{and} \textcolor{stringliteral}{'iter'} \textcolor{keywordflow}{in} val:
3337             i = val[\textcolor{stringliteral}{'iter'}]
3338             val[\textcolor{stringliteral}{'iter'}] = (i + 1) % len(val[\textcolor{stringliteral}{'data'}])
3339             \textcolor{keywordflow}{return} val[\textcolor{stringliteral}{'data'}][i]
3340         \textcolor{keywordflow}{return} val
3341 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_add43b11ac4acd2b8db044599c492564a}\label{classlight__chats_1_1graph_1_1Graph_add43b11ac4acd2b8db044599c492564a}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+followers@{get\+\_\+followers}}
\index{get\+\_\+followers@{get\+\_\+followers}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+followers()}{get\_followers()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+followers (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the nodes following the given agent.
\end{DoxyVerb}
 

Definition at line 3231 of file graph.\+py.


\begin{DoxyCode}
3231     \textcolor{keyword}{def }get\_followers(self, agent\_id):
3232         \textcolor{stringliteral}{"""}
3233 \textcolor{stringliteral}{        Get the nodes following the given agent.}
3234 \textcolor{stringliteral}{        """}
3235         \textcolor{keywordflow}{if} agent\_id \textcolor{keywordflow}{in} self.\_node\_followed\_by:
3236             \textcolor{keywordflow}{return} self.\_node\_followed\_by[agent\_id]
3237         \textcolor{keywordflow}{return} []
3238 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a1f4c0ccc957a89dcec003a73553914b7}\label{classlight__chats_1_1graph_1_1Graph_a1f4c0ccc957a89dcec003a73553914b7}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+following@{get\+\_\+following}}
\index{get\+\_\+following@{get\+\_\+following}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+following()}{get\_following()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+following (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}get the node that the given agent is following, if any.
\end{DoxyVerb}
 

Definition at line 3239 of file graph.\+py.


\begin{DoxyCode}
3239     \textcolor{keyword}{def }get\_following(self, agent\_id):
3240         \textcolor{stringliteral}{"""}
3241 \textcolor{stringliteral}{        get the node that the given agent is following, if any.}
3242 \textcolor{stringliteral}{        """}
3243         \textcolor{keywordflow}{if} agent\_id \textcolor{keywordflow}{in} self.\_node\_follows:
3244             \textcolor{keywordflow}{return} self.\_node\_follows[agent\_id]
3245         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
3246 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a8f2b0882918768e199aee89cf08bde41}\label{classlight__chats_1_1graph_1_1Graph_a8f2b0882918768e199aee89cf08bde41}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+inventory\+\_\+text\+\_\+for@{get\+\_\+inventory\+\_\+text\+\_\+for}}
\index{get\+\_\+inventory\+\_\+text\+\_\+for@{get\+\_\+inventory\+\_\+text\+\_\+for}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+inventory\+\_\+text\+\_\+for()}{get\_inventory\_text\_for()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+inventory\+\_\+text\+\_\+for (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{give\+\_\+empty = {\ttfamily True} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get a description of what id is carrying or equipped with.
\end{DoxyVerb}
 

Definition at line 3517 of file graph.\+py.


\begin{DoxyCode}
3517     \textcolor{keyword}{def }get\_inventory\_text\_for(self, id, give\_empty=True):
3518         \textcolor{stringliteral}{"""}
3519 \textcolor{stringliteral}{        Get a description of what id is carrying or equipped with.}
3520 \textcolor{stringliteral}{        """}
3521         s = \textcolor{stringliteral}{''}
3522         carry\_ids = []
3523         wear\_ids = []
3524         wield\_ids = []
3525         \textcolor{keywordflow}{for} o \textcolor{keywordflow}{in} self.node\_contains(id):
3526             \textcolor{keywordflow}{if} self.get\_prop(o, \textcolor{stringliteral}{'equipped'}):
3527                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'wearable'} \textcolor{keywordflow}{in} self.get\_prop(o, \textcolor{stringliteral}{'classes'}):
3528                     wear\_ids.append(o)
3529                 \textcolor{keywordflow}{elif} \textcolor{stringliteral}{'weapon'} \textcolor{keywordflow}{in} self.get\_prop(o, \textcolor{stringliteral}{'classes'}):
3530                     wield\_ids.append(o)
3531             \textcolor{keywordflow}{else}:
3532                 carry\_ids.append(o)
3533         \textcolor{keywordflow}{if} len(carry\_ids) == 0:
3534             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} give\_empty:
3535                 \textcolor{keywordflow}{return} \textcolor{stringliteral}{''}
3536             s += \textcolor{stringliteral}{'carrying nothing'}
3537         \textcolor{keywordflow}{else}:
3538             s += \textcolor{stringliteral}{'carrying '} + self.display\_node\_list(carry\_ids)
3539         \textcolor{keywordflow}{if} len(wear\_ids) > 0:
3540             s += \textcolor{stringliteral}{',\(\backslash\)n'}
3541             \textcolor{keywordflow}{if} len(wield\_ids) == 0:
3542                 s += \textcolor{stringliteral}{'and '}
3543             s += \textcolor{stringliteral}{'wearing '} + self.display\_node\_list(wear\_ids)
3544         \textcolor{keywordflow}{if} len(wield\_ids) > 0:
3545             s += \textcolor{stringliteral}{',\(\backslash\)nand wielding '} + self.display\_node\_list(wield\_ids)
3546         \textcolor{keywordflow}{return} s + \textcolor{stringliteral}{'.'}
3547 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a4fa84ee088a8086336cf51a1c41a0477}\label{classlight__chats_1_1graph_1_1Graph_a4fa84ee088a8086336cf51a1c41a0477}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+local\+\_\+ids@{get\+\_\+local\+\_\+ids}}
\index{get\+\_\+local\+\_\+ids@{get\+\_\+local\+\_\+ids}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+local\+\_\+ids()}{get\_local\_ids()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+local\+\_\+ids (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{actor\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return all accessible ids for an actor given the current area.
\end{DoxyVerb}
 

Definition at line 3499 of file graph.\+py.


\begin{DoxyCode}
3499     \textcolor{keyword}{def }get\_local\_ids(self, actor\_id):
3500         \textcolor{stringliteral}{"""}
3501 \textcolor{stringliteral}{        Return all accessible ids for an actor given the current area.}
3502 \textcolor{stringliteral}{        """}
3503         loc = self.location(actor\_id)
3504         o1 = self.node\_contains(actor\_id)
3505         o2 = self.node\_contains(loc)
3506         o3 = self.node\_path\_to(loc)
3507         o4 = [loc]
3508         local\_ids = o1.union(o2).union(o3).union(o4)
3509         check\_local\_ids = list(local\_ids)
3510         \textcolor{keywordflow}{for} pos\_id \textcolor{keywordflow}{in} check\_local\_ids:
3511             \textcolor{keywordflow}{if} self.get\_prop(pos\_id, \textcolor{stringliteral}{'examined'}):
3512                 local\_ids = local\_ids.union(self.node\_contains(pos\_id))
3513         \textcolor{keywordflow}{return} local\_ids
3514 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ae8a732327aed100ff96fb2349246738c}\label{classlight__chats_1_1graph_1_1Graph_ae8a732327aed100ff96fb2349246738c}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+nondescribed\+\_\+room\+\_\+agents@{get\+\_\+nondescribed\+\_\+room\+\_\+agents}}
\index{get\+\_\+nondescribed\+\_\+room\+\_\+agents@{get\+\_\+nondescribed\+\_\+room\+\_\+agents}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+nondescribed\+\_\+room\+\_\+agents()}{get\_nondescribed\_room\_agents()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+nondescribed\+\_\+room\+\_\+agents (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{room }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a list of agents in a room and their current descriptions if those agents
aren't described in the room text.
\end{DoxyVerb}
 

Definition at line 4136 of file graph.\+py.


\begin{DoxyCode}
4136     \textcolor{keyword}{def }get\_nondescribed\_room\_agents(self, room):
4137         \textcolor{stringliteral}{"""}
4138 \textcolor{stringliteral}{        Return a list of agents in a room and their current descriptions if those agents}
4139 \textcolor{stringliteral}{        aren't described in the room text.}
4140 \textcolor{stringliteral}{        """}
4141         agents = self.node\_contains(room)
4142         agents = [a \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} agents \textcolor{keywordflow}{if} self.get\_prop(a, \textcolor{stringliteral}{'agent'})]
4143         agents = [a \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} agents \textcolor{keywordflow}{if} \textcolor{stringliteral}{'described'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.get\_prop(a, \textcolor{stringliteral}{'classes'})]
4144         agent\_descs = [self.node\_to\_desc(a) \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} agents]
4145         \textcolor{keywordflow}{return} agents, agent\_descs
4146 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a3830f1a541b3a892a6e37c314b5b5205}\label{classlight__chats_1_1graph_1_1Graph_a3830f1a541b3a892a6e37c314b5b5205}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+nondescribed\+\_\+room\+\_\+objects@{get\+\_\+nondescribed\+\_\+room\+\_\+objects}}
\index{get\+\_\+nondescribed\+\_\+room\+\_\+objects@{get\+\_\+nondescribed\+\_\+room\+\_\+objects}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+nondescribed\+\_\+room\+\_\+objects()}{get\_nondescribed\_room\_objects()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+nondescribed\+\_\+room\+\_\+objects (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{room\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a list of objects in a room and their current descriptions.
\end{DoxyVerb}
 

Definition at line 4117 of file graph.\+py.


\begin{DoxyCode}
4117     \textcolor{keyword}{def }get\_nondescribed\_room\_objects(self, room\_id):
4118         \textcolor{stringliteral}{"""}
4119 \textcolor{stringliteral}{        Return a list of objects in a room and their current descriptions.}
4120 \textcolor{stringliteral}{        """}
4121         objects = self.node\_contains(room\_id)
4122         objects = [o \textcolor{keywordflow}{for} o \textcolor{keywordflow}{in} objects \textcolor{keywordflow}{if} self.get\_prop(o, \textcolor{stringliteral}{'object'})]
4123         objects = [o \textcolor{keywordflow}{for} o \textcolor{keywordflow}{in} objects \textcolor{keywordflow}{if} \textcolor{stringliteral}{'described'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.get\_prop(o, \textcolor{stringliteral}{'classes'})]
4124         object\_descs = [self.node\_to\_desc(o) \textcolor{keywordflow}{for} o \textcolor{keywordflow}{in} objects]
4125         \textcolor{keywordflow}{return} objects, object\_descs
4126 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ad965678de8b784a4c1506a8814f39767}\label{classlight__chats_1_1graph_1_1Graph_ad965678de8b784a4c1506a8814f39767}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+obj@{get\+\_\+obj}}
\index{get\+\_\+obj@{get\+\_\+obj}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+obj()}{get\_obj()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+obj (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the state of an object from the graph.
\end{DoxyVerb}
 

Definition at line 2999 of file graph.\+py.


\begin{DoxyCode}
2999     \textcolor{keyword}{def }get\_obj(self, id):
3000         \textcolor{stringliteral}{"""}
3001 \textcolor{stringliteral}{        Get the state of an object from the graph.}
3002 \textcolor{stringliteral}{        """}
3003         state = \{\}
3004         state[\textcolor{stringliteral}{'id'}] = id
3005         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_contains:
3006             state[\textcolor{stringliteral}{'node\_contains'}] = self.\_node\_contains[id]
3007             state[\textcolor{stringliteral}{'contained\_nodes'}] = []
3008             \textcolor{keywordflow}{for} obj\_id \textcolor{keywordflow}{in} self.\_node\_contains[id]:
3009                 state[\textcolor{stringliteral}{'contained\_nodes'}].append(self.get\_obj(obj\_id))
3010         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_prop:
3011             state[\textcolor{stringliteral}{'node\_to\_prop'}] = self.\_node\_to\_prop[id]
3012         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_contained\_in:
3013             state[\textcolor{stringliteral}{'node\_contained\_in'}] = self.\_node\_contained\_in[id]
3014         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_desc:
3015             state[\textcolor{stringliteral}{'node\_to\_desc'}] = self.\_node\_to\_desc[id]
3016         \textcolor{keywordflow}{return} state
3017 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_adf4ddcd30a97e5d02bc23f5c0a09c8bb}\label{classlight__chats_1_1graph_1_1Graph_adf4ddcd30a97e5d02bc23f5c0a09c8bb}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+path\+\_\+ex\+\_\+desc@{get\+\_\+path\+\_\+ex\+\_\+desc}}
\index{get\+\_\+path\+\_\+ex\+\_\+desc@{get\+\_\+path\+\_\+ex\+\_\+desc}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+path\+\_\+ex\+\_\+desc()}{get\_path\_ex\_desc()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+path\+\_\+ex\+\_\+desc (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2,  }\item[{}]{looker\+\_\+id = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a path description.

If both ids are the same return the room description instead.
\end{DoxyVerb}
 

Definition at line 3610 of file graph.\+py.


\begin{DoxyCode}
3610     \textcolor{keyword}{def }get\_path\_ex\_desc(self, id1, id2, looker\_id=None):
3611         \textcolor{stringliteral}{"""}
3612 \textcolor{stringliteral}{        Return a path description.}
3613 \textcolor{stringliteral}{}
3614 \textcolor{stringliteral}{        If both ids are the same return the room description instead.}
3615 \textcolor{stringliteral}{        """}
3616         \textcolor{keywordflow}{if} id1 == id2:
3617             \textcolor{keywordflow}{if} looker\_id \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
3618                 desc = self.get\_classed\_prop(id1, \textcolor{stringliteral}{'desc'}, looker\_id)
3619                 extra\_desc = self.get\_classed\_prop(id1, \textcolor{stringliteral}{'extra\_desc'}, looker\_id)
3620                 \textcolor{keywordflow}{return} extra\_desc \textcolor{keywordflow}{if} extra\_desc \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} desc
3621             desc = self.get\_prop(id1, \textcolor{stringliteral}{'desc'})
3622             \textcolor{keywordflow}{return} self.get\_prop(id1, \textcolor{stringliteral}{'extra\_desc'}, desc)
3623         desc\_set = self.\_node\_to\_edges[id1][(\textcolor{stringliteral}{'path\_to'}, id2)][\textcolor{stringliteral}{'examine\_desc'}]
3624         val = self.extract\_classed\_from\_dict(desc\_set, looker\_id)
3625         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(val) \textcolor{keywordflow}{is} dict \textcolor{keywordflow}{and} \textcolor{stringliteral}{'iter'} \textcolor{keywordflow}{in} val:
3626             i = val[\textcolor{stringliteral}{'iter'}]
3627             val[\textcolor{stringliteral}{'iter'}] = (i + 1) % len(val[\textcolor{stringliteral}{'data'}])
3628             \textcolor{keywordflow}{return} val[\textcolor{stringliteral}{'data'}][i]
3629         \textcolor{keywordflow}{return} val
3630 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_af857c9968c7787d742ac731d1cd7cb2c}\label{classlight__chats_1_1graph_1_1Graph_af857c9968c7787d742ac731d1cd7cb2c}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+path\+\_\+locked\+\_\+with@{get\+\_\+path\+\_\+locked\+\_\+with}}
\index{get\+\_\+path\+\_\+locked\+\_\+with@{get\+\_\+path\+\_\+locked\+\_\+with}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+path\+\_\+locked\+\_\+with()}{get\_path\_locked\_with()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+path\+\_\+locked\+\_\+with (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2 }\end{DoxyParamCaption})}



Definition at line 3293 of file graph.\+py.


\begin{DoxyCode}
3293     \textcolor{keyword}{def }get\_path\_locked\_with(self, id1, id2):
3294         \textcolor{keywordflow}{if} id1 == id2:
3295             \textcolor{comment}{# TODO get the locked\_with of a room when the path is to itself}
3296             \textcolor{comment}{# as this function shouldn't be called like this}
3297             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
3298         \textcolor{keywordflow}{return} self.\_node\_to\_edges[id1][(\textcolor{stringliteral}{'path\_to'}, id2)][\textcolor{stringliteral}{'locked\_with'}]
3299 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a7f86299224bed2c821ed4ffa853cd669}\label{classlight__chats_1_1graph_1_1Graph_a7f86299224bed2c821ed4ffa853cd669}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+player@{get\+\_\+player}}
\index{get\+\_\+player@{get\+\_\+player}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+player()}{get\_player()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+player (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the state of a player (along with everything they carry) from the graph.
\end{DoxyVerb}
 

Definition at line 2977 of file graph.\+py.


\begin{DoxyCode}
2977     \textcolor{keyword}{def }get\_player(self, id):
2978         \textcolor{stringliteral}{"""}
2979 \textcolor{stringliteral}{        Get the state of a player (along with everything they carry) from the graph.}
2980 \textcolor{stringliteral}{        """}
2981         state = \{\}
2982         state[\textcolor{stringliteral}{'id'}] = id
2983         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_text\_buffer:
2984             state[\textcolor{stringliteral}{'node\_to\_text\_buffer'}] = self.\_node\_to\_text\_buffer[id]
2985         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_contains:
2986             state[\textcolor{stringliteral}{'node\_contains'}] = self.\_node\_contains[id]
2987             state[\textcolor{stringliteral}{'contained\_nodes'}] = []
2988             \textcolor{keywordflow}{for} obj\_id \textcolor{keywordflow}{in} self.\_node\_contains[id]:
2989                 props = self.\_node\_to\_prop[obj\_id]
2990                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'persistent'} \textcolor{keywordflow}{in} props \textcolor{keywordflow}{and} props[\textcolor{stringliteral}{'persistent'}] == \textcolor{stringliteral}{'level'}:
2991                     \textcolor{keywordflow}{continue}  \textcolor{comment}{# Leave level-based items behind}
2992                 state[\textcolor{stringliteral}{'contained\_nodes'}].append(self.get\_obj(obj\_id))
2993         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_prop:
2994             state[\textcolor{stringliteral}{'node\_to\_prop'}] = self.\_node\_to\_prop[id]
2995         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_desc:
2996             state[\textcolor{stringliteral}{'node\_to\_desc'}] = self.\_node\_to\_desc[id]
2997         \textcolor{keywordflow}{return} state
2998 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a40e6753f63c9c8d31dd57a5c38aaac3c}\label{classlight__chats_1_1graph_1_1Graph_a40e6753f63c9c8d31dd57a5c38aaac3c}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+possible\+\_\+actions@{get\+\_\+possible\+\_\+actions}}
\index{get\+\_\+possible\+\_\+actions@{get\+\_\+possible\+\_\+actions}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+possible\+\_\+actions()}{get\_possible\_actions()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+possible\+\_\+actions (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{my\+\_\+agent\+\_\+id = {\ttfamily \textquotesingle{}dragon\textquotesingle{}},  }\item[{}]{use\+\_\+actions = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get all actions that are possible from a given agent.
\end{DoxyVerb}
 

Definition at line 4264 of file graph.\+py.


\begin{DoxyCode}
4264     \textcolor{keyword}{def }get\_possible\_actions(self, my\_agent\_id='dragon', use\_actions=None):
4265         \textcolor{stringliteral}{"""}
4266 \textcolor{stringliteral}{        Get all actions that are possible from a given agent.}
4267 \textcolor{stringliteral}{        """}
4268         \textcolor{comment}{# TODO rather than iterating over objects and checking validity for}
4269         \textcolor{comment}{# all functions, iterate over functions and query valid objects}
4270         \textcolor{keywordflow}{if} self.get\_prop(my\_agent\_id, \textcolor{stringliteral}{'dead'}):
4271             \textcolor{keywordflow}{return} []
4272         o = self.get\_actionable\_ids(my\_agent\_id)
4273         final\_o = o
4274         \textcolor{keywordflow}{for} item \textcolor{keywordflow}{in} o:
4275             \textcolor{keywordflow}{if} self.get\_prop(item, \textcolor{stringliteral}{'agent'}) \textcolor{keywordflow}{or} self.get\_prop(item, \textcolor{stringliteral}{'container'}):
4276                 final\_o = final\_o.union(self.node\_contains(item))
4277         actions = []
4278         use\_functions = CANNONICAL\_GRAPH\_FUNCTIONS.items()
4279         \textcolor{keywordflow}{if} use\_actions \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
4280             use\_functions = [
4281                 (fn, func) \textcolor{keywordflow}{for} (fn, func) \textcolor{keywordflow}{in} use\_functions \textcolor{keywordflow}{if} fn \textcolor{keywordflow}{in} use\_actions
4282             ]
4283         \textcolor{keywordflow}{for} func\_name, func \textcolor{keywordflow}{in} use\_functions:
4284             \textcolor{keywordflow}{if} func\_name \textcolor{keywordflow}{in} FUNC\_IGNORE\_LIST:
4285                 \textcolor{keywordflow}{continue}  \textcolor{comment}{# Ignore functions we don't want to expose directly}
4286             args = [my\_agent\_id]
4287             \textcolor{keywordflow}{if} func.valid\_args(self, args):
4288                 canon = func.get\_canonical\_form(self, args)
4289                 actions.append(canon)
4290             \textcolor{keywordflow}{for} id1 \textcolor{keywordflow}{in} final\_o:
4291                 \textcolor{keywordflow}{if} id1 \textcolor{keywordflow}{in} args:
4292                     \textcolor{keywordflow}{continue}
4293                 args = [my\_agent\_id, id1]
4294                 \textcolor{keywordflow}{if} func.valid\_args(self, args):
4295                     canon = func.get\_canonical\_form(self, args)
4296                     actions.append(canon)
4297                 \textcolor{keywordflow}{for} id2 \textcolor{keywordflow}{in} final\_o:
4298                     \textcolor{keywordflow}{if} id2 \textcolor{keywordflow}{in} args:
4299                         \textcolor{keywordflow}{continue}
4300                     args = [my\_agent\_id, id1, id2]
4301                     \textcolor{keywordflow}{if} func.valid\_args(self, args):
4302                         canon = func.get\_canonical\_form(self, args)
4303                         actions.append(canon)
4304         \textcolor{keywordflow}{return} list(set(actions))
4305 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a30483d3bbb88924bb7b98fb72b2e23fe}\label{classlight__chats_1_1graph_1_1Graph_a30483d3bbb88924bb7b98fb72b2e23fe}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+prop@{get\+\_\+prop}}
\index{get\+\_\+prop@{get\+\_\+prop}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+prop()}{get\_prop()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+prop (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{prop,  }\item[{}]{default = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the given prop, return None if it doesn't exist.
\end{DoxyVerb}
 

Definition at line 3308 of file graph.\+py.


\begin{DoxyCode}
3308     \textcolor{keyword}{def }get\_prop(self, id, prop, default=None):
3309         \textcolor{stringliteral}{"""}
3310 \textcolor{stringliteral}{        Get the given prop, return None if it doesn't exist.}
3311 \textcolor{stringliteral}{        """}
3312         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_prop:
3313             \textcolor{keywordflow}{if} prop \textcolor{keywordflow}{in} self.\_node\_to\_prop[id]:
3314                 \textcolor{keywordflow}{return} self.\_node\_to\_prop[id][prop]
3315         \textcolor{keywordflow}{return} default
3316 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ad12090e48ff11063ece35c115b91d2aa}\label{classlight__chats_1_1graph_1_1Graph_ad12090e48ff11063ece35c115b91d2aa}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+props\+\_\+from\+\_\+either@{get\+\_\+props\+\_\+from\+\_\+either}}
\index{get\+\_\+props\+\_\+from\+\_\+either@{get\+\_\+props\+\_\+from\+\_\+either}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+props\+\_\+from\+\_\+either()}{get\_props\_from\_either()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+props\+\_\+from\+\_\+either (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2,  }\item[{}]{prop }\end{DoxyParamCaption})}

\begin{DoxyVerb}Try to get ones own prop, fallback to other's prop.

Do this for both provided ids symmetrically
\end{DoxyVerb}
 

Definition at line 3342 of file graph.\+py.


\begin{DoxyCode}
3342     \textcolor{keyword}{def }get\_props\_from\_either(self, id1, id2, prop):
3343         \textcolor{stringliteral}{"""}
3344 \textcolor{stringliteral}{        Try to get ones own prop, fallback to other's prop.}
3345 \textcolor{stringliteral}{}
3346 \textcolor{stringliteral}{        Do this for both provided ids symmetrically}
3347 \textcolor{stringliteral}{        """}
3348         resp1 = self.get\_prop(id1, prop, self.get\_prop(id2, prop))
3349         resp2 = self.get\_prop(id2, prop, self.get\_prop(id1, prop))
3350         \textcolor{keywordflow}{return} resp1, resp2
3351 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a7b3fe43bf1e2b53fe7a2e22a24d77ef2}\label{classlight__chats_1_1graph_1_1Graph_a7b3fe43bf1e2b53fe7a2e22a24d77ef2}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+reverse\+\_\+action@{get\+\_\+reverse\+\_\+action}}
\index{get\+\_\+reverse\+\_\+action@{get\+\_\+reverse\+\_\+action}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+reverse\+\_\+action()}{get\_reverse\_action()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+reverse\+\_\+action (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agentid,  }\item[{}]{action,  }\item[{}]{old\+\_\+g }\end{DoxyParamCaption})}

\begin{DoxyVerb}Attempts to get the reverse action for the given action.

Makes no guarantees, could fail miserably
\end{DoxyVerb}
 

Definition at line 4344 of file graph.\+py.


\begin{DoxyCode}
4344     \textcolor{keyword}{def }get\_reverse\_action(self, agentid, action, old\_g):
4345         \textcolor{stringliteral}{"""}
4346 \textcolor{stringliteral}{        Attempts to get the reverse action for the given action.}
4347 \textcolor{stringliteral}{}
4348 \textcolor{stringliteral}{        Makes no guarantees, could fail miserably}
4349 \textcolor{stringliteral}{        """}
4350         inst, symb\_points = self.parse(action)
4351         j, k = symb\_points[0], symb\_points[1]
4352         \textcolor{keywordflow}{if} inst[j].lower() \textcolor{keywordflow}{in} GRAPH\_FUNCTIONS.keys():
4353             func\_wrap = GRAPH\_FUNCTIONS[inst[j].lower()]
4354             valid, args, \_canon\_args = func\_wrap.parse\_text\_to\_args(
4355                 old\_g, agentid, inst[j + 1 : k]
4356             )
4357             rev\_func\_name, new\_args = func\_wrap.get\_reverse(self, args)
4358             \textcolor{keywordflow}{if} rev\_func\_name \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{or} rev\_func\_name \textcolor{keywordflow}{is} \textcolor{keyword}{False}:
4359                 \textcolor{keywordflow}{return} rev\_func\_name, \textcolor{stringliteral}{''}
4360             rev\_func\_wrap = GRAPH\_FUNCTIONS[rev\_func\_name]
4361             rev\_action = rev\_func\_wrap.get\_canonical\_form(self, new\_args)
4362             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, rev\_action
4363         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}, \textcolor{stringliteral}{''}
4364 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_abe32388ae807a26036573890d1293e2a}\label{classlight__chats_1_1graph_1_1Graph_abe32388ae807a26036573890d1293e2a}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+room\+\_\+agent\+\_\+text@{get\+\_\+room\+\_\+agent\+\_\+text}}
\index{get\+\_\+room\+\_\+agent\+\_\+text@{get\+\_\+room\+\_\+agent\+\_\+text}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+room\+\_\+agent\+\_\+text()}{get\_room\_agent\_text()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+room\+\_\+agent\+\_\+text (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+descs,  }\item[{}]{past = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get text for all the agents in a room.
\end{DoxyVerb}
 

Definition at line 4084 of file graph.\+py.


\begin{DoxyCode}
4084     \textcolor{keyword}{def }get\_room\_agent\_text(self, agent\_descs, past=False):
4085         \textcolor{stringliteral}{"""}
4086 \textcolor{stringliteral}{        Get text for all the agents in a room.}
4087 \textcolor{stringliteral}{        """}
4088         loc = \textcolor{stringliteral}{'there'} \textcolor{keywordflow}{if} past \textcolor{keywordflow}{else} \textcolor{stringliteral}{'here'}
4089         you\_are = \textcolor{stringliteral}{'You were '} \textcolor{keywordflow}{if} past \textcolor{keywordflow}{else} \textcolor{stringliteral}{'You are '}
4090         is\_tensed = \textcolor{stringliteral}{' was '} \textcolor{keywordflow}{if} past \textcolor{keywordflow}{else} \textcolor{stringliteral}{' is '}
4091         are\_tensed = \textcolor{stringliteral}{' were '} \textcolor{keywordflow}{if} past \textcolor{keywordflow}{else} \textcolor{stringliteral}{' are '}
4092         count = len(agent\_descs)
4093         \textcolor{keywordflow}{if} count == 0:
4094             \textcolor{keywordflow}{return} \textcolor{stringliteral}{''}
4095         \textcolor{keywordflow}{elif} count == 1:
4096             \textcolor{keywordflow}{if} agent\_descs[0] == \textcolor{stringliteral}{'you'}:
4097                 \textcolor{keywordflow}{return} you\_are + loc + \textcolor{stringliteral}{'.\(\backslash\)n'}
4098             \textcolor{keywordflow}{else}:
4099                 \textcolor{keywordflow}{return} agent\_descs[0].capitalize() + is\_tensed + loc + \textcolor{stringliteral}{'.\(\backslash\)n'}
4100         \textcolor{keywordflow}{elif} count == 2:
4101             all\_descs = \textcolor{stringliteral}{' and '}.join(agent\_descs).capitalize()
4102             \textcolor{keywordflow}{return} all\_descs + are\_tensed + loc + \textcolor{stringliteral}{'.\(\backslash\)n'}
4103         \textcolor{keywordflow}{else}:
4104             before\_and = \textcolor{stringliteral}{', '}.join(agent\_descs[:-1]).capitalize()
4105             all\_descs = before\_and + \textcolor{stringliteral}{', and '} + agent\_descs[-1]
4106             \textcolor{keywordflow}{return} all\_descs + are\_tensed + loc + \textcolor{stringliteral}{'.\(\backslash\)n'}
4107 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a6e638e9bda7cd6e0f6d964d02a22dec6}\label{classlight__chats_1_1graph_1_1Graph_a6e638e9bda7cd6e0f6d964d02a22dec6}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+room\+\_\+agents@{get\+\_\+room\+\_\+agents}}
\index{get\+\_\+room\+\_\+agents@{get\+\_\+room\+\_\+agents}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+room\+\_\+agents()}{get\_room\_agents()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+room\+\_\+agents (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{room }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a list of agents in a room and their current descriptions.
\end{DoxyVerb}
 

Definition at line 4147 of file graph.\+py.


\begin{DoxyCode}
4147     \textcolor{keyword}{def }get\_room\_agents(self, room):
4148         \textcolor{stringliteral}{"""}
4149 \textcolor{stringliteral}{        Return a list of agents in a room and their current descriptions.}
4150 \textcolor{stringliteral}{        """}
4151         agents = self.node\_contains(room)
4152         agents = [a \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} agents \textcolor{keywordflow}{if} self.get\_prop(a, \textcolor{stringliteral}{'agent'})]
4153         agent\_descs = [self.node\_to\_desc(a) \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} agents]
4154         \textcolor{keywordflow}{return} agents, agent\_descs
4155 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a2588a6f893b108eb25c9125db8036c0a}\label{classlight__chats_1_1graph_1_1Graph_a2588a6f893b108eb25c9125db8036c0a}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+room\+\_\+edge\+\_\+text@{get\+\_\+room\+\_\+edge\+\_\+text}}
\index{get\+\_\+room\+\_\+edge\+\_\+text@{get\+\_\+room\+\_\+edge\+\_\+text}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+room\+\_\+edge\+\_\+text()}{get\_room\_edge\_text()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+room\+\_\+edge\+\_\+text (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{room\+\_\+descs,  }\item[{}]{past = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get text for all the edges outside of a room.
\end{DoxyVerb}
 

Definition at line 4020 of file graph.\+py.


\begin{DoxyCode}
4020     \textcolor{keyword}{def }get\_room\_edge\_text(self, room\_descs, past=False):
4021         \textcolor{stringliteral}{"""}
4022 \textcolor{stringliteral}{        Get text for all the edges outside of a room.}
4023 \textcolor{stringliteral}{        """}
4024         \textcolor{keywordflow}{if} len(room\_descs) == 1:
4025             \textcolor{keywordflow}{if} past:
4026                 \textcolor{keywordflow}{return} \textcolor{stringliteral}{'There was '} + room\_descs[0] + \textcolor{stringliteral}{'.\(\backslash\)n'}
4027             \textcolor{keywordflow}{else}:
4028                 \textcolor{keywordflow}{return} \textcolor{stringliteral}{'There\(\backslash\)'s '} + room\_descs[0] + \textcolor{stringliteral}{'.\(\backslash\)n'}
4029         default\_paths = [
4030             path[10:] \textcolor{keywordflow}{for} path \textcolor{keywordflow}{in} room\_descs \textcolor{keywordflow}{if} path.startswith(\textcolor{stringliteral}{'a path to'})
4031         ]
4032         non\_default\_paths = [
4033             path \textcolor{keywordflow}{for} path \textcolor{keywordflow}{in} room\_descs \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} path.startswith(\textcolor{stringliteral}{'a path to'})
4034         ]
4035         \textcolor{keywordflow}{if} len(default\_paths) == 0:
4036             \textcolor{keywordflow}{if} past:
4037                 s = \textcolor{stringliteral}{'There was '}
4038             \textcolor{keywordflow}{else}:
4039                 s = \textcolor{stringliteral}{'There\(\backslash\)'s '}
4040             s += self.display\_desc\_list(non\_default\_paths)
4041             s += \textcolor{stringliteral}{'.\(\backslash\)n'}
4042         \textcolor{keywordflow}{elif} len(non\_default\_paths) == 0:
4043             \textcolor{keywordflow}{if} past:
4044                 s = \textcolor{stringliteral}{'There were paths to '}
4045             \textcolor{keywordflow}{else}:
4046                 s = \textcolor{stringliteral}{'There are paths to '}
4047 
4048             s += self.display\_desc\_list(default\_paths)
4049             s += \textcolor{stringliteral}{'.\(\backslash\)n'}
4050         \textcolor{keywordflow}{else}:
4051             \textcolor{keywordflow}{if} past:
4052                 s = \textcolor{stringliteral}{'There was '}
4053             \textcolor{keywordflow}{else}:
4054                 s = \textcolor{stringliteral}{'There\(\backslash\)'s '}
4055             s += \textcolor{stringliteral}{", "}.join(non\_default\_paths)
4056             \textcolor{keywordflow}{if} len(default\_paths) == 1:
4057                 s += \textcolor{stringliteral}{', and a path to '}
4058             \textcolor{keywordflow}{else}:
4059                 s += \textcolor{stringliteral}{', and paths to '}
4060             s += self.display\_desc\_list(default\_paths)
4061             s += \textcolor{stringliteral}{'.\(\backslash\)n'}
4062         \textcolor{keywordflow}{return} s
4063 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a1d2efb53425d6f495516d656124413c0}\label{classlight__chats_1_1graph_1_1Graph_a1d2efb53425d6f495516d656124413c0}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+room\+\_\+edges@{get\+\_\+room\+\_\+edges}}
\index{get\+\_\+room\+\_\+edges@{get\+\_\+room\+\_\+edges}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+room\+\_\+edges()}{get\_room\_edges()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+room\+\_\+edges (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{room\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a list of edges from a room and their current descriptions.
\end{DoxyVerb}
 

Definition at line 4108 of file graph.\+py.


\begin{DoxyCode}
4108     \textcolor{keyword}{def }get\_room\_edges(self, room\_id):
4109         \textcolor{stringliteral}{"""}
4110 \textcolor{stringliteral}{        Return a list of edges from a room and their current descriptions.}
4111 \textcolor{stringliteral}{        """}
4112         rooms = self.\_node\_to\_edges[room\_id]
4113         rooms = [r[1] \textcolor{keywordflow}{for} r \textcolor{keywordflow}{in} rooms \textcolor{keywordflow}{if} r[0] == \textcolor{stringliteral}{'path\_to'}]
4114         room\_descs = [self.node\_to\_desc(ent, room\_id) \textcolor{keywordflow}{for} ent \textcolor{keywordflow}{in} rooms]
4115         \textcolor{keywordflow}{return} rooms, room\_descs
4116 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a4d24052d36cff3896424e2e3bce2d554}\label{classlight__chats_1_1graph_1_1Graph_a4d24052d36cff3896424e2e3bce2d554}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+room\+\_\+object\+\_\+text@{get\+\_\+room\+\_\+object\+\_\+text}}
\index{get\+\_\+room\+\_\+object\+\_\+text@{get\+\_\+room\+\_\+object\+\_\+text}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+room\+\_\+object\+\_\+text()}{get\_room\_object\_text()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+room\+\_\+object\+\_\+text (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{object\+\_\+descs,  }\item[{}]{ents,  }\item[{}]{past = {\ttfamily False},  }\item[{}]{give\+\_\+empty = {\ttfamily True} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get text for all the objects in a room.
\end{DoxyVerb}
 

Definition at line 4064 of file graph.\+py.


\begin{DoxyCode}
4064     \textcolor{keyword}{def }get\_room\_object\_text(self, object\_descs, ents, past=False, give\_empty=True):
4065         \textcolor{stringliteral}{"""}
4066 \textcolor{stringliteral}{        Get text for all the objects in a room.}
4067 \textcolor{stringliteral}{        """}
4068         s = \textcolor{stringliteral}{''}
4069         tensed\_is = \textcolor{stringliteral}{'was'} \textcolor{keywordflow}{if} past \textcolor{keywordflow}{else} \textcolor{stringliteral}{'is'}
4070         tensed\_are = \textcolor{stringliteral}{'were'} \textcolor{keywordflow}{if} past \textcolor{keywordflow}{else} \textcolor{stringliteral}{'are'}
4071         loc = \textcolor{stringliteral}{'there'} \textcolor{keywordflow}{if} past \textcolor{keywordflow}{else} \textcolor{stringliteral}{'here'}
4072         \textcolor{keywordflow}{if} len(object\_descs) == 0:
4073             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} give\_empty:
4074                 \textcolor{keywordflow}{return} \textcolor{stringliteral}{''}
4075             s += \textcolor{stringliteral}{'It '} + tensed\_is + \textcolor{stringliteral}{' empty.\(\backslash\)n'}
4076         \textcolor{keywordflow}{elif} len(object\_descs) > 20:
4077             s += \textcolor{stringliteral}{'There '} + tensed\_are + \textcolor{stringliteral}{' a lot of things here.\(\backslash\)n'}
4078         \textcolor{keywordflow}{else}:
4079             s += \textcolor{stringliteral}{'There\(\backslash\)'s '}
4080             s += self.display\_desc\_list(object\_descs, ents)
4081             s += \textcolor{stringliteral}{' \{\}.\(\backslash\)n'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(loc)
4082         \textcolor{keywordflow}{return} s
4083 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ad078aab1d28474ac43e8b58ba0fb586b}\label{classlight__chats_1_1graph_1_1Graph_ad078aab1d28474ac43e8b58ba0fb586b}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+room\+\_\+objects@{get\+\_\+room\+\_\+objects}}
\index{get\+\_\+room\+\_\+objects@{get\+\_\+room\+\_\+objects}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+room\+\_\+objects()}{get\_room\_objects()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+room\+\_\+objects (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{room\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a list of objects in a room and their current descriptions.
\end{DoxyVerb}
 

Definition at line 4127 of file graph.\+py.


\begin{DoxyCode}
4127     \textcolor{keyword}{def }get\_room\_objects(self, room\_id):
4128         \textcolor{stringliteral}{"""}
4129 \textcolor{stringliteral}{        Return a list of objects in a room and their current descriptions.}
4130 \textcolor{stringliteral}{        """}
4131         objects = self.node\_contains(room\_id)
4132         objects = [o \textcolor{keywordflow}{for} o \textcolor{keywordflow}{in} objects \textcolor{keywordflow}{if} self.get\_prop(o, \textcolor{stringliteral}{'object'})]
4133         object\_descs = [self.node\_to\_desc(o) \textcolor{keywordflow}{for} o \textcolor{keywordflow}{in} objects]
4134         \textcolor{keywordflow}{return} objects, object\_descs
4135 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a63268fea99420b5cb83436499cd0676b}\label{classlight__chats_1_1graph_1_1Graph_a63268fea99420b5cb83436499cd0676b}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+text@{get\+\_\+text}}
\index{get\+\_\+text@{get\+\_\+text}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+text()}{get\_text()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+text (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent,  }\item[{}]{clear\+\_\+actions = {\ttfamily True} }\end{DoxyParamCaption})}



Definition at line 4156 of file graph.\+py.


\begin{DoxyCode}
4156     \textcolor{keyword}{def }get\_text(self, agent, clear\_actions=True):
4157         txt = \textcolor{stringliteral}{''}
4158         \textcolor{keywordflow}{if} agent \textcolor{keywordflow}{in} self.\_node\_to\_text\_buffer:
4159             txt = self.\_node\_to\_text\_buffer[agent]
4160         self.\_node\_to\_text\_buffer[agent] = \textcolor{stringliteral}{''}  \textcolor{comment}{# clear buffer}
4161         \textcolor{keywordflow}{if} clear\_actions:
4162             self.\_node\_to\_observations[agent] = []  \textcolor{comment}{# clear buffer}
4163         \textcolor{keywordflow}{return} txt
4164 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a89bb38305c3d42c4ce2ae8dcc966ab6e}\label{classlight__chats_1_1graph_1_1Graph_a89bb38305c3d42c4ce2ae8dcc966ab6e}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!get\+\_\+unused\+\_\+player\+\_\+id@{get\+\_\+unused\+\_\+player\+\_\+id}}
\index{get\+\_\+unused\+\_\+player\+\_\+id@{get\+\_\+unused\+\_\+player\+\_\+id}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{get\+\_\+unused\+\_\+player\+\_\+id()}{get\_unused\_player\_id()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+get\+\_\+unused\+\_\+player\+\_\+id (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return one of the unused player ids randomly and mark it as registered.
\end{DoxyVerb}
 

Definition at line 2957 of file graph.\+py.


\begin{DoxyCode}
2957     \textcolor{keyword}{def }get\_unused\_player\_id(self):
2958         \textcolor{stringliteral}{"""}
2959 \textcolor{stringliteral}{        Return one of the unused player ids randomly and mark it as registered.}
2960 \textcolor{stringliteral}{        """}
2961         player\_id = random.choice(self.\_player\_ids)
2962         self.\_player\_ids.remove(player\_id)
2963         self.\_used\_player\_ids.append(player\_id)
2964         \textcolor{keywordflow}{return} player\_id
2965 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_aa8a44c495d154f033ea3ced4d6f2e85d}\label{classlight__chats_1_1graph_1_1Graph_aa8a44c495d154f033ea3ced4d6f2e85d}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!has\+\_\+prop@{has\+\_\+prop}}
\index{has\+\_\+prop@{has\+\_\+prop}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{has\+\_\+prop()}{has\_prop()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+has\+\_\+prop (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{prop }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return whether or not id has the given prop.
\end{DoxyVerb}
 

Definition at line 3359 of file graph.\+py.


\begin{DoxyCode}
3359     \textcolor{keyword}{def }has\_prop(self, id, prop):
3360         \textcolor{stringliteral}{"""}
3361 \textcolor{stringliteral}{        Return whether or not id has the given prop.}
3362 \textcolor{stringliteral}{        """}
3363         \textcolor{keywordflow}{if} self.get\_prop(id, prop) \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
3364             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
3365         \textcolor{keywordflow}{return} \textcolor{keyword}{False}
3366 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a43ff743c3d16850dc7d68d809c88c97d}\label{classlight__chats_1_1graph_1_1Graph_a43ff743c3d16850dc7d68d809c88c97d}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!has\+\_\+remaining\+\_\+player\+\_\+slots@{has\+\_\+remaining\+\_\+player\+\_\+slots}}
\index{has\+\_\+remaining\+\_\+player\+\_\+slots@{has\+\_\+remaining\+\_\+player\+\_\+slots}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{has\+\_\+remaining\+\_\+player\+\_\+slots()}{has\_remaining\_player\_slots()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+has\+\_\+remaining\+\_\+player\+\_\+slots (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Note if the graph has any space for new players to play a role.
\end{DoxyVerb}
 

Definition at line 2951 of file graph.\+py.


\begin{DoxyCode}
2951     \textcolor{keyword}{def }has\_remaining\_player\_slots(self):
2952         \textcolor{stringliteral}{"""}
2953 \textcolor{stringliteral}{        Note if the graph has any space for new players to play a role.}
2954 \textcolor{stringliteral}{        """}
2955         \textcolor{keywordflow}{return} len(self.\_player\_ids) != 0
2956 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a3709592a97b55342b767bedb9db16267}\label{classlight__chats_1_1graph_1_1Graph_a3709592a97b55342b767bedb9db16267}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!health@{health}}
\index{health@{health}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{health()}{health()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+health (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the text description of someone's numeric health.
\end{DoxyVerb}
 

Definition at line 3548 of file graph.\+py.


\begin{DoxyCode}
3548     \textcolor{keyword}{def }health(self, id):
3549         \textcolor{stringliteral}{"""}
3550 \textcolor{stringliteral}{        Return the text description of someone's numeric health.}
3551 \textcolor{stringliteral}{        """}
3552         health = self.get\_prop(id, \textcolor{stringliteral}{'health'})
3553         \textcolor{keywordflow}{if} health \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{or} health \textcolor{keywordflow}{is} \textcolor{keyword}{False}:
3554             health = 1
3555         \textcolor{keywordflow}{if} health > 8:
3556             health = 8
3557         f = [
3558             \textcolor{stringliteral}{'dead'},
3559             \textcolor{stringliteral}{'on the verge of death'},
3560             \textcolor{stringliteral}{'very weak'},
3561             \textcolor{stringliteral}{'weak'},
3562             \textcolor{stringliteral}{'ok'},
3563             \textcolor{stringliteral}{'good'},
3564             \textcolor{stringliteral}{'strong'},
3565             \textcolor{stringliteral}{'very strong'},
3566             \textcolor{stringliteral}{'nigh on invincible'},
3567         ]
3568         \textcolor{keywordflow}{return} f[\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(health)]
3569 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a6a6d39a24244430a899bbc0b752baf25}\label{classlight__chats_1_1graph_1_1Graph_a6a6d39a24244430a899bbc0b752baf25}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!help@{help}}
\index{help@{help}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{help()}{help()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+help (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 4234 of file graph.\+py.


\begin{DoxyCode}
4234     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a0e12682c80997535ca4f7f293b8c6d10}{help}(self):
4235         txt = (
4236             \textcolor{stringliteral}{'----------------------------------\(\backslash\)n'}
4237             \textcolor{stringliteral}{'Commands:\(\backslash\)n'}
4238             \textcolor{stringliteral}{'look (l, for short)\(\backslash\)n'}
4239             \textcolor{stringliteral}{'inventory (i or inv, for short)\(\backslash\)n'}
4240             \textcolor{stringliteral}{'examine <thing>\(\backslash\)n'}
4241             \textcolor{stringliteral}{'status/health\(\backslash\)n'}
4242             \textcolor{stringliteral}{'go <place>\(\backslash\)n'}
4243             \textcolor{stringliteral}{'get/drop <object>\(\backslash\)n'}
4244             \textcolor{stringliteral}{'eat/drink <object>\(\backslash\)n'}
4245             \textcolor{stringliteral}{'wear/remove <object>\(\backslash\)n'}
4246             \textcolor{stringliteral}{'wield/unwield <object>\(\backslash\)n'}
4247             \textcolor{stringliteral}{'lock/unlock <object> with <object>\(\backslash\)n'}
4248             \textcolor{stringliteral}{'follow <agent>\(\backslash\)n'}
4249             \textcolor{stringliteral}{'hit <agent>\(\backslash\)n'}
4250             \textcolor{stringliteral}{'put <object> in <container>\(\backslash\)n'}
4251             \textcolor{stringliteral}{'get <object> from <container>\(\backslash\)n'}
4252             \textcolor{stringliteral}{'give <object> to <agent>\(\backslash\)n'}
4253             \textcolor{stringliteral}{'steal <object> from <agent>\(\backslash\)n'}
4254             \textcolor{stringliteral}{'say "<thing you want to say>"\(\backslash\)n'}
4255             \textcolor{stringliteral}{'tell <agent> "<something>"\(\backslash\)n'}
4256             \textcolor{stringliteral}{'----------------------------------\(\backslash\)n'}
4257         )
4258         \textcolor{keywordflow}{return} txt
4259 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a871d833484089923fa5d1d4bb357ec7a}\label{classlight__chats_1_1graph_1_1Graph_a871d833484089923fa5d1d4bb357ec7a}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!inc\+\_\+prop@{inc\+\_\+prop}}
\index{inc\+\_\+prop@{inc\+\_\+prop}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{inc\+\_\+prop()}{inc\_prop()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+inc\+\_\+prop (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{prop,  }\item[{}]{val = {\ttfamily 1} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Increment a given prop by the given value.
\end{DoxyVerb}
 

Definition at line 3367 of file graph.\+py.


\begin{DoxyCode}
3367     \textcolor{keyword}{def }inc\_prop(self, id, prop, val=1):
3368         \textcolor{stringliteral}{"""}
3369 \textcolor{stringliteral}{        Increment a given prop by the given value.}
3370 \textcolor{stringliteral}{        """}
3371         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_prop:
3372             \textcolor{keywordflow}{if} prop \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.\_node\_to\_prop[id]:
3373                 self.set\_prop(id, prop, 0)
3374             \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(self.\_node\_to\_prop[id][prop]) != int:
3375                 self.set\_prop(id, prop, 0)
3376             self.\_node\_to\_prop[id][prop] += val
3377 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a04cfd7a5cc3c2df0c1bfec920d89d84c}\label{classlight__chats_1_1graph_1_1Graph_a04cfd7a5cc3c2df0c1bfec920d89d84c}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!is\+\_\+path\+\_\+to@{is\+\_\+path\+\_\+to}}
\index{is\+\_\+path\+\_\+to@{is\+\_\+path\+\_\+to}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{is\+\_\+path\+\_\+to()}{is\_path\_to()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+is\+\_\+path\+\_\+to (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2 }\end{DoxyParamCaption})}

\begin{DoxyVerb}determine if there is a path from id1 to id2.
\end{DoxyVerb}
 

Definition at line 3185 of file graph.\+py.


\begin{DoxyCode}
3185     \textcolor{keyword}{def }is\_path\_to(self, id1, id2):
3186         \textcolor{stringliteral}{"""}
3187 \textcolor{stringliteral}{        determine if there is a path from id1 to id2.}
3188 \textcolor{stringliteral}{        """}
3189         \textcolor{keywordflow}{return} (\textcolor{stringliteral}{'path\_to'}, id2) \textcolor{keywordflow}{in} self.\_node\_to\_edges[id1]
3190 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a33bf40491bd3aa15e65987377b3d580f}\label{classlight__chats_1_1graph_1_1Graph_a33bf40491bd3aa15e65987377b3d580f}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!location@{location}}
\index{location@{location}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{location()}{location()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+location (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{thing }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get whatever the immediate container of a node is.
\end{DoxyVerb}
 

Definition at line 3396 of file graph.\+py.


\begin{DoxyCode}
3396     \textcolor{keyword}{def }location(self, thing):
3397         \textcolor{stringliteral}{"""}
3398 \textcolor{stringliteral}{        Get whatever the immediate container of a node is.}
3399 \textcolor{stringliteral}{        """}
3400         \textcolor{keywordflow}{if} thing \textcolor{keywordflow}{in} self.\_node\_contained\_in:
3401             \textcolor{keywordflow}{return} self.\_node\_contained\_in[thing]
3402         \textcolor{keywordflow}{else}:
3403             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
3404 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a1e8203ba71f1edd33e989ba4a72d8533}\label{classlight__chats_1_1graph_1_1Graph_a1e8203ba71f1edd33e989ba4a72d8533}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!lock\+\_\+path@{lock\+\_\+path}}
\index{lock\+\_\+path@{lock\+\_\+path}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{lock\+\_\+path()}{lock\_path()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+lock\+\_\+path (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2,  }\item[{}]{key\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}lock the edge from id1 to id2 using the given key.
\end{DoxyVerb}
 

Definition at line 3264 of file graph.\+py.


\begin{DoxyCode}
3264     \textcolor{keyword}{def }lock\_path(self, id1, id2, key\_id):
3265         \textcolor{stringliteral}{"""}
3266 \textcolor{stringliteral}{        lock the edge from id1 to id2 using the given key.}
3267 \textcolor{stringliteral}{        """}
3268         self.\_node\_to\_edges[id1][(\textcolor{stringliteral}{'path\_to'}, id2)][\textcolor{stringliteral}{'is\_locked'}] = \textcolor{keyword}{True}
3269         self.\_node\_to\_edges[id1][(\textcolor{stringliteral}{'path\_to'}, id2)][
3270             \textcolor{stringliteral}{'examine\_desc'}
3271         ] = self.\_node\_to\_edges[id1][(\textcolor{stringliteral}{'path\_to'}, id2)][\textcolor{stringliteral}{'locked\_desc'}]
3272         self.\_node\_to\_edges[id2][(\textcolor{stringliteral}{'path\_to'}, id1)][\textcolor{stringliteral}{'is\_locked'}] = \textcolor{keyword}{True}
3273         self.\_node\_to\_edges[id2][(\textcolor{stringliteral}{'path\_to'}, id1)][
3274             \textcolor{stringliteral}{'examine\_desc'}
3275         ] = self.\_node\_to\_edges[id2][(\textcolor{stringliteral}{'path\_to'}, id1)][\textcolor{stringliteral}{'locked\_desc'}]
3276 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a8a92252320777766ddab522549671f43}\label{classlight__chats_1_1graph_1_1Graph_a8a92252320777766ddab522549671f43}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!move\+\_\+object@{move\+\_\+object}}
\index{move\+\_\+object@{move\+\_\+object}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{move\+\_\+object()}{move\_object()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+move\+\_\+object (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{object\+\_\+id,  }\item[{}]{container\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Move an object from wherever it is into somewhere else.
\end{DoxyVerb}
 

Definition at line 3939 of file graph.\+py.


\begin{DoxyCode}
3939     \textcolor{keyword}{def }move\_object(self, object\_id, container\_id):
3940         \textcolor{stringliteral}{"""}
3941 \textcolor{stringliteral}{        Move an object from wherever it is into somewhere else.}
3942 \textcolor{stringliteral}{        """}
3943         size = self.get\_prop(object\_id, \textcolor{stringliteral}{'size'})
3944         \textcolor{comment}{# Remove from the old container}
3945         old\_id = self.node\_contained\_in(object\_id)
3946         \textcolor{keywordflow}{if} old\_id \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
3947             contain\_size = self.get\_prop(old\_id, \textcolor{stringliteral}{'contain\_size'})
3948             contain\_size += size
3949             self.set\_prop(old\_id, \textcolor{stringliteral}{'contain\_size'}, contain\_size)
3950         \textcolor{comment}{# Put in the new container}
3951         contain\_size = self.get\_prop(container\_id, \textcolor{stringliteral}{'contain\_size'})
3952         contain\_size -= size
3953         self.set\_prop(container\_id, \textcolor{stringliteral}{'contain\_size'}, contain\_size)
3954         self.add\_contained\_in(object\_id, container\_id)
3955 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a2da14e9a8a4c547fea59eee63dd9f70c}\label{classlight__chats_1_1graph_1_1Graph_a2da14e9a8a4c547fea59eee63dd9f70c}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!name\+\_\+prefix@{name\+\_\+prefix}}
\index{name\+\_\+prefix@{name\+\_\+prefix}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{name\+\_\+prefix()}{name\_prefix()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+name\+\_\+prefix (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{txt,  }\item[{}]{use\+\_\+the }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the prefix to prepend an object with in text form.
\end{DoxyVerb}
 

Definition at line 3652 of file graph.\+py.


\begin{DoxyCode}
3652     \textcolor{keyword}{def }name\_prefix(self, id, txt, use\_the):
3653         \textcolor{stringliteral}{"""}
3654 \textcolor{stringliteral}{        Get the prefix to prepend an object with in text form.}
3655 \textcolor{stringliteral}{        """}
3656         \textcolor{comment}{# Get the preferred prefix type.}
3657         pre = self.get\_prop(id, \textcolor{stringliteral}{'name\_prefix'})
3658 
3659         \textcolor{keywordflow}{if} pre == \textcolor{stringliteral}{''}:
3660             \textcolor{keywordflow}{return} pre
3661 
3662         \textcolor{keywordflow}{if} use\_the \textcolor{keywordflow}{is} \textcolor{keyword}{True}:
3663             \textcolor{keywordflow}{return} \textcolor{stringliteral}{'the'}
3664 
3665         \textcolor{keywordflow}{if} pre \textcolor{keywordflow}{is} \textcolor{keyword}{False} \textcolor{keywordflow}{or} pre \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{or} pre == \textcolor{stringliteral}{'auto'}:
3666             txt = \textcolor{stringliteral}{'an'} \textcolor{keywordflow}{if} txt[0] \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'a'}, \textcolor{stringliteral}{'e'}, \textcolor{stringliteral}{'i'}, \textcolor{stringliteral}{'o'}, \textcolor{stringliteral}{'u'] else '}a'
3667             \textcolor{keywordflow}{return} txt
3668         \textcolor{keywordflow}{return} pre
3669 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ad9d86fc2b41fef8960a90b517d80cd81}\label{classlight__chats_1_1graph_1_1Graph_ad9d86fc2b41fef8960a90b517d80cd81}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!new\+\_\+agent@{new\+\_\+agent}}
\index{new\+\_\+agent@{new\+\_\+agent}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{new\+\_\+agent()}{new\_agent()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+new\+\_\+agent (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Initialize special state for the given agent.
\end{DoxyVerb}
 

Definition at line 3082 of file graph.\+py.


\begin{DoxyCode}
3082     \textcolor{keyword}{def }new\_agent(self, id):
3083         \textcolor{stringliteral}{"""}
3084 \textcolor{stringliteral}{        Initialize special state for the given agent.}
3085 \textcolor{stringliteral}{        """}
3086         self.\_node\_to\_text\_buffer[id] = \textcolor{stringliteral}{''}  \textcolor{comment}{# clear buffer}
3087         self.\_node\_to\_observations[id] = []  \textcolor{comment}{# clear buffer}
3088         self.\_visited\_rooms[id] = set()
3089         self.\_last\_rooms[id] = \textcolor{keywordtype}{None}
3090         self.\_last\_tell\_target[id] = \textcolor{keywordtype}{None}
3091 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a6afbdb89ba9db7f792506d9171f9e287}\label{classlight__chats_1_1graph_1_1Graph_a6afbdb89ba9db7f792506d9171f9e287}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!node\+\_\+contained\+\_\+in@{node\+\_\+contained\+\_\+in}}
\index{node\+\_\+contained\+\_\+in@{node\+\_\+contained\+\_\+in}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{node\+\_\+contained\+\_\+in()}{node\_contained\_in()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+node\+\_\+contained\+\_\+in (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id }\end{DoxyParamCaption})}



Definition at line 3208 of file graph.\+py.


\begin{DoxyCode}
3208     \textcolor{keyword}{def }node\_contained\_in(self, id):
3209         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.\_node\_contained\_in:
3210             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
3211         \textcolor{keywordflow}{return} self.\_node\_contained\_in[id]
3212 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_aaf9882eb0e887eadf75e4f2460732c05}\label{classlight__chats_1_1graph_1_1Graph_aaf9882eb0e887eadf75e4f2460732c05}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!node\+\_\+contains@{node\+\_\+contains}}
\index{node\+\_\+contains@{node\+\_\+contains}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{node\+\_\+contains()}{node\_contains()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+node\+\_\+contains (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{loc }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the set of all things that a node contains.
\end{DoxyVerb}
 

Definition at line 3191 of file graph.\+py.


\begin{DoxyCode}
3191     \textcolor{keyword}{def }node\_contains(self, loc):
3192         \textcolor{stringliteral}{"""}
3193 \textcolor{stringliteral}{        Get the set of all things that a node contains.}
3194 \textcolor{stringliteral}{        """}
3195         \textcolor{keywordflow}{if} loc \textcolor{keywordflow}{in} self.\_node\_contains:
3196             \textcolor{keywordflow}{return} set(self.\_node\_contains[loc])
3197         \textcolor{keywordflow}{else}:
3198             \textcolor{keywordflow}{return} set()
3199 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ab0dd6685d8eb353d76eca8de20a39914}\label{classlight__chats_1_1graph_1_1Graph_ab0dd6685d8eb353d76eca8de20a39914}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!node\+\_\+exists@{node\+\_\+exists}}
\index{node\+\_\+exists@{node\+\_\+exists}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{node\+\_\+exists()}{node\_exists()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+node\+\_\+exists (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id }\end{DoxyParamCaption})}



Definition at line 3303 of file graph.\+py.


\begin{DoxyCode}
3303     \textcolor{keyword}{def }node\_exists(self, id):
3304         \textcolor{keywordflow}{return} id \textcolor{keywordflow}{in} self.\_node\_contained\_in
3305 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a20da62a3d5411d93fe820accdd06fa33}\label{classlight__chats_1_1graph_1_1Graph_a20da62a3d5411d93fe820accdd06fa33}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!node\+\_\+path\+\_\+to@{node\+\_\+path\+\_\+to}}
\index{node\+\_\+path\+\_\+to@{node\+\_\+path\+\_\+to}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{node\+\_\+path\+\_\+to()}{node\_path\_to()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+node\+\_\+path\+\_\+to (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id }\end{DoxyParamCaption})}



Definition at line 3484 of file graph.\+py.


\begin{DoxyCode}
3484     \textcolor{keyword}{def }node\_path\_to(self, id):
3485         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
3486             \textcolor{keywordflow}{return} []
3487         rooms = self.\_node\_to\_edges[id]
3488         rooms = [r[1] \textcolor{keywordflow}{for} r \textcolor{keywordflow}{in} rooms \textcolor{keywordflow}{if} r[0] == \textcolor{stringliteral}{'path\_to'}]
3489         \textcolor{keywordflow}{return} rooms
3490 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a9ed5168f4d2a93b6a9f3f3ddd07660d4}\label{classlight__chats_1_1graph_1_1Graph_a9ed5168f4d2a93b6a9f3f3ddd07660d4}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!node\+\_\+to\+\_\+desc@{node\+\_\+to\+\_\+desc}}
\index{node\+\_\+to\+\_\+desc@{node\+\_\+to\+\_\+desc}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{node\+\_\+to\+\_\+desc()}{node\_to\_desc()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+node\+\_\+to\+\_\+desc (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{from\+\_\+id = {\ttfamily False},  }\item[{}]{use\+\_\+the = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 3577 of file graph.\+py.


\begin{DoxyCode}
3577     \textcolor{keyword}{def }node\_to\_desc(self, id, from\_id=False, use\_the=False):
3578         \textcolor{keywordflow}{if} from\_id:
3579             \textcolor{comment}{# A description of something (right now, a location)}
3580             \textcolor{comment}{# from another location.}
3581             \textcolor{comment}{# This gets the description from the path edge.}
3582             path\_desc = self.path\_to\_desc(id, from\_id)
3583             \textcolor{keywordflow}{if} path\_desc \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keyword}{False}:
3584                 \textcolor{keywordflow}{if} path\_desc.startswith(\textcolor{stringliteral}{'the'}) \textcolor{keywordflow}{or} path\_desc.startswith(\textcolor{stringliteral}{'a'}):
3585                     \textcolor{keywordflow}{return} path\_desc
3586                 \textcolor{keywordflow}{return} \textcolor{stringliteral}{'the '} + path\_desc
3587 
3588         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_desc:
3589             ent = self.\_node\_to\_desc[id]
3590             \textcolor{keywordflow}{if} self.get\_prop(id, \textcolor{stringliteral}{'capitalize'}, \textcolor{keyword}{False}) \textcolor{keywordflow}{is} \textcolor{keyword}{True}:
3591                 ent = ent.capitalize()
3592             \textcolor{keywordflow}{if} self.has\_prop(id, \textcolor{stringliteral}{'dead'}):
3593                 ent = \textcolor{stringliteral}{'dead '} + ent
3594             \textcolor{keywordflow}{if} self.has\_prop(id, \textcolor{stringliteral}{'player\_name'}):
3595                 ent = self.get\_prop(id, \textcolor{stringliteral}{'player\_name'})
3596             \textcolor{keywordflow}{elif} self.has\_prop(id, \textcolor{stringliteral}{'agent'}) \textcolor{keywordflow}{or} self.has\_prop(id, \textcolor{stringliteral}{'object'}):
3597                 prefix = self.name\_prefix(id, ent, use\_the)
3598                 \textcolor{keywordflow}{if} prefix != \textcolor{stringliteral}{''}:
3599                     ent = prefix + \textcolor{stringliteral}{' '} + ent
3600             \textcolor{keywordflow}{elif} self.has\_prop(id, \textcolor{stringliteral}{'room'}):
3601                 prefix = self.name\_prefix(id, ent, use\_the)
3602                 \textcolor{keywordflow}{if} prefix != \textcolor{stringliteral}{''}:
3603                     ent = prefix + \textcolor{stringliteral}{' '} + ent
3604                 \textcolor{keywordflow}{else}:
3605                     ent = \textcolor{stringliteral}{'the '} + ent
3606             \textcolor{keywordflow}{return} ent
3607         \textcolor{keywordflow}{else}:
3608             \textcolor{keywordflow}{return} id
3609 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ae0b96f3393dd176f10c3f154649cdf25}\label{classlight__chats_1_1graph_1_1Graph_ae0b96f3393dd176f10c3f154649cdf25}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!node\+\_\+to\+\_\+desc\+\_\+raw@{node\+\_\+to\+\_\+desc\+\_\+raw}}
\index{node\+\_\+to\+\_\+desc\+\_\+raw@{node\+\_\+to\+\_\+desc\+\_\+raw}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{node\+\_\+to\+\_\+desc\+\_\+raw()}{node\_to\_desc\_raw()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+node\+\_\+to\+\_\+desc\+\_\+raw (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{from\+\_\+id = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 3645 of file graph.\+py.


\begin{DoxyCode}
3645     \textcolor{keyword}{def }node\_to\_desc\_raw(self, id, from\_id=False):
3646         \textcolor{keywordflow}{if} from\_id:
3647             path\_desc = self.path\_to\_desc(id, from\_id)
3648             \textcolor{keywordflow}{if} path\_desc \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keyword}{False}:
3649                 \textcolor{keywordflow}{return} path\_desc
3650         \textcolor{keywordflow}{return} self.\_node\_to\_desc[id]
3651 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_af7460b9c8069563289b8b6b11f831b63}\label{classlight__chats_1_1graph_1_1Graph_af7460b9c8069563289b8b6b11f831b63}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!obj\+\_\+fits@{obj\+\_\+fits}}
\index{obj\+\_\+fits@{obj\+\_\+fits}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{obj\+\_\+fits()}{obj\_fits()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+obj\+\_\+fits (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{object\+\_\+id,  }\item[{}]{container\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return if one object will fit into another.
\end{DoxyVerb}
 

Definition at line 3925 of file graph.\+py.


\begin{DoxyCode}
3925     \textcolor{keyword}{def }obj\_fits(self, object\_id, container\_id):
3926         \textcolor{stringliteral}{"""}
3927 \textcolor{stringliteral}{        Return if one object will fit into another.}
3928 \textcolor{stringliteral}{        """}
3929         size = self.get\_prop(object\_id, \textcolor{stringliteral}{'size'})
3930         max\_size = self.get\_prop(container\_id, \textcolor{stringliteral}{'contain\_size'})
3931         \textcolor{keywordflow}{if} size \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{or} max\_size \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
3932             \textcolor{comment}{# TODO log these kinds of things}
3933             print(
3934                 \textcolor{stringliteral}{'None compare between \{\} and \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(object\_id, container\_id),
3935                 self.\_node\_to\_prop,
3936             )
3937         \textcolor{keywordflow}{return} size <= max\_size
3938 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a5087252eb40253eacd115e777c092cd8}\label{classlight__chats_1_1graph_1_1Graph_a5087252eb40253eacd115e777c092cd8}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!parse@{parse}}
\index{parse@{parse}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{parse()}{parse()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+parse (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{inst }\end{DoxyParamCaption})}



Definition at line 4329 of file graph.\+py.


\begin{DoxyCode}
4329     \textcolor{keyword}{def }parse(self, inst):
4330         \textcolor{keywordflow}{return} Graph.parse\_static(inst)
4331 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a9aede2dd27f6a9ab66f38eaa5f649195}\label{classlight__chats_1_1graph_1_1Graph_a9aede2dd27f6a9ab66f38eaa5f649195}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!parse\+\_\+exec@{parse\+\_\+exec}}
\index{parse\+\_\+exec@{parse\+\_\+exec}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{parse\+\_\+exec()}{parse\_exec()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+parse\+\_\+exec (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agentid,  }\item[{}]{inst = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}ATTENTION: even if one of the actions is invalid, all actions
before that will still be executed (the world state will be changed)!
\end{DoxyVerb}
 

Definition at line 4396 of file graph.\+py.


\begin{DoxyCode}
4396     \textcolor{keyword}{def }parse\_exec(self, agentid, inst=None):
4397         \textcolor{stringliteral}{"""ATTENTION: even if one of the actions is invalid, all actions}
4398 \textcolor{stringliteral}{        before that will still be executed (the world state will be changed)!}
4399 \textcolor{stringliteral}{        """}
4400         \textcolor{keywordflow}{if} inst \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
4401             inst = agentid
4402             agentid = \textcolor{stringliteral}{'dragon'}
4403 
4404         \textcolor{keywordflow}{if} inst.startswith(\textcolor{stringliteral}{'look '}):
4405             inst = \textcolor{stringliteral}{'look'}
4406 
4407         \textcolor{keywordflow}{if} self.get\_prop(agentid, \textcolor{stringliteral}{'dead'}):
4408             self.send\_msg(agentid, \textcolor{stringliteral}{"You are dead, you can't do anything, sorry."})
4409             \textcolor{keywordflow}{return} \textcolor{keyword}{False}, \textcolor{stringliteral}{'dead'}
4410         inst, symb\_points = self.parse(inst)
4411         inst[0] = inst[0].lower()
4412 
4413         hint\_calls = [\textcolor{stringliteral}{'a'}, \textcolor{stringliteral}{'actions'}, \textcolor{stringliteral}{'hints'}]
4414         \textcolor{keywordflow}{if} len(inst) == 1 \textcolor{keywordflow}{and} (inst[0] \textcolor{keywordflow}{in} hint\_calls):
4415             \textcolor{comment}{# TODO remove the list of valid instructions from the main game,}
4416             \textcolor{comment}{# Perhaps behind and admin gatekeeper of sorts}
4417             self.send\_msg(
4418                 agentid, \textcolor{stringliteral}{'\(\backslash\)n'}.join(sorted(self.get\_possible\_actions(agentid))) + \textcolor{stringliteral}{'\(\backslash\)n'}
4419             )
4420             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, \textcolor{stringliteral}{'actions'}
4421         \textcolor{keywordflow}{if} len(inst) == 1 \textcolor{keywordflow}{and} (inst[0] == \textcolor{stringliteral}{'help'}):
4422             self.send\_msg(agentid, self.help())
4423             \textcolor{keywordflow}{return} \textcolor{keyword}{True}, \textcolor{stringliteral}{'help'}
4424         \textcolor{comment}{# if inst[0] == 'create':}
4425         \textcolor{comment}{#     return self.create(agentid, inst[1:])}
4426         \textcolor{keywordflow}{if} inst[0] \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} GRAPH\_FUNCTIONS.keys():
4427             \textcolor{comment}{# if Callbacks.handle\_failed\_parse\_callbacks(}
4428             \textcolor{comment}{#         inst[0].lower(), self, inst[1:], agentid):}
4429             \textcolor{comment}{#     return False, inst[0]}
4430             self.send\_msg(agentid, \textcolor{stringliteral}{"You can't \{\}."}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(inst[0]))
4431             \textcolor{keywordflow}{return} \textcolor{keyword}{False}, inst[0]
4432         acts = []
4433         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(symb\_points) - 1):
4434             j, k = symb\_points[i], symb\_points[i + 1]
4435             params = inst[j + 1 : k]
4436             \textcolor{keywordflow}{if} inst[j].lower() \textcolor{keywordflow}{in} GRAPH\_FUNCTIONS.keys():
4437                 func\_wrap = GRAPH\_FUNCTIONS[inst[j].lower()]
4438                 valid, args, \_canon\_args = func\_wrap.parse\_text\_to\_args(
4439                     self, agentid, params
4440                 )
4441                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} valid:
4442                     \textcolor{comment}{# if Callbacks.handle\_failed\_parse\_callbacks(}
4443                     \textcolor{comment}{#         func\_wrap.get\_name(), self, params, agentid):}
4444                     \textcolor{comment}{#     return False, ' '.join(acts)}
4445                     \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(args) \textcolor{keywordflow}{is} str:
4446                         self.send\_msg(agentid, args)
4447                     \textcolor{keywordflow}{else}:
4448                         self.send\_action(agentid, args)
4449                     \textcolor{keywordflow}{return} \textcolor{keyword}{False}, \textcolor{stringliteral}{' '}.join(acts)
4450                 new\_act = func\_wrap.get\_canonical\_form(self, args)
4451                 success = func\_wrap.handle(self, args)
4452                 acts.append(new\_act)
4453                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} success:
4454                     \textcolor{keywordflow}{return} \textcolor{keyword}{False}, \textcolor{stringliteral}{' '}.join(acts)
4455             \textcolor{comment}{# elif Callbacks.handle\_failed\_parse\_callbacks(}
4456             \textcolor{comment}{#         inst[j].lower(), self, params, agentid):}
4457             \textcolor{comment}{#     return False, ' '.join(acts)}
4458             \textcolor{keywordflow}{else}:
4459                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}, \textcolor{stringliteral}{' '}.join(acts)
4460         \textcolor{keywordflow}{return} \textcolor{keyword}{True}, \textcolor{stringliteral}{' '}.join(acts)
4461 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a6eaae6c0b9fbcaf9f478a790ff356671}\label{classlight__chats_1_1graph_1_1Graph_a6eaae6c0b9fbcaf9f478a790ff356671}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!parse\+\_\+static@{parse\+\_\+static}}
\index{parse\+\_\+static@{parse\+\_\+static}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{parse\+\_\+static()}{parse\_static()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+parse\+\_\+static (\begin{DoxyParamCaption}\item[{}]{inst }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 4307 of file graph.\+py.


\begin{DoxyCode}
4307     \textcolor{keyword}{def }parse\_static(inst):
4308         inst = inst.strip().split()
4309         symb\_points = []
4310         in\_quotes = \textcolor{keyword}{False}
4311         \textcolor{keywordflow}{for} i, symb \textcolor{keywordflow}{in} enumerate(inst):
4312             \textcolor{keywordflow}{if} \textcolor{stringliteral}{'"'} \textcolor{keywordflow}{in} symb:
4313                 in\_quotes = \textcolor{keywordflow}{not} in\_quotes
4314             \textcolor{keywordflow}{if} symb.lower() \textcolor{keywordflow}{in} GRAPH\_FUNCTIONS.keys() \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} in\_quotes:
4315                 symb\_points.append(i)
4316         symb\_points.append(len(inst))
4317         \textcolor{keywordflow}{return} inst, symb\_points
4318 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_aeeb122366f2f098d889309fa53d19917}\label{classlight__chats_1_1graph_1_1Graph_aeeb122366f2f098d889309fa53d19917}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!path\+\_\+is\+\_\+locked@{path\+\_\+is\+\_\+locked}}
\index{path\+\_\+is\+\_\+locked@{path\+\_\+is\+\_\+locked}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{path\+\_\+is\+\_\+locked()}{path\_is\_locked()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+path\+\_\+is\+\_\+locked (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2 }\end{DoxyParamCaption})}



Definition at line 3290 of file graph.\+py.


\begin{DoxyCode}
3290     \textcolor{keyword}{def }path\_is\_locked(self, id1, id2):
3291         \textcolor{keywordflow}{return} self.\_node\_to\_edges[id1][(\textcolor{stringliteral}{'path\_to'}, id2)][\textcolor{stringliteral}{'is\_locked'}]
3292 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_afd47e9b4f058dc2cbb520164db920664}\label{classlight__chats_1_1graph_1_1Graph_afd47e9b4f058dc2cbb520164db920664}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!path\+\_\+to\+\_\+desc@{path\+\_\+to\+\_\+desc}}
\index{path\+\_\+to\+\_\+desc@{path\+\_\+to\+\_\+desc}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{path\+\_\+to\+\_\+desc()}{path\_to\_desc()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+path\+\_\+to\+\_\+desc (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2 }\end{DoxyParamCaption})}

\begin{DoxyVerb}get the description for a path from the perspective of id2.
\end{DoxyVerb}
 

Definition at line 3631 of file graph.\+py.


\begin{DoxyCode}
3631     \textcolor{keyword}{def }path\_to\_desc(self, id1, id2):
3632         \textcolor{stringliteral}{"""}
3633 \textcolor{stringliteral}{        get the description for a path from the perspective of id2.}
3634 \textcolor{stringliteral}{        """}
3635         rooms = self.\_node\_to\_edges[id2]
3636         \textcolor{keywordflow}{for} r \textcolor{keywordflow}{in} rooms:
3637             \textcolor{keywordflow}{if} r[0] == \textcolor{stringliteral}{'path\_to'} \textcolor{keywordflow}{and} r[1] == id1:
3638                 \textcolor{keywordflow}{if} \textcolor{stringliteral}{'label'} \textcolor{keywordflow}{in} rooms[r] \textcolor{keywordflow}{and} rooms[r][\textcolor{stringliteral}{'label'}] \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
3639                     \textcolor{keywordflow}{if} rooms[r][\textcolor{stringliteral}{'full\_label'}]:
3640                         \textcolor{keywordflow}{return} rooms[r][\textcolor{stringliteral}{'label'}]
3641                     \textcolor{keywordflow}{else}:
3642                         \textcolor{keywordflow}{return} \textcolor{stringliteral}{'a path to the '} + rooms[r][\textcolor{stringliteral}{'label'}]
3643         \textcolor{keywordflow}{return} \textcolor{keyword}{False}
3644 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a604091edb800be1aad16f3a64f13d6da}\label{classlight__chats_1_1graph_1_1Graph_a604091edb800be1aad16f3a64f13d6da}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!populate\+\_\+ids@{populate\+\_\+ids}}
\index{populate\+\_\+ids@{populate\+\_\+ids}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{populate\+\_\+ids()}{populate\_ids()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+populate\+\_\+ids (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 2897 of file graph.\+py.


\begin{DoxyCode}
2897     \textcolor{keyword}{def }populate\_ids(self):
2898         self.object\_ids = self.get\_all\_by\_prop(\textcolor{stringliteral}{'object'})
2899         self.container\_ids = self.get\_all\_by\_prop(\textcolor{stringliteral}{'container'})
2900         self.agent\_ids = self.get\_all\_by\_prop(\textcolor{stringliteral}{'agent'})
2901 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_aa40b8fea9737da5d3f329dfb00c42c6f}\label{classlight__chats_1_1graph_1_1Graph_aa40b8fea9737da5d3f329dfb00c42c6f}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!register\+\_\+callbacks@{register\+\_\+callbacks}}
\index{register\+\_\+callbacks@{register\+\_\+callbacks}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{register\+\_\+callbacks()}{register\_callbacks()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+register\+\_\+callbacks (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{callbacks,  }\item[{}]{variables }\end{DoxyParamCaption})}

\begin{DoxyVerb}Documentation not yet available.
\end{DoxyVerb}
 

Definition at line 2968 of file graph.\+py.


\begin{DoxyCode}
2968     \textcolor{keyword}{def }register\_callbacks(self, callbacks, variables):
2969         \textcolor{stringliteral}{"""}
2970 \textcolor{stringliteral}{        Documentation not yet available.}
2971 \textcolor{stringliteral}{        """}
2972         self.callbacks = callbacks
2973         self.variables = variables
2974 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ab799f6160a4e8dd1550b2e245cdd2d53}\label{classlight__chats_1_1graph_1_1Graph_ab799f6160a4e8dd1550b2e245cdd2d53}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!remove\+\_\+class@{remove\+\_\+class}}
\index{remove\+\_\+class@{remove\+\_\+class}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{remove\+\_\+class()}{remove\_class()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+remove\+\_\+class (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{object\+\_\+id,  }\item[{}]{class\+\_\+name }\end{DoxyParamCaption})}



Definition at line 3390 of file graph.\+py.


\begin{DoxyCode}
3390     \textcolor{keyword}{def }remove\_class(self, object\_id, class\_name):
3391         curr\_classes = self.get\_prop(object\_id, \textcolor{stringliteral}{'classes'})
3392         curr\_classes.remove(class\_name)
3393 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a90e0b9f3f4a4acc29c49cc730aad1539}\label{classlight__chats_1_1graph_1_1Graph_a90e0b9f3f4a4acc29c49cc730aad1539}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!room@{room}}
\index{room@{room}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{room()}{room()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+room (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{thing }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the room that contains a given node.
\end{DoxyVerb}
 

Definition at line 3405 of file graph.\+py.


\begin{DoxyCode}
3405     \textcolor{keyword}{def }room(self, thing):
3406         \textcolor{stringliteral}{"""}
3407 \textcolor{stringliteral}{        Get the room that contains a given node.}
3408 \textcolor{stringliteral}{        """}
3409         \textcolor{keywordflow}{if} thing \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.\_node\_contained\_in:
3410             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
3411         id = self.\_node\_contained\_in[thing]
3412         \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} self.get\_prop(id, \textcolor{stringliteral}{'room'}):
3413             id = self.\_node\_contained\_in[id]
3414         \textcolor{keywordflow}{return} id
3415 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a783ebf83adeed30c0ba89679f535d33c}\label{classlight__chats_1_1graph_1_1Graph_a783ebf83adeed30c0ba89679f535d33c}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!send\+\_\+action@{send\+\_\+action}}
\index{send\+\_\+action@{send\+\_\+action}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{send\+\_\+action()}{send\_action()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+send\+\_\+action (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+id,  }\item[{}]{action }\end{DoxyParamCaption})}

\begin{DoxyVerb}Parse the action and send it to the agent with send_msg.
\end{DoxyVerb}
 

Definition at line 3672 of file graph.\+py.


\begin{DoxyCode}
3672     \textcolor{keyword}{def }send\_action(self, agent\_id, action):
3673         \textcolor{stringliteral}{"""}
3674 \textcolor{stringliteral}{        Parse the action and send it to the agent with send\_msg.}
3675 \textcolor{stringliteral}{        """}
3676         \textcolor{keywordflow}{if} action[\textcolor{stringliteral}{'caller'}] \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
3677             val = self.extract\_classed\_from\_dict(action[\textcolor{stringliteral}{'txt'}], agent\_id, \textcolor{stringliteral}{''})
3678             \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(val) \textcolor{keywordflow}{is} dict \textcolor{keywordflow}{and} \textcolor{stringliteral}{'iter'} \textcolor{keywordflow}{in} val:
3679                 i = val[\textcolor{stringliteral}{'iter'}]
3680                 val[\textcolor{stringliteral}{'iter'}] = (i + 1) % len(val[\textcolor{stringliteral}{'data'}])
3681                 extracted\_text = val[\textcolor{stringliteral}{'data'}][i]
3682             \textcolor{keywordflow}{else}:
3683                 extracted\_text = val
3684             self.send\_msg(agent\_id, extracted\_text, action)
3685             \textcolor{keywordflow}{return}
3686         \textcolor{keywordflow}{try}:
3687             func\_wrap = GRAPH\_FUNCTIONS[action[\textcolor{stringliteral}{'caller'}]]
3688         \textcolor{keywordflow}{except} BaseException:
3689             func\_wrap = CONSTRAINTS[action[\textcolor{stringliteral}{'caller'}]]
3690         \textcolor{keywordflow}{try}:
3691             t = func\_wrap.format\_observation(self, agent\_id, action).rstrip()
3692         \textcolor{keywordflow}{except} Exception:
3693             \textcolor{keywordflow}{return}  \textcolor{comment}{# the agent doesn't accept observations}
3694         t += \textcolor{stringliteral}{' '}
3695         self.send\_msg(agent\_id, t, action)
3696 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a966d3719771ddc58c520f0821c18d959}\label{classlight__chats_1_1graph_1_1Graph_a966d3719771ddc58c520f0821c18d959}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!send\+\_\+msg@{send\+\_\+msg}}
\index{send\+\_\+msg@{send\+\_\+msg}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{send\+\_\+msg()}{send\_msg()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+send\+\_\+msg (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+id,  }\item[{}]{txt,  }\item[{}]{action = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Send an agent an action and a message.
\end{DoxyVerb}
 

Definition at line 3697 of file graph.\+py.


\begin{DoxyCode}
3697     \textcolor{keyword}{def }send\_msg(self, agent\_id, txt, action=None):
3698         \textcolor{stringliteral}{"""}
3699 \textcolor{stringliteral}{        Send an agent an action and a message.}
3700 \textcolor{stringliteral}{        """}
3701         \textcolor{keywordflow}{if} agent\_id \textcolor{keywordflow}{in} self.\_node\_to\_text\_buffer:
3702             \textcolor{keywordflow}{if} action \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
3703                 action = \{
3704                     \textcolor{stringliteral}{'caller'}: \textcolor{keywordtype}{None},
3705                     \textcolor{stringliteral}{'room\_id'}: self.location(agent\_id),
3706                     \textcolor{stringliteral}{'txt'}: txt,
3707                 \}
3708 
3709             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} hasattr(self, \textcolor{stringliteral}{'\_node\_to\_observations'}):
3710                 \textcolor{comment}{# TODO remove when all the samples are converted}
3711                 self.\_node\_to\_observations = \{\}
3712             \textcolor{keywordflow}{if} agent\_id \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.\_node\_to\_observations:
3713                 self.\_node\_to\_observations[agent\_id] = []
3714             self.\_node\_to\_observations[agent\_id].append(action)
3715             self.\_node\_to\_text\_buffer[agent\_id] += txt
3716         \textcolor{keywordflow}{if} agent\_id \textcolor{keywordflow}{in} self.\_\_message\_callbacks:
3717             self.\_\_message\_callbacks[agent\_id](self, action)
3718 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a6039eea576e68156be7fcaa7a3929358}\label{classlight__chats_1_1graph_1_1Graph_a6039eea576e68156be7fcaa7a3929358}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!set\+\_\+desc@{set\+\_\+desc}}
\index{set\+\_\+desc@{set\+\_\+desc}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{set\+\_\+desc()}{set\_desc()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+set\+\_\+desc (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{desc }\end{DoxyParamCaption})}



Definition at line 3300 of file graph.\+py.


\begin{DoxyCode}
3300     \textcolor{keyword}{def }set\_desc(self, id, desc):
3301         self.\_node\_to\_desc[id] = desc
3302 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a729d07bc1da395a60d3431cec5bb439b}\label{classlight__chats_1_1graph_1_1Graph_a729d07bc1da395a60d3431cec5bb439b}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!set\+\_\+follow@{set\+\_\+follow}}
\index{set\+\_\+follow@{set\+\_\+follow}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{set\+\_\+follow()}{set\_follow()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+set\+\_\+follow (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2 }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set id1 to be following id2, unfollowing whatever id1 followed before if
necessary.
\end{DoxyVerb}
 

Definition at line 3213 of file graph.\+py.


\begin{DoxyCode}
3213     \textcolor{keyword}{def }set\_follow(self, id1, id2):
3214         \textcolor{stringliteral}{"""}
3215 \textcolor{stringliteral}{        Set id1 to be following id2, unfollowing whatever id1 followed before if}
3216 \textcolor{stringliteral}{        necessary.}
3217 \textcolor{stringliteral}{        """}
3218         \textcolor{keywordflow}{if} id1 \textcolor{keywordflow}{in} self.\_node\_follows:
3219             i\_follow = self.\_node\_follows[id1]
3220             self.\_node\_followed\_by[i\_follow].remove(id1)
3221         \textcolor{keywordflow}{if} id2 \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
3222             self.\_node\_follows[id1] = id2
3223             \textcolor{keywordflow}{if} id2 \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.\_node\_followed\_by:
3224                 self.\_node\_followed\_by[id2] = set()
3225             self.\_node\_followed\_by[id2].add(id1)
3226             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
3227         \textcolor{keywordflow}{else}:
3228             \textcolor{keywordflow}{if} id1 \textcolor{keywordflow}{in} self.\_node\_follows:
3229                 self.\_node\_follows.pop(id1)
3230 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ac46849fddce61ce035feb6ea683b9009}\label{classlight__chats_1_1graph_1_1Graph_ac46849fddce61ce035feb6ea683b9009}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!set\+\_\+obj@{set\+\_\+obj}}
\index{set\+\_\+obj@{set\+\_\+obj}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{set\+\_\+obj()}{set\_obj()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+set\+\_\+obj (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{state }\end{DoxyParamCaption})}

\begin{DoxyVerb}Instantiate an object into the graph with the given state.
\end{DoxyVerb}
 

Definition at line 3034 of file graph.\+py.


\begin{DoxyCode}
3034     \textcolor{keyword}{def }set\_obj(self, state):
3035         \textcolor{stringliteral}{"""}
3036 \textcolor{stringliteral}{        Instantiate an object into the graph with the given state.}
3037 \textcolor{stringliteral}{        """}
3038         id = state[\textcolor{stringliteral}{'id'}]
3039         self.\_node\_to\_edges[id] = []
3040         self.\_node\_to\_prop[id] = state[\textcolor{stringliteral}{'node\_to\_prop'}]
3041         self.\_node\_contains[id] = state[\textcolor{stringliteral}{'node\_contains'}]
3042         \textcolor{keywordflow}{for} obj\_state \textcolor{keywordflow}{in} state[\textcolor{stringliteral}{'contained\_nodes'}]:
3043             self.set\_obj(obj\_state)
3044         self.\_node\_to\_desc[id] = state[\textcolor{stringliteral}{'node\_to\_desc'}]
3045         self.\_node\_contained\_in[id] = state[\textcolor{stringliteral}{'node\_contained\_in'}]
3046 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a4130e8f504f9a6eeafbc83a8a38a6efb}\label{classlight__chats_1_1graph_1_1Graph_a4130e8f504f9a6eeafbc83a8a38a6efb}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!set\+\_\+player@{set\+\_\+player}}
\index{set\+\_\+player@{set\+\_\+player}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{set\+\_\+player()}{set\_player()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+set\+\_\+player (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{state }\end{DoxyParamCaption})}

\begin{DoxyVerb}Instantiate a player into the graph with the given state.
\end{DoxyVerb}
 

Definition at line 3018 of file graph.\+py.


\begin{DoxyCode}
3018     \textcolor{keyword}{def }set\_player(self, state):
3019         \textcolor{stringliteral}{"""}
3020 \textcolor{stringliteral}{        Instantiate a player into the graph with the given state.}
3021 \textcolor{stringliteral}{        """}
3022         id = state[\textcolor{stringliteral}{'id'}]
3023         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'node\_to\_text\_buffer'} \textcolor{keywordflow}{in} state:
3024             self.\_node\_to\_text\_buffer[id] = (
3025                 state[\textcolor{stringliteral}{'node\_to\_text\_buffer'}] + self.\_node\_to\_text\_buffer[id]
3026             )
3027         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'node\_contains'} \textcolor{keywordflow}{in} state:
3028             self.\_node\_contains[id] = state[\textcolor{stringliteral}{'node\_contains'}]
3029             \textcolor{keywordflow}{for} obj\_state \textcolor{keywordflow}{in} state[\textcolor{stringliteral}{'contained\_nodes'}]:
3030                 self.set\_obj(obj\_state)
3031         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'node\_to\_prop'} \textcolor{keywordflow}{in} state:
3032             self.\_node\_to\_prop[id] = state[\textcolor{stringliteral}{'node\_to\_prop'}]
3033 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ae2c69adb1ea1477aaa6d9af693b30fa1}\label{classlight__chats_1_1graph_1_1Graph_ae2c69adb1ea1477aaa6d9af693b30fa1}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!set\+\_\+prop@{set\+\_\+prop}}
\index{set\+\_\+prop@{set\+\_\+prop}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{set\+\_\+prop()}{set\_prop()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+set\+\_\+prop (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id,  }\item[{}]{prop,  }\item[{}]{val = {\ttfamily True} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set a prop to a given value, True otherwise.
\end{DoxyVerb}
 

Definition at line 3352 of file graph.\+py.


\begin{DoxyCode}
3352     \textcolor{keyword}{def }set\_prop(self, id, prop, val=True):
3353         \textcolor{stringliteral}{"""}
3354 \textcolor{stringliteral}{        Set a prop to a given value, True otherwise.}
3355 \textcolor{stringliteral}{        """}
3356         \textcolor{keywordflow}{if} id \textcolor{keywordflow}{in} self.\_node\_to\_prop:
3357             self.\_node\_to\_prop[id][prop] = val
3358 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a3d44dae0701925da960433cb98229c21}\label{classlight__chats_1_1graph_1_1Graph_a3d44dae0701925da960433cb98229c21}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!split\+\_\+params@{split\+\_\+params}}
\index{split\+\_\+params@{split\+\_\+params}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{split\+\_\+params()}{split\_params()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+split\+\_\+params (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{params,  }\item[{}]{word }\end{DoxyParamCaption})}



Definition at line 3913 of file graph.\+py.


\begin{DoxyCode}
3913     \textcolor{keyword}{def }split\_params(self, params, word):
3914         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(word) \textcolor{keywordflow}{is} str:
3915             word = \{word\}
3916         \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} word:
3917             search = \textcolor{stringliteral}{' \{\} '}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(w)
3918             phrase = \textcolor{stringliteral}{' '}.join(params)
3919             \textcolor{keywordflow}{if} phrase.find(w) != -1:
3920                 \textcolor{keywordflow}{return} phrase.split(search)
3921         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
3922 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a5f54739484e05010202517a4714af30f}\label{classlight__chats_1_1graph_1_1Graph_a5f54739484e05010202517a4714af30f}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!unique\+\_\+hash@{unique\+\_\+hash}}
\index{unique\+\_\+hash@{unique\+\_\+hash}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{unique\+\_\+hash()}{unique\_hash()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+unique\+\_\+hash (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 2902 of file graph.\+py.


\begin{DoxyCode}
2902     \textcolor{keyword}{def }unique\_hash(self):
2903         \textcolor{comment}{# TODO: make it independent of specific world settings}
2904         \textcolor{comment}{# TODO: Improve everything about this, it's really old}
2905         \textcolor{comment}{# object\_ids, agent\_ids, and container\_ids are set by construct\_graph}
2906         self.populate\_ids()
2907         s = \textcolor{stringliteral}{''}
2908         apple\_s = []
2909         \textcolor{keywordflow}{for} id \textcolor{keywordflow}{in} self.object\_ids + self.container\_ids + self.agent\_ids:
2910             cur\_s = \textcolor{stringliteral}{''}
2911             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.node\_exists(id):
2912                 cur\_s += \textcolor{stringliteral}{'eaten'}
2913             \textcolor{keywordflow}{else}:
2914                 cur\_s += self.\_node\_contained\_in[id]
2915                 \textcolor{keywordflow}{for} prop \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'wielding'}, \textcolor{stringliteral}{'wearing'}, \textcolor{stringliteral}{'dead'}]:
2916                     \textcolor{keywordflow}{if} prop \textcolor{keywordflow}{in} self.\_node\_to\_prop[id]:
2917                         cur\_s += prop
2918             \textcolor{keywordflow}{if} self.node\_to\_desc\_raw(id) == \textcolor{stringliteral}{'apple'}:
2919                 apple\_s.append(cur\_s)
2920             \textcolor{keywordflow}{else}:
2921                 s += cur\_s
2922         s += \textcolor{stringliteral}{''}.join(sorted(apple\_s))
2923         \textcolor{keywordflow}{return} s
2924 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a7a4820f5a9eff4261a81df8537937ac1}\label{classlight__chats_1_1graph_1_1Graph_a7a4820f5a9eff4261a81df8537937ac1}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!unlock\+\_\+path@{unlock\+\_\+path}}
\index{unlock\+\_\+path@{unlock\+\_\+path}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{unlock\+\_\+path()}{unlock\_path()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+unlock\+\_\+path (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{id1,  }\item[{}]{id2,  }\item[{}]{key\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}unlock the edge from id1 to id2 using the given key.
\end{DoxyVerb}
 

Definition at line 3277 of file graph.\+py.


\begin{DoxyCode}
3277     \textcolor{keyword}{def }unlock\_path(self, id1, id2, key\_id):
3278         \textcolor{stringliteral}{"""}
3279 \textcolor{stringliteral}{        unlock the edge from id1 to id2 using the given key.}
3280 \textcolor{stringliteral}{        """}
3281         self.\_node\_to\_edges[id1][(\textcolor{stringliteral}{'path\_to'}, id2)][\textcolor{stringliteral}{'is\_locked'}] = \textcolor{keyword}{False}
3282         self.\_node\_to\_edges[id1][(\textcolor{stringliteral}{'path\_to'}, id2)][
3283             \textcolor{stringliteral}{'examine\_desc'}
3284         ] = self.\_node\_to\_edges[id1][(\textcolor{stringliteral}{'path\_to'}, id2)][\textcolor{stringliteral}{'unlocked\_desc'}]
3285         self.\_node\_to\_edges[id2][(\textcolor{stringliteral}{'path\_to'}, id1)][\textcolor{stringliteral}{'is\_locked'}] = \textcolor{keyword}{False}
3286         self.\_node\_to\_edges[id2][(\textcolor{stringliteral}{'path\_to'}, id1)][
3287             \textcolor{stringliteral}{'examine\_desc'}
3288         ] = self.\_node\_to\_edges[id2][(\textcolor{stringliteral}{'path\_to'}, id1)][\textcolor{stringliteral}{'unlocked\_desc'}]
3289 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ab4e757d18538326e65b8ed2dce71d9fa}\label{classlight__chats_1_1graph_1_1Graph_ab4e757d18538326e65b8ed2dce71d9fa}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!update\+\_\+world@{update\+\_\+world}}
\index{update\+\_\+world@{update\+\_\+world}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{update\+\_\+world()}{update\_world()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+update\+\_\+world (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Move agents, do basic actions with npcs, handle telling npcs things.
\end{DoxyVerb}
 

Definition at line 4462 of file graph.\+py.


\begin{DoxyCode}
4462     \textcolor{keyword}{def }update\_world(self):
4463         \textcolor{stringliteral}{"""}
4464 \textcolor{stringliteral}{        Move agents, do basic actions with npcs, handle telling npcs things.}
4465 \textcolor{stringliteral}{        """}
4466         \textcolor{keywordflow}{if} self.freeze():
4467             \textcolor{keywordflow}{return}
4468         \textcolor{keywordflow}{for} agent\_id \textcolor{keywordflow}{in} self.\_node\_npcs:
4469             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.get\_prop(agent\_id, \textcolor{stringliteral}{'agent'}):
4470                 \textcolor{keywordflow}{continue}
4471             \textcolor{keywordflow}{if} self.get\_prop(agent\_id, \textcolor{stringliteral}{'dead'}):
4472                 \textcolor{keywordflow}{continue}
4473             \textcolor{comment}{# if agent\_id in self.\_node\_to\_observations:}
4474             \textcolor{comment}{#     for obs in self.\_node\_to\_observations[agent\_id]:}
4475             \textcolor{comment}{#         if obs['caller'] == 'say' and self.npc\_say\_respond:}
4476             \textcolor{comment}{#             # TODO make a property of model agents rather than}
4477             \textcolor{comment}{#             # manually present in the graph engine}
4478             \textcolor{comment}{#             actor = obs['actors'][0]}
4479             \textcolor{comment}{#             listeners = obs['present\_agent\_ids']}
4480             \textcolor{comment}{#             name\_guess = ' '.join(agent\_id.split('\_')[:-1])}
4481             \textcolor{comment}{#             content\_words = obs['content'].split(' ')}
4482             \textcolor{comment}{#             resp\_confidence = 1 / (len(listeners)-1)}
4483             \textcolor{comment}{#             if self.\_last\_tell\_target[actor] == agent\_id:}
4484             \textcolor{comment}{#                 resp\_confidence += 0.5}
4485             \textcolor{comment}{#}
4486             \textcolor{comment}{#             # Filter out the name from the word list if its there}
4487             \textcolor{comment}{#             fin\_content = []}
4488             \textcolor{comment}{#             for word in content\_words:}
4489             \textcolor{comment}{#                 stripped = word.replace('.', '').replace('?', '')}
4490             \textcolor{comment}{#                 if stripped == name\_guess:}
4491             \textcolor{comment}{#                     resp\_confidence += 0.8}
4492             \textcolor{comment}{#                 else:}
4493             \textcolor{comment}{#                     fin\_content.append(stripped)}
4494             \textcolor{comment}{#}
4495             \textcolor{comment}{#             # Talk if it makes sense to}
4496             \textcolor{comment}{#             if resp\_confidence > 0.9:}
4497             \textcolor{comment}{#                 obs = obs.copy()}
4498             \textcolor{comment}{#                 args = [}
4499             \textcolor{comment}{#                     obs['actors'][0],}
4500             \textcolor{comment}{#                     agent\_id,}
4501             \textcolor{comment}{#                     ' '.join(fin\_content)}
4502             \textcolor{comment}{#                 ]}
4503             \textcolor{comment}{#                 self.\_last\_tell\_target[actor] = agent\_id}
4504             \textcolor{comment}{#                 # Callbacks.handle\_callbacks(}
4505             \textcolor{comment}{#                 #     TellFunction(), self, args)}
4506             self.get\_text(agent\_id)
4507             did\_hit = \textcolor{keyword}{False}
4508             possible\_agents = self.\_node\_contains[self.room(agent\_id)]
4509             \textcolor{keywordflow}{for} other\_agent\_id \textcolor{keywordflow}{in} possible\_agents:
4510                 \textcolor{keywordflow}{if} self.get\_prop(other\_agent\_id, \textcolor{stringliteral}{'is\_player'}):
4511                     aggression = self.get\_prop(agent\_id, \textcolor{stringliteral}{'aggression'}, 0)
4512                     \textcolor{keywordflow}{if} random.randint(0, 100) < aggression:
4513                         act = \textcolor{stringliteral}{'hit \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(other\_agent\_id)
4514                         self.parse\_exec(agent\_id, act)
4515                         did\_hit = \textcolor{keyword}{True}
4516             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} did\_hit:
4517                 \textcolor{comment}{# random movement for npcs..}
4518                 \textcolor{keywordflow}{if} random.randint(0, 100) < self.get\_prop(agent\_id, \textcolor{stringliteral}{'speed'}):
4519                     cur\_loc = self.room(agent\_id)
4520                     locs = self.node\_path\_to(cur\_loc)
4521                     loc = locs[random.randint(0, len(locs) - 1)]
4522                     act = \textcolor{stringliteral}{'go '} + self.node\_to\_desc\_raw(loc, from\_id=cur\_loc)
4523                     self.parse\_exec(agent\_id, act)
4524 \end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_accd7dfd84e4f2bee3fc3fbac8d8577cd}\label{classlight__chats_1_1graph_1_1Graph_accd7dfd84e4f2bee3fc3fbac8d8577cd}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!valid\+\_\+exec@{valid\+\_\+exec}}
\index{valid\+\_\+exec@{valid\+\_\+exec}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{valid\+\_\+exec()}{valid\_exec()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+valid\+\_\+exec (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agentid,  }\item[{}]{inst = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 4365 of file graph.\+py.


\begin{DoxyCode}
4365     \textcolor{keyword}{def }valid\_exec(self, agentid, inst=None):
4366         \textcolor{keywordflow}{if} inst \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
4367             inst = agentid
4368             agentid = \textcolor{stringliteral}{'dragon'}
4369 
4370         \textcolor{keywordflow}{if} self.get\_prop(agentid, \textcolor{stringliteral}{'dead'}):
4371             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
4372 
4373         inst, symb\_points = self.parse(inst)
4374         inst[0] = inst[0].lower()
4375 
4376         \textcolor{keywordflow}{if} len(inst) == 1 \textcolor{keywordflow}{and} (inst[0] == \textcolor{stringliteral}{'help'}):
4377             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
4378 
4379         \textcolor{keywordflow}{if} inst[0] \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} GRAPH\_FUNCTIONS.keys():
4380             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
4381 
4382         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(symb\_points) - 1):
4383             j, k = symb\_points[i], symb\_points[i + 1]
4384             params = inst[j + 1 : k]
4385             \textcolor{keywordflow}{if} inst[j].lower() \textcolor{keywordflow}{in} GRAPH\_FUNCTIONS.keys():
4386                 func\_wrap = GRAPH\_FUNCTIONS[inst[j].lower()]
4387                 valid, args, \_canon\_args = func\_wrap.parse\_text\_to\_args(
4388                     self, agentid, params
4389                 )
4390                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} valid:
4391                     \textcolor{keywordflow}{return} \textcolor{keyword}{False}
4392             \textcolor{keywordflow}{else}:
4393                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}
4394         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
4395 
\end{DoxyCode}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a7094a23385f250b9ea06d07c515ad14c}\label{classlight__chats_1_1graph_1_1Graph_a7094a23385f250b9ea06d07c515ad14c}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!version@{version}}
\index{version@{version}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{version()}{version()}}
{\footnotesize\ttfamily def light\+\_\+chats.\+graph.\+Graph.\+version (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 2939 of file graph.\+py.


\begin{DoxyCode}
2939     \textcolor{keyword}{def }\hyperlink{namespaceconf_ade15c5b54093b64d7c428ec19ca5b1cb}{version}(self):
2940         \textcolor{keywordflow}{return} 3
2941 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a2bd5d1191b6a64402e7bb1f992516265}\label{classlight__chats_1_1graph_1_1Graph_a2bd5d1191b6a64402e7bb1f992516265}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!agent\+\_\+ids@{agent\+\_\+ids}}
\index{agent\+\_\+ids@{agent\+\_\+ids}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{agent\+\_\+ids}{agent\_ids}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph.\+agent\+\_\+ids}



Definition at line 2900 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a95a1a4d31dbd607eebd593579b2d6cdd}\label{classlight__chats_1_1graph_1_1Graph_a95a1a4d31dbd607eebd593579b2d6cdd}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!callbacks@{callbacks}}
\index{callbacks@{callbacks}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{callbacks}{callbacks}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph.\+callbacks}



Definition at line 2816 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a79bd1a69e214458644ecf74d218e476c}\label{classlight__chats_1_1graph_1_1Graph_a79bd1a69e214458644ecf74d218e476c}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!container\+\_\+ids@{container\+\_\+ids}}
\index{container\+\_\+ids@{container\+\_\+ids}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{container\+\_\+ids}{container\_ids}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph.\+container\+\_\+ids}



Definition at line 2899 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_ad461dca41746ab79ffdaf70f6a9b25c4}\label{classlight__chats_1_1graph_1_1Graph_ad461dca41746ab79ffdaf70f6a9b25c4}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!npc\+\_\+say\+\_\+respond@{npc\+\_\+say\+\_\+respond}}
\index{npc\+\_\+say\+\_\+respond@{npc\+\_\+say\+\_\+respond}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{npc\+\_\+say\+\_\+respond}{npc\_say\_respond}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph.\+npc\+\_\+say\+\_\+respond}



Definition at line 2876 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a8ac9ab3b5c6208e0df9b28d436c7c425}\label{classlight__chats_1_1graph_1_1Graph_a8ac9ab3b5c6208e0df9b28d436c7c425}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!object\+\_\+ids@{object\+\_\+ids}}
\index{object\+\_\+ids@{object\+\_\+ids}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{object\+\_\+ids}{object\_ids}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph.\+object\+\_\+ids}



Definition at line 2898 of file graph.\+py.

\mbox{\Hypertarget{classlight__chats_1_1graph_1_1Graph_a29a00f3191fb45f73bd784ed12cc2c2e}\label{classlight__chats_1_1graph_1_1Graph_a29a00f3191fb45f73bd784ed12cc2c2e}} 
\index{light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}!variables@{variables}}
\index{variables@{variables}!light\+\_\+chats\+::graph\+::\+Graph@{light\+\_\+chats\+::graph\+::\+Graph}}
\subsubsection{\texorpdfstring{variables}{variables}}
{\footnotesize\ttfamily light\+\_\+chats.\+graph.\+Graph.\+variables}



Definition at line 2819 of file graph.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/tasks/light/light\+\_\+chats/\hyperlink{parlai_2mturk_2tasks_2light_2light__chats_2graph_8py}{graph.\+py}\end{DoxyCompactItemize}
