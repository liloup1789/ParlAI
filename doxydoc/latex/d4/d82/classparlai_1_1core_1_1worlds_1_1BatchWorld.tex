\hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld}{}\section{parlai.\+core.\+worlds.\+Batch\+World Class Reference}
\label{classparlai_1_1core_1_1worlds_1_1BatchWorld}\index{parlai.\+core.\+worlds.\+Batch\+World@{parlai.\+core.\+worlds.\+Batch\+World}}


Inheritance diagram for parlai.\+core.\+worlds.\+Batch\+World\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{dc/da5/classparlai_1_1core_1_1worlds_1_1BatchWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+core.\+worlds.\+Batch\+World\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{de/d17/classparlai_1_1core_1_1worlds_1_1BatchWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_ac479dd6a5843a2fcf30d8acc1accc6a6}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a75c0ed09cce56774c61c9f59b543ed88}{opt}, \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_ad7d651ac0fb1ee9b52ba7f134602e98e}{world})
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a01faab842dc28b580dcaeacee491c5f5}{batch\+\_\+observe} (self, index, batch\+\_\+actions, index\+\_\+acting)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a0bf69fe51e7eb0f8ba2fc3748c8c9181}{batch\+\_\+act} (self, agent\+\_\+idx, batch\+\_\+observation)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a297ab42faba47581774cd9333c874905}{parley} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a2b8dd323969084eedc03a7ab44647117}{display} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a047736ed3867bf7631af02f8eb0528d8}{num\+\_\+examples} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_ae3f96cd2de72eb0f333cb29bbf74177b}{num\+\_\+episodes} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_ae9aec5868c6870316b6f1983a1e5e0ae}{get\+\_\+total\+\_\+exs} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a995d9405ae22301e3ca46c43521b301a}{get\+ID} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a1fc7faff8ccc60606ccff891d36e6b86}{get\+\_\+agents} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_ab57e642368837b1a9ae79231ee213d46}{get\+\_\+task\+\_\+agent} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_aa3ef1275372635073ba5cba7df0d1f5d}{episode\+\_\+done} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a006891b1446ef6e593edda1c91cab809}{epoch\+\_\+done} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_af6ca90db5542bf4a74a122ea04ba8bef}{report} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a00ba541479129163a13a0377797504e1}{reset} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a16a31209d87f0f9bf27871110bd63aa6}{reset\+\_\+metrics} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a84ee0ac53e07cbfc9bdb8a978a8df7e1}{save\+\_\+agents} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_ad351080076e31498e14789beddf6fea6}{shutdown} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a75c0ed09cce56774c61c9f59b543ed88}{opt}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a27b70249faa0bbe4bdff806a3f31ec13}{random}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_ad7d651ac0fb1ee9b52ba7f134602e98e}{world}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_ae1b967d3229b90064ff50c1a55dc2b96}{worlds}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a6f13286dedb14f257e043339b543cdeb}{batch\+\_\+observations}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a7cae7f1a21fbe52133bf9e75a4a3b673}{first\+\_\+batch}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1BatchWorld_a89bd00f625520bf66dda7d113cf0b40e}{acts}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}BatchWorld contains many copies of the same world.

Create a separate world for each item in the batch, sharing
the parameters for each.

The underlying world(s) it is batching can be either
``DialogPartnerWorld``, ``MultiAgentWorld``, ``ExecutableWorld`` or
``MultiWorld``.
\end{DoxyVerb}
 

Definition at line 750 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_ac479dd6a5843a2fcf30d8acc1accc6a6}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_ac479dd6a5843a2fcf30d8acc1accc6a6}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{world }\end{DoxyParamCaption})}



Definition at line 762 of file worlds.\+py.


\begin{DoxyCode}
762     \textcolor{keyword}{def }\_\_init\_\_(self, opt, world):
763         super().\_\_init\_\_(opt)
764         self.opt = opt
765         self.random = opt.get(\textcolor{stringliteral}{'datatype'}, \textcolor{keywordtype}{None}) == \textcolor{stringliteral}{'train'}
766         self.world = world
767         self.worlds = []
768         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(opt[\textcolor{stringliteral}{'batchsize'}]):
769             \textcolor{comment}{# make sure that any opt dicts in shared have batchindex set to i}
770             \textcolor{comment}{# this lets all shared agents know which batchindex they have,}
771             \textcolor{comment}{# which is needed for ordered data (esp valid/test sets)}
772             shared = world.share()
773             shared[\textcolor{stringliteral}{'batchindex'}] = i
774             \textcolor{keywordflow}{for} agent\_shared \textcolor{keywordflow}{in} shared.get(\textcolor{stringliteral}{'agents'}, \textcolor{stringliteral}{''}):
775                 agent\_shared[\textcolor{stringliteral}{'batchindex'}] = i
776             \textcolor{comment}{# TODO: deprecate override\_opts}
777             \_override\_opts\_in\_shared(shared, \{\textcolor{stringliteral}{'batchindex'}: i\})
778             self.worlds.append(shared[\textcolor{stringliteral}{'world\_class'}](opt, \textcolor{keywordtype}{None}, shared))
779         self.batch\_observations = [\textcolor{keywordtype}{None}] * len(self.world.get\_agents())
780         self.first\_batch = \textcolor{keywordtype}{None}
781         self.acts = [\textcolor{keywordtype}{None}] * len(self.world.get\_agents())
782 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a0bf69fe51e7eb0f8ba2fc3748c8c9181}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a0bf69fe51e7eb0f8ba2fc3748c8c9181}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!batch\+\_\+act@{batch\+\_\+act}}
\index{batch\+\_\+act@{batch\+\_\+act}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{batch\+\_\+act()}{batch\_act()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+batch\+\_\+act (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{agent\+\_\+idx,  }\item[{}]{batch\+\_\+observation }\end{DoxyParamCaption})}

\begin{DoxyVerb}Act in all subworlds.
\end{DoxyVerb}
 

Definition at line 809 of file worlds.\+py.


\begin{DoxyCode}
809     \textcolor{keyword}{def }batch\_act(self, agent\_idx, batch\_observation):
810         \textcolor{stringliteral}{"""}
811 \textcolor{stringliteral}{        Act in all subworlds.}
812 \textcolor{stringliteral}{        """}
813         \textcolor{comment}{# Given batch observation, do update for agents[index].}
814         \textcolor{comment}{# Call update on agent}
815         a = self.world.get\_agents()[agent\_idx]
816         \textcolor{keywordflow}{if} hasattr(a, \textcolor{stringliteral}{'batch\_act'}) \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} (
817             hasattr(a, \textcolor{stringliteral}{'use\_batch\_act'}) \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} a.use\_batch\_act
818         ):
819             batch\_actions = a.batch\_act(batch\_observation)
820             \textcolor{comment}{# Store the actions locally in each world.}
821             \textcolor{keywordflow}{for} i, w \textcolor{keywordflow}{in} enumerate(self.worlds):
822                 acts = w.get\_acts()
823                 acts[agent\_idx] = batch\_actions[i]
824         \textcolor{keywordflow}{else}:
825             \textcolor{comment}{# Reverts to running on each individually.}
826             batch\_actions = []
827             \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds:
828                 agents = w.get\_agents()
829                 acts = w.get\_acts()
830                 acts[agent\_idx] = agents[agent\_idx].act()
831                 batch\_actions.append(acts[agent\_idx])
832         \textcolor{keywordflow}{return} batch\_actions
833 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a01faab842dc28b580dcaeacee491c5f5}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a01faab842dc28b580dcaeacee491c5f5}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!batch\+\_\+observe@{batch\+\_\+observe}}
\index{batch\+\_\+observe@{batch\+\_\+observe}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{batch\+\_\+observe()}{batch\_observe()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+batch\+\_\+observe (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{index,  }\item[{}]{batch\+\_\+actions,  }\item[{}]{index\+\_\+acting }\end{DoxyParamCaption})}

\begin{DoxyVerb}Observe corresponding actions in all subworlds.
\end{DoxyVerb}
 

Definition at line 783 of file worlds.\+py.


\begin{DoxyCode}
783     \textcolor{keyword}{def }batch\_observe(self, index, batch\_actions, index\_acting):
784         \textcolor{stringliteral}{"""}
785 \textcolor{stringliteral}{        Observe corresponding actions in all subworlds.}
786 \textcolor{stringliteral}{        """}
787         batch\_observations = []
788         \textcolor{keywordflow}{for} i, w \textcolor{keywordflow}{in} enumerate(self.worlds):
789             agents = w.get\_agents()
790             observation = \textcolor{keywordtype}{None}
791             \textcolor{keywordflow}{if} batch\_actions[i] \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
792                 \textcolor{comment}{# shouldn't send None, should send empty observations}
793                 batch\_actions[i] = [\{\}] * len(self.worlds)
794             \textcolor{keywordflow}{if} hasattr(w, \textcolor{stringliteral}{'observe'}):
795                 \textcolor{comment}{# The world has its own observe function, which the action}
796                 \textcolor{comment}{# first goes through (agents receive messages via the world,}
797                 \textcolor{comment}{# not from each other).}
798                 observation = w.observe(agents[index], \hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(batch\_actions[i]))
799             \textcolor{keywordflow}{else}:
800                 \textcolor{keywordflow}{if} index == index\_acting:
801                     \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}  \textcolor{comment}{# don't observe yourself talking}
802                 observation = \hyperlink{namespaceparlai_1_1core_1_1worlds_afc3fad603b7bce41dbdc9cdc04a9c794}{validate}(batch\_actions[i])
803             observation = agents[index].observe(observation)
804             \textcolor{keywordflow}{if} observation \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
805                 \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{'Agents should return what they observed.'})
806             batch\_observations.append(observation)
807         \textcolor{keywordflow}{return} batch\_observations
808 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a2b8dd323969084eedc03a7ab44647117}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a2b8dd323969084eedc03a7ab44647117}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!display@{display}}
\index{display@{display}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{display()}{display()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+display (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Display the full batch.
\end{DoxyVerb}
 

Definition at line 864 of file worlds.\+py.


\begin{DoxyCode}
864     \textcolor{keyword}{def }display(self):
865         \textcolor{stringliteral}{"""}
866 \textcolor{stringliteral}{        Display the full batch.}
867 \textcolor{stringliteral}{        """}
868         s = \textcolor{stringliteral}{"[--batchsize "} + \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(len(self.worlds)) + \textcolor{stringliteral}{"--]\(\backslash\)n"}
869         \textcolor{keywordflow}{for} i, w \textcolor{keywordflow}{in} enumerate(self.worlds):
870             s += \textcolor{stringliteral}{"[batch world "} + \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(i) + \textcolor{stringliteral}{":]\(\backslash\)n"}
871             s += w.display() + \textcolor{stringliteral}{'\(\backslash\)n'}
872         s += \textcolor{stringliteral}{"[--end of batch--]"}
873         \textcolor{keywordflow}{return} s
874 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_aa3ef1275372635073ba5cba7df0d1f5d}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_aa3ef1275372635073ba5cba7df0d1f5d}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!episode\+\_\+done@{episode\+\_\+done}}
\index{episode\+\_\+done@{episode\+\_\+done}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{episode\+\_\+done()}{episode\_done()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+episode\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return whether the episode is done.

A batch world is never finished, so this always returns `False`.
\end{DoxyVerb}
 

Definition at line 911 of file worlds.\+py.


\begin{DoxyCode}
911     \textcolor{keyword}{def }episode\_done(self):
912         \textcolor{stringliteral}{"""}
913 \textcolor{stringliteral}{        Return whether the episode is done.}
914 \textcolor{stringliteral}{}
915 \textcolor{stringliteral}{        A batch world is never finished, so this always returns `False`.}
916 \textcolor{stringliteral}{        """}
917         \textcolor{keywordflow}{return} \textcolor{keyword}{False}
918 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a006891b1446ef6e593edda1c91cab809}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a006891b1446ef6e593edda1c91cab809}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!epoch\+\_\+done@{epoch\+\_\+done}}
\index{epoch\+\_\+done@{epoch\+\_\+done}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{epoch\+\_\+done()}{epoch\_done()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+epoch\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return if the epoch is done in the root world.
\end{DoxyVerb}
 

Definition at line 919 of file worlds.\+py.


\begin{DoxyCode}
919     \textcolor{keyword}{def }epoch\_done(self):
920         \textcolor{stringliteral}{"""}
921 \textcolor{stringliteral}{        Return if the epoch is done in the root world.}
922 \textcolor{stringliteral}{        """}
923         \textcolor{comment}{# first check parent world: if it says it's done, we're done}
924         \textcolor{keywordflow}{if} self.world.epoch\_done():
925             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
926         \textcolor{comment}{# otherwise check if all shared worlds are done}
927         \textcolor{keywordflow}{for} world \textcolor{keywordflow}{in} self.worlds:
928             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} world.epoch\_done():
929                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}
930         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
931 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a1fc7faff8ccc60606ccff891d36e6b86}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a1fc7faff8ccc60606ccff891d36e6b86}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!get\+\_\+agents@{get\+\_\+agents}}
\index{get\+\_\+agents@{get\+\_\+agents}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{get\+\_\+agents()}{get\_agents()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+get\+\_\+agents (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the agents of the root world.
\end{DoxyVerb}
 

Definition at line 899 of file worlds.\+py.


\begin{DoxyCode}
899     \textcolor{keyword}{def }get\_agents(self):
900         \textcolor{stringliteral}{"""}
901 \textcolor{stringliteral}{        Return the agents of the root world.}
902 \textcolor{stringliteral}{        """}
903         \textcolor{keywordflow}{return} self.world.get\_agents()
904 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_ab57e642368837b1a9ae79231ee213d46}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_ab57e642368837b1a9ae79231ee213d46}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!get\+\_\+task\+\_\+agent@{get\+\_\+task\+\_\+agent}}
\index{get\+\_\+task\+\_\+agent@{get\+\_\+task\+\_\+agent}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{get\+\_\+task\+\_\+agent()}{get\_task\_agent()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+get\+\_\+task\+\_\+agent (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return task agent of the root world.
\end{DoxyVerb}
 

Definition at line 905 of file worlds.\+py.


\begin{DoxyCode}
905     \textcolor{keyword}{def }get\_task\_agent(self):
906         \textcolor{stringliteral}{"""}
907 \textcolor{stringliteral}{        Return task agent of the root world.}
908 \textcolor{stringliteral}{        """}
909         \textcolor{keywordflow}{return} self.world.get\_task\_agent()
910 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_ae9aec5868c6870316b6f1983a1e5e0ae}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_ae9aec5868c6870316b6f1983a1e5e0ae}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!get\+\_\+total\+\_\+exs@{get\+\_\+total\+\_\+exs}}
\index{get\+\_\+total\+\_\+exs@{get\+\_\+total\+\_\+exs}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{get\+\_\+total\+\_\+exs()}{get\_total\_exs()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+get\+\_\+total\+\_\+exs (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the total number of processed episodes in the root world.
\end{DoxyVerb}
 

Definition at line 887 of file worlds.\+py.


\begin{DoxyCode}
887     \textcolor{keyword}{def }get\_total\_exs(self):
888         \textcolor{stringliteral}{"""}
889 \textcolor{stringliteral}{        Return the total number of processed episodes in the root world.}
890 \textcolor{stringliteral}{        """}
891         \textcolor{keywordflow}{return} self.world.get\_total\_exs()
892 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a995d9405ae22301e3ca46c43521b301a}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a995d9405ae22301e3ca46c43521b301a}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!get\+ID@{get\+ID}}
\index{get\+ID@{get\+ID}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{get\+I\+D()}{getID()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+get\+ID (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the ID of the root world.
\end{DoxyVerb}
 

Definition at line 893 of file worlds.\+py.


\begin{DoxyCode}
893     \textcolor{keyword}{def }getID(self):
894         \textcolor{stringliteral}{"""}
895 \textcolor{stringliteral}{        Return the ID of the root world.}
896 \textcolor{stringliteral}{        """}
897         \textcolor{keywordflow}{return} self.world.getID()
898 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_ae3f96cd2de72eb0f333cb29bbf74177b}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_ae3f96cd2de72eb0f333cb29bbf74177b}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!num\+\_\+episodes@{num\+\_\+episodes}}
\index{num\+\_\+episodes@{num\+\_\+episodes}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{num\+\_\+episodes()}{num\_episodes()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+num\+\_\+episodes (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the number of episodes for the root world.
\end{DoxyVerb}
 

Definition at line 881 of file worlds.\+py.


\begin{DoxyCode}
881     \textcolor{keyword}{def }num\_episodes(self):
882         \textcolor{stringliteral}{"""}
883 \textcolor{stringliteral}{        Return the number of episodes for the root world.}
884 \textcolor{stringliteral}{        """}
885         \textcolor{keywordflow}{return} self.world.num\_episodes()
886 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a047736ed3867bf7631af02f8eb0528d8}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a047736ed3867bf7631af02f8eb0528d8}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!num\+\_\+examples@{num\+\_\+examples}}
\index{num\+\_\+examples@{num\+\_\+examples}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{num\+\_\+examples()}{num\_examples()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+num\+\_\+examples (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the number of examples for the root world.
\end{DoxyVerb}
 

Definition at line 875 of file worlds.\+py.


\begin{DoxyCode}
875     \textcolor{keyword}{def }num\_examples(self):
876         \textcolor{stringliteral}{"""}
877 \textcolor{stringliteral}{        Return the number of examples for the root world.}
878 \textcolor{stringliteral}{        """}
879         \textcolor{keywordflow}{return} self.world.num\_examples()
880 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a297ab42faba47581774cd9333c874905}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a297ab42faba47581774cd9333c874905}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!parley@{parley}}
\index{parley@{parley}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{parley()}{parley()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+parley (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Parley in all subworlds.

Usually with ref:`batch_act` and ref:`batch_observe`.
\end{DoxyVerb}
 

Definition at line 834 of file worlds.\+py.


\begin{DoxyCode}
834     \textcolor{keyword}{def }parley(self):
835         \textcolor{stringliteral}{"""}
836 \textcolor{stringliteral}{        Parley in all subworlds.}
837 \textcolor{stringliteral}{}
838 \textcolor{stringliteral}{        Usually with ref:`batch\_act` and ref:`batch\_observe`.}
839 \textcolor{stringliteral}{        """}
840         \textcolor{comment}{# Collect batch together for each agent, and do update.}
841         \textcolor{comment}{# Assumes DialogPartnerWorld, MultiAgentWorld, or MultiWorlds of them.}
842         num\_agents = len(self.world.get\_agents())
843         batch\_observations = self.batch\_observations
844 
845         \textcolor{keywordflow}{if} hasattr(self.world, \textcolor{stringliteral}{'parley\_init'}):
846             \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds:
847                 w.parley\_init()
848 
849         \textcolor{keywordflow}{for} agent\_idx \textcolor{keywordflow}{in} range(num\_agents):
850             \textcolor{comment}{# The agent acts.}
851             batch\_act = self.batch\_act(agent\_idx, batch\_observations[agent\_idx])
852             self.acts[agent\_idx] = batch\_act
853             \textcolor{comment}{# We possibly execute this action in the world.}
854             \textcolor{keywordflow}{if} hasattr(self.world, \textcolor{stringliteral}{'execute'}):
855                 \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds:
856                     w.execute(w.agents[agent\_idx], batch\_act[agent\_idx])
857             \textcolor{comment}{# All agents (might) observe the results.}
858             \textcolor{keywordflow}{for} other\_index \textcolor{keywordflow}{in} range(num\_agents):
859                 obs = self.batch\_observe(other\_index, batch\_act, agent\_idx)
860                 \textcolor{keywordflow}{if} obs \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
861                     batch\_observations[other\_index] = obs
862         self.update\_counters()
863 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_af6ca90db5542bf4a74a122ea04ba8bef}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_af6ca90db5542bf4a74a122ea04ba8bef}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!report@{report}}
\index{report@{report}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{report()}{report()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+report (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Report metrics for the root world.
\end{DoxyVerb}
 

Definition at line 932 of file worlds.\+py.


\begin{DoxyCode}
932     \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1convai2_1_1eval__f1_a01a47b9c08dad189837a51f085defc45}{report}(self):
933         \textcolor{stringliteral}{"""}
934 \textcolor{stringliteral}{        Report metrics for the root world.}
935 \textcolor{stringliteral}{        """}
936         \textcolor{keywordflow}{return} self.world.\hyperlink{namespaceprojects_1_1convai2_1_1eval__f1_a01a47b9c08dad189837a51f085defc45}{report}()
937 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a00ba541479129163a13a0377797504e1}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a00ba541479129163a13a0377797504e1}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!reset@{reset}}
\index{reset@{reset}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+reset (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset the root world, and all copies.
\end{DoxyVerb}
 

Definition at line 938 of file worlds.\+py.


\begin{DoxyCode}
938     \textcolor{keyword}{def }reset(self):
939         \textcolor{stringliteral}{"""}
940 \textcolor{stringliteral}{        Reset the root world, and all copies.}
941 \textcolor{stringliteral}{        """}
942         self.world.reset()
943         \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds:
944             w.reset()
945 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a16a31209d87f0f9bf27871110bd63aa6}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a16a31209d87f0f9bf27871110bd63aa6}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!reset\+\_\+metrics@{reset\+\_\+metrics}}
\index{reset\+\_\+metrics@{reset\+\_\+metrics}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{reset\+\_\+metrics()}{reset\_metrics()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+reset\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset metrics in the root world.
\end{DoxyVerb}
 

Definition at line 946 of file worlds.\+py.


\begin{DoxyCode}
946     \textcolor{keyword}{def }reset\_metrics(self):
947         \textcolor{stringliteral}{"""}
948 \textcolor{stringliteral}{        Reset metrics in the root world.}
949 \textcolor{stringliteral}{        """}
950         self.world.reset\_metrics()
951 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a84ee0ac53e07cbfc9bdb8a978a8df7e1}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a84ee0ac53e07cbfc9bdb8a978a8df7e1}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!save\+\_\+agents@{save\+\_\+agents}}
\index{save\+\_\+agents@{save\+\_\+agents}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{save\+\_\+agents()}{save\_agents()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+save\+\_\+agents (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save the agents in the root world.
\end{DoxyVerb}
 

Definition at line 952 of file worlds.\+py.


\begin{DoxyCode}
952     \textcolor{keyword}{def }save\_agents(self):
953         \textcolor{stringliteral}{"""}
954 \textcolor{stringliteral}{        Save the agents in the root world.}
955 \textcolor{stringliteral}{        """}
956         \textcolor{comment}{# Because all worlds share the same parameters through sharing, saving}
957         \textcolor{comment}{# one copy would suffice}
958         self.world.save\_agents()
959 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_ad351080076e31498e14789beddf6fea6}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_ad351080076e31498e14789beddf6fea6}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Batch\+World.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Shutdown each world.
\end{DoxyVerb}
 

Definition at line 960 of file worlds.\+py.


\begin{DoxyCode}
960     \textcolor{keyword}{def }shutdown(self):
961         \textcolor{stringliteral}{"""}
962 \textcolor{stringliteral}{        Shutdown each world.}
963 \textcolor{stringliteral}{        """}
964         \textcolor{keywordflow}{for} w \textcolor{keywordflow}{in} self.worlds:
965             w.shutdown()
966         self.world.shutdown()
967 
968 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a89bd00f625520bf66dda7d113cf0b40e}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a89bd00f625520bf66dda7d113cf0b40e}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!acts@{acts}}
\index{acts@{acts}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{acts}{acts}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Batch\+World.\+acts}



Definition at line 781 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a6f13286dedb14f257e043339b543cdeb}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a6f13286dedb14f257e043339b543cdeb}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!batch\+\_\+observations@{batch\+\_\+observations}}
\index{batch\+\_\+observations@{batch\+\_\+observations}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{batch\+\_\+observations}{batch\_observations}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Batch\+World.\+batch\+\_\+observations}



Definition at line 779 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a7cae7f1a21fbe52133bf9e75a4a3b673}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a7cae7f1a21fbe52133bf9e75a4a3b673}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!first\+\_\+batch@{first\+\_\+batch}}
\index{first\+\_\+batch@{first\+\_\+batch}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{first\+\_\+batch}{first\_batch}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Batch\+World.\+first\+\_\+batch}



Definition at line 780 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a75c0ed09cce56774c61c9f59b543ed88}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a75c0ed09cce56774c61c9f59b543ed88}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!opt@{opt}}
\index{opt@{opt}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Batch\+World.\+opt}



Definition at line 764 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_a27b70249faa0bbe4bdff806a3f31ec13}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_a27b70249faa0bbe4bdff806a3f31ec13}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!random@{random}}
\index{random@{random}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{random}{random}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Batch\+World.\+random}



Definition at line 765 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_ad7d651ac0fb1ee9b52ba7f134602e98e}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_ad7d651ac0fb1ee9b52ba7f134602e98e}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!world@{world}}
\index{world@{world}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{world}{world}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Batch\+World.\+world}



Definition at line 766 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1BatchWorld_ae1b967d3229b90064ff50c1a55dc2b96}\label{classparlai_1_1core_1_1worlds_1_1BatchWorld_ae1b967d3229b90064ff50c1a55dc2b96}} 
\index{parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}!worlds@{worlds}}
\index{worlds@{worlds}!parlai\+::core\+::worlds\+::\+Batch\+World@{parlai\+::core\+::worlds\+::\+Batch\+World}}
\subsubsection{\texorpdfstring{worlds}{worlds}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Batch\+World.\+worlds}



Definition at line 767 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/core/\hyperlink{parlai_2core_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
