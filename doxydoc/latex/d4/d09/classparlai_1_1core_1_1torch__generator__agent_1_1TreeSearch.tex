\hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch}{}\section{parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search Class Reference}
\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch}\index{parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search@{parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search}}


Inheritance diagram for parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/dc8/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=212pt]{d5/d27/classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a3462e30fc27b2a215773a38cf09f6b46}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a2381c33e5233a5f5c1e50c65ab0ee572}{beam\+\_\+size}, \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a6b27ba18a5e343345ab7319f2ead843d}{block\+\_\+ngram}=-\/1, \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_ab1411b1cb22d74f4682213c487d23898}{context\+\_\+block\+\_\+ngram}=-\/1, padding\+\_\+token=0, bos\+\_\+token=1, eos\+\_\+token=2, \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a71d6802f40cf025cd5c0242070d78b62}{min\+\_\+length}=3, \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a37b3f7f827909e3aa2d8e35c32c41e81}{device}=\textquotesingle{}cpu\textquotesingle{})
\item 
def \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a4706cbec7117a8a2696774c044fc0729}{set\+\_\+context}
\item 
def \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a929ecbf60f149968caae5a0a6908d67a}{get\+\_\+output\+\_\+from\+\_\+current\+\_\+step} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aced42f37b580f876286b5075ba188b2a}{get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a004609539d0428a9351a991168eb370b}{select\+\_\+paths} (self, logprobs, prior\+\_\+scores)
\item 
def \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a9f371e57095af5b22ff5eae4c57326c8}{advance} (self, logprobs)
\item 
def \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a35a3cbfe2df2d02bb46f7e492657afa5}{is\+\_\+done} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a4b70f85eec7d81b3a0e1afaea5b09332}{get\+\_\+rescored\+\_\+finished} (self, n\+\_\+best=None)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a2381c33e5233a5f5c1e50c65ab0ee572}{beam\+\_\+size}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a6b27ba18a5e343345ab7319f2ead843d}{block\+\_\+ngram}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a71d6802f40cf025cd5c0242070d78b62}{min\+\_\+length}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a51a1164086e9033c942b3c7ab3d6a194}{eos}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aaef8214c017d387336317a37f395df3c}{bos}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aa00f03954e2bf737b13d1b43a609fb00}{pad}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a6617873218cb0975d7e5f04f09379ac6}{context}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_ab1411b1cb22d74f4682213c487d23898}{context\+\_\+block\+\_\+ngram}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a37b3f7f827909e3aa2d8e35c32c41e81}{device}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a07cf31c1808301e5b4d1d0ef128c5948}{scores}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_ac9e79a3effa48d2e35ac879620cd639e}{all\+\_\+scores}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a1f1f3da5f6079f5043d28e72b2a6fdfa}{bookkeep}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aae65afe3c0c8855e9a54ba44bf7209ce}{outputs}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_ab2d79d6023881123b8960356243692d9}{finished}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a5b7078c44965d7a9d54250149d164c8f}{eos\+\_\+top}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a0a1eb3fae74a9b2edbb54cc4162878af}{eos\+\_\+top\+\_\+ts}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a2b64a54420c470d50e389cdaacde4933}{n\+\_\+best\+\_\+counter}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a159f5589fdfea9a040c4c1ca5c14ea2c}{partial\+\_\+hyps}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aeeed17550050be7b86c9e238b9df66e5}{source\+\_\+}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aa9b00008fefdb77e7701ddbfc1865919}{ngrams}
\item 
\hyperlink{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a2845139bf44df2fa8428565cd7558ce2}{prefix}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Abstract Tree Search class.

It keeps information about beam_size concurrent, developing hypotheses. Concrete
implementations make choices about which token to explore next at each point in the
tree. Different choices result in different generation algorithms.
\end{DoxyVerb}
 

Definition at line 990 of file torch\+\_\+generator\+\_\+agent.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a3462e30fc27b2a215773a38cf09f6b46}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a3462e30fc27b2a215773a38cf09f6b46}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{beam\+\_\+size,  }\item[{}]{block\+\_\+ngram = {\ttfamily -\/1},  }\item[{}]{context\+\_\+block\+\_\+ngram = {\ttfamily -\/1},  }\item[{}]{padding\+\_\+token = {\ttfamily 0},  }\item[{}]{bos\+\_\+token = {\ttfamily 1},  }\item[{}]{eos\+\_\+token = {\ttfamily 2},  }\item[{}]{min\+\_\+length = {\ttfamily 3},  }\item[{}]{device = {\ttfamily \textquotesingle{}cpu\textquotesingle{}} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Instantiate Beam object.

:param beam_size:
    number of hypothesis in the beam
:param block_ngram:
    size of ngrams to block.
:param context_block_ngram:
    size of context ngrams to block
:param context_block_ngram:
    size of context ngrams to block

:param padding_token:
    padding token ID
:param bos_token:
    beginning of sentence token ID
:param eos_token:
    end of sentence token ID
:param min_length:
    minimum length of the predicted sequence
:param device:
    What device to use for computations
\end{DoxyVerb}
 

Definition at line 1010 of file torch\+\_\+generator\+\_\+agent.\+py.


\begin{DoxyCode}
1010     ):
1011         \textcolor{stringliteral}{"""}
1012 \textcolor{stringliteral}{        Instantiate Beam object.}
1013 \textcolor{stringliteral}{}
1014 \textcolor{stringliteral}{        :param beam\_size:}
1015 \textcolor{stringliteral}{            number of hypothesis in the beam}
1016 \textcolor{stringliteral}{        :param block\_ngram:}
1017 \textcolor{stringliteral}{            size of ngrams to block.}
1018 \textcolor{stringliteral}{        :param context\_block\_ngram:}
1019 \textcolor{stringliteral}{            size of context ngrams to block}
1020 \textcolor{stringliteral}{        :param context\_block\_ngram:}
1021 \textcolor{stringliteral}{            size of context ngrams to block}
1022 \textcolor{stringliteral}{}
1023 \textcolor{stringliteral}{        :param padding\_token:}
1024 \textcolor{stringliteral}{            padding token ID}
1025 \textcolor{stringliteral}{        :param bos\_token:}
1026 \textcolor{stringliteral}{            beginning of sentence token ID}
1027 \textcolor{stringliteral}{        :param eos\_token:}
1028 \textcolor{stringliteral}{            end of sentence token ID}
1029 \textcolor{stringliteral}{        :param min\_length:}
1030 \textcolor{stringliteral}{            minimum length of the predicted sequence}
1031 \textcolor{stringliteral}{        :param device:}
1032 \textcolor{stringliteral}{            What device to use for computations}
1033 \textcolor{stringliteral}{        """}
1034         self.beam\_size = beam\_size
1035         self.block\_ngram = block\_ngram
1036         self.min\_length = min\_length
1037         self.eos = eos\_token
1038         self.bos = bos\_token
1039         self.pad = padding\_token
1040         self.context = \textcolor{keywordtype}{None}
1041         self.context\_block\_ngram = context\_block\_ngram
1042 
1043         self.device = device
1044         \textcolor{comment}{# recent score for each hypo in the beam}
1045         self.scores = \textcolor{keywordtype}{None}
1046         \textcolor{comment}{# self.scores values per each time step}
1047         self.all\_scores = [torch.Tensor([0.0] * beam\_size).to(self.device)]
1048         \textcolor{comment}{# backtracking id to hypothesis at previous time step}
1049         self.bookkeep = []
1050         \textcolor{comment}{# output tokens at each time step}
1051         self.outputs = [
1052             torch.Tensor(self.beam\_size).long().fill\_(self.bos).to(self.device)
1053         ]
1054         \textcolor{comment}{# keeps tuples (score, time\_step, hyp\_id)}
1055         self.finished = []
1056         self.eos\_top = \textcolor{keyword}{False}
1057         self.eos\_top\_ts = \textcolor{keywordtype}{None}
1058         self.n\_best\_counter = 0
1059         self.partial\_hyps = [[self.bos] \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(beam\_size)]
1060 
1061 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a9f371e57095af5b22ff5eae4c57326c8}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a9f371e57095af5b22ff5eae4c57326c8}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!advance@{advance}}
\index{advance@{advance}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{advance()}{advance()}}
{\footnotesize\ttfamily def parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+advance (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{logprobs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Advance the beam one step.
\end{DoxyVerb}
 

Definition at line 1138 of file torch\+\_\+generator\+\_\+agent.\+py.


\begin{DoxyCode}
1138     \textcolor{keyword}{def }advance(self, logprobs):
1139         \textcolor{stringliteral}{"""}
1140 \textcolor{stringliteral}{        Advance the beam one step.}
1141 \textcolor{stringliteral}{        """}
1142         current\_length = len(self.all\_scores) - 1
1143         \textcolor{keywordflow}{if} current\_length < self.min\_length:
1144             \textcolor{comment}{# penalize all eos probs to make it decode longer}
1145             \textcolor{keywordflow}{for} hyp\_id \textcolor{keywordflow}{in} range(logprobs.size(0)):
1146                 logprobs[hyp\_id][self.eos] = \hyperlink{namespaceparlai_1_1utils_1_1torch_a6c6e25115353dba479cd72dc31dc76ae}{neginf}(logprobs.dtype)
1147 
1148         \textcolor{keywordflow}{if} self.scores \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
1149             self.scores = torch.zeros(1).type\_as(logprobs).to(logprobs.device)
1150 
1151         \textcolor{comment}{# penalize hypotheses ending in EOS on the prior scores (self.scores) level}
1152         \textcolor{comment}{# this is related to search which uses prior scores (self.scores) (e.g. beam)}
1153         \textcolor{keywordflow}{for} hyp\_id, token \textcolor{keywordflow}{in} enumerate(self.outputs[-1]):
1154             \textcolor{keywordflow}{if} token == self.eos:
1155                 self.scores[hyp\_id] = \hyperlink{namespaceparlai_1_1utils_1_1torch_a6c6e25115353dba479cd72dc31dc76ae}{neginf}(self.scores.dtype)
1156 
1157         \textcolor{comment}{# beam blocking}
1158         \textcolor{keywordflow}{if} self.block\_ngram > 0:
1159 
1160             logprobs = self.\_block\_ngrams(self.block\_ngram, logprobs, \textcolor{keywordtype}{None})
1161 
1162         \textcolor{keywordflow}{if} self.context\_block\_ngram > 0:
1163             \textcolor{keywordflow}{if} self.context \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
1164                 \textcolor{keywordflow}{raise} ValueError(
1165                     \textcolor{stringliteral}{"Must use TreeSearch.set\_context to use context blocking."}
1166                 )
1167             logprobs = self.\_block\_ngrams(
1168                 self.context\_block\_ngram, logprobs, self.context
1169             )
1170             \textcolor{keywordflow}{for} beam\_id, hyp \textcolor{keywordflow}{in} enumerate(self.partial\_hyps):
1171                 \textcolor{keywordflow}{if} len(hyp) < self.block\_ngram - 1:
1172                     \textcolor{keywordflow}{continue}
1173                 ngrams = self.\_find\_ngrams(hyp, self.block\_ngram)
1174                 prefix = hyp[-(self.block\_ngram - 1) :]
1175                 \textcolor{keywordflow}{for} ngram \textcolor{keywordflow}{in} ngrams:
1176                     \textcolor{keywordflow}{if} prefix == list(ngram[:-1]) \textcolor{keywordflow}{or} self.block\_ngram == 1:
1177                         logprobs[beam\_id][ngram[-1]] = \hyperlink{namespaceparlai_1_1utils_1_1torch_a6c6e25115353dba479cd72dc31dc76ae}{neginf}(logprobs.dtype)
1178 
1179 
1180         hyp\_ids, tok\_ids, self.scores = self.select\_paths(logprobs, self.scores)
1181         \textcolor{comment}{# use clone() here to ensure that self.all\_scores will not be changed}
1182         \textcolor{comment}{# later due to any penalties to self.scores}
1183         self.all\_scores.append(self.scores.clone())
1184 
1185         self.outputs.append(tok\_ids)
1186         self.bookkeep.append(hyp\_ids)
1187         self.partial\_hyps = [
1188             self.partial\_hyps[hyp\_ids[i]] + [tok\_ids[i].item()]
1189             \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(self.beam\_size)
1190         ]
1191 
1192         \textcolor{comment}{#  check new hypos for eos label, if we have some, add to finished}
1193         \textcolor{keywordflow}{for} hypid \textcolor{keywordflow}{in} range(self.beam\_size):
1194             \textcolor{keywordflow}{if} self.outputs[-1][hypid] == self.eos:
1195                 \textcolor{keywordflow}{if} self.scores[hypid] == \hyperlink{namespaceparlai_1_1utils_1_1torch_a6c6e25115353dba479cd72dc31dc76ae}{neginf}(self.scores.dtype):
1196                     \textcolor{keywordflow}{continue}
1197                 \textcolor{comment}{#  this is finished hypo, adding to finished}
1198                 eostail = \_HypothesisTail(
1199                     timestep=len(self.outputs) - 1,
1200                     hypid=hypid,
1201                     score=self.all\_scores[-1][hypid],
1202                     tokenid=self.eos,
1203                 )
1204                 self.finished.append(eostail)
1205                 self.n\_best\_counter += 1
1206 
1207         \textcolor{keywordflow}{if} self.outputs[-1][0] == self.eos:
1208             self.eos\_top = \textcolor{keyword}{True}
1209             \textcolor{keywordflow}{if} self.eos\_top\_ts \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
1210                 self.eos\_top\_ts = len(self.outputs) - 1
1211 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aced42f37b580f876286b5075ba188b2a}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aced42f37b580f876286b5075ba188b2a}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step@{get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step}}
\index{get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step@{get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step()}{get\_backtrack\_from\_current\_step()}}
{\footnotesize\ttfamily def parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the backtrack at the current step.
\end{DoxyVerb}
 

Definition at line 1080 of file torch\+\_\+generator\+\_\+agent.\+py.


\begin{DoxyCode}
1080     \textcolor{keyword}{def }get\_backtrack\_from\_current\_step(self):
1081         \textcolor{stringliteral}{"""}
1082 \textcolor{stringliteral}{        Get the backtrack at the current step.}
1083 \textcolor{stringliteral}{        """}
1084         \textcolor{keywordflow}{return} self.bookkeep[-1]
1085 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a929ecbf60f149968caae5a0a6908d67a}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a929ecbf60f149968caae5a0a6908d67a}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!get\+\_\+output\+\_\+from\+\_\+current\+\_\+step@{get\+\_\+output\+\_\+from\+\_\+current\+\_\+step}}
\index{get\+\_\+output\+\_\+from\+\_\+current\+\_\+step@{get\+\_\+output\+\_\+from\+\_\+current\+\_\+step}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{get\+\_\+output\+\_\+from\+\_\+current\+\_\+step()}{get\_output\_from\_current\_step()}}
{\footnotesize\ttfamily def parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+get\+\_\+output\+\_\+from\+\_\+current\+\_\+step (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the outputput at the current step.
\end{DoxyVerb}
 

Definition at line 1074 of file torch\+\_\+generator\+\_\+agent.\+py.


\begin{DoxyCode}
1074     \textcolor{keyword}{def }get\_output\_from\_current\_step(self):
1075         \textcolor{stringliteral}{"""}
1076 \textcolor{stringliteral}{        Get the outputput at the current step.}
1077 \textcolor{stringliteral}{        """}
1078         \textcolor{keywordflow}{return} self.outputs[-1]
1079 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a4b70f85eec7d81b3a0e1afaea5b09332}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a4b70f85eec7d81b3a0e1afaea5b09332}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!get\+\_\+rescored\+\_\+finished@{get\+\_\+rescored\+\_\+finished}}
\index{get\+\_\+rescored\+\_\+finished@{get\+\_\+rescored\+\_\+finished}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{get\+\_\+rescored\+\_\+finished()}{get\_rescored\_finished()}}
{\footnotesize\ttfamily def parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+get\+\_\+rescored\+\_\+finished (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{n\+\_\+best = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return finished hypotheses according to adjusted scores.

Score adjustment is done according to the Google NMT paper, which
penalizes long utterances.

:param n_best:
    number of finalized hypotheses to return

:return:
    list of (tokens, score) pairs, in sorted order, where:
      - tokens is a tensor of token ids
      - score is the adjusted log probability of the entire utterance
\end{DoxyVerb}
 

Definition at line 1258 of file torch\+\_\+generator\+\_\+agent.\+py.


\begin{DoxyCode}
1258     \textcolor{keyword}{def }get\_rescored\_finished(self, n\_best=None):
1259         \textcolor{stringliteral}{"""}
1260 \textcolor{stringliteral}{        Return finished hypotheses according to adjusted scores.}
1261 \textcolor{stringliteral}{}
1262 \textcolor{stringliteral}{        Score adjustment is done according to the Google NMT paper, which}
1263 \textcolor{stringliteral}{        penalizes long utterances.}
1264 \textcolor{stringliteral}{}
1265 \textcolor{stringliteral}{        :param n\_best:}
1266 \textcolor{stringliteral}{            number of finalized hypotheses to return}
1267 \textcolor{stringliteral}{}
1268 \textcolor{stringliteral}{        :return:}
1269 \textcolor{stringliteral}{            list of (tokens, score) pairs, in sorted order, where:}
1270 \textcolor{stringliteral}{              - tokens is a tensor of token ids}
1271 \textcolor{stringliteral}{              - score is the adjusted log probability of the entire utterance}
1272 \textcolor{stringliteral}{        """}
1273         \textcolor{comment}{# if we never actually finished, force one}
1274         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.finished:
1275             self.outputs[-1][0] = self.eos
1276             self.finished.append(
1277                 \_HypothesisTail(
1278                     timestep=len(self.outputs) - 1,
1279                     hypid=0,
1280                     score=self.all\_scores[-1][0],
1281                     tokenid=self.outputs[-1][0],
1282                 )
1283             )
1284 
1285         rescored\_finished = []
1286         \textcolor{keywordflow}{for} finished\_item \textcolor{keywordflow}{in} self.finished:
1287             current\_length = finished\_item.timestep + 1
1288             \textcolor{comment}{# these weights are from Google NMT paper}
1289             length\_penalty = math.pow((1 + current\_length) / 6, 0.65)
1290             rescored\_finished.append(
1291                 \_HypothesisTail(
1292                     timestep=finished\_item.timestep,
1293                     hypid=finished\_item.hypid,
1294                     score=finished\_item.score / length\_penalty,
1295                     tokenid=finished\_item.tokenid,
1296                 )
1297             )
1298 
1299         \textcolor{comment}{# Note: beam size is almost always pretty small, so sorting is cheap enough}
1300         srted = sorted(rescored\_finished, key=attrgetter(\textcolor{stringliteral}{'score'}), reverse=\textcolor{keyword}{True})
1301 
1302         \textcolor{keywordflow}{if} n\_best \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
1303             srted = srted[:n\_best]
1304 
1305         n\_best\_list = [
1306             (self.\_get\_pretty\_hypothesis(self.\_get\_hyp\_from\_finished(hyp)), hyp.score)
1307             \textcolor{keywordflow}{for} hyp \textcolor{keywordflow}{in} srted
1308         ]
1309 
1310         \textcolor{comment}{# check that there is at least one finished candidate}
1311         \textcolor{comment}{# and assert that each of them contains only one EOS}
1312         \textcolor{keyword}{assert} (
1313             len(n\_best\_list) >= 1
1314         ), f\textcolor{stringliteral}{'TreeSearch returned \{len(n\_best\_list)\} candidates, must be >= 1'}
1315         \textcolor{keywordflow}{for} (pred, score) \textcolor{keywordflow}{in} n\_best\_list:
1316             \textcolor{keyword}{assert} (
1317                 pred == self.eos
1318             ).sum() == 1, f\textcolor{stringliteral}{'TreeSearch returned a finalized hypo with multiple end tokens \(\backslash\)}
1319 \textcolor{stringliteral}{            with score \{score.item():.2f\}'}
1320 
1321         \textcolor{keywordflow}{return} n\_best\_list
1322 
1323 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a35a3cbfe2df2d02bb46f7e492657afa5}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a35a3cbfe2df2d02bb46f7e492657afa5}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!is\+\_\+done@{is\+\_\+done}}
\index{is\+\_\+done@{is\+\_\+done}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{is\+\_\+done()}{is\_done()}}
{\footnotesize\ttfamily def parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+is\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return whether beam search is complete.
\end{DoxyVerb}
 

Definition at line 1212 of file torch\+\_\+generator\+\_\+agent.\+py.


\begin{DoxyCode}
1212     \textcolor{keyword}{def }is\_done(self):
1213         \textcolor{stringliteral}{"""}
1214 \textcolor{stringliteral}{        Return whether beam search is complete.}
1215 \textcolor{stringliteral}{        """}
1216         \textcolor{keywordflow}{return} self.eos\_top \textcolor{keywordflow}{and} self.n\_best\_counter >= self.beam\_size
1217 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a004609539d0428a9351a991168eb370b}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a004609539d0428a9351a991168eb370b}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!select\+\_\+paths@{select\+\_\+paths}}
\index{select\+\_\+paths@{select\+\_\+paths}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{select\+\_\+paths()}{select\_paths()}}
{\footnotesize\ttfamily def parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+select\+\_\+paths (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{logprobs,  }\item[{}]{prior\+\_\+scores }\end{DoxyParamCaption})}

\begin{DoxyVerb}Select the next vocabulary item in these beams.

:param logprobs:
    a (beamsize x vocab) tensor of log probabilities. If this is the first
    turn in the dialogue, it will be a (1 x vocab) tensor.
:param prior_scores:
    a (beamsize) tensor of weights with the cumulative running
    log-probability of each beam. If the first turn, it will be a (1) tensor.

:return:
    a (hypothesis_ids, token_id, scores) tuple, where:

    - hypothesis_ids is a LongTensor of hypotheses we're extending. May have
      repeats, but should always be (beamsize) long.
    - token_ids is a (beamsize) LongTensor of next-token choices for
      each of the hypotheses.
    - scores is a (beamsize) Tensor with the updated cumulative log-probs
      of each beam.
\end{DoxyVerb}
 

Definition at line 1087 of file torch\+\_\+generator\+\_\+agent.\+py.


\begin{DoxyCode}
1087     \textcolor{keyword}{def }select\_paths(self, logprobs, prior\_scores):
1088         \textcolor{stringliteral}{"""}
1089 \textcolor{stringliteral}{        Select the next vocabulary item in these beams.}
1090 \textcolor{stringliteral}{}
1091 \textcolor{stringliteral}{        :param logprobs:}
1092 \textcolor{stringliteral}{            a (beamsize x vocab) tensor of log probabilities. If this is the first}
1093 \textcolor{stringliteral}{            turn in the dialogue, it will be a (1 x vocab) tensor.}
1094 \textcolor{stringliteral}{        :param prior\_scores:}
1095 \textcolor{stringliteral}{            a (beamsize) tensor of weights with the cumulative running}
1096 \textcolor{stringliteral}{            log-probability of each beam. If the first turn, it will be a (1) tensor.}
1097 \textcolor{stringliteral}{}
1098 \textcolor{stringliteral}{        :return:}
1099 \textcolor{stringliteral}{            a (hypothesis\_ids, token\_id, scores) tuple, where:}
1100 \textcolor{stringliteral}{}
1101 \textcolor{stringliteral}{            - hypothesis\_ids is a LongTensor of hypotheses we're extending. May have}
1102 \textcolor{stringliteral}{              repeats, but should always be (beamsize) long.}
1103 \textcolor{stringliteral}{            - token\_ids is a (beamsize) LongTensor of next-token choices for}
1104 \textcolor{stringliteral}{              each of the hypotheses.}
1105 \textcolor{stringliteral}{            - scores is a (beamsize) Tensor with the updated cumulative log-probs}
1106 \textcolor{stringliteral}{              of each beam.}
1107 \textcolor{stringliteral}{        """}
1108         \textcolor{keywordflow}{pass}
1109 
1110 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a4706cbec7117a8a2696774c044fc0729}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a4706cbec7117a8a2696774c044fc0729}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!set\+\_\+context@{set\+\_\+context}}
\index{set\+\_\+context@{set\+\_\+context}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{set\+\_\+context()}{set\_context()}}
{\footnotesize\ttfamily def parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+set\+\_\+context (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 1062 of file torch\+\_\+generator\+\_\+agent.\+py.


\begin{DoxyCode}
1062     \textcolor{keyword}{def }set\_context(self: TSType, context: torch.LongTensor) -> TSType:
1063         \textcolor{stringliteral}{"""}
1064 \textcolor{stringliteral}{        Set the internal context representation and return self.}
1065 \textcolor{stringliteral}{}
1066 \textcolor{stringliteral}{        :param context:}
1067 \textcolor{stringliteral}{            a LongTensor representing the input context; used for context}
1068 \textcolor{stringliteral}{            ngram blocking, if supplied}
1069 \textcolor{stringliteral}{        """}
1070         self.context = context.tolist()
1071         \textcolor{keywordflow}{return} self
1072 
1073 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_ac9e79a3effa48d2e35ac879620cd639e}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_ac9e79a3effa48d2e35ac879620cd639e}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!all\+\_\+scores@{all\+\_\+scores}}
\index{all\+\_\+scores@{all\+\_\+scores}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{all\+\_\+scores}{all\_scores}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+all\+\_\+scores}



Definition at line 1047 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a2381c33e5233a5f5c1e50c65ab0ee572}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a2381c33e5233a5f5c1e50c65ab0ee572}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!beam\+\_\+size@{beam\+\_\+size}}
\index{beam\+\_\+size@{beam\+\_\+size}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{beam\+\_\+size}{beam\_size}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+beam\+\_\+size}



Definition at line 1034 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a6b27ba18a5e343345ab7319f2ead843d}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a6b27ba18a5e343345ab7319f2ead843d}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!block\+\_\+ngram@{block\+\_\+ngram}}
\index{block\+\_\+ngram@{block\+\_\+ngram}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{block\+\_\+ngram}{block\_ngram}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+block\+\_\+ngram}



Definition at line 1035 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a1f1f3da5f6079f5043d28e72b2a6fdfa}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a1f1f3da5f6079f5043d28e72b2a6fdfa}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!bookkeep@{bookkeep}}
\index{bookkeep@{bookkeep}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{bookkeep}{bookkeep}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+bookkeep}



Definition at line 1049 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aaef8214c017d387336317a37f395df3c}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aaef8214c017d387336317a37f395df3c}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!bos@{bos}}
\index{bos@{bos}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{bos}{bos}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+bos}



Definition at line 1038 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a6617873218cb0975d7e5f04f09379ac6}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a6617873218cb0975d7e5f04f09379ac6}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!context@{context}}
\index{context@{context}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{context}{context}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+context}



Definition at line 1040 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_ab1411b1cb22d74f4682213c487d23898}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_ab1411b1cb22d74f4682213c487d23898}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!context\+\_\+block\+\_\+ngram@{context\+\_\+block\+\_\+ngram}}
\index{context\+\_\+block\+\_\+ngram@{context\+\_\+block\+\_\+ngram}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{context\+\_\+block\+\_\+ngram}{context\_block\_ngram}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+context\+\_\+block\+\_\+ngram}



Definition at line 1041 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a37b3f7f827909e3aa2d8e35c32c41e81}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a37b3f7f827909e3aa2d8e35c32c41e81}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!device@{device}}
\index{device@{device}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{device}{device}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+device}



Definition at line 1043 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a51a1164086e9033c942b3c7ab3d6a194}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a51a1164086e9033c942b3c7ab3d6a194}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!eos@{eos}}
\index{eos@{eos}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{eos}{eos}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+eos}



Definition at line 1037 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a5b7078c44965d7a9d54250149d164c8f}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a5b7078c44965d7a9d54250149d164c8f}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!eos\+\_\+top@{eos\+\_\+top}}
\index{eos\+\_\+top@{eos\+\_\+top}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{eos\+\_\+top}{eos\_top}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+eos\+\_\+top}



Definition at line 1056 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a0a1eb3fae74a9b2edbb54cc4162878af}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a0a1eb3fae74a9b2edbb54cc4162878af}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!eos\+\_\+top\+\_\+ts@{eos\+\_\+top\+\_\+ts}}
\index{eos\+\_\+top\+\_\+ts@{eos\+\_\+top\+\_\+ts}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{eos\+\_\+top\+\_\+ts}{eos\_top\_ts}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+eos\+\_\+top\+\_\+ts}



Definition at line 1057 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_ab2d79d6023881123b8960356243692d9}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_ab2d79d6023881123b8960356243692d9}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!finished@{finished}}
\index{finished@{finished}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{finished}{finished}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+finished}



Definition at line 1055 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a71d6802f40cf025cd5c0242070d78b62}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a71d6802f40cf025cd5c0242070d78b62}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!min\+\_\+length@{min\+\_\+length}}
\index{min\+\_\+length@{min\+\_\+length}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{min\+\_\+length}{min\_length}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+min\+\_\+length}



Definition at line 1036 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a2b64a54420c470d50e389cdaacde4933}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a2b64a54420c470d50e389cdaacde4933}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!n\+\_\+best\+\_\+counter@{n\+\_\+best\+\_\+counter}}
\index{n\+\_\+best\+\_\+counter@{n\+\_\+best\+\_\+counter}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{n\+\_\+best\+\_\+counter}{n\_best\_counter}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+n\+\_\+best\+\_\+counter}



Definition at line 1058 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aa9b00008fefdb77e7701ddbfc1865919}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aa9b00008fefdb77e7701ddbfc1865919}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!ngrams@{ngrams}}
\index{ngrams@{ngrams}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{ngrams}{ngrams}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+ngrams\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1130 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aae65afe3c0c8855e9a54ba44bf7209ce}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aae65afe3c0c8855e9a54ba44bf7209ce}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!outputs@{outputs}}
\index{outputs@{outputs}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{outputs}{outputs}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+outputs}



Definition at line 1051 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aa00f03954e2bf737b13d1b43a609fb00}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aa00f03954e2bf737b13d1b43a609fb00}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!pad@{pad}}
\index{pad@{pad}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{pad}{pad}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+pad}



Definition at line 1039 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a159f5589fdfea9a040c4c1ca5c14ea2c}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a159f5589fdfea9a040c4c1ca5c14ea2c}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!partial\+\_\+hyps@{partial\+\_\+hyps}}
\index{partial\+\_\+hyps@{partial\+\_\+hyps}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{partial\+\_\+hyps}{partial\_hyps}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+partial\+\_\+hyps}



Definition at line 1059 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a2845139bf44df2fa8428565cd7558ce2}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a2845139bf44df2fa8428565cd7558ce2}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!prefix@{prefix}}
\index{prefix@{prefix}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{prefix}{prefix}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+prefix\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1131 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a07cf31c1808301e5b4d1d0ef128c5948}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_a07cf31c1808301e5b4d1d0ef128c5948}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!scores@{scores}}
\index{scores@{scores}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{scores}{scores}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+scores}



Definition at line 1045 of file torch\+\_\+generator\+\_\+agent.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aeeed17550050be7b86c9e238b9df66e5}\label{classparlai_1_1core_1_1torch__generator__agent_1_1TreeSearch_aeeed17550050be7b86c9e238b9df66e5}} 
\index{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}!source\+\_\+@{source\+\_\+}}
\index{source\+\_\+@{source\+\_\+}!parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search@{parlai\+::core\+::torch\+\_\+generator\+\_\+agent\+::\+Tree\+Search}}
\subsubsection{\texorpdfstring{source\+\_\+}{source\_}}
{\footnotesize\ttfamily parlai.\+core.\+torch\+\_\+generator\+\_\+agent.\+Tree\+Search.\+source\+\_\+\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1129 of file torch\+\_\+generator\+\_\+agent.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/core/\hyperlink{torch__generator__agent_8py}{torch\+\_\+generator\+\_\+agent.\+py}\end{DoxyCompactItemize}
