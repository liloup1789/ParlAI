\hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam}{}\section{projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam Class Reference}
\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam}\index{projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam@{projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam}}


Inheritance diagram for projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=262pt]{d0/dd0/classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=262pt]{de/dbd/classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ad750b2491841b08785706eb6e8fff097}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a5f3c88ef77b2609a31207f2d2e087442}{beam\+\_\+size}, \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a07f442d264c6a34a296b9377885e812d}{min\+\_\+length}=3, padding\+\_\+token=0, bos\+\_\+token=1, eos\+\_\+token=2, \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ad715f2d5f641843da30a95933c522384}{min\+\_\+n\+\_\+best}=3, cuda=\textquotesingle{}cpu\textquotesingle{}, \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a6f281e607c65ed2d1ba434f64d6577d9}{block\+\_\+ngram}=0)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a2ed0d78713409a6ded788ece3d325b0c}{get\+\_\+output\+\_\+from\+\_\+current\+\_\+step} (self)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a614a1a51ed1ac7e209282dc223f4c8fc}{get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step} (self)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ae605905ec50225724e1b54e557009539}{advance} (self, softmax\+\_\+probs)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a11a1f8185f11636128be8c25b1d2d56a}{done} (self)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a9b904d4d56ca519849dbb3c3d51ebc68}{get\+\_\+top\+\_\+hyp} (self)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_aa08bbb58c9c95ff74ece3d13f8942ec0}{get\+\_\+hyp\+\_\+from\+\_\+finished} (self, hypothesis\+\_\+tail)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a9cea6bd5feecf982564b84d0b774e1c1}{get\+\_\+rescored\+\_\+finished} (self, n\+\_\+best=None)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a80fc3ae32d64b7b1dd19944b70b3db50}{check\+\_\+finished} (self)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_aba2e2034d56689b4d77be75d024beaef}{get\+\_\+beam\+\_\+dot} (self, dictionary=None, n\+\_\+best=None)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_af5324f7145d2e11bbfcb44bbeda5dbec}{find\+\_\+ngrams} (input\+\_\+list, n)
\item 
def \hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a8790caa6448f76b870a89dab9a07e419}{get\+\_\+pretty\+\_\+hypothesis} (list\+\_\+of\+\_\+hypotails)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a5f3c88ef77b2609a31207f2d2e087442}{beam\+\_\+size}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a07f442d264c6a34a296b9377885e812d}{min\+\_\+length}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ae023773f1954232986b1d4f89060bd8c}{eos}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a694e3d6ced4fa9fd08dc31d478976c4a}{bos}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ad01c236065271d2ee7a4966c3c7a6ced}{pad}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a5377f66ede3477cab636a9686408ae31}{device}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a3f644c74f23d3f49e51bd65b234405d0}{scores}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_af5a49546e67604c1709af4769aab87ba}{all\+\_\+scores}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_acf28f3609ee25c668ce9bb6d086c4958}{bookkeep}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a4ecbdf9233f648fe723795e6b96ac27a}{outputs}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_aaded56f04e5b1a7307e4290f845199e9}{finished}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a02c028103fcde74cd4fecb50ef48981a}{Hypothesis\+Tail}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a573e769dffdbb74a1861abccd82acc34}{eos\+\_\+top}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a68801372f27ac9fe8663322114a5f016}{eos\+\_\+top\+\_\+ts}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_af76a4cb47c1e4b9dc267f34821ab81d9}{n\+\_\+best\+\_\+counter}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ad715f2d5f641843da30a95933c522384}{min\+\_\+n\+\_\+best}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a6f281e607c65ed2d1ba434f64d6577d9}{block\+\_\+ngram}
\item 
\hyperlink{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a58867f3a37a03b4d8904b09035352534}{partial\+\_\+hyps}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Generic beam class.

It keeps information about beam_size hypothesis.
\end{DoxyVerb}
 

Definition at line 1224 of file controllable\+\_\+seq2seq.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ad750b2491841b08785706eb6e8fff097}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ad750b2491841b08785706eb6e8fff097}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{beam\+\_\+size,  }\item[{}]{min\+\_\+length = {\ttfamily 3},  }\item[{}]{padding\+\_\+token = {\ttfamily 0},  }\item[{}]{bos\+\_\+token = {\ttfamily 1},  }\item[{}]{eos\+\_\+token = {\ttfamily 2},  }\item[{}]{min\+\_\+n\+\_\+best = {\ttfamily 3},  }\item[{}]{cuda = {\ttfamily \textquotesingle{}cpu\textquotesingle{}},  }\item[{}]{block\+\_\+ngram = {\ttfamily 0} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Instantiate Beam object.

:param beam_size:
    number of hypothesis in the beam
:param min_length:
    minimum length of the predicted sequence
:param padding_token:
    Set to 0 as usual in ParlAI
:param bos_token:
    Set to 1 as usual in ParlAI
:param eos_token:
    Set to 2 as usual in ParlAI
:param min_n_best:
    Beam will not be done unless this amount of finished hypothesis
    (with EOS) is done
:param cuda:
    What device to use for computations
\end{DoxyVerb}
 

Definition at line 1241 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1241     ):
1242         \textcolor{stringliteral}{"""}
1243 \textcolor{stringliteral}{        Instantiate Beam object.}
1244 \textcolor{stringliteral}{}
1245 \textcolor{stringliteral}{        :param beam\_size:}
1246 \textcolor{stringliteral}{            number of hypothesis in the beam}
1247 \textcolor{stringliteral}{        :param min\_length:}
1248 \textcolor{stringliteral}{            minimum length of the predicted sequence}
1249 \textcolor{stringliteral}{        :param padding\_token:}
1250 \textcolor{stringliteral}{            Set to 0 as usual in ParlAI}
1251 \textcolor{stringliteral}{        :param bos\_token:}
1252 \textcolor{stringliteral}{            Set to 1 as usual in ParlAI}
1253 \textcolor{stringliteral}{        :param eos\_token:}
1254 \textcolor{stringliteral}{            Set to 2 as usual in ParlAI}
1255 \textcolor{stringliteral}{        :param min\_n\_best:}
1256 \textcolor{stringliteral}{            Beam will not be done unless this amount of finished hypothesis}
1257 \textcolor{stringliteral}{            (with EOS) is done}
1258 \textcolor{stringliteral}{        :param cuda:}
1259 \textcolor{stringliteral}{            What device to use for computations}
1260 \textcolor{stringliteral}{        """}
1261         self.beam\_size = beam\_size
1262         self.min\_length = min\_length
1263         self.eos = eos\_token
1264         self.bos = bos\_token
1265         self.pad = padding\_token
1266         self.device = cuda
1267         \textcolor{comment}{# recent score for each hypo in the beam}
1268         self.scores = torch.Tensor(self.beam\_size).\hyperlink{namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset_aa2b7207688c641dbc094ab44eca27113}{float}().zero\_().to(self.device)
1269         \textcolor{comment}{# self.scores values per each time step}
1270         self.all\_scores = [torch.Tensor([0.0] * beam\_size).to(self.device)]
1271         \textcolor{comment}{# backtracking id to hypothesis at previous time step}
1272         self.bookkeep = []
1273         \textcolor{comment}{# output tokens at each time step}
1274         self.outputs = [
1275             torch.Tensor(self.beam\_size).long().fill\_(self.bos).to(self.device)
1276         ]
1277         \textcolor{comment}{# keeps tuples (score, time\_step, hyp\_id)}
1278         self.finished = []
1279         self.HypothesisTail = namedtuple(
1280             \textcolor{stringliteral}{'HypothesisTail'}, [\textcolor{stringliteral}{'timestep'}, \textcolor{stringliteral}{'hypid'}, \textcolor{stringliteral}{'score'}, \textcolor{stringliteral}{'tokenid'}]
1281         )
1282         self.eos\_top = \textcolor{keyword}{False}
1283         self.eos\_top\_ts = \textcolor{keywordtype}{None}
1284         self.n\_best\_counter = 0
1285         self.min\_n\_best = min\_n\_best
1286         self.block\_ngram = block\_ngram
1287         self.partial\_hyps = [[self.bos] \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(beam\_size)]
1288 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ae605905ec50225724e1b54e557009539}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ae605905ec50225724e1b54e557009539}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!advance@{advance}}
\index{advance@{advance}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{advance()}{advance()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+advance (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{softmax\+\_\+probs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Advance the beam one step.
\end{DoxyVerb}
 

Definition at line 1308 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1308     \textcolor{keyword}{def }advance(self, softmax\_probs):
1309         \textcolor{stringliteral}{"""}
1310 \textcolor{stringliteral}{        Advance the beam one step.}
1311 \textcolor{stringliteral}{        """}
1312         voc\_size = softmax\_probs.size(-1)
1313         current\_length = len(self.all\_scores) - 1
1314         \textcolor{keywordflow}{if} current\_length < self.min\_length:
1315             \textcolor{comment}{# penalize all eos probs to make it decode longer}
1316             \textcolor{keywordflow}{for} hyp\_id \textcolor{keywordflow}{in} range(softmax\_probs.size(0)):
1317                 softmax\_probs[hyp\_id][self.eos] = \hyperlink{namespaceparlai_1_1utils_1_1torch_a6c6e25115353dba479cd72dc31dc76ae}{neginf}(softmax\_probs.dtype)
1318         \textcolor{keywordflow}{if} len(self.bookkeep) == 0:
1319             \textcolor{comment}{# the first step we take only the first hypo into account since all}
1320             \textcolor{comment}{# hypos are the same initially}
1321             beam\_scores = softmax\_probs[0]
1322         \textcolor{keywordflow}{else}:
1323             \textcolor{comment}{# we need to sum up hypo scores and curr softmax scores before topk}
1324             \textcolor{comment}{# [beam\_size, voc\_size]}
1325             beam\_scores = softmax\_probs + self.scores.unsqueeze(1).expand\_as(
1326                 softmax\_probs
1327             )
1328             \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(self.outputs[-1].size(0)):
1329                 \textcolor{keywordflow}{if} self.block\_ngram > 0:
1330                     current\_hypo = self.partial\_hyps[i][1:]
1331                     current\_ngrams = []
1332                     \textcolor{keywordflow}{for} ng \textcolor{keywordflow}{in} range(self.block\_ngram):
1333                         ngrams = Beam.find\_ngrams(current\_hypo, ng)
1334                         \textcolor{keywordflow}{if} len(ngrams) > 0:
1335                             current\_ngrams.extend(ngrams)
1336                     counted\_ngrams = Counter(current\_ngrams)
1337                     \textcolor{keywordflow}{if} any(v > 1 \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} counted\_ngrams.items()):
1338                         \textcolor{comment}{# block this hypothesis hard}
1339                         beam\_scores[i] = \hyperlink{namespaceparlai_1_1utils_1_1torch_a6c6e25115353dba479cd72dc31dc76ae}{neginf}(softmax\_probs.dtype)
1340 
1341                 \textcolor{comment}{#  if previous output hypo token had eos}
1342                 \textcolor{comment}{# we penalize those word probs to never be chosen}
1343                 \textcolor{keywordflow}{if} self.outputs[-1][i] == self.eos:
1344                     \textcolor{comment}{# beam\_scores[i] is voc\_size array for i-th hypo}
1345                     beam\_scores[i] = \hyperlink{namespaceparlai_1_1utils_1_1torch_a6c6e25115353dba479cd72dc31dc76ae}{neginf}(softmax\_probs.dtype)
1346 
1347         flatten\_beam\_scores = beam\_scores.view(-1)  \textcolor{comment}{# [beam\_size * voc\_size]}
1348         with torch.no\_grad():
1349             best\_scores, best\_idxs = torch.topk(
1350                 flatten\_beam\_scores, self.beam\_size, dim=-1
1351             )
1352 
1353         self.scores = best\_scores
1354         self.all\_scores.append(self.scores)
1355         \textcolor{comment}{# get the backtracking hypothesis id as a multiple of full voc\_sizes}
1356         hyp\_ids = best\_idxs / voc\_size
1357         \textcolor{comment}{# get the actual word id from residual of the same division}
1358         tok\_ids = best\_idxs % voc\_size
1359 
1360         self.outputs.append(tok\_ids)
1361         self.bookkeep.append(hyp\_ids)
1362         self.partial\_hyps = [
1363             self.partial\_hyps[hyp\_ids[i]] + [tok\_ids[i].item()]
1364             \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(self.beam\_size)
1365         ]
1366 
1367         \textcolor{comment}{#  check new hypos for eos label, if we have some, add to finished}
1368         \textcolor{keywordflow}{for} hypid \textcolor{keywordflow}{in} range(self.beam\_size):
1369             \textcolor{keywordflow}{if} self.outputs[-1][hypid] == self.eos:
1370                 \textcolor{comment}{#  this is finished hypo, adding to finished}
1371                 eostail = self.HypothesisTail(
1372                     timestep=len(self.outputs) - 1,
1373                     hypid=hypid,
1374                     score=self.scores[hypid],
1375                     tokenid=self.eos,
1376                 )
1377                 self.finished.append(eostail)
1378                 self.n\_best\_counter += 1
1379 
1380         \textcolor{keywordflow}{if} self.outputs[-1][0] == self.eos:
1381             self.eos\_top = \textcolor{keyword}{True}
1382             \textcolor{keywordflow}{if} self.eos\_top\_ts \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
1383                 self.eos\_top\_ts = len(self.outputs) - 1
1384 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a80fc3ae32d64b7b1dd19944b70b3db50}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a80fc3ae32d64b7b1dd19944b70b3db50}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!check\+\_\+finished@{check\+\_\+finished}}
\index{check\+\_\+finished@{check\+\_\+finished}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{check\+\_\+finished()}{check\_finished()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+check\+\_\+finished (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Check if self.finished is empty and add hyptail in that case.

This will be suboptimal hypothesis since the model did not get any EOS
\end{DoxyVerb}
 

Definition at line 1474 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1474     \textcolor{keyword}{def }check\_finished(self):
1475         \textcolor{stringliteral}{"""}
1476 \textcolor{stringliteral}{        Check if self.finished is empty and add hyptail in that case.}
1477 \textcolor{stringliteral}{}
1478 \textcolor{stringliteral}{        This will be suboptimal hypothesis since the model did not get any EOS}
1479 \textcolor{stringliteral}{        """}
1480         \textcolor{keywordflow}{if} len(self.finished) == 0:
1481             \textcolor{comment}{# we change output because we want outputs to have eos}
1482             \textcolor{comment}{# to pass assert in L102, it is ok since empty self.finished}
1483             \textcolor{comment}{# means junk prediction anyway}
1484             self.outputs[-1][0] = self.eos
1485             hyptail = self.HypothesisTail(
1486                 timestep=len(self.outputs) - 1,
1487                 hypid=0,
1488                 score=self.all\_scores[-1][0],
1489                 tokenid=self.outputs[-1][0],
1490             )
1491 
1492             self.finished.append(hyptail)
1493 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a11a1f8185f11636128be8c25b1d2d56a}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a11a1f8185f11636128be8c25b1d2d56a}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!done@{done}}
\index{done@{done}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{done()}{done()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return whether beam search is complete.
\end{DoxyVerb}
 

Definition at line 1385 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1385     \textcolor{keyword}{def }done(self):
1386         \textcolor{stringliteral}{"""}
1387 \textcolor{stringliteral}{        Return whether beam search is complete.}
1388 \textcolor{stringliteral}{        """}
1389         \textcolor{keywordflow}{return} self.eos\_top \textcolor{keywordflow}{and} self.n\_best\_counter >= self.min\_n\_best
1390 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_af5324f7145d2e11bbfcb44bbeda5dbec}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_af5324f7145d2e11bbfcb44bbeda5dbec}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!find\+\_\+ngrams@{find\+\_\+ngrams}}
\index{find\+\_\+ngrams@{find\+\_\+ngrams}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{find\+\_\+ngrams()}{find\_ngrams()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+find\+\_\+ngrams (\begin{DoxyParamCaption}\item[{}]{input\+\_\+list,  }\item[{}]{n }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Get list of ngrams with context length n-1.
\end{DoxyVerb}
 

Definition at line 1290 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1290     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1dict__v0_aa7398720bbf0f8e82c5b1495313f4f8b}{find\_ngrams}(input\_list, n):
1291         \textcolor{stringliteral}{"""}
1292 \textcolor{stringliteral}{        Get list of ngrams with context length n-1.}
1293 \textcolor{stringliteral}{        """}
1294         \textcolor{keywordflow}{return} list(zip(*[input\_list[i:] \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(n)]))
1295 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a614a1a51ed1ac7e209282dc223f4c8fc}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a614a1a51ed1ac7e209282dc223f4c8fc}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step@{get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step}}
\index{get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step@{get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step()}{get\_backtrack\_from\_current\_step()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+get\+\_\+backtrack\+\_\+from\+\_\+current\+\_\+step (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the backtrack at the current step.
\end{DoxyVerb}
 

Definition at line 1302 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1302     \textcolor{keyword}{def }get\_backtrack\_from\_current\_step(self):
1303         \textcolor{stringliteral}{"""}
1304 \textcolor{stringliteral}{        Get the backtrack at the current step.}
1305 \textcolor{stringliteral}{        """}
1306         \textcolor{keywordflow}{return} self.bookkeep[-1]
1307 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_aba2e2034d56689b4d77be75d024beaef}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_aba2e2034d56689b4d77be75d024beaef}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!get\+\_\+beam\+\_\+dot@{get\+\_\+beam\+\_\+dot}}
\index{get\+\_\+beam\+\_\+dot@{get\+\_\+beam\+\_\+dot}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{get\+\_\+beam\+\_\+dot()}{get\_beam\_dot()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+get\+\_\+beam\+\_\+dot (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{dictionary = {\ttfamily None},  }\item[{}]{n\+\_\+best = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Create pydot graph representation of the beam.

:param outputs:
    self.outputs from the beam
:param dictionary:
    tok 2 word dict to save words in the tree nodes
:returns:
    pydot graph
\end{DoxyVerb}
 

Definition at line 1494 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1494     \textcolor{keyword}{def }get\_beam\_dot(self, dictionary=None, n\_best=None):
1495         \textcolor{stringliteral}{"""}
1496 \textcolor{stringliteral}{        Create pydot graph representation of the beam.}
1497 \textcolor{stringliteral}{}
1498 \textcolor{stringliteral}{        :param outputs:}
1499 \textcolor{stringliteral}{            self.outputs from the beam}
1500 \textcolor{stringliteral}{        :param dictionary:}
1501 \textcolor{stringliteral}{            tok 2 word dict to save words in the tree nodes}
1502 \textcolor{stringliteral}{        :returns:}
1503 \textcolor{stringliteral}{            pydot graph}
1504 \textcolor{stringliteral}{        """}
1505         \textcolor{keywordflow}{try}:
1506             \textcolor{keyword}{import} pydot
1507         \textcolor{keywordflow}{except} ImportError:
1508             print(\textcolor{stringliteral}{"Please install pydot package to dump beam visualization"})
1509 
1510         graph = pydot.Dot(graph\_type=\textcolor{stringliteral}{'digraph'})
1511         outputs = [i.tolist() \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.outputs]
1512         bookkeep = [i.tolist() \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.bookkeep]
1513         all\_scores = [i.tolist() \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.all\_scores]
1514         \textcolor{keywordflow}{if} n\_best \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
1515             n\_best = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(self.beam\_size / 2)
1516 
1517         \textcolor{comment}{# get top nbest hyp}
1518         top\_hyp\_idx\_n\_best = []
1519         n\_best\_colors = [\textcolor{stringliteral}{'aquamarine'}, \textcolor{stringliteral}{'chocolate1'}, \textcolor{stringliteral}{'deepskyblue'}, \textcolor{stringliteral}{'green2'}, \textcolor{stringliteral}{'tan'}]
1520         sorted\_finished = self.get\_rescored\_finished(n\_best=n\_best)
1521         \textcolor{keywordflow}{for} hyptail \textcolor{keywordflow}{in} sorted\_finished:
1522             \textcolor{comment}{# do not include EOS since it has rescored score not from original}
1523             \textcolor{comment}{# self.all\_scores, we color EOS with black}
1524             top\_hyp\_idx\_n\_best.append(self.get\_hyp\_from\_finished(hyptail))
1525 
1526         \textcolor{comment}{# create nodes}
1527         \textcolor{keywordflow}{for} tstep, lis \textcolor{keywordflow}{in} enumerate(outputs):
1528             \textcolor{keywordflow}{for} hypid, token \textcolor{keywordflow}{in} enumerate(lis):
1529                 \textcolor{keywordflow}{if} tstep == 0:
1530                     hypid = 0  \textcolor{comment}{# collapse all \_\_NULL\_\_ nodes}
1531                 node\_tail = self.HypothesisTail(
1532                     timestep=tstep,
1533                     hypid=hypid,
1534                     score=all\_scores[tstep][hypid],
1535                     tokenid=token,
1536                 )
1537                 color = \textcolor{stringliteral}{'white'}
1538                 rank = \textcolor{keywordtype}{None}
1539                 \textcolor{keywordflow}{for} i, hypseq \textcolor{keywordflow}{in} enumerate(top\_hyp\_idx\_n\_best):
1540                     \textcolor{keywordflow}{if} node\_tail \textcolor{keywordflow}{in} hypseq:
1541                         \textcolor{keywordflow}{if} n\_best <= 5:  \textcolor{comment}{# color nodes only if <=5}
1542                             color = n\_best\_colors[i]
1543                         rank = i
1544                         \textcolor{keywordflow}{break}
1545                 label = (
1546                     \textcolor{stringliteral}{"<\{\}"}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
1547                         dictionary.vec2txt([token]) \textcolor{keywordflow}{if} dictionary \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} token
1548                     )
1549                     + \textcolor{stringliteral}{" : "}
1550                     + \textcolor{stringliteral}{"\{:.\{prec\}f\}>"}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(all\_scores[tstep][hypid], prec=3)
1551                 )
1552 
1553                 graph.add\_node(
1554                     pydot.Node(
1555                         node\_tail.\_\_repr\_\_(),
1556                         label=label,
1557                         fillcolor=color,
1558                         style=\textcolor{stringliteral}{'filled'},
1559                         xlabel=\textcolor{stringliteral}{'\{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(rank) \textcolor{keywordflow}{if} rank \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} \textcolor{stringliteral}{''},
1560                     )
1561                 )
1562 
1563         \textcolor{comment}{# create edges}
1564         \textcolor{keywordflow}{for} revtstep, lis \textcolor{keywordflow}{in} reversed(list(enumerate(bookkeep))):
1565             \textcolor{keywordflow}{for} i, prev\_id \textcolor{keywordflow}{in} enumerate(lis):
1566                 from\_node = graph.get\_node(
1567                     \textcolor{stringliteral}{'"\{\}"'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
1568                         self.HypothesisTail(
1569                             timestep=revtstep,
1570                             hypid=prev\_id,
1571                             score=all\_scores[revtstep][prev\_id],
1572                             tokenid=outputs[revtstep][prev\_id],
1573                         ).\_\_repr\_\_()
1574                     )
1575                 )[0]
1576                 to\_node = graph.get\_node(
1577                     \textcolor{stringliteral}{'"\{\}"'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
1578                         self.HypothesisTail(
1579                             timestep=revtstep + 1,
1580                             hypid=i,
1581                             score=all\_scores[revtstep + 1][i],
1582                             tokenid=outputs[revtstep + 1][i],
1583                         ).\_\_repr\_\_()
1584                     )
1585                 )[0]
1586                 newedge = pydot.Edge(from\_node.get\_name(), to\_node.get\_name())
1587                 graph.add\_edge(newedge)
1588 
1589         \textcolor{keywordflow}{return} graph
1590 \end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_aa08bbb58c9c95ff74ece3d13f8942ec0}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_aa08bbb58c9c95ff74ece3d13f8942ec0}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!get\+\_\+hyp\+\_\+from\+\_\+finished@{get\+\_\+hyp\+\_\+from\+\_\+finished}}
\index{get\+\_\+hyp\+\_\+from\+\_\+finished@{get\+\_\+hyp\+\_\+from\+\_\+finished}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{get\+\_\+hyp\+\_\+from\+\_\+finished()}{get\_hyp\_from\_finished()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+get\+\_\+hyp\+\_\+from\+\_\+finished (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{hypothesis\+\_\+tail }\end{DoxyParamCaption})}

\begin{DoxyVerb}Extract hypothesis ending with EOS at timestep with hyp_id.

:param timestep:
    timestep with range up to len(self.outputs)-1
:param hyp_id:
    id with range up to beam_size-1
:return:
    hypothesis sequence
\end{DoxyVerb}
 

Definition at line 1403 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1403     \textcolor{keyword}{def }get\_hyp\_from\_finished(self, hypothesis\_tail):
1404         \textcolor{stringliteral}{"""}
1405 \textcolor{stringliteral}{        Extract hypothesis ending with EOS at timestep with hyp\_id.}
1406 \textcolor{stringliteral}{}
1407 \textcolor{stringliteral}{        :param timestep:}
1408 \textcolor{stringliteral}{            timestep with range up to len(self.outputs)-1}
1409 \textcolor{stringliteral}{        :param hyp\_id:}
1410 \textcolor{stringliteral}{            id with range up to beam\_size-1}
1411 \textcolor{stringliteral}{        :return:}
1412 \textcolor{stringliteral}{            hypothesis sequence}
1413 \textcolor{stringliteral}{        """}
1414         \textcolor{keyword}{assert} self.outputs[hypothesis\_tail.timestep][hypothesis\_tail.hypid] == self.eos
1415         \textcolor{keyword}{assert} hypothesis\_tail.tokenid == self.eos
1416         hyp\_idx = []
1417         endback = hypothesis\_tail.hypid
1418         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(hypothesis\_tail.timestep, -1, -1):
1419             hyp\_idx.append(
1420                 self.HypothesisTail(
1421                     timestep=i,
1422                     hypid=endback,
1423                     score=self.all\_scores[i][endback],
1424                     tokenid=self.outputs[i][endback],
1425                 )
1426             )
1427             endback = self.bookkeep[i - 1][endback]
1428 
1429         \textcolor{keywordflow}{return} hyp\_idx
1430 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a2ed0d78713409a6ded788ece3d325b0c}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a2ed0d78713409a6ded788ece3d325b0c}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!get\+\_\+output\+\_\+from\+\_\+current\+\_\+step@{get\+\_\+output\+\_\+from\+\_\+current\+\_\+step}}
\index{get\+\_\+output\+\_\+from\+\_\+current\+\_\+step@{get\+\_\+output\+\_\+from\+\_\+current\+\_\+step}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{get\+\_\+output\+\_\+from\+\_\+current\+\_\+step()}{get\_output\_from\_current\_step()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+get\+\_\+output\+\_\+from\+\_\+current\+\_\+step (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get the outputput at the current step.
\end{DoxyVerb}
 

Definition at line 1296 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1296     \textcolor{keyword}{def }get\_output\_from\_current\_step(self):
1297         \textcolor{stringliteral}{"""}
1298 \textcolor{stringliteral}{        Get the outputput at the current step.}
1299 \textcolor{stringliteral}{        """}
1300         \textcolor{keywordflow}{return} self.outputs[-1]
1301 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a8790caa6448f76b870a89dab9a07e419}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a8790caa6448f76b870a89dab9a07e419}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!get\+\_\+pretty\+\_\+hypothesis@{get\+\_\+pretty\+\_\+hypothesis}}
\index{get\+\_\+pretty\+\_\+hypothesis@{get\+\_\+pretty\+\_\+hypothesis}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{get\+\_\+pretty\+\_\+hypothesis()}{get\_pretty\_hypothesis()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+get\+\_\+pretty\+\_\+hypothesis (\begin{DoxyParamCaption}\item[{}]{list\+\_\+of\+\_\+hypotails }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Return prettier version of the hypotheses.
\end{DoxyVerb}
 

Definition at line 1432 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1432     \textcolor{keyword}{def }get\_pretty\_hypothesis(list\_of\_hypotails):
1433         \textcolor{stringliteral}{"""}
1434 \textcolor{stringliteral}{        Return prettier version of the hypotheses.}
1435 \textcolor{stringliteral}{        """}
1436         hypothesis = []
1437         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} list\_of\_hypotails:
1438             hypothesis.append(i.tokenid)
1439 
1440         hypothesis = torch.stack(list(reversed(hypothesis)))
1441 
1442         \textcolor{keywordflow}{return} hypothesis
1443 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a9cea6bd5feecf982564b84d0b774e1c1}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a9cea6bd5feecf982564b84d0b774e1c1}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!get\+\_\+rescored\+\_\+finished@{get\+\_\+rescored\+\_\+finished}}
\index{get\+\_\+rescored\+\_\+finished@{get\+\_\+rescored\+\_\+finished}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{get\+\_\+rescored\+\_\+finished()}{get\_rescored\_finished()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+get\+\_\+rescored\+\_\+finished (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{n\+\_\+best = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return finished hypotheses in rescored order.

:param n_best:
    how many n best hypothesis to return
:return:
    list with hypothesis
\end{DoxyVerb}
 

Definition at line 1444 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1444     \textcolor{keyword}{def }get\_rescored\_finished(self, n\_best=None):
1445         \textcolor{stringliteral}{"""}
1446 \textcolor{stringliteral}{        Return finished hypotheses in rescored order.}
1447 \textcolor{stringliteral}{}
1448 \textcolor{stringliteral}{        :param n\_best:}
1449 \textcolor{stringliteral}{            how many n best hypothesis to return}
1450 \textcolor{stringliteral}{        :return:}
1451 \textcolor{stringliteral}{            list with hypothesis}
1452 \textcolor{stringliteral}{        """}
1453         rescored\_finished = []
1454         \textcolor{keywordflow}{for} finished\_item \textcolor{keywordflow}{in} self.finished:
1455             current\_length = finished\_item.timestep + 1
1456             \textcolor{comment}{# these weights are from Google NMT paper}
1457             length\_penalty = math.pow((1 + current\_length) / 6, 0.65)
1458             rescored\_finished.append(
1459                 self.HypothesisTail(
1460                     timestep=finished\_item.timestep,
1461                     hypid=finished\_item.hypid,
1462                     score=finished\_item.score / length\_penalty,
1463                     tokenid=finished\_item.tokenid,
1464                 )
1465             )
1466 
1467         srted = sorted(rescored\_finished, key=attrgetter(\textcolor{stringliteral}{'score'}), reverse=\textcolor{keyword}{True})
1468 
1469         \textcolor{keywordflow}{if} n\_best \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
1470             srted = srted[:n\_best]
1471 
1472         \textcolor{keywordflow}{return} srted
1473 
\end{DoxyCode}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a9b904d4d56ca519849dbb3c3d51ebc68}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a9b904d4d56ca519849dbb3c3d51ebc68}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!get\+\_\+top\+\_\+hyp@{get\+\_\+top\+\_\+hyp}}
\index{get\+\_\+top\+\_\+hyp@{get\+\_\+top\+\_\+hyp}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{get\+\_\+top\+\_\+hyp()}{get\_top\_hyp()}}
{\footnotesize\ttfamily def projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+get\+\_\+top\+\_\+hyp (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get single best hypothesis.

:return: hypothesis sequence and the final score
\end{DoxyVerb}
 

Definition at line 1391 of file controllable\+\_\+seq2seq.\+py.


\begin{DoxyCode}
1391     \textcolor{keyword}{def }get\_top\_hyp(self):
1392         \textcolor{stringliteral}{"""}
1393 \textcolor{stringliteral}{        Get single best hypothesis.}
1394 \textcolor{stringliteral}{}
1395 \textcolor{stringliteral}{        :return: hypothesis sequence and the final score}
1396 \textcolor{stringliteral}{        """}
1397         top\_hypothesis\_tail = self.get\_rescored\_finished(n\_best=1)[0]
1398         \textcolor{keywordflow}{return} (
1399             self.get\_hyp\_from\_finished(top\_hypothesis\_tail),
1400             top\_hypothesis\_tail.score,
1401         )
1402 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_af5a49546e67604c1709af4769aab87ba}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_af5a49546e67604c1709af4769aab87ba}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!all\+\_\+scores@{all\+\_\+scores}}
\index{all\+\_\+scores@{all\+\_\+scores}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{all\+\_\+scores}{all\_scores}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+all\+\_\+scores}



Definition at line 1270 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a5f3c88ef77b2609a31207f2d2e087442}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a5f3c88ef77b2609a31207f2d2e087442}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!beam\+\_\+size@{beam\+\_\+size}}
\index{beam\+\_\+size@{beam\+\_\+size}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{beam\+\_\+size}{beam\_size}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+beam\+\_\+size}



Definition at line 1261 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a6f281e607c65ed2d1ba434f64d6577d9}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a6f281e607c65ed2d1ba434f64d6577d9}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!block\+\_\+ngram@{block\+\_\+ngram}}
\index{block\+\_\+ngram@{block\+\_\+ngram}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{block\+\_\+ngram}{block\_ngram}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+block\+\_\+ngram}



Definition at line 1286 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_acf28f3609ee25c668ce9bb6d086c4958}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_acf28f3609ee25c668ce9bb6d086c4958}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!bookkeep@{bookkeep}}
\index{bookkeep@{bookkeep}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{bookkeep}{bookkeep}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+bookkeep}



Definition at line 1272 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a694e3d6ced4fa9fd08dc31d478976c4a}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a694e3d6ced4fa9fd08dc31d478976c4a}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!bos@{bos}}
\index{bos@{bos}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{bos}{bos}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+bos}



Definition at line 1264 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a5377f66ede3477cab636a9686408ae31}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a5377f66ede3477cab636a9686408ae31}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!device@{device}}
\index{device@{device}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{device}{device}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+device}



Definition at line 1266 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ae023773f1954232986b1d4f89060bd8c}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ae023773f1954232986b1d4f89060bd8c}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!eos@{eos}}
\index{eos@{eos}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{eos}{eos}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+eos}



Definition at line 1263 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a573e769dffdbb74a1861abccd82acc34}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a573e769dffdbb74a1861abccd82acc34}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!eos\+\_\+top@{eos\+\_\+top}}
\index{eos\+\_\+top@{eos\+\_\+top}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{eos\+\_\+top}{eos\_top}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+eos\+\_\+top}



Definition at line 1282 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a68801372f27ac9fe8663322114a5f016}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a68801372f27ac9fe8663322114a5f016}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!eos\+\_\+top\+\_\+ts@{eos\+\_\+top\+\_\+ts}}
\index{eos\+\_\+top\+\_\+ts@{eos\+\_\+top\+\_\+ts}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{eos\+\_\+top\+\_\+ts}{eos\_top\_ts}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+eos\+\_\+top\+\_\+ts}



Definition at line 1283 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_aaded56f04e5b1a7307e4290f845199e9}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_aaded56f04e5b1a7307e4290f845199e9}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!finished@{finished}}
\index{finished@{finished}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{finished}{finished}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+finished}



Definition at line 1278 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a02c028103fcde74cd4fecb50ef48981a}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a02c028103fcde74cd4fecb50ef48981a}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!Hypothesis\+Tail@{Hypothesis\+Tail}}
\index{Hypothesis\+Tail@{Hypothesis\+Tail}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{Hypothesis\+Tail}{HypothesisTail}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+Hypothesis\+Tail}



Definition at line 1279 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a07f442d264c6a34a296b9377885e812d}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a07f442d264c6a34a296b9377885e812d}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!min\+\_\+length@{min\+\_\+length}}
\index{min\+\_\+length@{min\+\_\+length}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{min\+\_\+length}{min\_length}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+min\+\_\+length}



Definition at line 1262 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ad715f2d5f641843da30a95933c522384}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ad715f2d5f641843da30a95933c522384}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!min\+\_\+n\+\_\+best@{min\+\_\+n\+\_\+best}}
\index{min\+\_\+n\+\_\+best@{min\+\_\+n\+\_\+best}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{min\+\_\+n\+\_\+best}{min\_n\_best}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+min\+\_\+n\+\_\+best}



Definition at line 1285 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_af76a4cb47c1e4b9dc267f34821ab81d9}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_af76a4cb47c1e4b9dc267f34821ab81d9}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!n\+\_\+best\+\_\+counter@{n\+\_\+best\+\_\+counter}}
\index{n\+\_\+best\+\_\+counter@{n\+\_\+best\+\_\+counter}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{n\+\_\+best\+\_\+counter}{n\_best\_counter}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+n\+\_\+best\+\_\+counter}



Definition at line 1284 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a4ecbdf9233f648fe723795e6b96ac27a}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a4ecbdf9233f648fe723795e6b96ac27a}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!outputs@{outputs}}
\index{outputs@{outputs}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{outputs}{outputs}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+outputs}



Definition at line 1274 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ad01c236065271d2ee7a4966c3c7a6ced}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_ad01c236065271d2ee7a4966c3c7a6ced}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!pad@{pad}}
\index{pad@{pad}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{pad}{pad}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+pad}



Definition at line 1265 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a58867f3a37a03b4d8904b09035352534}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a58867f3a37a03b4d8904b09035352534}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!partial\+\_\+hyps@{partial\+\_\+hyps}}
\index{partial\+\_\+hyps@{partial\+\_\+hyps}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{partial\+\_\+hyps}{partial\_hyps}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+partial\+\_\+hyps}



Definition at line 1287 of file controllable\+\_\+seq2seq.\+py.

\mbox{\Hypertarget{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a3f644c74f23d3f49e51bd65b234405d0}\label{classprojects_1_1controllable__dialogue_1_1controllable__seq2seq_1_1controllable__seq2seq_1_1Beam_a3f644c74f23d3f49e51bd65b234405d0}} 
\index{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}!scores@{scores}}
\index{scores@{scores}!projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam@{projects\+::controllable\+\_\+dialogue\+::controllable\+\_\+seq2seq\+::controllable\+\_\+seq2seq\+::\+Beam}}
\subsubsection{\texorpdfstring{scores}{scores}}
{\footnotesize\ttfamily projects.\+controllable\+\_\+dialogue.\+controllable\+\_\+seq2seq.\+controllable\+\_\+seq2seq.\+Beam.\+scores}



Definition at line 1268 of file controllable\+\_\+seq2seq.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
projects/controllable\+\_\+dialogue/controllable\+\_\+seq2seq/\hyperlink{controllable__seq2seq_8py}{controllable\+\_\+seq2seq.\+py}\end{DoxyCompactItemize}
