\hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld}{}\section{parlai.\+core.\+worlds.\+Hogwild\+World Class Reference}
\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld}\index{parlai.\+core.\+worlds.\+Hogwild\+World@{parlai.\+core.\+worlds.\+Hogwild\+World}}


Inheritance diagram for parlai.\+core.\+worlds.\+Hogwild\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=211pt]{d3/db3/classparlai_1_1core_1_1worlds_1_1HogwildWorld__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+core.\+worlds.\+Hogwild\+World\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=211pt]{dd/dd9/classparlai_1_1core_1_1worlds_1_1HogwildWorld__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_abc9321ac2153a0368c84354f1a89f836}{\+\_\+\+\_\+init\+\_\+\+\_\+}
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a1b7aed0a7b56712f22ee8b04c65d7c00}{display} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a0425099fbc33cb97d6fbe67dbd2e8a1f}{episode\+\_\+done} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae80d3f592818ac39b9cf8802270d8d8a}{epoch\+\_\+done} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a9853e25a58444d4516c3f6da8c44d9c2}{parley} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a67379773119cebd6ac70fce2abcb19a9}{get\+ID} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae488971481ec6c8ba803b2404ad70e56}{num\+\_\+examples} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae0b4dc3d2bb4d1dbda7970da03da1a6e}{num\+\_\+episodes} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a7dfc60f5229da37574c31479a0b2ce3a}{get\+\_\+task\+\_\+agent} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a0e26cfad1c63628cb43f554c470426b9}{get\+\_\+total\+\_\+exs} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a6bc364b91906b14d792957c8eeed5206}{get\+\_\+total\+\_\+epochs} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a11c6831feb2a54a0d9513b4a514d4097}{report} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a1f7e4c566078aebdb5e837c6fed62b17}{save\+\_\+agents} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae72983e6af34391880979491ced1dde6}{reset} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae57e2b90771c0feaa0496cb2885eae6d}{reset\+\_\+metrics} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a3960deb08a179884b1eea2e423437db2}{shutdown} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a4138f2e9cd59f349ac7b737256faf383}{inner\+\_\+world}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_adce46f602b3dbfb1b2aaaf2abfd502d6}{numthreads}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a0224a6c9e173d699a7da6ebe1451f3a6}{max\+\_\+exs}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a5465066ad260dd6f8aeb648bb3088cd5}{maxsize}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Creates a separate world for each thread (process).

Maintains a few shared objects to keep track of state:

- A Semaphore which represents queued examples to be processed. Every call
  of parley increments this counter; every time a Process claims an
  example, it decrements this counter.

- A Condition variable which notifies when there are no more queued
  examples.

- A boolean Value which represents whether the inner worlds should shutdown.

- An integer Value which contains the number of unprocessed examples queued
  (acquiring the semaphore only claims them--this counter is decremented
  once the processing is complete).
\end{DoxyVerb}
 

Definition at line 1058 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_abc9321ac2153a0368c84354f1a89f836}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_abc9321ac2153a0368c84354f1a89f836}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 1078 of file worlds.\+py.


\begin{DoxyCode}
1078     \textcolor{keyword}{def }\_\_init\_\_(self, opt: Opt, world):
1079         super().\_\_init\_\_(opt)
1080         self.inner\_world = world
1081         self.numthreads = opt[\textcolor{stringliteral}{'numthreads'}]
1082 
1083         self.sync: Dict[str, Any] = \{  \textcolor{comment}{# syncronization primitives}
1084             \textcolor{comment}{# semaphores for counting queued examples}
1085             \textcolor{stringliteral}{'queued\_sem'}: Semaphore(0),  \textcolor{comment}{# counts num exs to be processed}
1086             \textcolor{stringliteral}{'threads\_sem'}: Semaphore(0),  \textcolor{comment}{# counts threads}
1087             \textcolor{stringliteral}{'reset\_sem'}: Semaphore(0),  \textcolor{comment}{# allows threads to reset}
1088             \textcolor{comment}{# flags for communicating with threads}
1089             \textcolor{stringliteral}{'reset\_flag'}: Value(\textcolor{stringliteral}{'b'}, \textcolor{keyword}{False}),  \textcolor{comment}{# threads should reset}
1090             \textcolor{stringliteral}{'term\_flag'}: Value(\textcolor{stringliteral}{'b'}, \textcolor{keyword}{False}),  \textcolor{comment}{# threads should terminate}
1091             \textcolor{comment}{# counters}
1092             \textcolor{stringliteral}{'epoch\_done\_ctr'}: Value(\textcolor{stringliteral}{'i'}, 0),  \textcolor{comment}{# number of done threads}
1093             \textcolor{stringliteral}{'total\_parleys'}: Value(\textcolor{stringliteral}{'l'}, 0),  \textcolor{comment}{# number of parleys in threads}
1094         \}
1095 
1096         self.threads: List[HogwildProcess] = []
1097         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(self.numthreads):
1098             self.threads.append(HogwildProcess(i, opt, world.share(), self.sync))
1099             time.sleep(0.05)  \textcolor{comment}{# delay can help prevent deadlock in thread launches}
1100         \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} self.threads:
1101             t.start()
1102 
1103         \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} self.threads:
1104             \textcolor{comment}{# wait for threads to launch}
1105             \textcolor{comment}{# this makes sure that no threads get examples before all are set up}
1106             \textcolor{comment}{# otherwise they might reset one another after processing some exs}
1107             self.sync[\textcolor{stringliteral}{'threads\_sem'}].acquire()  \textcolor{comment}{# type: ignore}
1108 
1109         print(f\textcolor{stringliteral}{'[ \{self.numthreads\} threads initialized ]'})
1110 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a1b7aed0a7b56712f22ee8b04c65d7c00}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a1b7aed0a7b56712f22ee8b04c65d7c00}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!display@{display}}
\index{display@{display}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{display()}{display()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+display (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Unsupported operation.

Raises a `NotImplementedError`.
\end{DoxyVerb}
 

Definition at line 1111 of file worlds.\+py.


\begin{DoxyCode}
1111     \textcolor{keyword}{def }display(self):
1112         \textcolor{stringliteral}{"""}
1113 \textcolor{stringliteral}{        Unsupported operation.}
1114 \textcolor{stringliteral}{}
1115 \textcolor{stringliteral}{        Raises a `NotImplementedError`.}
1116 \textcolor{stringliteral}{        """}
1117         self.shutdown()
1118         \textcolor{keywordflow}{raise} NotImplementedError(
1119             \textcolor{stringliteral}{'Hogwild does not support displaying in-run'}
1120             \textcolor{stringliteral}{' task data. Use `--numthreads 1`.'}
1121         )
1122 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a0425099fbc33cb97d6fbe67dbd2e8a1f}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a0425099fbc33cb97d6fbe67dbd2e8a1f}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!episode\+\_\+done@{episode\+\_\+done}}
\index{episode\+\_\+done@{episode\+\_\+done}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{episode\+\_\+done()}{episode\_done()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+episode\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Unsupported operation.

Raises a `RuntimeError`.
\end{DoxyVerb}
 

Definition at line 1123 of file worlds.\+py.


\begin{DoxyCode}
1123     \textcolor{keyword}{def }episode\_done(self):
1124         \textcolor{stringliteral}{"""}
1125 \textcolor{stringliteral}{        Unsupported operation.}
1126 \textcolor{stringliteral}{}
1127 \textcolor{stringliteral}{        Raises a `RuntimeError`.}
1128 \textcolor{stringliteral}{        """}
1129         self.shutdown()
1130         \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'episode\_done() undefined for hogwild'})
1131 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae80d3f592818ac39b9cf8802270d8d8a}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae80d3f592818ac39b9cf8802270d8d8a}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!epoch\+\_\+done@{epoch\+\_\+done}}
\index{epoch\+\_\+done@{epoch\+\_\+done}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{epoch\+\_\+done()}{epoch\_done()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+epoch\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return whether the epoch is finished.
\end{DoxyVerb}
 

Definition at line 1132 of file worlds.\+py.


\begin{DoxyCode}
1132     \textcolor{keyword}{def }epoch\_done(self):
1133         \textcolor{stringliteral}{"""}
1134 \textcolor{stringliteral}{        Return whether the epoch is finished.}
1135 \textcolor{stringliteral}{        """}
1136         \textcolor{keywordflow}{return} self.sync[\textcolor{stringliteral}{'epoch\_done\_ctr'}].value == self.numthreads
1137 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a7dfc60f5229da37574c31479a0b2ce3a}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a7dfc60f5229da37574c31479a0b2ce3a}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!get\+\_\+task\+\_\+agent@{get\+\_\+task\+\_\+agent}}
\index{get\+\_\+task\+\_\+agent@{get\+\_\+task\+\_\+agent}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{get\+\_\+task\+\_\+agent()}{get\_task\_agent()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+get\+\_\+task\+\_\+agent (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return task agent of inner world.
\end{DoxyVerb}
 

Definition at line 1168 of file worlds.\+py.


\begin{DoxyCode}
1168     \textcolor{keyword}{def }get\_task\_agent(self):
1169         \textcolor{stringliteral}{"""}
1170 \textcolor{stringliteral}{        Return task agent of inner world.}
1171 \textcolor{stringliteral}{        """}
1172         \textcolor{keywordflow}{return} self.inner\_world.get\_task\_agent()
1173 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a6bc364b91906b14d792957c8eeed5206}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a6bc364b91906b14d792957c8eeed5206}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!get\+\_\+total\+\_\+epochs@{get\+\_\+total\+\_\+epochs}}
\index{get\+\_\+total\+\_\+epochs@{get\+\_\+total\+\_\+epochs}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{get\+\_\+total\+\_\+epochs()}{get\_total\_epochs()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+get\+\_\+total\+\_\+epochs (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return total amount of epochs on which the world has trained.
\end{DoxyVerb}
 

Definition at line 1180 of file worlds.\+py.


\begin{DoxyCode}
1180     \textcolor{keyword}{def }get\_total\_epochs(self):
1181         \textcolor{stringliteral}{"""}
1182 \textcolor{stringliteral}{        Return total amount of epochs on which the world has trained.}
1183 \textcolor{stringliteral}{        """}
1184         \textcolor{keywordflow}{if} self.max\_exs \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
1185             \textcolor{keywordflow}{if} \textcolor{stringliteral}{'num\_epochs'} \textcolor{keywordflow}{in} self.opt \textcolor{keywordflow}{and} self.opt[\textcolor{stringliteral}{'num\_epochs'}] > 0:
1186                 \textcolor{keywordflow}{if} self.num\_examples():
1187                     self.max\_exs = self.num\_examples() * self.opt[\textcolor{stringliteral}{'num\_epochs'}]
1188                 \textcolor{keywordflow}{else}:
1189                     self.max\_exs = -1
1190             \textcolor{keywordflow}{else}:
1191                 self.max\_exs = -1
1192         \textcolor{keywordflow}{if} self.max\_exs > 0:
1193             \textcolor{keywordflow}{return} (
1194                 self.sync[\textcolor{stringliteral}{'total\_parleys'}].value
1195                 * self.opt.get(\textcolor{stringliteral}{'batchsize'}, 1)
1196                 / self.num\_examples()
1197             )
1198         \textcolor{keywordflow}{else}:
1199             \textcolor{keywordflow}{return} self.total\_epochs
1200 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a0e26cfad1c63628cb43f554c470426b9}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a0e26cfad1c63628cb43f554c470426b9}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!get\+\_\+total\+\_\+exs@{get\+\_\+total\+\_\+exs}}
\index{get\+\_\+total\+\_\+exs@{get\+\_\+total\+\_\+exs}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{get\+\_\+total\+\_\+exs()}{get\_total\_exs()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+get\+\_\+total\+\_\+exs (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the number of processed examples.
\end{DoxyVerb}
 

Definition at line 1174 of file worlds.\+py.


\begin{DoxyCode}
1174     \textcolor{keyword}{def }get\_total\_exs(self):
1175         \textcolor{stringliteral}{"""}
1176 \textcolor{stringliteral}{        Return the number of processed examples.}
1177 \textcolor{stringliteral}{        """}
1178         \textcolor{keywordflow}{return} self.inner\_world.get\_total\_exs()
1179 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a67379773119cebd6ac70fce2abcb19a9}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a67379773119cebd6ac70fce2abcb19a9}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!get\+ID@{get\+ID}}
\index{get\+ID@{get\+ID}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{get\+I\+D()}{getID()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+get\+ID (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the inner world's ID.
\end{DoxyVerb}
 

Definition at line 1149 of file worlds.\+py.


\begin{DoxyCode}
1149     \textcolor{keyword}{def }getID(self):
1150         \textcolor{stringliteral}{"""}
1151 \textcolor{stringliteral}{        Return the inner world's ID.}
1152 \textcolor{stringliteral}{        """}
1153         \textcolor{keywordflow}{return} self.inner\_world.getID()
1154 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae0b4dc3d2bb4d1dbda7970da03da1a6e}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae0b4dc3d2bb4d1dbda7970da03da1a6e}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!num\+\_\+episodes@{num\+\_\+episodes}}
\index{num\+\_\+episodes@{num\+\_\+episodes}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{num\+\_\+episodes()}{num\_episodes()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+num\+\_\+episodes (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the number of episodes.
\end{DoxyVerb}
 

Definition at line 1162 of file worlds.\+py.


\begin{DoxyCode}
1162     \textcolor{keyword}{def }num\_episodes(self):
1163         \textcolor{stringliteral}{"""}
1164 \textcolor{stringliteral}{        Return the number of episodes.}
1165 \textcolor{stringliteral}{        """}
1166         \textcolor{keywordflow}{return} self.inner\_world.num\_episodes()
1167 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae488971481ec6c8ba803b2404ad70e56}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae488971481ec6c8ba803b2404ad70e56}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!num\+\_\+examples@{num\+\_\+examples}}
\index{num\+\_\+examples@{num\+\_\+examples}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{num\+\_\+examples()}{num\_examples()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+num\+\_\+examples (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the number of examples.
\end{DoxyVerb}
 

Definition at line 1156 of file worlds.\+py.


\begin{DoxyCode}
1156     \textcolor{keyword}{def }num\_examples(self):
1157         \textcolor{stringliteral}{"""}
1158 \textcolor{stringliteral}{        Return the number of examples.}
1159 \textcolor{stringliteral}{        """}
1160         \textcolor{keywordflow}{return} self.inner\_world.num\_examples()
1161 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a9853e25a58444d4516c3f6da8c44d9c2}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a9853e25a58444d4516c3f6da8c44d9c2}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!parley@{parley}}
\index{parley@{parley}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{parley()}{parley()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+parley (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Queue one item to be processed.
\end{DoxyVerb}
 

Definition at line 1138 of file worlds.\+py.


\begin{DoxyCode}
1138     \textcolor{keyword}{def }parley(self):
1139         \textcolor{stringliteral}{"""}
1140 \textcolor{stringliteral}{        Queue one item to be processed.}
1141 \textcolor{stringliteral}{        """}
1142         \textcolor{comment}{# schedule an example}
1143         self.sync[\textcolor{stringliteral}{'queued\_sem'}].\hyperlink{namespaceconf_a325dc746d8bf05c54d26351c35a21d90}{release}()
1144         \textcolor{comment}{# keep main process from getting too far ahead of the threads}
1145         \textcolor{comment}{# this way it can only queue up to numthreads unprocessed examples}
1146         self.sync[\textcolor{stringliteral}{'threads\_sem'}].acquire()
1147         self.update\_counters()
1148 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a11c6831feb2a54a0d9513b4a514d4097}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a11c6831feb2a54a0d9513b4a514d4097}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!report@{report}}
\index{report@{report}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{report()}{report()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+report (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Report the inner world's metrics.
\end{DoxyVerb}
 

Definition at line 1201 of file worlds.\+py.


\begin{DoxyCode}
1201     \textcolor{keyword}{def }\hyperlink{namespaceprojects_1_1convai2_1_1eval__f1_a01a47b9c08dad189837a51f085defc45}{report}(self):
1202         \textcolor{stringliteral}{"""}
1203 \textcolor{stringliteral}{        Report the inner world's metrics.}
1204 \textcolor{stringliteral}{        """}
1205         \textcolor{keywordflow}{return} self.inner\_world.\hyperlink{namespaceprojects_1_1convai2_1_1eval__f1_a01a47b9c08dad189837a51f085defc45}{report}()
1206 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae72983e6af34391880979491ced1dde6}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae72983e6af34391880979491ced1dde6}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!reset@{reset}}
\index{reset@{reset}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+reset (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset the inner world.
\end{DoxyVerb}
 

Definition at line 1213 of file worlds.\+py.


\begin{DoxyCode}
1213     \textcolor{keyword}{def }reset(self):
1214         \textcolor{stringliteral}{"""}
1215 \textcolor{stringliteral}{        Reset the inner world.}
1216 \textcolor{stringliteral}{        """}
1217         \textcolor{comment}{# set epoch done counter negative so all threads know to reset}
1218         with self.sync[\textcolor{stringliteral}{'epoch\_done\_ctr'}].get\_lock():
1219             threads\_asleep = self.sync[\textcolor{stringliteral}{'epoch\_done\_ctr'}].value > 0
1220             self.sync[\textcolor{stringliteral}{'epoch\_done\_ctr'}].value = -len(self.threads)
1221         \textcolor{keywordflow}{if} threads\_asleep:
1222             \textcolor{comment}{# release reset semaphore only if threads had reached epoch\_done}
1223             \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} self.threads:
1224                 self.sync[\textcolor{stringliteral}{'reset\_sem'}].\hyperlink{namespaceconf_a325dc746d8bf05c54d26351c35a21d90}{release}()
1225 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae57e2b90771c0feaa0496cb2885eae6d}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_ae57e2b90771c0feaa0496cb2885eae6d}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!reset\+\_\+metrics@{reset\+\_\+metrics}}
\index{reset\+\_\+metrics@{reset\+\_\+metrics}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{reset\+\_\+metrics()}{reset\_metrics()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+reset\+\_\+metrics (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reset metrics for the inner world.
\end{DoxyVerb}
 

Definition at line 1226 of file worlds.\+py.


\begin{DoxyCode}
1226     \textcolor{keyword}{def }reset\_metrics(self):
1227         \textcolor{stringliteral}{"""}
1228 \textcolor{stringliteral}{        Reset metrics for the inner world.}
1229 \textcolor{stringliteral}{        """}
1230         self.inner\_world.reset\_metrics()
1231 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a1f7e4c566078aebdb5e837c6fed62b17}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a1f7e4c566078aebdb5e837c6fed62b17}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!save\+\_\+agents@{save\+\_\+agents}}
\index{save\+\_\+agents@{save\+\_\+agents}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{save\+\_\+agents()}{save\_agents()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+save\+\_\+agents (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save the inner world's agents.
\end{DoxyVerb}
 

Definition at line 1207 of file worlds.\+py.


\begin{DoxyCode}
1207     \textcolor{keyword}{def }save\_agents(self):
1208         \textcolor{stringliteral}{"""}
1209 \textcolor{stringliteral}{        Save the inner world's agents.}
1210 \textcolor{stringliteral}{        """}
1211         self.inner\_world.save\_agents()
1212 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a3960deb08a179884b1eea2e423437db2}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a3960deb08a179884b1eea2e423437db2}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily def parlai.\+core.\+worlds.\+Hogwild\+World.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set shutdown flag and wake threads up to close themselves.
\end{DoxyVerb}
 

Definition at line 1232 of file worlds.\+py.


\begin{DoxyCode}
1232     \textcolor{keyword}{def }shutdown(self):
1233         \textcolor{stringliteral}{"""}
1234 \textcolor{stringliteral}{        Set shutdown flag and wake threads up to close themselves.}
1235 \textcolor{stringliteral}{        """}
1236         \textcolor{comment}{# set shutdown flag}
1237         with self.sync[\textcolor{stringliteral}{'term\_flag'}].get\_lock():
1238             self.sync[\textcolor{stringliteral}{'term\_flag'}].value = \textcolor{keyword}{True}
1239 
1240         \textcolor{comment}{# wake up each thread by queueing fake examples or setting reset flag}
1241         \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} self.threads:
1242             self.sync[\textcolor{stringliteral}{'queued\_sem'}].\hyperlink{namespaceconf_a325dc746d8bf05c54d26351c35a21d90}{release}()
1243             self.sync[\textcolor{stringliteral}{'reset\_sem'}].\hyperlink{namespaceconf_a325dc746d8bf05c54d26351c35a21d90}{release}()
1244 
1245         \textcolor{comment}{# make sure epoch counter is reset so threads aren't waiting for it}
1246         with self.sync[\textcolor{stringliteral}{'epoch\_done\_ctr'}].get\_lock():
1247             self.sync[\textcolor{stringliteral}{'epoch\_done\_ctr'}].value = 0
1248 
1249         \textcolor{comment}{# wait for threads to close}
1250         \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} self.threads:
1251             t.join()
1252         self.inner\_world.shutdown()
1253 
1254 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a4138f2e9cd59f349ac7b737256faf383}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a4138f2e9cd59f349ac7b737256faf383}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!inner\+\_\+world@{inner\+\_\+world}}
\index{inner\+\_\+world@{inner\+\_\+world}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{inner\+\_\+world}{inner\_world}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Hogwild\+World.\+inner\+\_\+world}



Definition at line 1080 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a0224a6c9e173d699a7da6ebe1451f3a6}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a0224a6c9e173d699a7da6ebe1451f3a6}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!max\+\_\+exs@{max\+\_\+exs}}
\index{max\+\_\+exs@{max\+\_\+exs}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{max\+\_\+exs}{max\_exs}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Hogwild\+World.\+max\+\_\+exs}



Definition at line 1187 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a5465066ad260dd6f8aeb648bb3088cd5}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_a5465066ad260dd6f8aeb648bb3088cd5}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!maxsize@{maxsize}}
\index{maxsize@{maxsize}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{maxsize}{maxsize}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Hogwild\+World.\+maxsize\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1155 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1worlds_1_1HogwildWorld_adce46f602b3dbfb1b2aaaf2abfd502d6}\label{classparlai_1_1core_1_1worlds_1_1HogwildWorld_adce46f602b3dbfb1b2aaaf2abfd502d6}} 
\index{parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}!numthreads@{numthreads}}
\index{numthreads@{numthreads}!parlai\+::core\+::worlds\+::\+Hogwild\+World@{parlai\+::core\+::worlds\+::\+Hogwild\+World}}
\subsubsection{\texorpdfstring{numthreads}{numthreads}}
{\footnotesize\ttfamily parlai.\+core.\+worlds.\+Hogwild\+World.\+numthreads}



Definition at line 1081 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/core/\hyperlink{parlai_2core_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
