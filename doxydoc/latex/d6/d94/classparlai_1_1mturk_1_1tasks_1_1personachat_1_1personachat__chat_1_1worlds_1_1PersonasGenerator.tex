\hypertarget{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator}{}\section{parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator Class Reference}
\label{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator}\index{parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator@{parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator}}


Inheritance diagram for parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=287pt]{d6/dd3/classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=287pt]{d6/d38/classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a5d28818c8d8f07d9f0fa0fdac8a9f516}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, opt)
\item 
def \hyperlink{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a432b4b3a15961d806c89e1a9c840bd4b}{add\+\_\+idx\+\_\+stack} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a30fafb7faad8a5ad1c0c15bb2e1789f8}{pop\+\_\+persona} (self)
\item 
def \hyperlink{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a378e086892092b573b4e4014e8d6abc5}{push\+\_\+persona} (self, idx)
\item 
def \hyperlink{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a49c91f6d43cf77f815700b6837f0400d}{save\+\_\+idx\+\_\+stack} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_ac13e6005f73e2172b1e188bf7aa3debf}{personas\+\_\+idx\+\_\+stack\+\_\+path}
\item 
\hyperlink{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a8fca2a7dc0bf0414a2e46024de75882b}{personas\+\_\+path}
\item 
\hyperlink{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_ac31580ffc80d96ba4a04480e1961fdde}{personas\+\_\+name\+\_\+list}
\item 
\hyperlink{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a608c0f26f6e8ca388ce2e336068fae51}{idx\+\_\+stack}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 27 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a5d28818c8d8f07d9f0fa0fdac8a9f516}\label{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a5d28818c8d8f07d9f0fa0fdac8a9f516}} 
\index{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 28 of file worlds.\+py.


\begin{DoxyCode}
28     \textcolor{keyword}{def }\_\_init\_\_(self, opt):
29         self.personas\_idx\_stack\_path = os.path.join(
30             opt[\textcolor{stringliteral}{'extract\_personas\_path'}], \textcolor{stringliteral}{'./personas\_idx\_stack.pkl'}
31         )
32 
33         self.personas\_path = \textcolor{stringliteral}{'\{\}/personas-\{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
34             opt[\textcolor{stringliteral}{'extract\_personas\_path'}],
35             opt[\textcolor{stringliteral}{'persona\_type'}] + \textcolor{stringliteral}{'Revised'} \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'revised'}] \textcolor{keywordflow}{else} \textcolor{stringliteral}{'Original'},
36         )
37 
38         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(self.personas\_path):
39             opt[\textcolor{stringliteral}{'personas\_path'}] = self.personas\_path
40             main\_extract(opt)
41         self.personas\_name\_list = []
42 
43         \textcolor{keywordflow}{for} f\_name \textcolor{keywordflow}{in} os.listdir(self.personas\_path):
44             \textcolor{keywordflow}{if} f\_name.endswith(\textcolor{stringliteral}{'.pkl'}):
45                 self.personas\_name\_list.append(f\_name)
46 
47         \textcolor{keywordflow}{if} os.path.exists(self.personas\_idx\_stack\_path):
48             with open(self.personas\_idx\_stack\_path, \textcolor{stringliteral}{'rb'}) \textcolor{keyword}{as} handle:
49                 self.idx\_stack = pickle.load(handle)
50         \textcolor{keywordflow}{else}:
51             self.idx\_stack = []
52             self.add\_idx\_stack()
53             self.save\_idx\_stack()
54         \textcolor{keywordflow}{pass}
55 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a432b4b3a15961d806c89e1a9c840bd4b}\label{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a432b4b3a15961d806c89e1a9c840bd4b}} 
\index{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}!add\+\_\+idx\+\_\+stack@{add\+\_\+idx\+\_\+stack}}
\index{add\+\_\+idx\+\_\+stack@{add\+\_\+idx\+\_\+stack}!parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}}
\subsubsection{\texorpdfstring{add\+\_\+idx\+\_\+stack()}{add\_idx\_stack()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator.\+add\+\_\+idx\+\_\+stack (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 56 of file worlds.\+py.


\begin{DoxyCode}
56     \textcolor{keyword}{def }add\_idx\_stack(self):
57         stack = [i \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(self.personas\_name\_list))]
58         random.seed()
59         random.shuffle(stack)
60         self.idx\_stack = stack + self.idx\_stack
61 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a30fafb7faad8a5ad1c0c15bb2e1789f8}\label{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a30fafb7faad8a5ad1c0c15bb2e1789f8}} 
\index{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}!pop\+\_\+persona@{pop\+\_\+persona}}
\index{pop\+\_\+persona@{pop\+\_\+persona}!parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}}
\subsubsection{\texorpdfstring{pop\+\_\+persona()}{pop\_persona()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator.\+pop\+\_\+persona (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 62 of file worlds.\+py.


\begin{DoxyCode}
62     \textcolor{keyword}{def }pop\_persona(self):
63         \textcolor{keywordflow}{if} len(self.idx\_stack) == 0:
64             self.add\_idx\_stack()
65         idx = self.idx\_stack.pop()
66         data = np.load(
67             os.path.join(self.personas\_path, self.personas\_name\_list[\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(idx)]),
68             allow\_pickle=\textcolor{keyword}{True},
69         )
70         \textcolor{keywordflow}{return} (idx, data)
71 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a378e086892092b573b4e4014e8d6abc5}\label{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a378e086892092b573b4e4014e8d6abc5}} 
\index{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}!push\+\_\+persona@{push\+\_\+persona}}
\index{push\+\_\+persona@{push\+\_\+persona}!parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}}
\subsubsection{\texorpdfstring{push\+\_\+persona()}{push\_persona()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator.\+push\+\_\+persona (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{idx }\end{DoxyParamCaption})}



Definition at line 72 of file worlds.\+py.


\begin{DoxyCode}
72     \textcolor{keyword}{def }push\_persona(self, idx):
73         self.idx\_stack.append(idx)
74 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a49c91f6d43cf77f815700b6837f0400d}\label{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a49c91f6d43cf77f815700b6837f0400d}} 
\index{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}!save\+\_\+idx\+\_\+stack@{save\+\_\+idx\+\_\+stack}}
\index{save\+\_\+idx\+\_\+stack@{save\+\_\+idx\+\_\+stack}!parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}}
\subsubsection{\texorpdfstring{save\+\_\+idx\+\_\+stack()}{save\_idx\_stack()}}
{\footnotesize\ttfamily def parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator.\+save\+\_\+idx\+\_\+stack (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 75 of file worlds.\+py.


\begin{DoxyCode}
75     \textcolor{keyword}{def }save\_idx\_stack(self):
76         with open(self.personas\_idx\_stack\_path, \textcolor{stringliteral}{'wb'}) \textcolor{keyword}{as} handle:
77             pickle.dump(self.idx\_stack, handle)
78 
79 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a608c0f26f6e8ca388ce2e336068fae51}\label{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a608c0f26f6e8ca388ce2e336068fae51}} 
\index{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}!idx\+\_\+stack@{idx\+\_\+stack}}
\index{idx\+\_\+stack@{idx\+\_\+stack}!parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}}
\subsubsection{\texorpdfstring{idx\+\_\+stack}{idx\_stack}}
{\footnotesize\ttfamily parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator.\+idx\+\_\+stack}



Definition at line 49 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_ac13e6005f73e2172b1e188bf7aa3debf}\label{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_ac13e6005f73e2172b1e188bf7aa3debf}} 
\index{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}!personas\+\_\+idx\+\_\+stack\+\_\+path@{personas\+\_\+idx\+\_\+stack\+\_\+path}}
\index{personas\+\_\+idx\+\_\+stack\+\_\+path@{personas\+\_\+idx\+\_\+stack\+\_\+path}!parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}}
\subsubsection{\texorpdfstring{personas\+\_\+idx\+\_\+stack\+\_\+path}{personas\_idx\_stack\_path}}
{\footnotesize\ttfamily parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator.\+personas\+\_\+idx\+\_\+stack\+\_\+path}



Definition at line 29 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_ac31580ffc80d96ba4a04480e1961fdde}\label{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_ac31580ffc80d96ba4a04480e1961fdde}} 
\index{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}!personas\+\_\+name\+\_\+list@{personas\+\_\+name\+\_\+list}}
\index{personas\+\_\+name\+\_\+list@{personas\+\_\+name\+\_\+list}!parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}}
\subsubsection{\texorpdfstring{personas\+\_\+name\+\_\+list}{personas\_name\_list}}
{\footnotesize\ttfamily parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator.\+personas\+\_\+name\+\_\+list}



Definition at line 41 of file worlds.\+py.

\mbox{\Hypertarget{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a8fca2a7dc0bf0414a2e46024de75882b}\label{classparlai_1_1mturk_1_1tasks_1_1personachat_1_1personachat__chat_1_1worlds_1_1PersonasGenerator_a8fca2a7dc0bf0414a2e46024de75882b}} 
\index{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}!personas\+\_\+path@{personas\+\_\+path}}
\index{personas\+\_\+path@{personas\+\_\+path}!parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator@{parlai\+::mturk\+::tasks\+::personachat\+::personachat\+\_\+chat\+::worlds\+::\+Personas\+Generator}}
\subsubsection{\texorpdfstring{personas\+\_\+path}{personas\_path}}
{\footnotesize\ttfamily parlai.\+mturk.\+tasks.\+personachat.\+personachat\+\_\+chat.\+worlds.\+Personas\+Generator.\+personas\+\_\+path}



Definition at line 33 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/tasks/personachat/personachat\+\_\+chat/\hyperlink{parlai_2mturk_2tasks_2personachat_2personachat__chat_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
