\hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel}{}\section{parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model Class Reference}
\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel}\index{parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model@{parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model}}


Inheritance diagram for parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=247pt]{d8/dbb/classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=247pt]{d2/d0d/classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a17276e3090a132914c0adae133e60357}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, opt, dictionary)
\item 
def \hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a9b9261bca59f10692c15cbaaa3ffce65}{reorder\+\_\+encoder\+\_\+states} (self, encoder\+\_\+states, indices)
\item 
def \hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a7ee3a87dd94d18353bca09990e8d5821}{reorder\+\_\+decoder\+\_\+incremental\+\_\+state} (self, incremental\+\_\+state, inds)
\item 
def \hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ae0f0d3d038cc12075501aae3a059c997}{output} (self, tensor)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_aefac02b3630ef361bb008b4f7973c55b}{pad\+\_\+idx}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a381b6d63e5aba194730c36d9fb93c6d6}{start\+\_\+idx}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ab2b8403205fcd407e47546dc56022d2f}{end\+\_\+idx}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a18411754103e8c8f4cd2e9338351b98d}{embeddings}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_af165b8ec1505f768c530aea02d68ae09}{encoder}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a6467f0fdec226329cb8efe77245996a5}{decoder}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Implements a full generator model, with one encoder and one decoder.
\end{DoxyVerb}
 

Definition at line 806 of file modules.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a17276e3090a132914c0adae133e60357}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a17276e3090a132914c0adae133e60357}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{dictionary }\end{DoxyParamCaption})}



Definition at line 811 of file modules.\+py.


\begin{DoxyCode}
811     \textcolor{keyword}{def }\_\_init\_\_(self, opt, dictionary):
812         self.pad\_idx = dictionary[dictionary.null\_token]
813         self.start\_idx = dictionary[dictionary.start\_token]
814         self.end\_idx = dictionary[dictionary.end\_token]
815         super().\_\_init\_\_(self.pad\_idx, self.start\_idx, self.end\_idx)
816         self.embeddings = \_create\_embeddings(
817             dictionary, opt[\textcolor{stringliteral}{'embedding\_size'}], self.pad\_idx
818         )
819 
820         \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'n\_positions'}):
821             \textcolor{comment}{# if the number of positions is explicitly provided, use that}
822             n\_positions = opt[\textcolor{stringliteral}{'n\_positions'}]
823         \textcolor{keywordflow}{else}:
824             \textcolor{comment}{# else, use the worst case from truncate}
825             n\_positions = max(
826                 opt.get(\textcolor{stringliteral}{'truncate'}) \textcolor{keywordflow}{or} 0,
827                 opt.get(\textcolor{stringliteral}{'text\_truncate'}) \textcolor{keywordflow}{or} 0,
828                 opt.get(\textcolor{stringliteral}{'label\_truncate'}) \textcolor{keywordflow}{or} 0,
829             )
830             \textcolor{keywordflow}{if} n\_positions == 0:
831                 \textcolor{comment}{# default to 1024}
832                 n\_positions = 1024
833         n\_segments = opt.get(\textcolor{stringliteral}{'n\_segments'}, 0)
834 
835         \textcolor{keywordflow}{if} n\_positions < 0:
836             \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{'n\_positions must be positive'})
837 
838         self.encoder = \_build\_encoder(
839             opt,
840             dictionary,
841             self.embeddings,
842             self.pad\_idx,
843             reduction\_type=\textcolor{keywordtype}{None},
844             n\_positions=n\_positions,
845             n\_segments=n\_segments,
846         )
847         self.decoder = \_build\_decoder(
848             opt, dictionary, self.embeddings, self.pad\_idx, n\_positions=n\_positions
849         )
850 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ae0f0d3d038cc12075501aae3a059c997}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ae0f0d3d038cc12075501aae3a059c997}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!output@{output}}
\index{output@{output}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{output()}{output()}}
{\footnotesize\ttfamily def parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+output (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{tensor }\end{DoxyParamCaption})}

\begin{DoxyVerb}Compute output logits.
\end{DoxyVerb}
 

Definition at line 873 of file modules.\+py.


\begin{DoxyCode}
873     \textcolor{keyword}{def }output(self, tensor):
874         \textcolor{stringliteral}{"""}
875 \textcolor{stringliteral}{        Compute output logits.}
876 \textcolor{stringliteral}{        """}
877         \textcolor{comment}{# project back to vocabulary}
878         output = F.linear(tensor, self.embeddings.weight)
879         \textcolor{keywordflow}{return} output
880 
881 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a7ee3a87dd94d18353bca09990e8d5821}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a7ee3a87dd94d18353bca09990e8d5821}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!reorder\+\_\+decoder\+\_\+incremental\+\_\+state@{reorder\+\_\+decoder\+\_\+incremental\+\_\+state}}
\index{reorder\+\_\+decoder\+\_\+incremental\+\_\+state@{reorder\+\_\+decoder\+\_\+incremental\+\_\+state}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{reorder\+\_\+decoder\+\_\+incremental\+\_\+state()}{reorder\_decoder\_incremental\_state()}}
{\footnotesize\ttfamily def parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+reorder\+\_\+decoder\+\_\+incremental\+\_\+state (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{incremental\+\_\+state,  }\item[{}]{inds }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reorder the decoder incremental state.

Not implemented in Transformers, since ``incremental_state`` is always None.
\end{DoxyVerb}
 

Definition at line 864 of file modules.\+py.


\begin{DoxyCode}
864     \textcolor{keyword}{def }reorder\_decoder\_incremental\_state(self, incremental\_state, inds):
865         \textcolor{stringliteral}{"""}
866 \textcolor{stringliteral}{        Reorder the decoder incremental state.}
867 \textcolor{stringliteral}{}
868 \textcolor{stringliteral}{        Not implemented in Transformers, since ``incremental\_state`` is always None.}
869 \textcolor{stringliteral}{        """}
870         \textcolor{comment}{# no support for incremental decoding at this time}
871         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
872 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a9b9261bca59f10692c15cbaaa3ffce65}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a9b9261bca59f10692c15cbaaa3ffce65}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!reorder\+\_\+encoder\+\_\+states@{reorder\+\_\+encoder\+\_\+states}}
\index{reorder\+\_\+encoder\+\_\+states@{reorder\+\_\+encoder\+\_\+states}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{reorder\+\_\+encoder\+\_\+states()}{reorder\_encoder\_states()}}
{\footnotesize\ttfamily def parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+reorder\+\_\+encoder\+\_\+states (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{encoder\+\_\+states,  }\item[{}]{indices }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reorder the encoder states.

See ``TorchGeneratorModel.reorder_encoder_states`` for a description.
\end{DoxyVerb}
 

Definition at line 851 of file modules.\+py.


\begin{DoxyCode}
851     \textcolor{keyword}{def }reorder\_encoder\_states(self, encoder\_states, indices):
852         \textcolor{stringliteral}{"""}
853 \textcolor{stringliteral}{        Reorder the encoder states.}
854 \textcolor{stringliteral}{}
855 \textcolor{stringliteral}{        See ``TorchGeneratorModel.reorder\_encoder\_states`` for a description.}
856 \textcolor{stringliteral}{        """}
857         enc, mask = encoder\_states
858         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} torch.is\_tensor(indices):
859             indices = torch.LongTensor(indices).to(enc.device)
860         enc = torch.index\_select(enc, 0, indices)
861         mask = torch.index\_select(mask, 0, indices)
862         \textcolor{keywordflow}{return} enc, mask
863 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a6467f0fdec226329cb8efe77245996a5}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a6467f0fdec226329cb8efe77245996a5}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!decoder@{decoder}}
\index{decoder@{decoder}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{decoder}{decoder}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+decoder}



Definition at line 847 of file modules.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a18411754103e8c8f4cd2e9338351b98d}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a18411754103e8c8f4cd2e9338351b98d}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!embeddings@{embeddings}}
\index{embeddings@{embeddings}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{embeddings}{embeddings}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+embeddings}



Definition at line 816 of file modules.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_af165b8ec1505f768c530aea02d68ae09}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_af165b8ec1505f768c530aea02d68ae09}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!encoder@{encoder}}
\index{encoder@{encoder}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{encoder}{encoder}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+encoder}



Definition at line 838 of file modules.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ab2b8403205fcd407e47546dc56022d2f}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ab2b8403205fcd407e47546dc56022d2f}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!end\+\_\+idx@{end\+\_\+idx}}
\index{end\+\_\+idx@{end\+\_\+idx}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{end\+\_\+idx}{end\_idx}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+end\+\_\+idx}



Definition at line 814 of file modules.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_aefac02b3630ef361bb008b4f7973c55b}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_aefac02b3630ef361bb008b4f7973c55b}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!pad\+\_\+idx@{pad\+\_\+idx}}
\index{pad\+\_\+idx@{pad\+\_\+idx}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{pad\+\_\+idx}{pad\_idx}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+pad\+\_\+idx}



Definition at line 812 of file modules.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a381b6d63e5aba194730c36d9fb93c6d6}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a381b6d63e5aba194730c36d9fb93c6d6}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!start\+\_\+idx@{start\+\_\+idx}}
\index{start\+\_\+idx@{start\+\_\+idx}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{start\+\_\+idx}{start\_idx}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+start\+\_\+idx}



Definition at line 813 of file modules.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/agents/transformer/\hyperlink{parlai_2agents_2transformer_2modules_8py}{modules.\+py}\end{DoxyCompactItemize}
