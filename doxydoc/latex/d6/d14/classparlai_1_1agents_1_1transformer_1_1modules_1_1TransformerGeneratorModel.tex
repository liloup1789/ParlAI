\hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel}{}\section{parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model Class Reference}
\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel}\index{parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model@{parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model}}


Inheritance diagram for parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=247pt]{d8/dbb/classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=247pt]{d2/d0d/classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a17276e3090a132914c0adae133e60357}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, opt, dictionary)
\item 
def \hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a9b9261bca59f10692c15cbaaa3ffce65}{reorder\+\_\+encoder\+\_\+states} (self, encoder\+\_\+states, indices)
\item 
def \hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a3b03690f271b1a65764e3812b2417ba2}{reorder\+\_\+decoder\+\_\+incremental\+\_\+state}
\item 
def \hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ae0f0d3d038cc12075501aae3a059c997}{output} (self, tensor)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_aefac02b3630ef361bb008b4f7973c55b}{pad\+\_\+idx}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a381b6d63e5aba194730c36d9fb93c6d6}{start\+\_\+idx}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ab2b8403205fcd407e47546dc56022d2f}{end\+\_\+idx}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a18411754103e8c8f4cd2e9338351b98d}{embeddings}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_af165b8ec1505f768c530aea02d68ae09}{encoder}
\item 
\hyperlink{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a6467f0fdec226329cb8efe77245996a5}{decoder}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Implements a full generator model, with one encoder and one decoder.
\end{DoxyVerb}
 

Definition at line 863 of file modules.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a17276e3090a132914c0adae133e60357}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a17276e3090a132914c0adae133e60357}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{dictionary }\end{DoxyParamCaption})}



Definition at line 868 of file modules.\+py.


\begin{DoxyCode}
868     \textcolor{keyword}{def }\_\_init\_\_(self, opt, dictionary):
869         self.pad\_idx = dictionary[dictionary.null\_token]
870         self.start\_idx = dictionary[dictionary.start\_token]
871         self.end\_idx = dictionary[dictionary.end\_token]
872         super().\_\_init\_\_(self.pad\_idx, self.start\_idx, self.end\_idx)
873         self.embeddings = \_create\_embeddings(
874             dictionary, opt[\textcolor{stringliteral}{'embedding\_size'}], self.pad\_idx
875         )
876 
877         \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'n\_positions'}):
878             \textcolor{comment}{# if the number of positions is explicitly provided, use that}
879             n\_positions = opt[\textcolor{stringliteral}{'n\_positions'}]
880         \textcolor{keywordflow}{else}:
881             \textcolor{comment}{# else, use the worst case from truncate}
882             n\_positions = max(
883                 opt.get(\textcolor{stringliteral}{'truncate'}) \textcolor{keywordflow}{or} 0,
884                 opt.get(\textcolor{stringliteral}{'text\_truncate'}) \textcolor{keywordflow}{or} 0,
885                 opt.get(\textcolor{stringliteral}{'label\_truncate'}) \textcolor{keywordflow}{or} 0,
886             )
887             \textcolor{keywordflow}{if} n\_positions == 0:
888                 \textcolor{comment}{# default to 1024}
889                 n\_positions = 1024
890         n\_segments = opt.get(\textcolor{stringliteral}{'n\_segments'}, 0)
891 
892         \textcolor{keywordflow}{if} n\_positions < 0:
893             \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{'n\_positions must be positive'})
894 
895         self.encoder = \_build\_encoder(
896             opt,
897             dictionary,
898             self.embeddings,
899             self.pad\_idx,
900             reduction\_type=\textcolor{keywordtype}{None},
901             n\_positions=n\_positions,
902             n\_segments=n\_segments,
903         )
904         self.decoder = \_build\_decoder(
905             opt, dictionary, self.embeddings, self.pad\_idx, n\_positions=n\_positions
906         )
907 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ae0f0d3d038cc12075501aae3a059c997}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ae0f0d3d038cc12075501aae3a059c997}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!output@{output}}
\index{output@{output}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{output()}{output()}}
{\footnotesize\ttfamily def parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+output (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{tensor }\end{DoxyParamCaption})}

\begin{DoxyVerb}Compute output logits.
\end{DoxyVerb}
 

Definition at line 937 of file modules.\+py.


\begin{DoxyCode}
937     \textcolor{keyword}{def }output(self, tensor):
938         \textcolor{stringliteral}{"""}
939 \textcolor{stringliteral}{        Compute output logits.}
940 \textcolor{stringliteral}{        """}
941         \textcolor{comment}{# project back to vocabulary}
942         output = F.linear(tensor, self.embeddings.weight)
943         \textcolor{keywordflow}{return} output
944 
945 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a3b03690f271b1a65764e3812b2417ba2}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a3b03690f271b1a65764e3812b2417ba2}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!reorder\+\_\+decoder\+\_\+incremental\+\_\+state@{reorder\+\_\+decoder\+\_\+incremental\+\_\+state}}
\index{reorder\+\_\+decoder\+\_\+incremental\+\_\+state@{reorder\+\_\+decoder\+\_\+incremental\+\_\+state}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{reorder\+\_\+decoder\+\_\+incremental\+\_\+state()}{reorder\_decoder\_incremental\_state()}}
{\footnotesize\ttfamily def parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+reorder\+\_\+decoder\+\_\+incremental\+\_\+state (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{incremental\+\_\+state }\end{DoxyParamCaption})}



Definition at line 922 of file modules.\+py.


\begin{DoxyCode}
922         self, incremental\_state: Dict[int, dict], inds: torch.Tensor
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a9b9261bca59f10692c15cbaaa3ffce65}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a9b9261bca59f10692c15cbaaa3ffce65}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!reorder\+\_\+encoder\+\_\+states@{reorder\+\_\+encoder\+\_\+states}}
\index{reorder\+\_\+encoder\+\_\+states@{reorder\+\_\+encoder\+\_\+states}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{reorder\+\_\+encoder\+\_\+states()}{reorder\_encoder\_states()}}
{\footnotesize\ttfamily def parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+reorder\+\_\+encoder\+\_\+states (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{encoder\+\_\+states,  }\item[{}]{indices }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reorder the encoder states.

See ``TorchGeneratorModel.reorder_encoder_states`` for a description.
\end{DoxyVerb}
 

Definition at line 908 of file modules.\+py.


\begin{DoxyCode}
908     \textcolor{keyword}{def }reorder\_encoder\_states(self, encoder\_states, indices):
909         \textcolor{stringliteral}{"""}
910 \textcolor{stringliteral}{        Reorder the encoder states.}
911 \textcolor{stringliteral}{}
912 \textcolor{stringliteral}{        See ``TorchGeneratorModel.reorder\_encoder\_states`` for a description.}
913 \textcolor{stringliteral}{        """}
914         enc, mask = encoder\_states
915         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} torch.is\_tensor(indices):
916             indices = torch.LongTensor(indices).to(enc.device)
917         enc = torch.index\_select(enc, 0, indices)
918         mask = torch.index\_select(mask, 0, indices)
919         \textcolor{keywordflow}{return} enc, mask
920 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a6467f0fdec226329cb8efe77245996a5}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a6467f0fdec226329cb8efe77245996a5}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!decoder@{decoder}}
\index{decoder@{decoder}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{decoder}{decoder}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+decoder}



Definition at line 904 of file modules.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a18411754103e8c8f4cd2e9338351b98d}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a18411754103e8c8f4cd2e9338351b98d}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!embeddings@{embeddings}}
\index{embeddings@{embeddings}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{embeddings}{embeddings}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+embeddings}



Definition at line 873 of file modules.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_af165b8ec1505f768c530aea02d68ae09}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_af165b8ec1505f768c530aea02d68ae09}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!encoder@{encoder}}
\index{encoder@{encoder}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{encoder}{encoder}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+encoder}



Definition at line 895 of file modules.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ab2b8403205fcd407e47546dc56022d2f}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_ab2b8403205fcd407e47546dc56022d2f}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!end\+\_\+idx@{end\+\_\+idx}}
\index{end\+\_\+idx@{end\+\_\+idx}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{end\+\_\+idx}{end\_idx}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+end\+\_\+idx}



Definition at line 871 of file modules.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_aefac02b3630ef361bb008b4f7973c55b}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_aefac02b3630ef361bb008b4f7973c55b}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!pad\+\_\+idx@{pad\+\_\+idx}}
\index{pad\+\_\+idx@{pad\+\_\+idx}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{pad\+\_\+idx}{pad\_idx}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+pad\+\_\+idx}



Definition at line 869 of file modules.\+py.

\mbox{\Hypertarget{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a381b6d63e5aba194730c36d9fb93c6d6}\label{classparlai_1_1agents_1_1transformer_1_1modules_1_1TransformerGeneratorModel_a381b6d63e5aba194730c36d9fb93c6d6}} 
\index{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}!start\+\_\+idx@{start\+\_\+idx}}
\index{start\+\_\+idx@{start\+\_\+idx}!parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model@{parlai\+::agents\+::transformer\+::modules\+::\+Transformer\+Generator\+Model}}
\subsubsection{\texorpdfstring{start\+\_\+idx}{start\_idx}}
{\footnotesize\ttfamily parlai.\+agents.\+transformer.\+modules.\+Transformer\+Generator\+Model.\+start\+\_\+idx}



Definition at line 870 of file modules.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/agents/transformer/\hyperlink{parlai_2agents_2transformer_2modules_8py}{modules.\+py}\end{DoxyCompactItemize}
