\hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent}{}\section{parlai.\+core.\+dict.\+Dictionary\+Agent Class Reference}
\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent}\index{parlai.\+core.\+dict.\+Dictionary\+Agent@{parlai.\+core.\+dict.\+Dictionary\+Agent}}


Inheritance diagram for parlai.\+core.\+dict.\+Dictionary\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/df4/classparlai_1_1core_1_1dict_1_1DictionaryAgent__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+core.\+dict.\+Dictionary\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=305pt]{d1/df9/classparlai_1_1core_1_1dict_1_1DictionaryAgent__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a324531500b43e0039f2c0087081a8b3d}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6c0d7c9c31b38e99b747be88395d689f}{opt}, shared=None)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aec44508e4b501214618e24d86a4a51df}{add\+\_\+token} (self, word)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a29f4181dcdd5f53103bc342bf5f3c74a}{\+\_\+\+\_\+contains\+\_\+\+\_\+} (self, key)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a82a64989f1750412b6ffd9a4270953b3}{\+\_\+\+\_\+getitem\+\_\+\+\_\+} (self, key)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1c686bb8b03cf09dbd43943d268c2410}{\+\_\+\+\_\+len\+\_\+\+\_\+} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a43dfd6220ded966731b62bca37333dec}{\+\_\+\+\_\+setitem\+\_\+\+\_\+} (self, key, value)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad5abcf174648d88f2383cba7a361dd29}{keys} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84faa359351d8b3edfb333e3b5f5ed71}{copy\+\_\+dict} (self, dictionary)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3c3ef6181e0cea58b2650af763db1d17}{max\+\_\+freq} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a72cfec62b2d5117326f514edfe848a1e}{freqs} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8e818ad5e11ecb08de6c4b858b2e68f1}{spacy\+\_\+tokenize} (self, text, kwargs)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6532e92a69be5a68d04963597cd4ba29}{spacy\+\_\+span\+\_\+tokenize} (self, text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a73fe72e257ace6e8debf2c41995f8390}{nltk\+\_\+tokenize} (self, text, building=False)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a57685af2fcd0a684b7102c55afe0c8ad}{gpt2\+\_\+tokenize} (self, text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8fede3cf83af6a47c5dd4bb356de3350}{span\+\_\+tokenize} (self, text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aca7e5edfd6502701277cb83b75ff4e96}{tokenize} (self, text, building=False)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a520e4bc630cd60f075ad21632ef677a1}{bpe\+\_\+tokenize} (self, text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_acb28700c8c2725c05a8f3e28f11f8714}{add\+\_\+to\+\_\+dict} (self, tokens)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae828063449b45112d82a97921d35c247}{remove\+\_\+tail} (self, min\+\_\+freq)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1a800c1aecdb97986c59fd26f1b55626}{resize\+\_\+to\+\_\+max} (self, \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abeece13fbdc77b7479d4fb5d02858816}{maxtokens})
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aa4229d1ba17932f588e15067afd9bf42}{load} (self, filename)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0c6a8d8b67fe978549b328e7b7b07450}{save} (self, filename=None, append=False, \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84cb4fabf5d0e92e3f80ac16bdfd0ccc}{sort}=True)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84cb4fabf5d0e92e3f80ac16bdfd0ccc}{sort} (self, trim=True)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad34c4135329f6768d22d519c3c483d68}{parse} (self, txt\+\_\+or\+\_\+vec, vec\+\_\+type=list)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abc3baf742422fc7cdaece698224709d4}{txt2vec} (self, text, vec\+\_\+type=list)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2eeb50b2cd6cf3a8ca817b729ec7486}{vec2txt} (self, vector, delimiter=\textquotesingle{} \textquotesingle{})
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af34b92857b41748aafdecee34ebf9345}{act} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3d8996e367685451f7de85e8284243d7}{share} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aea9aca40dd1bb1976f4042565b172d88}{shutdown} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a4b822841903bedb2b0f866e7bd17f3fa}{\+\_\+\+\_\+str\+\_\+\+\_\+} (self)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad09f8ecf2b258ecaebce69d9cef9ff3c}{add\+\_\+cmdline\+\_\+args} (argparser)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a78edf54954bf0514e1798ce694a758fe}{re\+\_\+tokenize} (text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a826ba5c6ff36c8ddf5d7723c50e5616d}{split\+\_\+tokenize} (text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a437d3aacc7b55dac587643b271ba5f38}{space\+\_\+tokenize} (text)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6c0d7c9c31b38e99b747be88395d689f}{opt}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a50f58c22b998eb75c24393cbccc759a4}{minfreq}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a9db44f9566d7f7678c5528e7c44d76a8}{null\+\_\+token}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a793811f6f290bfcb714fa865745cdcb4}{end\+\_\+token}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae741c47302ea1add9cc040d68032c38a}{unk\+\_\+token}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5ef1b542b4efa5228e957c1e167195bd}{start\+\_\+token}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a834b2cdfb978f230b5131e63cf1e7492}{max\+\_\+ngram\+\_\+size}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a77e32c39f829ba158fd8b4ba834f4db3}{tokenizer}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0dc4620f2829a15d822cc29e7fccd677}{lower}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abeece13fbdc77b7479d4fb5d02858816}{maxtokens}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a771c6e70dd433cdc076fd1261f2f3845}{textfields}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0d3436a2a958f18177df71f59f48e72e}{tokenizer\+\_\+fun}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af3e428f4a5d8ef3a2fc02b01a6f659f2}{freq}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5955a6e5b031b8540694b847a9889bcd}{tok2ind}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af425a3810b9c85ac73d9b77a9ee100e6}{ind2tok}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad883df8ef1d397ea93dd9d018822720e}{sent\+\_\+tok}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a025ffc815b72c6d2d34c12249956d4f1}{word\+\_\+tok}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8f4fbeb1e3a220c70e2828e4ce9c3f51}{N\+LP}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2bfd8d00b4733c085a639521e727ceb}{bpehelper}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ac0fbaa96f4b3d1cef6628da8320d4bc2}{gpt2\+\_\+bpe}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a98faac965437d58fd2bf59f9d1438272}{save\+\_\+path}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3917720c8b31e5b99698beca63256511}{built}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
string \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a7646bb422f0b665953a6542b9e15c1d8}{default\+\_\+lang} = \textquotesingle{}english\textquotesingle{}
\item 
int \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a4f406b83d630fd7d0457b52d3722e2c6}{default\+\_\+maxngram} = -\/1
\item 
int \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad3b95d0ac5f8b213fbed89bc4e2487cb}{default\+\_\+minfreq} = 0
\item 
int \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5d96f1650ebea8a11f2c578b1dad257e}{default\+\_\+maxtokens} = -\/1
\item 
string \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1e7c89167a6ff97f4a6bfa1a8634b883}{default\+\_\+null} = \textquotesingle{}\+\_\+\+\_\+null\+\_\+\+\_\+\textquotesingle{}
\item 
string \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1f63ec9644ffede9d3b35daee66f7212}{default\+\_\+start} = \textquotesingle{}\+\_\+\+\_\+start\+\_\+\+\_\+\textquotesingle{}
\item 
string \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae6290695f9d0511853f7c5310ea0dc04}{default\+\_\+end} = \textquotesingle{}\+\_\+\+\_\+end\+\_\+\+\_\+\textquotesingle{}
\item 
string \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae659523f367d3ba29696d2bb59980fdb}{default\+\_\+unk} = \textquotesingle{}\+\_\+\+\_\+unk\+\_\+\+\_\+\textquotesingle{}
\item 
string \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aeb174a076e3febf5b879e109f1c94d2b}{default\+\_\+tok} = \textquotesingle{}re\textquotesingle{}
\item 
bool \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a440d3893058a03b84e2aa51f1760e107}{default\+\_\+lower} = False
\item 
string \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a091632e3291a206273a90903c42a53d3}{default\+\_\+textfields} = \textquotesingle{}text,labels\textquotesingle{}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Builds and/or loads a dictionary.

The dictionary provides access to the frequency of each token, functions to
translate sentences from tokens to their vectors (list of ints, each int is the
index of a token in the dictionary) and back from vectors to tokenized text.
\end{DoxyVerb}
 

Definition at line 96 of file dict.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a324531500b43e0039f2c0087081a8b3d}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a324531500b43e0039f2c0087081a8b3d}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Initialize DictionaryAgent.
\end{DoxyVerb}
 

Definition at line 222 of file dict.\+py.


\begin{DoxyCode}
222     \textcolor{keyword}{def }\_\_init\_\_(self, opt, shared=None):
223         \textcolor{stringliteral}{"""}
224 \textcolor{stringliteral}{        Initialize DictionaryAgent.}
225 \textcolor{stringliteral}{        """}
226         self.opt = copy.deepcopy(opt)
227         self.minfreq = opt.get(\textcolor{stringliteral}{'dict\_minfreq'}, DictionaryAgent.default\_minfreq)
228         self.null\_token = opt.get(\textcolor{stringliteral}{'dict\_nulltoken'}, DictionaryAgent.default\_null)
229         self.end\_token = opt.get(\textcolor{stringliteral}{'dict\_endtoken'}, DictionaryAgent.default\_end)
230         self.unk\_token = opt.get(\textcolor{stringliteral}{'dict\_unktoken'}, DictionaryAgent.default\_unk)
231         self.start\_token = opt.get(\textcolor{stringliteral}{'dict\_starttoken'}, DictionaryAgent.default\_start)
232         self.max\_ngram\_size = opt.get(
233             \textcolor{stringliteral}{'dict\_max\_ngram\_size'}, DictionaryAgent.default\_maxngram
234         )
235         self.tokenizer = opt.get(\textcolor{stringliteral}{'dict\_tokenizer'}, DictionaryAgent.default\_tok)
236         self.lower = opt.get(\textcolor{stringliteral}{'dict\_lower'}, DictionaryAgent.default\_lower)
237         self.maxtokens = opt.get(\textcolor{stringliteral}{'dict\_maxtokens'}, DictionaryAgent.default\_maxtokens)
238         self.textfields = opt.get(
239             \textcolor{stringliteral}{'dict\_textfields'}, DictionaryAgent.default\_textfields
240         ).split(\textcolor{stringliteral}{","})
241 
242         \textcolor{keywordflow}{try}:
243             self.tokenizer\_fun = getattr(self, self.tokenizer + \textcolor{stringliteral}{'\_tokenize'})
244         \textcolor{keywordflow}{except} AttributeError:
245             \textcolor{keywordflow}{raise} AttributeError(
246                 \textcolor{stringliteral}{'tokenizer type \{\} not yet supported'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.tokenizer)
247             )
248 
249         \textcolor{keywordflow}{if} shared:
250             self.freq = shared.get(\textcolor{stringliteral}{'freq'}, \{\})
251             self.tok2ind = shared.get(\textcolor{stringliteral}{'tok2ind'}, \{\})
252             self.ind2tok = shared.get(\textcolor{stringliteral}{'ind2tok'}, \{\})
253         \textcolor{keywordflow}{else}:
254             self.freq = defaultdict(int)
255             self.tok2ind = \{\}
256             self.ind2tok = \{\}
257 
258             \textcolor{keywordflow}{if} self.null\_token:
259                 self.add\_token(self.null\_token)
260 
261             \textcolor{keywordflow}{if} self.start\_token:
262                 \textcolor{comment}{# set special start of sentence word token}
263                 self.add\_token(self.start\_token)
264 
265             \textcolor{keywordflow}{if} self.end\_token:
266                 \textcolor{comment}{# set special end of sentence word token}
267                 self.add\_token(self.end\_token)
268 
269             \textcolor{keywordflow}{if} self.unk\_token:
270                 \textcolor{comment}{# set special unknown word token}
271                 self.add\_token(self.unk\_token)
272 
273             loaded = \textcolor{keyword}{False}
274             \textcolor{comment}{# If data built via pytorch data teacher, we need to load prebuilt dict}
275             \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'pytorch\_teacher\_task'}):
276                 \textcolor{keyword}{from} \hyperlink{namespaceparlai_1_1scripts_1_1build__pytorch__data}{parlai.scripts.build\_pytorch\_data} \textcolor{keyword}{import} 
      get\_pyt\_dict\_file
277 
278                 opt[\textcolor{stringliteral}{'dict\_file'}] = \hyperlink{namespaceparlai_1_1scripts_1_1build__pytorch__data_a6ec85a5842150af78f5178d75075b0cc}{get\_pyt\_dict\_file}(opt)
279             \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'dict\_file'}):
280                 opt[\textcolor{stringliteral}{'dict\_file'}] = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_a5fbd3301b67f00d6d146fb01c7cd7626}{modelzoo\_path}(opt.get(\textcolor{stringliteral}{'datapath'}), opt[\textcolor{stringliteral}{'dict\_file'}])
281                 \textcolor{keywordflow}{if} os.path.isfile(opt[\textcolor{stringliteral}{'dict\_file'}]):
282                     \textcolor{comment}{# load pre-existing dictionary}
283                     self.load(opt[\textcolor{stringliteral}{'dict\_file'}])
284                     loaded = \textcolor{keyword}{True}
285 
286             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} loaded \textcolor{keywordflow}{and} opt.get(\textcolor{stringliteral}{'dict\_initpath'}):
287                 \textcolor{comment}{# load seed dictionary}
288                 opt[\textcolor{stringliteral}{'dict\_initpath'}] = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_a5fbd3301b67f00d6d146fb01c7cd7626}{modelzoo\_path}(
289                     opt.get(\textcolor{stringliteral}{'datapath'}), opt[\textcolor{stringliteral}{'dict\_initpath'}]
290                 )
291                 \textcolor{comment}{# don't check isfile first, should fail if file not found}
292                 self.load(opt[\textcolor{stringliteral}{'dict\_initpath'}])
293 
294         \textcolor{comment}{# initialize tokenizers}
295         \textcolor{keywordflow}{if} self.tokenizer == \textcolor{stringliteral}{'nltk'}:
296             \textcolor{keywordflow}{try}:
297                 \textcolor{keyword}{import} nltk
298             \textcolor{keywordflow}{except} ImportError:
299                 \textcolor{keywordflow}{raise} ImportError(\textcolor{stringliteral}{'Please install nltk (pip install nltk)'})
300             \textcolor{comment}{# nltk-specific setup}
301             st\_path = \textcolor{stringliteral}{'tokenizers/punkt/\{0\}.pickle'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(opt[\textcolor{stringliteral}{'dict\_language'}])
302             \textcolor{keywordflow}{try}:
303                 self.sent\_tok = nltk.data.load(st\_path)
304             \textcolor{keywordflow}{except} LookupError:
305                 nltk.download(\textcolor{stringliteral}{'punkt'})
306                 self.sent\_tok = nltk.data.load(st\_path)
307             self.word\_tok = nltk.tokenize.treebank.TreebankWordTokenizer()
308         \textcolor{keywordflow}{elif} self.tokenizer == \textcolor{stringliteral}{'spacy'}:
309             \textcolor{keywordflow}{try}:
310                 \textcolor{keyword}{import} spacy
311             \textcolor{keywordflow}{except} ImportError:
312                 \textcolor{keywordflow}{raise} ImportError(
313                     \textcolor{stringliteral}{'Please install spacy and spacy "en" model: '}
314                     \textcolor{stringliteral}{'`pip install -U spacy && '}
315                     \textcolor{stringliteral}{'python -m spacy download en` '}
316                     \textcolor{stringliteral}{'or find alternative installation options '}
317                     \textcolor{stringliteral}{'at spacy.io'}
318                 )
319             self.NLP = spacy.load(\textcolor{stringliteral}{'en'})
320         \textcolor{keywordflow}{elif} self.tokenizer == \textcolor{stringliteral}{'bpe'}:
321             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} opt.get(\textcolor{stringliteral}{'dict\_file'}):
322                 \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'--dict-file is mandatory.'})
323             self.bpehelper = \_BPEHelper(opt.get(\textcolor{stringliteral}{'dict\_file'}) + \textcolor{stringliteral}{'.codecs'})
324         \textcolor{keywordflow}{elif} self.tokenizer == \textcolor{stringliteral}{'gpt2'}:
325             \textcolor{keywordflow}{if} self.lower:
326                 \textcolor{keywordflow}{raise} ValueError(
327                     \textcolor{stringliteral}{'Only use --dict-lower false with --dict-tokenizer gpt2'}
328                 )
329             \textcolor{keywordflow}{if} self.maxtokens > 0 \textcolor{keywordflow}{or} self.minfreq > 0:
330                 \textcolor{keywordflow}{raise} ValueError(
331                     \textcolor{stringliteral}{'You should not filter vocabulary with using --dict-tokenizer gpt2'}
332                     \textcolor{stringliteral}{' (no --dict-minfreq or --dict-maxtokens).'}
333                 )
334 
335             self.gpt2\_bpe = Gpt2BpeHelper(opt)
336             \textcolor{keywordflow}{for} each\_token \textcolor{keywordflow}{in} self.gpt2\_bpe.list\_tokens():
337                 self.add\_token(each\_token)
338                 self.freq[each\_token] = 1
339         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} shared:
340             \textcolor{keywordflow}{if} self.null\_token:
341                 \textcolor{comment}{# fix count for null token to one billion and three}
342                 self.freq[self.null\_token] = 1000000003
343 
344             \textcolor{keywordflow}{if} self.start\_token:
345                 \textcolor{comment}{# fix count for start of sentence token to one billion and two}
346                 self.freq[self.start\_token] = 1000000002
347 
348             \textcolor{keywordflow}{if} self.end\_token:
349                 \textcolor{comment}{# fix count for end of sentence token to one billion and one}
350                 self.freq[self.end\_token] = 1000000001
351 
352             \textcolor{keywordflow}{if} self.unk\_token:
353                 \textcolor{comment}{# fix count for unknown token to one billion}
354                 self.freq[self.unk\_token] = 1000000000
355 
356             \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'dict\_file'}):
357                 self.save\_path = opt[\textcolor{stringliteral}{'dict\_file'}]
358 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a29f4181dcdd5f53103bc342bf5f3c74a}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a29f4181dcdd5f53103bc342bf5f3c74a}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+contains\+\_\+\+\_\+@{\+\_\+\+\_\+contains\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+contains\+\_\+\+\_\+@{\+\_\+\+\_\+contains\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+contains\+\_\+\+\_\+()}{\_\_contains\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+contains\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{key }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return if the dictionary contains the key.

If key is an int, returns whether the key is in the indices. If key is a str,
return if the token is in the dict of tokens.
\end{DoxyVerb}
 

Definition at line 368 of file dict.\+py.


\begin{DoxyCode}
368     \textcolor{keyword}{def }\_\_contains\_\_(self, key):
369         \textcolor{stringliteral}{"""}
370 \textcolor{stringliteral}{        Return if the dictionary contains the key.}
371 \textcolor{stringliteral}{}
372 \textcolor{stringliteral}{        If key is an int, returns whether the key is in the indices. If key is a str,}
373 \textcolor{stringliteral}{        return if the token is in the dict of tokens.}
374 \textcolor{stringliteral}{        """}
375         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(key) == int:
376             \textcolor{keywordflow}{return} key \textcolor{keywordflow}{in} self.ind2tok
377         \textcolor{keywordflow}{elif} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(key) == str:
378             \textcolor{keywordflow}{return} key \textcolor{keywordflow}{in} self.tok2ind
379 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a82a64989f1750412b6ffd9a4270953b3}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a82a64989f1750412b6ffd9a4270953b3}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+getitem\+\_\+\+\_\+@{\+\_\+\+\_\+getitem\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+getitem\+\_\+\+\_\+@{\+\_\+\+\_\+getitem\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+getitem\+\_\+\+\_\+()}{\_\_getitem\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+getitem\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{key }\end{DoxyParamCaption})}

\begin{DoxyVerb}Lookup the word or ID.

If key is an int, returns the corresponding token. If it does not exist, return
the unknown token. If key is a str, return the token's index. If the token is
not in the dictionary, return the index of the unknown token. If there is no
unknown token, return ``None``.
\end{DoxyVerb}
 

Definition at line 380 of file dict.\+py.


\begin{DoxyCode}
380     \textcolor{keyword}{def }\_\_getitem\_\_(self, key):
381         \textcolor{stringliteral}{"""}
382 \textcolor{stringliteral}{        Lookup the word or ID.}
383 \textcolor{stringliteral}{}
384 \textcolor{stringliteral}{        If key is an int, returns the corresponding token. If it does not exist, return}
385 \textcolor{stringliteral}{        the unknown token. If key is a str, return the token's index. If the token is}
386 \textcolor{stringliteral}{        not in the dictionary, return the index of the unknown token. If there is no}
387 \textcolor{stringliteral}{        unknown token, return ``None``.}
388 \textcolor{stringliteral}{        """}
389         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(key) == int:
390             \textcolor{comment}{# return token from index, or unk\_token}
391             \textcolor{keywordflow}{return} self.ind2tok.get(key, self.unk\_token)
392         \textcolor{keywordflow}{elif} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(key) == str:
393             \textcolor{comment}{# return index from token, or unk\_token's index, or None}
394             \textcolor{keywordflow}{return} self.tok2ind.get(key, self.tok2ind.get(self.unk\_token, \textcolor{keywordtype}{None}))
395 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1c686bb8b03cf09dbd43943d268c2410}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1c686bb8b03cf09dbd43943d268c2410}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+len\+\_\+\+\_\+@{\+\_\+\+\_\+len\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+len\+\_\+\+\_\+@{\+\_\+\+\_\+len\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+len\+\_\+\+\_\+()}{\_\_len\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+len\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 396 of file dict.\+py.


\begin{DoxyCode}
396     \textcolor{keyword}{def }\_\_len\_\_(self):
397         \textcolor{keywordflow}{return} len(self.tok2ind)
398 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a43dfd6220ded966731b62bca37333dec}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a43dfd6220ded966731b62bca37333dec}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+setitem\+\_\+\+\_\+@{\+\_\+\+\_\+setitem\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+setitem\+\_\+\+\_\+@{\+\_\+\+\_\+setitem\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+setitem\+\_\+\+\_\+()}{\_\_setitem\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+setitem\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{key,  }\item[{}]{value }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set the frequency for a word to a value.

If the key is not in the dictionary, add it to the dictionary and set its
frequency to value.
\end{DoxyVerb}
 

Definition at line 399 of file dict.\+py.


\begin{DoxyCode}
399     \textcolor{keyword}{def }\_\_setitem\_\_(self, key, value):
400         \textcolor{stringliteral}{"""}
401 \textcolor{stringliteral}{        Set the frequency for a word to a value.}
402 \textcolor{stringliteral}{}
403 \textcolor{stringliteral}{        If the key is not in the dictionary, add it to the dictionary and set its}
404 \textcolor{stringliteral}{        frequency to value.}
405 \textcolor{stringliteral}{        """}
406         key = \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(key)
407         \textcolor{keywordflow}{if} self.lower:
408             key = key.lower()
409         self.freq[key] = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(value)
410         self.add\_token(key)
411 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a4b822841903bedb2b0f866e7bd17f3fa}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a4b822841903bedb2b0f866e7bd17f3fa}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+str\+\_\+\+\_\+@{\+\_\+\+\_\+str\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+str\+\_\+\+\_\+@{\+\_\+\+\_\+str\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+str\+\_\+\+\_\+()}{\_\_str\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+str\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return string representation of frequencies in dictionary.
\end{DoxyVerb}
 

Definition at line 808 of file dict.\+py.


\begin{DoxyCode}
808     \textcolor{keyword}{def }\_\_str\_\_(self):
809         \textcolor{stringliteral}{"""}
810 \textcolor{stringliteral}{        Return string representation of frequencies in dictionary.}
811 \textcolor{stringliteral}{        """}
812         \textcolor{keywordflow}{return} \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(self.freq)
813 
814 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af34b92857b41748aafdecee34ebf9345}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af34b92857b41748aafdecee34ebf9345}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!act@{act}}
\index{act@{act}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{act()}{act()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+act (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Add words in the last observation to the dictionary.

This checks any fields in the message present in the --dict-textfields argument
(e.g. "text,labels").
\end{DoxyVerb}
 

Definition at line 771 of file dict.\+py.


\begin{DoxyCode}
771     \textcolor{keyword}{def }act(self):
772         \textcolor{stringliteral}{"""}
773 \textcolor{stringliteral}{        Add words in the last observation to the dictionary.}
774 \textcolor{stringliteral}{}
775 \textcolor{stringliteral}{        This checks any fields in the message present in the --dict-textfields argument}
776 \textcolor{stringliteral}{        (e.g. "text,labels").}
777 \textcolor{stringliteral}{        """}
778         \textcolor{keywordflow}{for} textfield \textcolor{keywordflow}{in} self.textfields:
779             source = self.observation.get(textfield)
780             \textcolor{keywordflow}{if} source \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
781                 \textcolor{keywordflow}{continue}
782             \textcolor{comment}{# fields may be singleton strings or lists of strings.}
783             \textcolor{comment}{# wrap the singleton strings in a list to iterate over them}
784             \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(source) \textcolor{keywordflow}{is} str:
785                 source = [source]
786             \textcolor{keywordflow}{for} text \textcolor{keywordflow}{in} source:
787                 \textcolor{keywordflow}{if} text:
788                     self.add\_to\_dict(self.tokenize(text))
789         \textcolor{keywordflow}{return} \{\textcolor{stringliteral}{'id'}: \textcolor{stringliteral}{'Dictionary'}\}
790 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad09f8ecf2b258ecaebce69d9cef9ff3c}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad09f8ecf2b258ecaebce69d9cef9ff3c}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}}
\index{add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{add\+\_\+cmdline\+\_\+args()}{add\_cmdline\_args()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+add\+\_\+cmdline\+\_\+args (\begin{DoxyParamCaption}\item[{}]{argparser }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Add commandline arguments related to the dictionary.
\end{DoxyVerb}
 

Definition at line 118 of file dict.\+py.


\begin{DoxyCode}
118     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1drqa_1_1config_a62fdd5554f1da6be0cba185271058320}{add\_cmdline\_args}(argparser):
119         \textcolor{stringliteral}{"""}
120 \textcolor{stringliteral}{        Add commandline arguments related to the dictionary.}
121 \textcolor{stringliteral}{        """}
122         dictionary = argparser.add\_argument\_group(\textcolor{stringliteral}{'Dictionary Arguments'})
123         dictionary.add\_argument(
124             \textcolor{stringliteral}{'-df'},
125             \textcolor{stringliteral}{'--dict-file'},
126             help=\textcolor{stringliteral}{'path to dictionary file. defaults to [model\_file].dict if '}
127             \textcolor{stringliteral}{'not set and model\_file is set.'},
128             hidden=\textcolor{keyword}{True},
129         )
130         dictionary.add\_argument(
131             \textcolor{stringliteral}{'--dict-initpath'},
132             hidden=\textcolor{keyword}{True},
133             help=\textcolor{stringliteral}{'path to a saved dictionary to load tokens / counts from to '}
134             \textcolor{stringliteral}{'seed the dictionary with initial tokens and/or frequencies'},
135         )
136         dictionary.add\_argument(
137             \textcolor{stringliteral}{'--dict-language'},
138             default=DictionaryAgent.default\_lang,
139             hidden=\textcolor{keyword}{True},
140             help=\textcolor{stringliteral}{'sets language for the punkt sentence tokenizer'},
141         )
142         dictionary.add\_argument(
143             \textcolor{stringliteral}{'--dict-max-ngram-size'},
144             type=int,
145             hidden=\textcolor{keyword}{True},
146             default=DictionaryAgent.default\_maxngram,
147             help=\textcolor{stringliteral}{'looks for ngrams of up to this size. this is ignored when '}
148             \textcolor{stringliteral}{'building the dictionary. note: this takes approximate '}
149             \textcolor{stringliteral}{'runtime of len(sentence)^max\_ngram\_size'},
150         )
151         dictionary.add\_argument(
152             \textcolor{stringliteral}{'--dict-minfreq'},
153             default=DictionaryAgent.default\_minfreq,
154             type=int,
155             help=\textcolor{stringliteral}{'minimum frequency of words to include them in sorted '}
156             \textcolor{stringliteral}{'dict or minimum frequency of bpe codecs'},
157             hidden=\textcolor{keyword}{True},
158         )
159         dictionary.add\_argument(
160             \textcolor{stringliteral}{'--dict-maxtokens'},
161             default=DictionaryAgent.default\_maxtokens,
162             type=int,
163             help=\textcolor{stringliteral}{'max number of tokens to include in dictionary or bpe codecs'},
164             hidden=\textcolor{keyword}{True},
165         )
166         dictionary.add\_argument(
167             \textcolor{stringliteral}{'--dict-nulltoken'},
168             default=DictionaryAgent.default\_null,
169             hidden=\textcolor{keyword}{True},
170             help=\textcolor{stringliteral}{'empty token, can be used for padding or just empty values'},
171         )
172         dictionary.add\_argument(
173             \textcolor{stringliteral}{'--dict-starttoken'},
174             default=DictionaryAgent.default\_start,
175             hidden=\textcolor{keyword}{True},
176             help=\textcolor{stringliteral}{'token for starting sentence generation, if needed'},
177         )
178         dictionary.add\_argument(
179             \textcolor{stringliteral}{'--dict-endtoken'},
180             default=DictionaryAgent.default\_end,
181             hidden=\textcolor{keyword}{True},
182             help=\textcolor{stringliteral}{'token for end of sentence markers, if needed'},
183         )
184         dictionary.add\_argument(
185             \textcolor{stringliteral}{'--dict-unktoken'},
186             default=DictionaryAgent.default\_unk,
187             hidden=\textcolor{keyword}{True},
188             help=\textcolor{stringliteral}{'token to return for unavailable words'},
189         )
190         dictionary.add\_argument(
191             \textcolor{stringliteral}{'-tok'},
192             \textcolor{stringliteral}{'--dict-tokenizer'},
193             default=DictionaryAgent.default\_tok,
194             help=\textcolor{stringliteral}{'Which tokenizer to use. Defaults to "split", which splits '}
195             \textcolor{stringliteral}{'on whitespace as well as recognizing basic punctuation. '}
196             \textcolor{stringliteral}{'Other options include nltk, spacy and gpt2.'},
197             hidden=\textcolor{keyword}{True},
198         )
199         dictionary.add\_argument(
200             \textcolor{stringliteral}{'--dict-lower'},
201             default=DictionaryAgent.default\_lower,
202             type=\textcolor{stringliteral}{'bool'},
203             help=\textcolor{stringliteral}{'Whether or not to lowercase all text seen.'},
204             hidden=\textcolor{keyword}{True},
205         )
206         dictionary.add\_argument(
207             \textcolor{stringliteral}{'--bpe-debug'},
208             action=\textcolor{stringliteral}{'store\_true'},
209             hidden=\textcolor{keyword}{True},
210             help=\textcolor{stringliteral}{'Leave BPE tokens untouched in output. Useful for debugging.'},
211         )
212         dictionary.add\_argument(
213             \textcolor{stringliteral}{'--dict-textfields'},
214             default=DictionaryAgent.default\_textfields,
215             hidden=\textcolor{keyword}{True},
216             help=\textcolor{stringliteral}{'Observation fields which dictionary learns vocabulary from. '}
217             \textcolor{stringliteral}{'Tasks with additional fields may add to this list to handle '}
218             \textcolor{stringliteral}{'any extra vocabulary.'},
219         )
220         \textcolor{keywordflow}{return} dictionary
221 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_acb28700c8c2725c05a8f3e28f11f8714}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_acb28700c8c2725c05a8f3e28f11f8714}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!add\+\_\+to\+\_\+dict@{add\+\_\+to\+\_\+dict}}
\index{add\+\_\+to\+\_\+dict@{add\+\_\+to\+\_\+dict}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{add\+\_\+to\+\_\+dict()}{add\_to\_dict()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+add\+\_\+to\+\_\+dict (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{tokens }\end{DoxyParamCaption})}

\begin{DoxyVerb}Build dictionary from the list of provided tokens.
\end{DoxyVerb}
 

Definition at line 567 of file dict.\+py.


\begin{DoxyCode}
567     \textcolor{keyword}{def }add\_to\_dict(self, tokens):
568         \textcolor{stringliteral}{"""}
569 \textcolor{stringliteral}{        Build dictionary from the list of provided tokens.}
570 \textcolor{stringliteral}{        """}
571         self.built = \textcolor{keyword}{False}
572         \textcolor{keywordflow}{for} token \textcolor{keywordflow}{in} tokens:
573             self.add\_token(token)
574             self.freq[token] += 1
575 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aec44508e4b501214618e24d86a4a51df}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aec44508e4b501214618e24d86a4a51df}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!add\+\_\+token@{add\+\_\+token}}
\index{add\+\_\+token@{add\+\_\+token}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{add\+\_\+token()}{add\_token()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+add\+\_\+token (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{word }\end{DoxyParamCaption})}

\begin{DoxyVerb}Add a single token to the dictionary.
\end{DoxyVerb}
 

Definition at line 359 of file dict.\+py.


\begin{DoxyCode}
359     \textcolor{keyword}{def }add\_token(self, word):
360         \textcolor{stringliteral}{"""}
361 \textcolor{stringliteral}{        Add a single token to the dictionary.}
362 \textcolor{stringliteral}{        """}
363         \textcolor{keywordflow}{if} word \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.tok2ind:
364             index = len(self.tok2ind)
365             self.tok2ind[word] = index
366             self.ind2tok[index] = word
367 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a520e4bc630cd60f075ad21632ef677a1}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a520e4bc630cd60f075ad21632ef677a1}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!bpe\+\_\+tokenize@{bpe\+\_\+tokenize}}
\index{bpe\+\_\+tokenize@{bpe\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{bpe\+\_\+tokenize()}{bpe\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+bpe\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a sequence of BPE-tokens from the text.
\end{DoxyVerb}
 

Definition at line 561 of file dict.\+py.


\begin{DoxyCode}
561     \textcolor{keyword}{def }bpe\_tokenize(self, text):
562         \textcolor{stringliteral}{"""}
563 \textcolor{stringliteral}{        Return a sequence of BPE-tokens from the text.}
564 \textcolor{stringliteral}{        """}
565         \textcolor{keywordflow}{return} self.bpehelper.\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(text)
566 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84faa359351d8b3edfb333e3b5f5ed71}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84faa359351d8b3edfb333e3b5f5ed71}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!copy\+\_\+dict@{copy\+\_\+dict}}
\index{copy\+\_\+dict@{copy\+\_\+dict}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{copy\+\_\+dict()}{copy\_dict()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+copy\+\_\+dict (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{dictionary }\end{DoxyParamCaption})}

\begin{DoxyVerb}Overwrite own state with any state in the other dictionary.

This allows loading of the contents of another dictionary while keeping the
current dictionary version.
\end{DoxyVerb}
 

Definition at line 418 of file dict.\+py.


\begin{DoxyCode}
418     \textcolor{keyword}{def }copy\_dict(self, dictionary):
419         \textcolor{stringliteral}{"""}
420 \textcolor{stringliteral}{        Overwrite own state with any state in the other dictionary.}
421 \textcolor{stringliteral}{}
422 \textcolor{stringliteral}{        This allows loading of the contents of another dictionary while keeping the}
423 \textcolor{stringliteral}{        current dictionary version.}
424 \textcolor{stringliteral}{        """}
425         \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} vars(dictionary).items():
426             setattr(self, k, v)
427 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a72cfec62b2d5117326f514edfe848a1e}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a72cfec62b2d5117326f514edfe848a1e}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!freqs@{freqs}}
\index{freqs@{freqs}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{freqs()}{freqs()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+freqs (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the frequency dictionary.
\end{DoxyVerb}
 

Definition at line 439 of file dict.\+py.


\begin{DoxyCode}
439     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_abb3607652abdd76d57a6ae90e19e3828}{freqs}(self):
440         \textcolor{stringliteral}{"""}
441 \textcolor{stringliteral}{        Return the frequency dictionary.}
442 \textcolor{stringliteral}{        """}
443         \textcolor{comment}{# TODO: deprecate this}
444         \textcolor{keywordflow}{return} self.freq
445 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a57685af2fcd0a684b7102c55afe0c8ad}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a57685af2fcd0a684b7102c55afe0c8ad}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!gpt2\+\_\+tokenize@{gpt2\+\_\+tokenize}}
\index{gpt2\+\_\+tokenize@{gpt2\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{gpt2\+\_\+tokenize()}{gpt2\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+gpt2\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text }\end{DoxyParamCaption})}

\begin{DoxyVerb}Tokenize using Gpt2 BPE tokenizer.
\end{DoxyVerb}
 

Definition at line 479 of file dict.\+py.


\begin{DoxyCode}
479     \textcolor{keyword}{def }gpt2\_tokenize(self, text):
480         \textcolor{stringliteral}{"""}
481 \textcolor{stringliteral}{        Tokenize using Gpt2 BPE tokenizer.}
482 \textcolor{stringliteral}{        """}
483         \textcolor{keywordflow}{return} self.gpt2\_bpe.encode(text)
484 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad5abcf174648d88f2383cba7a361dd29}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad5abcf174648d88f2383cba7a361dd29}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!keys@{keys}}
\index{keys@{keys}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{keys()}{keys()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+keys (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return all the words in the dictionary.
\end{DoxyVerb}
 

Definition at line 412 of file dict.\+py.


\begin{DoxyCode}
412     \textcolor{keyword}{def }keys(self):
413         \textcolor{stringliteral}{"""}
414 \textcolor{stringliteral}{        Return all the words in the dictionary.}
415 \textcolor{stringliteral}{        """}
416         \textcolor{keywordflow}{return} self.tok2ind.keys()
417 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aa4229d1ba17932f588e15067afd9bf42}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aa4229d1ba17932f588e15067afd9bf42}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!load@{load}}
\index{load@{load}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+load (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{filename }\end{DoxyParamCaption})}

\begin{DoxyVerb}Load pre-existing dictionary in 'token[<TAB>count]' format.

Initialize counts from other dictionary, or 0 if they aren't included.
\end{DoxyVerb}
 

Definition at line 622 of file dict.\+py.


\begin{DoxyCode}
622     \textcolor{keyword}{def }load(self, filename):
623         \textcolor{stringliteral}{"""}
624 \textcolor{stringliteral}{        Load pre-existing dictionary in 'token[<TAB>count]' format.}
625 \textcolor{stringliteral}{}
626 \textcolor{stringliteral}{        Initialize counts from other dictionary, or 0 if they aren't included.}
627 \textcolor{stringliteral}{        """}
628         print(\textcolor{stringliteral}{'Dictionary: loading dictionary from \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(filename))
629 
630         lower\_special = self.null\_token == self.null\_token.lower()
631         SPECIAL\_TOKENS = \{\textcolor{stringliteral}{'\_\_UNK\_\_'}, \textcolor{stringliteral}{'\_\_NULL\_\_'}, \textcolor{stringliteral}{'\_\_END\_\_'}, \textcolor{stringliteral}{'\_\_START\_\_'}\}
632         with codecs.open(filename, \textcolor{stringliteral}{'r', encoding='}utf-8', errors='ignore') as read:
633             \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} read:
634                 split = line.strip().split(\textcolor{stringliteral}{'\(\backslash\)t'})
635                 token = \hyperlink{namespaceparlai_1_1core_1_1dict_a4d8952ff127b540967c707a58e8ebb48}{unescape}(split[0])
636                 \textcolor{keywordflow}{if} lower\_special \textcolor{keywordflow}{and} token \textcolor{keywordflow}{in} SPECIAL\_TOKENS:
637                     token = token.lower()
638                 cnt = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(split[1]) \textcolor{keywordflow}{if} len(split) > 1 \textcolor{keywordflow}{else} 0
639                 self.freq[token] = cnt
640                 self.add\_token(token)
641         print(\textcolor{stringliteral}{'[ num words =  %d ]'} % len(self))
642 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3c3ef6181e0cea58b2650af763db1d17}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3c3ef6181e0cea58b2650af763db1d17}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!max\+\_\+freq@{max\+\_\+freq}}
\index{max\+\_\+freq@{max\+\_\+freq}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{max\+\_\+freq()}{max\_freq()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+max\+\_\+freq (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the largest frequency of any nonspecial token.
\end{DoxyVerb}
 

Definition at line 428 of file dict.\+py.


\begin{DoxyCode}
428     \textcolor{keyword}{def }max\_freq(self):
429         \textcolor{stringliteral}{"""}
430 \textcolor{stringliteral}{        Return the largest frequency of any nonspecial token.}
431 \textcolor{stringliteral}{        """}
432         \textcolor{keywordflow}{return} max(
433             self.freq[k]
434             \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} self.freq.keys()
435             \textcolor{keywordflow}{if} k
436             \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} [self.null\_token, self.end\_token, self.start\_token, self.unk\_token]
437         )
438 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a73fe72e257ace6e8debf2c41995f8390}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a73fe72e257ace6e8debf2c41995f8390}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!nltk\+\_\+tokenize@{nltk\+\_\+tokenize}}
\index{nltk\+\_\+tokenize@{nltk\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{nltk\+\_\+tokenize()}{nltk\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+nltk\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text,  }\item[{}]{building = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Tokenize using NLTK PunktTokenizer.

Uses nltk-trained PunktTokenizer for sentence tokenization and Treebank Word
Tokenizer for tokenizing words within sentences.
\end{DoxyVerb}
 

Definition at line 466 of file dict.\+py.


\begin{DoxyCode}
466     \textcolor{keyword}{def }nltk\_tokenize(self, text, building=False):
467         \textcolor{stringliteral}{"""}
468 \textcolor{stringliteral}{        Tokenize using NLTK PunktTokenizer.}
469 \textcolor{stringliteral}{}
470 \textcolor{stringliteral}{        Uses nltk-trained PunktTokenizer for sentence tokenization and Treebank Word}
471 \textcolor{stringliteral}{        Tokenizer for tokenizing words within sentences.}
472 \textcolor{stringliteral}{        """}
473         \textcolor{keywordflow}{return} (
474             token
475             \textcolor{keywordflow}{for} sent \textcolor{keywordflow}{in} self.sent\_tok.\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(text)
476             \textcolor{keywordflow}{for} token \textcolor{keywordflow}{in} self.word\_tok.\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(sent)
477         )
478 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad34c4135329f6768d22d519c3c483d68}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad34c4135329f6768d22d519c3c483d68}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!parse@{parse}}
\index{parse@{parse}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{parse()}{parse()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+parse (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{txt\+\_\+or\+\_\+vec,  }\item[{}]{vec\+\_\+type = {\ttfamily list} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Parse either text or a vector of indices.

Calls `~txt2vec` if `txt_or_vec is a string, or `~vec2txt` otherwise.

:param vec_type:
    type of the returned vector if the input is a string.
\end{DoxyVerb}
 

Definition at line 718 of file dict.\+py.


\begin{DoxyCode}
718     \textcolor{keyword}{def }parse(self, txt\_or\_vec, vec\_type=list):
719         \textcolor{stringliteral}{"""}
720 \textcolor{stringliteral}{        Parse either text or a vector of indices.}
721 \textcolor{stringliteral}{}
722 \textcolor{stringliteral}{        Calls `~txt2vec` if `txt\_or\_vec is a string, or `~vec2txt` otherwise.}
723 \textcolor{stringliteral}{}
724 \textcolor{stringliteral}{        :param vec\_type:}
725 \textcolor{stringliteral}{            type of the returned vector if the input is a string.}
726 \textcolor{stringliteral}{        """}
727         \textcolor{comment}{# TODO: try to deprecate this, preferring straight txt2vec}
728         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(txt\_or\_vec) == str:
729             \textcolor{keywordflow}{return} self.txt2vec(txt\_or\_vec, vec\_type)
730         \textcolor{keywordflow}{else}:
731             \textcolor{keywordflow}{return} self.vec2txt(txt\_or\_vec)
732 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a78edf54954bf0514e1798ce694a758fe}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a78edf54954bf0514e1798ce694a758fe}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!re\+\_\+tokenize@{re\+\_\+tokenize}}
\index{re\+\_\+tokenize@{re\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{re\+\_\+tokenize()}{re\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+re\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Tokenize using a liberal regular expression.

Find boundaries between word characters, newlines, and non-word
non-whitespace tokens ``(r'[\\w\\n]+ | [^\\w\\s] | \\n')``.

This splits along whitespace and punctuation and keeps the newline as
a token in the returned list.
\end{DoxyVerb}
 

Definition at line 486 of file dict.\+py.


\begin{DoxyCode}
486     \textcolor{keyword}{def }re\_tokenize(text):
487         \textcolor{stringliteral}{r"""}
488 \textcolor{stringliteral}{        Tokenize using a liberal regular expression.}
489 \textcolor{stringliteral}{}
490 \textcolor{stringliteral}{        Find boundaries between word characters, newlines, and non-word}
491 \textcolor{stringliteral}{        non-whitespace tokens ``(r'[\(\backslash\)\(\backslash\)w\(\backslash\)\(\backslash\)n]+ | [^\(\backslash\)\(\backslash\)w\(\backslash\)\(\backslash\)s] | \(\backslash\)\(\backslash\)n')``.}
492 \textcolor{stringliteral}{}
493 \textcolor{stringliteral}{        This splits along whitespace and punctuation and keeps the newline as}
494 \textcolor{stringliteral}{        a token in the returned list.}
495 \textcolor{stringliteral}{        """}
496         \textcolor{keywordflow}{return} RETOK.findall(text)
497 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae828063449b45112d82a97921d35c247}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae828063449b45112d82a97921d35c247}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!remove\+\_\+tail@{remove\+\_\+tail}}
\index{remove\+\_\+tail@{remove\+\_\+tail}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{remove\+\_\+tail()}{remove\_tail()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+remove\+\_\+tail (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{min\+\_\+freq }\end{DoxyParamCaption})}

\begin{DoxyVerb}Remove elements below the frequency cutoff from the dictionary.
\end{DoxyVerb}
 

Definition at line 576 of file dict.\+py.


\begin{DoxyCode}
576     \textcolor{keyword}{def }remove\_tail(self, min\_freq):
577         \textcolor{stringliteral}{"""}
578 \textcolor{stringliteral}{        Remove elements below the frequency cutoff from the dictionary.}
579 \textcolor{stringliteral}{        """}
580         to\_remove = []
581         \textcolor{keywordflow}{for} token, freq \textcolor{keywordflow}{in} self.freq.items():
582             \textcolor{keywordflow}{if} freq < min\_freq:
583                 \textcolor{comment}{# queue up removals since can't mutate dict during iteration}
584                 to\_remove.append(token)
585 
586         \textcolor{keywordflow}{for} token \textcolor{keywordflow}{in} to\_remove:
587             del self.freq[token]
588             idx = self.tok2ind.pop(token)
589             del self.ind2tok[idx]
590 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1a800c1aecdb97986c59fd26f1b55626}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1a800c1aecdb97986c59fd26f1b55626}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!resize\+\_\+to\+\_\+max@{resize\+\_\+to\+\_\+max}}
\index{resize\+\_\+to\+\_\+max@{resize\+\_\+to\+\_\+max}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{resize\+\_\+to\+\_\+max()}{resize\_to\_max()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+resize\+\_\+to\+\_\+max (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{maxtokens }\end{DoxyParamCaption})}

\begin{DoxyVerb}Trims the dictionary to the maximum number of tokens.
\end{DoxyVerb}
 

Definition at line 611 of file dict.\+py.


\begin{DoxyCode}
611     \textcolor{keyword}{def }resize\_to\_max(self, maxtokens):
612         \textcolor{stringliteral}{"""}
613 \textcolor{stringliteral}{        Trims the dictionary to the maximum number of tokens.}
614 \textcolor{stringliteral}{        """}
615         \textcolor{keywordflow}{if} maxtokens >= 0 \textcolor{keywordflow}{and} len(self.tok2ind) > maxtokens:
616             \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} range(maxtokens, len(self.ind2tok)):
617                 v = self.ind2tok[k]
618                 del self.ind2tok[k]
619                 del self.tok2ind[v]
620                 del self.freq[v]
621 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0c6a8d8b67fe978549b328e7b7b07450}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0c6a8d8b67fe978549b328e7b7b07450}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!save@{save}}
\index{save@{save}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+save (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{filename = {\ttfamily None},  }\item[{}]{append = {\ttfamily False},  }\item[{}]{sort = {\ttfamily True} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save dictionary to file.

Format is 'token<TAB>count' for every token in the dictionary, sorted
by count with the most frequent words first.

If ``append`` (default ``False``) is set to ``True``, appends instead of
overwriting.

If ``sort`` (default ``True``), then first sort the dictionary before saving.
\end{DoxyVerb}
 

Definition at line 643 of file dict.\+py.


\begin{DoxyCode}
643     \textcolor{keyword}{def }save(self, filename=None, append=False, sort=True):
644         \textcolor{stringliteral}{"""}
645 \textcolor{stringliteral}{        Save dictionary to file.}
646 \textcolor{stringliteral}{}
647 \textcolor{stringliteral}{        Format is 'token<TAB>count' for every token in the dictionary, sorted}
648 \textcolor{stringliteral}{        by count with the most frequent words first.}
649 \textcolor{stringliteral}{}
650 \textcolor{stringliteral}{        If ``append`` (default ``False``) is set to ``True``, appends instead of}
651 \textcolor{stringliteral}{        overwriting.}
652 \textcolor{stringliteral}{}
653 \textcolor{stringliteral}{        If ``sort`` (default ``True``), then first sort the dictionary before saving.}
654 \textcolor{stringliteral}{        """}
655         filename = self.opt[\textcolor{stringliteral}{'dict\_file'}] \textcolor{keywordflow}{if} filename \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} filename
656 
657         \textcolor{keywordflow}{if} self.tokenizer == \textcolor{stringliteral}{'bpe'}:
658             needs\_removal = self.bpehelper.finalize(
659                 self.freq, num\_symbols=self.maxtokens, minfreq=self.minfreq
660             )
661             \textcolor{keywordflow}{if} needs\_removal:
662                 self.\_remove\_non\_bpe()
663             \textcolor{keywordflow}{elif} filename != self.opt[\textcolor{stringliteral}{'dict\_file'}]:
664                 \textcolor{comment}{# need to copy over the old codecs file}
665                 self.bpehelper.copy\_codecs\_file(filename + \textcolor{stringliteral}{'.codecs'})
666             \textcolor{keywordflow}{if} sort:
667                 self.sort(trim=\textcolor{keyword}{False})
668         \textcolor{keywordflow}{elif} self.tokenizer == \textcolor{stringliteral}{'gpt2'}:
669             \textcolor{comment}{# never remove or sort tokens from gpt2}
670             \textcolor{keywordflow}{pass}
671         \textcolor{keywordflow}{elif} sort:
672             self.sort(trim=\textcolor{keyword}{True})
673 
674         print(\textcolor{stringliteral}{'Dictionary: saving dictionary to \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(filename))
675 
676         \hyperlink{namespaceparlai_1_1core_1_1build__data_a6ce042fedd4194bd016845bbe7a8facf}{make\_dir}(os.path.dirname(filename))
677         mode = \textcolor{stringliteral}{'a'} \textcolor{keywordflow}{if} append \textcolor{keywordflow}{else} \textcolor{stringliteral}{'w'}
678         with open(filename, mode, encoding=\textcolor{stringliteral}{'utf-8'}) \textcolor{keyword}{as} write:
679             \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.ind2tok.keys():
680                 tok = self.ind2tok[i]
681                 cnt = self.freq[tok]
682                 write.write(\textcolor{stringliteral}{'\{tok\}\(\backslash\)t\{cnt\}\(\backslash\)n'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(tok=\hyperlink{namespaceparlai_1_1core_1_1dict_ae44fe4a2be005a4023a758a58f656495}{escape}(tok), cnt=cnt))
683 
684         \textcolor{comment}{# save opt file}
685         with open(filename + \textcolor{stringliteral}{'.opt'}, \textcolor{stringliteral}{'w'}, encoding=\textcolor{stringliteral}{'utf-8'}) \textcolor{keyword}{as} handle:
686             json.dump(self.opt, handle)
687 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3d8996e367685451f7de85e8284243d7}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3d8996e367685451f7de85e8284243d7}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!share@{share}}
\index{share@{share}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{share()}{share()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+share (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Share internal dicts.
\end{DoxyVerb}
 

Definition at line 791 of file dict.\+py.


\begin{DoxyCode}
791     \textcolor{keyword}{def }share(self):
792         \textcolor{stringliteral}{"""}
793 \textcolor{stringliteral}{        Share internal dicts.}
794 \textcolor{stringliteral}{        """}
795         shared = super().share()
796         shared[\textcolor{stringliteral}{'freq'}] = self.freq
797         shared[\textcolor{stringliteral}{'tok2ind'}] = self.tok2ind
798         shared[\textcolor{stringliteral}{'ind2tok'}] = self.ind2tok
799         \textcolor{keywordflow}{return} shared
800 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aea9aca40dd1bb1976f4042565b172d88}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aea9aca40dd1bb1976f4042565b172d88}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save on shutdown if ``save_path`` is set.
\end{DoxyVerb}
 

Definition at line 801 of file dict.\+py.


\begin{DoxyCode}
801     \textcolor{keyword}{def }shutdown(self):
802         \textcolor{stringliteral}{"""}
803 \textcolor{stringliteral}{        Save on shutdown if ``save\_path`` is set.}
804 \textcolor{stringliteral}{        """}
805         \textcolor{keywordflow}{if} hasattr(self, \textcolor{stringliteral}{'save\_path'}):
806             self.save(self.save\_path)
807 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84cb4fabf5d0e92e3f80ac16bdfd0ccc}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84cb4fabf5d0e92e3f80ac16bdfd0ccc}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!sort@{sort}}
\index{sort@{sort}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{sort()}{sort()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+sort (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{trim = {\ttfamily True} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Sort the dictionary.

Inline operation. Rearranges the dictionary so that the elements with
the lowest index have the highest counts. This reindexes the dictionary
according to the sorted frequencies, breaking ties alphabetically by
token.

:param bool trim:
    If True, truncate the dictionary based on minfreq and maxtokens.
\end{DoxyVerb}
 

Definition at line 688 of file dict.\+py.


\begin{DoxyCode}
688     \textcolor{keyword}{def }sort(self, trim=True):
689         \textcolor{stringliteral}{"""}
690 \textcolor{stringliteral}{        Sort the dictionary.}
691 \textcolor{stringliteral}{}
692 \textcolor{stringliteral}{        Inline operation. Rearranges the dictionary so that the elements with}
693 \textcolor{stringliteral}{        the lowest index have the highest counts. This reindexes the dictionary}
694 \textcolor{stringliteral}{        according to the sorted frequencies, breaking ties alphabetically by}
695 \textcolor{stringliteral}{        token.}
696 \textcolor{stringliteral}{}
697 \textcolor{stringliteral}{        :param bool trim:}
698 \textcolor{stringliteral}{            If True, truncate the dictionary based on minfreq and maxtokens.}
699 \textcolor{stringliteral}{        """}
700         \textcolor{keywordflow}{if} trim \textcolor{keywordflow}{and} self.tokenizer == \textcolor{stringliteral}{'gpt2'}:
701             \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{"You should not trim the dictionary when using gpt-2."})
702         \textcolor{comment}{# sort first by count, then alphabetically}
703         \textcolor{keywordflow}{if} trim:
704             self.remove\_tail(self.minfreq)
705         sorted\_pairs = sorted(self.freq.items(), key=\textcolor{keyword}{lambda} x: (-x[1], x[0]))
706         new\_tok2ind = \{\}
707         new\_ind2tok = \{\}
708         \textcolor{keywordflow}{for} i, (tok, \_) \textcolor{keywordflow}{in} enumerate(sorted\_pairs):
709             new\_tok2ind[tok] = i
710             new\_ind2tok[i] = tok
711         self.tok2ind = new\_tok2ind
712         self.ind2tok = new\_ind2tok
713         \textcolor{keywordflow}{if} trim:
714             self.resize\_to\_max(self.maxtokens)
715         \textcolor{keyword}{assert} len(self.freq) == len(self.ind2tok) == len(self.tok2ind)
716         \textcolor{keywordflow}{return} sorted\_pairs
717 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a437d3aacc7b55dac587643b271ba5f38}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a437d3aacc7b55dac587643b271ba5f38}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!space\+\_\+tokenize@{space\+\_\+tokenize}}
\index{space\+\_\+tokenize@{space\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{space\+\_\+tokenize()}{space\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+space\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Tokenize exactly on spaces.

Useful when text is pre-tokenized.
\end{DoxyVerb}
 

Definition at line 519 of file dict.\+py.


\begin{DoxyCode}
519     \textcolor{keyword}{def }space\_tokenize(text):
520         \textcolor{stringliteral}{"""}
521 \textcolor{stringliteral}{        Tokenize exactly on spaces.}
522 \textcolor{stringliteral}{}
523 \textcolor{stringliteral}{        Useful when text is pre-tokenized.}
524 \textcolor{stringliteral}{        """}
525         \textcolor{keywordflow}{return} text.strip().split(\textcolor{stringliteral}{' '})
526 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6532e92a69be5a68d04963597cd4ba29}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6532e92a69be5a68d04963597cd4ba29}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!spacy\+\_\+span\+\_\+tokenize@{spacy\+\_\+span\+\_\+tokenize}}
\index{spacy\+\_\+span\+\_\+tokenize@{spacy\+\_\+span\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{spacy\+\_\+span\+\_\+tokenize()}{spacy\_span\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+spacy\+\_\+span\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return tuple of tokens, spans.
\end{DoxyVerb}
 

Definition at line 455 of file dict.\+py.


\begin{DoxyCode}
455     \textcolor{keyword}{def }spacy\_span\_tokenize(self, text):
456         \textcolor{stringliteral}{"""}
457 \textcolor{stringliteral}{        Return tuple of tokens, spans.}
458 \textcolor{stringliteral}{        """}
459         \textcolor{comment}{# TODO: can we delete this?}
460         tokens = self.NLP.tokenizer(text)
461         \textcolor{keywordflow}{return} (
462             [t.text \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} tokens],
463             [(t.idx, t.idx + len(t.text)) \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} tokens],
464         )
465 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8e818ad5e11ecb08de6c4b858b2e68f1}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8e818ad5e11ecb08de6c4b858b2e68f1}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!spacy\+\_\+tokenize@{spacy\+\_\+tokenize}}
\index{spacy\+\_\+tokenize@{spacy\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{spacy\+\_\+tokenize()}{spacy\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+spacy\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text,  }\item[{}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Tokenize using spaCy.

Does whatever spaCy does. See https://spacy.io/.
\end{DoxyVerb}
 

Definition at line 446 of file dict.\+py.


\begin{DoxyCode}
446     \textcolor{keyword}{def }spacy\_tokenize(self, text, **kwargs):
447         \textcolor{stringliteral}{"""}
448 \textcolor{stringliteral}{        Tokenize using spaCy.}
449 \textcolor{stringliteral}{}
450 \textcolor{stringliteral}{        Does whatever spaCy does. See https://spacy.io/.}
451 \textcolor{stringliteral}{        """}
452         tokens = self.NLP.tokenizer(text)
453         \textcolor{keywordflow}{return} [t.text \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} tokens]
454 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8fede3cf83af6a47c5dd4bb356de3350}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8fede3cf83af6a47c5dd4bb356de3350}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!span\+\_\+tokenize@{span\+\_\+tokenize}}
\index{span\+\_\+tokenize@{span\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{span\+\_\+tokenize()}{span\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+span\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text }\end{DoxyParamCaption})}

\begin{DoxyVerb}Tokenize and find  starting index of each token in the original string.
\end{DoxyVerb}
 

Definition at line 527 of file dict.\+py.


\begin{DoxyCode}
527     \textcolor{keyword}{def }span\_tokenize(self, text):
528         \textcolor{stringliteral}{"""}
529 \textcolor{stringliteral}{        Tokenize and find  starting index of each token in the original string.}
530 \textcolor{stringliteral}{        """}
531         \textcolor{comment}{# TODO: can this be deleted?}
532         \textcolor{keywordflow}{if} self.tokenizer == \textcolor{stringliteral}{'spacy'}:
533             \textcolor{comment}{# spacy has own}
534             \textcolor{keywordflow}{return} self.spacy\_span\_tokenize(text)
535         tokens = self.tokenize(text)
536         curr\_idx = 0
537         indices = []
538         \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} tokens:
539             \textcolor{keywordflow}{while} text[curr\_idx] != t[0]:
540                 curr\_idx += 1
541             indices.append((curr\_idx, curr\_idx + len(t)))
542             curr\_idx += len(t)
543         \textcolor{keywordflow}{return} tokens, indices
544 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a826ba5c6ff36c8ddf5d7723c50e5616d}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a826ba5c6ff36c8ddf5d7723c50e5616d}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!split\+\_\+tokenize@{split\+\_\+tokenize}}
\index{split\+\_\+tokenize@{split\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{split\+\_\+tokenize()}{split\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+split\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Tokenize on whitespace and some limited punctuation.

Splits tokens based on whitespace after adding whitespace around
punctuation.

Use re_tokenize if you want more robust handling of punctuation.
\end{DoxyVerb}
 

Definition at line 499 of file dict.\+py.


\begin{DoxyCode}
499     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1mturk_1_1tasks_1_1wizard__of__wikipedia_1_1worlds_a040aaf5ecfbddec14f321279454f85a8}{split\_tokenize}(text):
500         \textcolor{stringliteral}{"""}
501 \textcolor{stringliteral}{        Tokenize on whitespace and some limited punctuation.}
502 \textcolor{stringliteral}{}
503 \textcolor{stringliteral}{        Splits tokens based on whitespace after adding whitespace around}
504 \textcolor{stringliteral}{        punctuation.}
505 \textcolor{stringliteral}{}
506 \textcolor{stringliteral}{        Use re\_tokenize if you want more robust handling of punctuation.}
507 \textcolor{stringliteral}{        """}
508         \textcolor{keywordflow}{return} (
509             text.replace(\textcolor{stringliteral}{'.'}, \textcolor{stringliteral}{' . '})
510             .replace(\textcolor{stringliteral}{','}, \textcolor{stringliteral}{' , '})
511             .replace(\textcolor{stringliteral}{';'}, \textcolor{stringliteral}{' ; '})
512             .replace(\textcolor{stringliteral}{':'}, \textcolor{stringliteral}{' : '})
513             .replace(\textcolor{stringliteral}{'!'}, \textcolor{stringliteral}{' ! '})
514             .replace(\textcolor{stringliteral}{'?'}, \textcolor{stringliteral}{' ? '})
515             .split()
516         )
517 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aca7e5edfd6502701277cb83b75ff4e96}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aca7e5edfd6502701277cb83b75ff4e96}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!tokenize@{tokenize}}
\index{tokenize@{tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{tokenize()}{tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text,  }\item[{}]{building = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a sequence of tokens from the iterable.
\end{DoxyVerb}
 

Definition at line 545 of file dict.\+py.


\begin{DoxyCode}
545     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(self, text, building=False):
546         \textcolor{stringliteral}{"""}
547 \textcolor{stringliteral}{        Return a sequence of tokens from the iterable.}
548 \textcolor{stringliteral}{        """}
549         \textcolor{keywordflow}{if} self.lower:
550             text = text.lower()
551 
552         \textcolor{comment}{# calls the selected tokenizer function e.g. 're' => re\_tokenize(text)}
553         word\_tokens = self.tokenizer\_fun(text)
554 
555         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} building \textcolor{keywordflow}{and} self.max\_ngram\_size > 1:
556             \textcolor{comment}{# search for ngrams during parse-time}
557             \textcolor{comment}{# TODO(ahm): support build-time ngrams using word2vec heuristic?}
558             word\_tokens = \hyperlink{namespaceparlai_1_1core_1_1dict_a5e9eb43b6c0dce0b3aab7f3ea3717de6}{find\_ngrams}(self.tok2ind, word\_tokens, self.max\_ngram\_size)
559         \textcolor{keywordflow}{return} word\_tokens
560 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abc3baf742422fc7cdaece698224709d4}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abc3baf742422fc7cdaece698224709d4}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!txt2vec@{txt2vec}}
\index{txt2vec@{txt2vec}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{txt2vec()}{txt2vec()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+txt2vec (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text,  }\item[{}]{vec\+\_\+type = {\ttfamily list} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert a string to a vector (list of ints).

First runs a sentence tokenizer, then a word tokenizer.

:param type vec_type:
    The type of the returned vector if the input is a string. Suggested
    ``list``, ``tuple``, ``set``, or ``np.ndarray``.
\end{DoxyVerb}
 

Definition at line 733 of file dict.\+py.


\begin{DoxyCode}
733     \textcolor{keyword}{def }txt2vec(self, text, vec\_type=list):
734         \textcolor{stringliteral}{"""}
735 \textcolor{stringliteral}{        Convert a string to a vector (list of ints).}
736 \textcolor{stringliteral}{}
737 \textcolor{stringliteral}{        First runs a sentence tokenizer, then a word tokenizer.}
738 \textcolor{stringliteral}{}
739 \textcolor{stringliteral}{        :param type vec\_type:}
740 \textcolor{stringliteral}{            The type of the returned vector if the input is a string. Suggested}
741 \textcolor{stringliteral}{            ``list``, ``tuple``, ``set``, or ``np.ndarray``.}
742 \textcolor{stringliteral}{        """}
743         \textcolor{keywordflow}{if} vec\_type == list \textcolor{keywordflow}{or} vec\_type == tuple \textcolor{keywordflow}{or} vec\_type == set:
744             res = vec\_type((self[token] \textcolor{keywordflow}{for} token \textcolor{keywordflow}{in} self.tokenize(\hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(text))))
745         \textcolor{keywordflow}{elif} vec\_type == np.ndarray:
746             res = np.fromiter((self[token] \textcolor{keywordflow}{for} token \textcolor{keywordflow}{in} self.tokenize(text)), np.int)
747         \textcolor{keywordflow}{else}:
748             \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'Type \{\} not supported by dict'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(vec\_type))
749         \textcolor{keywordflow}{return} res
750 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2eeb50b2cd6cf3a8ca817b729ec7486}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2eeb50b2cd6cf3a8ca817b729ec7486}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!vec2txt@{vec2txt}}
\index{vec2txt@{vec2txt}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{vec2txt()}{vec2txt()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+vec2txt (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{vector,  }\item[{}]{delimiter = {\ttfamily \textquotesingle{}~\textquotesingle{}} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert a vector of IDs to a string.

Converts a vector (iterable of ints) into a string, with each token separated by
the delimiter (default ``' '``).
\end{DoxyVerb}
 

Definition at line 751 of file dict.\+py.


\begin{DoxyCode}
751     \textcolor{keyword}{def }vec2txt(self, vector, delimiter=' '):
752         \textcolor{stringliteral}{"""}
753 \textcolor{stringliteral}{        Convert a vector of IDs to a string.}
754 \textcolor{stringliteral}{}
755 \textcolor{stringliteral}{        Converts a vector (iterable of ints) into a string, with each token separated by}
756 \textcolor{stringliteral}{        the delimiter (default ``' '``).}
757 \textcolor{stringliteral}{        """}
758         \textcolor{keywordflow}{if} self.tokenizer == \textcolor{stringliteral}{'gpt2'} \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} self.opt.get(\textcolor{stringliteral}{'bpe\_debug'}, \textcolor{keyword}{False}):
759             \textcolor{keywordflow}{return} self.gpt2\_bpe.decode(self[\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(idx)] \textcolor{keywordflow}{for} idx \textcolor{keywordflow}{in} vector)
760         \textcolor{comment}{# if we want to debug into this gpt2 bpe, you will get next line}
761         text = delimiter.join(self[\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(idx)] \textcolor{keywordflow}{for} idx \textcolor{keywordflow}{in} vector)
762         \textcolor{comment}{# if we used a BPE tokenizer we need to rejoin the encodings}
763         \textcolor{keywordflow}{if} self.tokenizer == \textcolor{stringliteral}{'bpe'} \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} self.opt.get(\textcolor{stringliteral}{'bpe\_debug'}, \textcolor{keyword}{False}):
764             text = text.replace(\textcolor{stringliteral}{'@@ '}, \textcolor{stringliteral}{''})
765             \textcolor{comment}{# It's also possible that we get a BPE encoding on the end of the word}
766             \textcolor{keywordflow}{if} text.endswith(\textcolor{stringliteral}{'@@'}):
767                 text = text[:-2]
768             text = text.replace(\textcolor{stringliteral}{'\_\_newln\_\_'}, \textcolor{stringliteral}{'\(\backslash\)n'})
769         \textcolor{keywordflow}{return} text
770 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2bfd8d00b4733c085a639521e727ceb}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2bfd8d00b4733c085a639521e727ceb}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!bpehelper@{bpehelper}}
\index{bpehelper@{bpehelper}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{bpehelper}{bpehelper}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+bpehelper}



Definition at line 323 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3917720c8b31e5b99698beca63256511}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3917720c8b31e5b99698beca63256511}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!built@{built}}
\index{built@{built}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{built}{built}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+built}



Definition at line 571 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae6290695f9d0511853f7c5310ea0dc04}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae6290695f9d0511853f7c5310ea0dc04}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+end@{default\+\_\+end}}
\index{default\+\_\+end@{default\+\_\+end}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+end}{default\_end}}
{\footnotesize\ttfamily string parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+end = \textquotesingle{}\+\_\+\+\_\+end\+\_\+\+\_\+\textquotesingle{}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 111 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a7646bb422f0b665953a6542b9e15c1d8}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a7646bb422f0b665953a6542b9e15c1d8}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+lang@{default\+\_\+lang}}
\index{default\+\_\+lang@{default\+\_\+lang}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+lang}{default\_lang}}
{\footnotesize\ttfamily string parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+lang = \textquotesingle{}english\textquotesingle{}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 105 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a440d3893058a03b84e2aa51f1760e107}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a440d3893058a03b84e2aa51f1760e107}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+lower@{default\+\_\+lower}}
\index{default\+\_\+lower@{default\+\_\+lower}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+lower}{default\_lower}}
{\footnotesize\ttfamily bool parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+lower = False\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 114 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a4f406b83d630fd7d0457b52d3722e2c6}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a4f406b83d630fd7d0457b52d3722e2c6}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+maxngram@{default\+\_\+maxngram}}
\index{default\+\_\+maxngram@{default\+\_\+maxngram}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+maxngram}{default\_maxngram}}
{\footnotesize\ttfamily int parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+maxngram = -\/1\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 106 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5d96f1650ebea8a11f2c578b1dad257e}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5d96f1650ebea8a11f2c578b1dad257e}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+maxtokens@{default\+\_\+maxtokens}}
\index{default\+\_\+maxtokens@{default\+\_\+maxtokens}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+maxtokens}{default\_maxtokens}}
{\footnotesize\ttfamily int parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+maxtokens = -\/1\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 108 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad3b95d0ac5f8b213fbed89bc4e2487cb}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad3b95d0ac5f8b213fbed89bc4e2487cb}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+minfreq@{default\+\_\+minfreq}}
\index{default\+\_\+minfreq@{default\+\_\+minfreq}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+minfreq}{default\_minfreq}}
{\footnotesize\ttfamily int parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+minfreq = 0\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 107 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1e7c89167a6ff97f4a6bfa1a8634b883}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1e7c89167a6ff97f4a6bfa1a8634b883}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+null@{default\+\_\+null}}
\index{default\+\_\+null@{default\+\_\+null}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+null}{default\_null}}
{\footnotesize\ttfamily string parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+null = \textquotesingle{}\+\_\+\+\_\+null\+\_\+\+\_\+\textquotesingle{}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 109 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1f63ec9644ffede9d3b35daee66f7212}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1f63ec9644ffede9d3b35daee66f7212}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+start@{default\+\_\+start}}
\index{default\+\_\+start@{default\+\_\+start}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+start}{default\_start}}
{\footnotesize\ttfamily string parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+start = \textquotesingle{}\+\_\+\+\_\+start\+\_\+\+\_\+\textquotesingle{}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 110 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a091632e3291a206273a90903c42a53d3}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a091632e3291a206273a90903c42a53d3}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+textfields@{default\+\_\+textfields}}
\index{default\+\_\+textfields@{default\+\_\+textfields}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+textfields}{default\_textfields}}
{\footnotesize\ttfamily string parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+textfields = \textquotesingle{}text,labels\textquotesingle{}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 115 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aeb174a076e3febf5b879e109f1c94d2b}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aeb174a076e3febf5b879e109f1c94d2b}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+tok@{default\+\_\+tok}}
\index{default\+\_\+tok@{default\+\_\+tok}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+tok}{default\_tok}}
{\footnotesize\ttfamily string parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+tok = \textquotesingle{}re\textquotesingle{}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 113 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae659523f367d3ba29696d2bb59980fdb}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae659523f367d3ba29696d2bb59980fdb}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+unk@{default\+\_\+unk}}
\index{default\+\_\+unk@{default\+\_\+unk}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+unk}{default\_unk}}
{\footnotesize\ttfamily string parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+unk = \textquotesingle{}\+\_\+\+\_\+unk\+\_\+\+\_\+\textquotesingle{}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 112 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a793811f6f290bfcb714fa865745cdcb4}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a793811f6f290bfcb714fa865745cdcb4}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!end\+\_\+token@{end\+\_\+token}}
\index{end\+\_\+token@{end\+\_\+token}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{end\+\_\+token}{end\_token}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+end\+\_\+token}



Definition at line 229 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af3e428f4a5d8ef3a2fc02b01a6f659f2}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af3e428f4a5d8ef3a2fc02b01a6f659f2}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!freq@{freq}}
\index{freq@{freq}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{freq}{freq}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+freq}



Definition at line 250 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ac0fbaa96f4b3d1cef6628da8320d4bc2}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ac0fbaa96f4b3d1cef6628da8320d4bc2}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!gpt2\+\_\+bpe@{gpt2\+\_\+bpe}}
\index{gpt2\+\_\+bpe@{gpt2\+\_\+bpe}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{gpt2\+\_\+bpe}{gpt2\_bpe}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+gpt2\+\_\+bpe}



Definition at line 335 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af425a3810b9c85ac73d9b77a9ee100e6}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af425a3810b9c85ac73d9b77a9ee100e6}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!ind2tok@{ind2tok}}
\index{ind2tok@{ind2tok}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{ind2tok}{ind2tok}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+ind2tok}



Definition at line 252 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0dc4620f2829a15d822cc29e7fccd677}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0dc4620f2829a15d822cc29e7fccd677}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!lower@{lower}}
\index{lower@{lower}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{lower}{lower}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+lower}



Definition at line 236 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a834b2cdfb978f230b5131e63cf1e7492}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a834b2cdfb978f230b5131e63cf1e7492}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!max\+\_\+ngram\+\_\+size@{max\+\_\+ngram\+\_\+size}}
\index{max\+\_\+ngram\+\_\+size@{max\+\_\+ngram\+\_\+size}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{max\+\_\+ngram\+\_\+size}{max\_ngram\_size}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+max\+\_\+ngram\+\_\+size}



Definition at line 232 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abeece13fbdc77b7479d4fb5d02858816}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abeece13fbdc77b7479d4fb5d02858816}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!maxtokens@{maxtokens}}
\index{maxtokens@{maxtokens}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{maxtokens}{maxtokens}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+maxtokens}



Definition at line 237 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a50f58c22b998eb75c24393cbccc759a4}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a50f58c22b998eb75c24393cbccc759a4}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!minfreq@{minfreq}}
\index{minfreq@{minfreq}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{minfreq}{minfreq}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+minfreq}



Definition at line 227 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8f4fbeb1e3a220c70e2828e4ce9c3f51}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8f4fbeb1e3a220c70e2828e4ce9c3f51}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!N\+LP@{N\+LP}}
\index{N\+LP@{N\+LP}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{N\+LP}{NLP}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+N\+LP}



Definition at line 319 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a9db44f9566d7f7678c5528e7c44d76a8}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a9db44f9566d7f7678c5528e7c44d76a8}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!null\+\_\+token@{null\+\_\+token}}
\index{null\+\_\+token@{null\+\_\+token}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{null\+\_\+token}{null\_token}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+null\+\_\+token}



Definition at line 228 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6c0d7c9c31b38e99b747be88395d689f}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6c0d7c9c31b38e99b747be88395d689f}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!opt@{opt}}
\index{opt@{opt}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+opt}



Definition at line 226 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a98faac965437d58fd2bf59f9d1438272}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a98faac965437d58fd2bf59f9d1438272}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!save\+\_\+path@{save\+\_\+path}}
\index{save\+\_\+path@{save\+\_\+path}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{save\+\_\+path}{save\_path}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+save\+\_\+path}



Definition at line 357 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad883df8ef1d397ea93dd9d018822720e}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad883df8ef1d397ea93dd9d018822720e}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!sent\+\_\+tok@{sent\+\_\+tok}}
\index{sent\+\_\+tok@{sent\+\_\+tok}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{sent\+\_\+tok}{sent\_tok}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+sent\+\_\+tok}



Definition at line 303 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5ef1b542b4efa5228e957c1e167195bd}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5ef1b542b4efa5228e957c1e167195bd}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!start\+\_\+token@{start\+\_\+token}}
\index{start\+\_\+token@{start\+\_\+token}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{start\+\_\+token}{start\_token}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+start\+\_\+token}



Definition at line 231 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a771c6e70dd433cdc076fd1261f2f3845}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a771c6e70dd433cdc076fd1261f2f3845}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!textfields@{textfields}}
\index{textfields@{textfields}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{textfields}{textfields}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+textfields}



Definition at line 238 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5955a6e5b031b8540694b847a9889bcd}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5955a6e5b031b8540694b847a9889bcd}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!tok2ind@{tok2ind}}
\index{tok2ind@{tok2ind}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{tok2ind}{tok2ind}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+tok2ind}



Definition at line 251 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a77e32c39f829ba158fd8b4ba834f4db3}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a77e32c39f829ba158fd8b4ba834f4db3}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!tokenizer@{tokenizer}}
\index{tokenizer@{tokenizer}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{tokenizer}{tokenizer}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+tokenizer}



Definition at line 235 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0d3436a2a958f18177df71f59f48e72e}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0d3436a2a958f18177df71f59f48e72e}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!tokenizer\+\_\+fun@{tokenizer\+\_\+fun}}
\index{tokenizer\+\_\+fun@{tokenizer\+\_\+fun}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{tokenizer\+\_\+fun}{tokenizer\_fun}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+tokenizer\+\_\+fun}



Definition at line 243 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae741c47302ea1add9cc040d68032c38a}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae741c47302ea1add9cc040d68032c38a}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!unk\+\_\+token@{unk\+\_\+token}}
\index{unk\+\_\+token@{unk\+\_\+token}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{unk\+\_\+token}{unk\_token}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+unk\+\_\+token}



Definition at line 230 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a025ffc815b72c6d2d34c12249956d4f1}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a025ffc815b72c6d2d34c12249956d4f1}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!word\+\_\+tok@{word\+\_\+tok}}
\index{word\+\_\+tok@{word\+\_\+tok}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{word\+\_\+tok}{word\_tok}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+word\+\_\+tok}



Definition at line 307 of file dict.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/core/\hyperlink{dict_8py}{dict.\+py}\end{DoxyCompactItemize}
