\hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent}{}\section{parlai.\+core.\+dict.\+Dictionary\+Agent Class Reference}
\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent}\index{parlai.\+core.\+dict.\+Dictionary\+Agent@{parlai.\+core.\+dict.\+Dictionary\+Agent}}


Inheritance diagram for parlai.\+core.\+dict.\+Dictionary\+Agent\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/df4/classparlai_1_1core_1_1dict_1_1DictionaryAgent__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+core.\+dict.\+Dictionary\+Agent\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=208pt]{d1/df9/classparlai_1_1core_1_1dict_1_1DictionaryAgent__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a178d2fa022c5858a23c785f615f831b1}{\+\_\+\+\_\+init\+\_\+\+\_\+}
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aec44508e4b501214618e24d86a4a51df}{add\+\_\+token} (self, word)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a29f4181dcdd5f53103bc342bf5f3c74a}{\+\_\+\+\_\+contains\+\_\+\+\_\+} (self, key)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a82a64989f1750412b6ffd9a4270953b3}{\+\_\+\+\_\+getitem\+\_\+\+\_\+} (self, key)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1c686bb8b03cf09dbd43943d268c2410}{\+\_\+\+\_\+len\+\_\+\+\_\+} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a43dfd6220ded966731b62bca37333dec}{\+\_\+\+\_\+setitem\+\_\+\+\_\+} (self, key, value)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad5abcf174648d88f2383cba7a361dd29}{keys} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84faa359351d8b3edfb333e3b5f5ed71}{copy\+\_\+dict} (self, dictionary)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3c3ef6181e0cea58b2650af763db1d17}{max\+\_\+freq} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a72cfec62b2d5117326f514edfe848a1e}{freqs} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8e818ad5e11ecb08de6c4b858b2e68f1}{spacy\+\_\+tokenize} (self, text, kwargs)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6532e92a69be5a68d04963597cd4ba29}{spacy\+\_\+span\+\_\+tokenize} (self, text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a73fe72e257ace6e8debf2c41995f8390}{nltk\+\_\+tokenize} (self, text, building=False)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a57685af2fcd0a684b7102c55afe0c8ad}{gpt2\+\_\+tokenize} (self, text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8fede3cf83af6a47c5dd4bb356de3350}{span\+\_\+tokenize} (self, text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aca7e5edfd6502701277cb83b75ff4e96}{tokenize} (self, text, building=False)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a520e4bc630cd60f075ad21632ef677a1}{bpe\+\_\+tokenize} (self, text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_acb28700c8c2725c05a8f3e28f11f8714}{add\+\_\+to\+\_\+dict} (self, tokens)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae828063449b45112d82a97921d35c247}{remove\+\_\+tail} (self, min\+\_\+freq)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1a800c1aecdb97986c59fd26f1b55626}{resize\+\_\+to\+\_\+max} (self, \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abeece13fbdc77b7479d4fb5d02858816}{maxtokens})
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aa4229d1ba17932f588e15067afd9bf42}{load} (self, filename)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0c6a8d8b67fe978549b328e7b7b07450}{save} (self, filename=None, append=False, \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84cb4fabf5d0e92e3f80ac16bdfd0ccc}{sort}=True)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84cb4fabf5d0e92e3f80ac16bdfd0ccc}{sort} (self, trim=True)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad34c4135329f6768d22d519c3c483d68}{parse} (self, txt\+\_\+or\+\_\+vec, vec\+\_\+type=list)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abc3baf742422fc7cdaece698224709d4}{txt2vec} (self, text, vec\+\_\+type=list)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2eeb50b2cd6cf3a8ca817b729ec7486}{vec2txt} (self, vector, delimiter=\textquotesingle{} \textquotesingle{})
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af34b92857b41748aafdecee34ebf9345}{act} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3d8996e367685451f7de85e8284243d7}{share} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aea9aca40dd1bb1976f4042565b172d88}{shutdown} (self)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a4b822841903bedb2b0f866e7bd17f3fa}{\+\_\+\+\_\+str\+\_\+\+\_\+} (self)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad09f8ecf2b258ecaebce69d9cef9ff3c}{add\+\_\+cmdline\+\_\+args} (argparser)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a78edf54954bf0514e1798ce694a758fe}{re\+\_\+tokenize} (text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a826ba5c6ff36c8ddf5d7723c50e5616d}{split\+\_\+tokenize} (text)
\item 
def \hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a437d3aacc7b55dac587643b271ba5f38}{space\+\_\+tokenize} (text)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6c0d7c9c31b38e99b747be88395d689f}{opt}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a50f58c22b998eb75c24393cbccc759a4}{minfreq}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a9db44f9566d7f7678c5528e7c44d76a8}{null\+\_\+token}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a793811f6f290bfcb714fa865745cdcb4}{end\+\_\+token}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae741c47302ea1add9cc040d68032c38a}{unk\+\_\+token}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5ef1b542b4efa5228e957c1e167195bd}{start\+\_\+token}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a834b2cdfb978f230b5131e63cf1e7492}{max\+\_\+ngram\+\_\+size}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a77e32c39f829ba158fd8b4ba834f4db3}{tokenizer}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0dc4620f2829a15d822cc29e7fccd677}{lower}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abeece13fbdc77b7479d4fb5d02858816}{maxtokens}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a771c6e70dd433cdc076fd1261f2f3845}{textfields}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0d3436a2a958f18177df71f59f48e72e}{tokenizer\+\_\+fun}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af3e428f4a5d8ef3a2fc02b01a6f659f2}{freq}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5955a6e5b031b8540694b847a9889bcd}{tok2ind}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af425a3810b9c85ac73d9b77a9ee100e6}{ind2tok}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad883df8ef1d397ea93dd9d018822720e}{sent\+\_\+tok}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a025ffc815b72c6d2d34c12249956d4f1}{word\+\_\+tok}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8f4fbeb1e3a220c70e2828e4ce9c3f51}{N\+LP}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2bfd8d00b4733c085a639521e727ceb}{bpehelper}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ac0fbaa96f4b3d1cef6628da8320d4bc2}{gpt2\+\_\+bpe}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a98faac965437d58fd2bf59f9d1438272}{save\+\_\+path}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3917720c8b31e5b99698beca63256511}{built}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abaf912ab6b433d48cfc156218276f926}{default\+\_\+lang}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3ba85d9c9f522fd7d14790ab7e228225}{default\+\_\+maxngram}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a798ee55bfd917cbf5d2ac766123f16ca}{default\+\_\+minfreq}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aeddaf81e54e344ddfd8ad1b59a786a7c}{default\+\_\+maxtokens}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a056841f6e5531fac1d6e06125e8578c2}{default\+\_\+null}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ab83c2273d1eb86c7bce9c5c3c1866bcb}{default\+\_\+start}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a93744f41c5a1bbdb57c2c0bec9e08496}{default\+\_\+end}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ac60a2c20d7693d14e175032d5185e784}{default\+\_\+unk}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a554fce05a3a164879cc64a597ce8c5bb}{default\+\_\+tok}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a59b9ea9bced9ca0a4272e9b5fa93d23b}{default\+\_\+lower}
\item 
\hyperlink{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aa5b59f6cb7615cf32c6372f365710ce7}{default\+\_\+textfields}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Builds and/or loads a dictionary.

The dictionary provides access to the frequency of each token, functions to
translate sentences from tokens to their vectors (list of ints, each int is the
index of a token in the dictionary) and back from vectors to tokenized text.
\end{DoxyVerb}
 

Definition at line 97 of file dict.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a178d2fa022c5858a23c785f615f831b1}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a178d2fa022c5858a23c785f615f831b1}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 223 of file dict.\+py.


\begin{DoxyCode}
223     \textcolor{keyword}{def }\_\_init\_\_(self, opt: Opt, shared=\textcolor{keywordtype}{None}):
224         \textcolor{stringliteral}{"""}
225 \textcolor{stringliteral}{        Initialize DictionaryAgent.}
226 \textcolor{stringliteral}{        """}
227         self.opt = copy.deepcopy(opt)
228         self.minfreq = opt.get(\textcolor{stringliteral}{'dict\_minfreq'}, DictionaryAgent.default\_minfreq)
229         self.null\_token = opt.get(\textcolor{stringliteral}{'dict\_nulltoken'}, DictionaryAgent.default\_null)
230         self.end\_token = opt.get(\textcolor{stringliteral}{'dict\_endtoken'}, DictionaryAgent.default\_end)
231         self.unk\_token = opt.get(\textcolor{stringliteral}{'dict\_unktoken'}, DictionaryAgent.default\_unk)
232         self.start\_token = opt.get(\textcolor{stringliteral}{'dict\_starttoken'}, DictionaryAgent.default\_start)
233         self.max\_ngram\_size = opt.get(
234             \textcolor{stringliteral}{'dict\_max\_ngram\_size'}, DictionaryAgent.default\_maxngram
235         )
236         self.tokenizer = opt.get(\textcolor{stringliteral}{'dict\_tokenizer'}, DictionaryAgent.default\_tok)
237         self.lower = opt.get(\textcolor{stringliteral}{'dict\_lower'}, DictionaryAgent.default\_lower)
238         self.maxtokens = opt.get(\textcolor{stringliteral}{'dict\_maxtokens'}, DictionaryAgent.default\_maxtokens)
239         self.textfields = opt.get(
240             \textcolor{stringliteral}{'dict\_textfields'}, DictionaryAgent.default\_textfields
241         ).split(\textcolor{stringliteral}{","})
242 
243         \textcolor{keywordflow}{try}:
244             self.tokenizer\_fun = getattr(self, self.tokenizer + \textcolor{stringliteral}{'\_tokenize'})
245         \textcolor{keywordflow}{except} AttributeError:
246             \textcolor{keywordflow}{raise} AttributeError(
247                 \textcolor{stringliteral}{'tokenizer type \{\} not yet supported'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(self.tokenizer)
248             )
249 
250         \textcolor{keywordflow}{if} shared:
251             self.freq = shared.get(\textcolor{stringliteral}{'freq'}, \{\})
252             self.tok2ind = shared.get(\textcolor{stringliteral}{'tok2ind'}, \{\})
253             self.ind2tok = shared.get(\textcolor{stringliteral}{'ind2tok'}, \{\})
254         \textcolor{keywordflow}{else}:
255             self.freq = defaultdict(int)
256             self.tok2ind = \{\}
257             self.ind2tok = \{\}
258 
259             \textcolor{keywordflow}{if} self.null\_token:
260                 self.add\_token(self.null\_token)
261 
262             \textcolor{keywordflow}{if} self.start\_token:
263                 \textcolor{comment}{# set special start of sentence word token}
264                 self.add\_token(self.start\_token)
265 
266             \textcolor{keywordflow}{if} self.end\_token:
267                 \textcolor{comment}{# set special end of sentence word token}
268                 self.add\_token(self.end\_token)
269 
270             \textcolor{keywordflow}{if} self.unk\_token:
271                 \textcolor{comment}{# set special unknown word token}
272                 self.add\_token(self.unk\_token)
273 
274             loaded = \textcolor{keyword}{False}
275             \textcolor{comment}{# If data built via pytorch data teacher, we need to load prebuilt dict}
276             \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'pytorch\_teacher\_task'}):
277                 \textcolor{keyword}{from} \hyperlink{namespaceparlai_1_1scripts_1_1build__pytorch__data}{parlai.scripts.build\_pytorch\_data} \textcolor{keyword}{import} 
      get\_pyt\_dict\_file
278 
279                 opt[\textcolor{stringliteral}{'dict\_file'}] = \hyperlink{namespaceparlai_1_1scripts_1_1build__pytorch__data_a6ec85a5842150af78f5178d75075b0cc}{get\_pyt\_dict\_file}(opt)
280             \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'dict\_file'}):
281                 opt[\textcolor{stringliteral}{'dict\_file'}] = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_a5fbd3301b67f00d6d146fb01c7cd7626}{modelzoo\_path}(opt.get(\textcolor{stringliteral}{'datapath'}), opt[\textcolor{stringliteral}{'dict\_file'}])
282                 \textcolor{keywordflow}{if} os.path.isfile(opt[\textcolor{stringliteral}{'dict\_file'}]):
283                     \textcolor{comment}{# load pre-existing dictionary}
284                     self.load(opt[\textcolor{stringliteral}{'dict\_file'}])
285                     loaded = \textcolor{keyword}{True}
286 
287             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} loaded \textcolor{keywordflow}{and} opt.get(\textcolor{stringliteral}{'dict\_initpath'}):
288                 \textcolor{comment}{# load seed dictionary}
289                 opt[\textcolor{stringliteral}{'dict\_initpath'}] = \hyperlink{namespaceparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1utils__v0_a5fbd3301b67f00d6d146fb01c7cd7626}{modelzoo\_path}(
290                     opt.get(\textcolor{stringliteral}{'datapath'}), opt[\textcolor{stringliteral}{'dict\_initpath'}]
291                 )
292                 \textcolor{comment}{# don't check isfile first, should fail if file not found}
293                 self.load(opt[\textcolor{stringliteral}{'dict\_initpath'}])
294 
295         \textcolor{comment}{# initialize tokenizers}
296         \textcolor{keywordflow}{if} self.tokenizer == \textcolor{stringliteral}{'nltk'}:
297             \textcolor{keywordflow}{try}:
298                 \textcolor{keyword}{import} nltk
299             \textcolor{keywordflow}{except} ImportError:
300                 \textcolor{keywordflow}{raise} ImportError(\textcolor{stringliteral}{'Please install nltk (pip install nltk)'})
301             \textcolor{comment}{# nltk-specific setup}
302             st\_path = \textcolor{stringliteral}{'tokenizers/punkt/\{0\}.pickle'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(opt[\textcolor{stringliteral}{'dict\_language'}])
303             \textcolor{keywordflow}{try}:
304                 self.sent\_tok = nltk.data.load(st\_path)
305             \textcolor{keywordflow}{except} LookupError:
306                 nltk.download(\textcolor{stringliteral}{'punkt'})
307                 self.sent\_tok = nltk.data.load(st\_path)
308             self.word\_tok = nltk.tokenize.treebank.TreebankWordTokenizer()
309         \textcolor{keywordflow}{elif} self.tokenizer == \textcolor{stringliteral}{'spacy'}:
310             \textcolor{keywordflow}{try}:
311                 \textcolor{keyword}{import} spacy
312             \textcolor{keywordflow}{except} ImportError:
313                 \textcolor{keywordflow}{raise} ImportError(
314                     \textcolor{stringliteral}{'Please install spacy and spacy "en" model: '}
315                     \textcolor{stringliteral}{'`pip install -U spacy && '}
316                     \textcolor{stringliteral}{'python -m spacy download en` '}
317                     \textcolor{stringliteral}{'or find alternative installation options '}
318                     \textcolor{stringliteral}{'at spacy.io'}
319                 )
320             self.NLP = spacy.load(\textcolor{stringliteral}{'en'})
321         \textcolor{keywordflow}{elif} self.tokenizer == \textcolor{stringliteral}{'bpe'}:
322             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} opt.get(\textcolor{stringliteral}{'dict\_file'}):
323                 \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'--dict-file is mandatory.'})
324             self.bpehelper = \_BPEHelper(f\textcolor{stringliteral}{"\{opt['dict\_file']\}.codecs"})
325         \textcolor{keywordflow}{elif} self.tokenizer == \textcolor{stringliteral}{'gpt2'}:
326             \textcolor{keywordflow}{if} self.lower:
327                 \textcolor{keywordflow}{raise} ValueError(
328                     \textcolor{stringliteral}{'Only use --dict-lower false with --dict-tokenizer gpt2'}
329                 )
330             \textcolor{keywordflow}{if} self.maxtokens > 0 \textcolor{keywordflow}{or} self.minfreq > 0:
331                 \textcolor{keywordflow}{raise} ValueError(
332                     \textcolor{stringliteral}{'You should not filter vocabulary with using --dict-tokenizer gpt2'}
333                     \textcolor{stringliteral}{' (no --dict-minfreq or --dict-maxtokens).'}
334                 )
335 
336             self.gpt2\_bpe = Gpt2BpeHelper(opt)
337             \textcolor{keywordflow}{for} each\_token \textcolor{keywordflow}{in} self.gpt2\_bpe.list\_tokens():
338                 self.add\_token(each\_token)
339                 self.freq[each\_token] = 1
340         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} shared:
341             \textcolor{keywordflow}{if} self.null\_token:
342                 \textcolor{comment}{# fix count for null token to one billion and three}
343                 self.freq[self.null\_token] = 1000000003
344 
345             \textcolor{keywordflow}{if} self.start\_token:
346                 \textcolor{comment}{# fix count for start of sentence token to one billion and two}
347                 self.freq[self.start\_token] = 1000000002
348 
349             \textcolor{keywordflow}{if} self.end\_token:
350                 \textcolor{comment}{# fix count for end of sentence token to one billion and one}
351                 self.freq[self.end\_token] = 1000000001
352 
353             \textcolor{keywordflow}{if} self.unk\_token:
354                 \textcolor{comment}{# fix count for unknown token to one billion}
355                 self.freq[self.unk\_token] = 1000000000
356 
357             \textcolor{keywordflow}{if} opt.get(\textcolor{stringliteral}{'dict\_file'}):
358                 self.save\_path = opt[\textcolor{stringliteral}{'dict\_file'}]
359 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a29f4181dcdd5f53103bc342bf5f3c74a}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a29f4181dcdd5f53103bc342bf5f3c74a}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+contains\+\_\+\+\_\+@{\+\_\+\+\_\+contains\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+contains\+\_\+\+\_\+@{\+\_\+\+\_\+contains\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+contains\+\_\+\+\_\+()}{\_\_contains\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+contains\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{key }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return if the dictionary contains the key.

If key is an int, returns whether the key is in the indices. If key is a str,
return if the token is in the dict of tokens.
\end{DoxyVerb}
 

Definition at line 369 of file dict.\+py.


\begin{DoxyCode}
369     \textcolor{keyword}{def }\_\_contains\_\_(self, key):
370         \textcolor{stringliteral}{"""}
371 \textcolor{stringliteral}{        Return if the dictionary contains the key.}
372 \textcolor{stringliteral}{}
373 \textcolor{stringliteral}{        If key is an int, returns whether the key is in the indices. If key is a str,}
374 \textcolor{stringliteral}{        return if the token is in the dict of tokens.}
375 \textcolor{stringliteral}{        """}
376         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(key) == int:
377             \textcolor{keywordflow}{return} key \textcolor{keywordflow}{in} self.ind2tok
378         \textcolor{keywordflow}{elif} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(key) == str:
379             \textcolor{keywordflow}{return} key \textcolor{keywordflow}{in} self.tok2ind
380 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a82a64989f1750412b6ffd9a4270953b3}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a82a64989f1750412b6ffd9a4270953b3}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+getitem\+\_\+\+\_\+@{\+\_\+\+\_\+getitem\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+getitem\+\_\+\+\_\+@{\+\_\+\+\_\+getitem\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+getitem\+\_\+\+\_\+()}{\_\_getitem\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+getitem\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{key }\end{DoxyParamCaption})}

\begin{DoxyVerb}Lookup the word or ID.

If key is an int, returns the corresponding token. If it does not exist, return
the unknown token. If key is a str, return the token's index. If the token is
not in the dictionary, return the index of the unknown token. If there is no
unknown token, return ``None``.
\end{DoxyVerb}
 

Definition at line 381 of file dict.\+py.


\begin{DoxyCode}
381     \textcolor{keyword}{def }\_\_getitem\_\_(self, key):
382         \textcolor{stringliteral}{"""}
383 \textcolor{stringliteral}{        Lookup the word or ID.}
384 \textcolor{stringliteral}{}
385 \textcolor{stringliteral}{        If key is an int, returns the corresponding token. If it does not exist, return}
386 \textcolor{stringliteral}{        the unknown token. If key is a str, return the token's index. If the token is}
387 \textcolor{stringliteral}{        not in the dictionary, return the index of the unknown token. If there is no}
388 \textcolor{stringliteral}{        unknown token, return ``None``.}
389 \textcolor{stringliteral}{        """}
390         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(key) == int:
391             \textcolor{comment}{# return token from index, or unk\_token}
392             \textcolor{keywordflow}{return} self.ind2tok.get(key, self.unk\_token)
393         \textcolor{keywordflow}{elif} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(key) == str:
394             \textcolor{comment}{# return index from token, or unk\_token's index, or None}
395             \textcolor{keywordflow}{return} self.tok2ind.get(key, self.tok2ind.get(self.unk\_token, \textcolor{keywordtype}{None}))
396 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1c686bb8b03cf09dbd43943d268c2410}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1c686bb8b03cf09dbd43943d268c2410}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+len\+\_\+\+\_\+@{\+\_\+\+\_\+len\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+len\+\_\+\+\_\+@{\+\_\+\+\_\+len\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+len\+\_\+\+\_\+()}{\_\_len\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+len\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 397 of file dict.\+py.


\begin{DoxyCode}
397     \textcolor{keyword}{def }\_\_len\_\_(self):
398         \textcolor{keywordflow}{return} len(self.tok2ind)
399 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a43dfd6220ded966731b62bca37333dec}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a43dfd6220ded966731b62bca37333dec}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+setitem\+\_\+\+\_\+@{\+\_\+\+\_\+setitem\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+setitem\+\_\+\+\_\+@{\+\_\+\+\_\+setitem\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+setitem\+\_\+\+\_\+()}{\_\_setitem\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+setitem\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{key,  }\item[{}]{value }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set the frequency for a word to a value.

If the key is not in the dictionary, add it to the dictionary and set its
frequency to value.
\end{DoxyVerb}
 

Definition at line 400 of file dict.\+py.


\begin{DoxyCode}
400     \textcolor{keyword}{def }\_\_setitem\_\_(self, key, value):
401         \textcolor{stringliteral}{"""}
402 \textcolor{stringliteral}{        Set the frequency for a word to a value.}
403 \textcolor{stringliteral}{}
404 \textcolor{stringliteral}{        If the key is not in the dictionary, add it to the dictionary and set its}
405 \textcolor{stringliteral}{        frequency to value.}
406 \textcolor{stringliteral}{        """}
407         key = \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(key)
408         \textcolor{keywordflow}{if} self.lower:
409             key = key.lower()
410         self.freq[key] = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(value)
411         self.add\_token(key)
412 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a4b822841903bedb2b0f866e7bd17f3fa}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a4b822841903bedb2b0f866e7bd17f3fa}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!\+\_\+\+\_\+str\+\_\+\+\_\+@{\+\_\+\+\_\+str\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+str\+\_\+\+\_\+@{\+\_\+\+\_\+str\+\_\+\+\_\+}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+str\+\_\+\+\_\+()}{\_\_str\_\_()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+\_\+\+\_\+str\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return string representation of frequencies in dictionary.
\end{DoxyVerb}
 

Definition at line 809 of file dict.\+py.


\begin{DoxyCode}
809     \textcolor{keyword}{def }\_\_str\_\_(self):
810         \textcolor{stringliteral}{"""}
811 \textcolor{stringliteral}{        Return string representation of frequencies in dictionary.}
812 \textcolor{stringliteral}{        """}
813         \textcolor{keywordflow}{return} \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(self.freq)
814 
815 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af34b92857b41748aafdecee34ebf9345}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af34b92857b41748aafdecee34ebf9345}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!act@{act}}
\index{act@{act}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{act()}{act()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+act (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Add words in the last observation to the dictionary.

This checks any fields in the message present in the --dict-textfields argument
(e.g. "text,labels").
\end{DoxyVerb}
 

Definition at line 772 of file dict.\+py.


\begin{DoxyCode}
772     \textcolor{keyword}{def }act(self):
773         \textcolor{stringliteral}{"""}
774 \textcolor{stringliteral}{        Add words in the last observation to the dictionary.}
775 \textcolor{stringliteral}{}
776 \textcolor{stringliteral}{        This checks any fields in the message present in the --dict-textfields argument}
777 \textcolor{stringliteral}{        (e.g. "text,labels").}
778 \textcolor{stringliteral}{        """}
779         \textcolor{keywordflow}{for} textfield \textcolor{keywordflow}{in} self.textfields:
780             source = self.observation.get(textfield)
781             \textcolor{keywordflow}{if} source \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
782                 \textcolor{keywordflow}{continue}
783             \textcolor{comment}{# fields may be singleton strings or lists of strings.}
784             \textcolor{comment}{# wrap the singleton strings in a list to iterate over them}
785             \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(source) \textcolor{keywordflow}{is} str:
786                 source = [source]
787             \textcolor{keywordflow}{for} text \textcolor{keywordflow}{in} source:
788                 \textcolor{keywordflow}{if} text:
789                     self.add\_to\_dict(self.tokenize(text))
790         \textcolor{keywordflow}{return} \{\textcolor{stringliteral}{'id'}: \textcolor{stringliteral}{'Dictionary'}\}
791 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad09f8ecf2b258ecaebce69d9cef9ff3c}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad09f8ecf2b258ecaebce69d9cef9ff3c}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}}
\index{add\+\_\+cmdline\+\_\+args@{add\+\_\+cmdline\+\_\+args}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{add\+\_\+cmdline\+\_\+args()}{add\_cmdline\_args()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+add\+\_\+cmdline\+\_\+args (\begin{DoxyParamCaption}\item[{}]{argparser }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Add commandline arguments related to the dictionary.
\end{DoxyVerb}
 

Definition at line 119 of file dict.\+py.


\begin{DoxyCode}
119     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1drqa_1_1config_a62fdd5554f1da6be0cba185271058320}{add\_cmdline\_args}(argparser):
120         \textcolor{stringliteral}{"""}
121 \textcolor{stringliteral}{        Add commandline arguments related to the dictionary.}
122 \textcolor{stringliteral}{        """}
123         dictionary = argparser.add\_argument\_group(\textcolor{stringliteral}{'Dictionary Arguments'})
124         dictionary.add\_argument(
125             \textcolor{stringliteral}{'-df'},
126             \textcolor{stringliteral}{'--dict-file'},
127             help=\textcolor{stringliteral}{'path to dictionary file. defaults to [model\_file].dict if '}
128             \textcolor{stringliteral}{'not set and model\_file is set.'},
129             hidden=\textcolor{keyword}{True},
130         )
131         dictionary.add\_argument(
132             \textcolor{stringliteral}{'--dict-initpath'},
133             hidden=\textcolor{keyword}{True},
134             help=\textcolor{stringliteral}{'path to a saved dictionary to load tokens / counts from to '}
135             \textcolor{stringliteral}{'seed the dictionary with initial tokens and/or frequencies'},
136         )
137         dictionary.add\_argument(
138             \textcolor{stringliteral}{'--dict-language'},
139             default=DictionaryAgent.default\_lang,
140             hidden=\textcolor{keyword}{True},
141             help=\textcolor{stringliteral}{'sets language for the punkt sentence tokenizer'},
142         )
143         dictionary.add\_argument(
144             \textcolor{stringliteral}{'--dict-max-ngram-size'},
145             type=int,
146             hidden=\textcolor{keyword}{True},
147             default=DictionaryAgent.default\_maxngram,
148             help=\textcolor{stringliteral}{'looks for ngrams of up to this size. this is ignored when '}
149             \textcolor{stringliteral}{'building the dictionary. note: this takes approximate '}
150             \textcolor{stringliteral}{'runtime of len(sentence)^max\_ngram\_size'},
151         )
152         dictionary.add\_argument(
153             \textcolor{stringliteral}{'--dict-minfreq'},
154             default=DictionaryAgent.default\_minfreq,
155             type=int,
156             help=\textcolor{stringliteral}{'minimum frequency of words to include them in sorted '}
157             \textcolor{stringliteral}{'dict or minimum frequency of bpe codecs'},
158             hidden=\textcolor{keyword}{True},
159         )
160         dictionary.add\_argument(
161             \textcolor{stringliteral}{'--dict-maxtokens'},
162             default=DictionaryAgent.default\_maxtokens,
163             type=int,
164             help=\textcolor{stringliteral}{'max number of tokens to include in dictionary or bpe codecs'},
165             hidden=\textcolor{keyword}{True},
166         )
167         dictionary.add\_argument(
168             \textcolor{stringliteral}{'--dict-nulltoken'},
169             default=DictionaryAgent.default\_null,
170             hidden=\textcolor{keyword}{True},
171             help=\textcolor{stringliteral}{'empty token, can be used for padding or just empty values'},
172         )
173         dictionary.add\_argument(
174             \textcolor{stringliteral}{'--dict-starttoken'},
175             default=DictionaryAgent.default\_start,
176             hidden=\textcolor{keyword}{True},
177             help=\textcolor{stringliteral}{'token for starting sentence generation, if needed'},
178         )
179         dictionary.add\_argument(
180             \textcolor{stringliteral}{'--dict-endtoken'},
181             default=DictionaryAgent.default\_end,
182             hidden=\textcolor{keyword}{True},
183             help=\textcolor{stringliteral}{'token for end of sentence markers, if needed'},
184         )
185         dictionary.add\_argument(
186             \textcolor{stringliteral}{'--dict-unktoken'},
187             default=DictionaryAgent.default\_unk,
188             hidden=\textcolor{keyword}{True},
189             help=\textcolor{stringliteral}{'token to return for unavailable words'},
190         )
191         dictionary.add\_argument(
192             \textcolor{stringliteral}{'-tok'},
193             \textcolor{stringliteral}{'--dict-tokenizer'},
194             default=DictionaryAgent.default\_tok,
195             help=\textcolor{stringliteral}{'Which tokenizer to use. Defaults to "split", which splits '}
196             \textcolor{stringliteral}{'on whitespace as well as recognizing basic punctuation. '}
197             \textcolor{stringliteral}{'Other options include nltk, spacy and gpt2.'},
198             hidden=\textcolor{keyword}{True},
199         )
200         dictionary.add\_argument(
201             \textcolor{stringliteral}{'--dict-lower'},
202             default=DictionaryAgent.default\_lower,
203             type=\textcolor{stringliteral}{'bool'},
204             help=\textcolor{stringliteral}{'Whether or not to lowercase all text seen.'},
205             hidden=\textcolor{keyword}{True},
206         )
207         dictionary.add\_argument(
208             \textcolor{stringliteral}{'--bpe-debug'},
209             action=\textcolor{stringliteral}{'store\_true'},
210             hidden=\textcolor{keyword}{True},
211             help=\textcolor{stringliteral}{'Leave BPE tokens untouched in output. Useful for debugging.'},
212         )
213         dictionary.add\_argument(
214             \textcolor{stringliteral}{'--dict-textfields'},
215             default=DictionaryAgent.default\_textfields,
216             hidden=\textcolor{keyword}{True},
217             help=\textcolor{stringliteral}{'Observation fields which dictionary learns vocabulary from. '}
218             \textcolor{stringliteral}{'Tasks with additional fields may add to this list to handle '}
219             \textcolor{stringliteral}{'any extra vocabulary.'},
220         )
221         \textcolor{keywordflow}{return} dictionary
222 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_acb28700c8c2725c05a8f3e28f11f8714}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_acb28700c8c2725c05a8f3e28f11f8714}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!add\+\_\+to\+\_\+dict@{add\+\_\+to\+\_\+dict}}
\index{add\+\_\+to\+\_\+dict@{add\+\_\+to\+\_\+dict}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{add\+\_\+to\+\_\+dict()}{add\_to\_dict()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+add\+\_\+to\+\_\+dict (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{tokens }\end{DoxyParamCaption})}

\begin{DoxyVerb}Build dictionary from the list of provided tokens.
\end{DoxyVerb}
 

Definition at line 568 of file dict.\+py.


\begin{DoxyCode}
568     \textcolor{keyword}{def }add\_to\_dict(self, tokens):
569         \textcolor{stringliteral}{"""}
570 \textcolor{stringliteral}{        Build dictionary from the list of provided tokens.}
571 \textcolor{stringliteral}{        """}
572         self.built = \textcolor{keyword}{False}
573         \textcolor{keywordflow}{for} token \textcolor{keywordflow}{in} tokens:
574             self.add\_token(token)
575             self.freq[token] += 1
576 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aec44508e4b501214618e24d86a4a51df}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aec44508e4b501214618e24d86a4a51df}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!add\+\_\+token@{add\+\_\+token}}
\index{add\+\_\+token@{add\+\_\+token}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{add\+\_\+token()}{add\_token()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+add\+\_\+token (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{word }\end{DoxyParamCaption})}

\begin{DoxyVerb}Add a single token to the dictionary.
\end{DoxyVerb}
 

Definition at line 360 of file dict.\+py.


\begin{DoxyCode}
360     \textcolor{keyword}{def }add\_token(self, word):
361         \textcolor{stringliteral}{"""}
362 \textcolor{stringliteral}{        Add a single token to the dictionary.}
363 \textcolor{stringliteral}{        """}
364         \textcolor{keywordflow}{if} word \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.tok2ind:
365             index = len(self.tok2ind)
366             self.tok2ind[word] = index
367             self.ind2tok[index] = word
368 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a520e4bc630cd60f075ad21632ef677a1}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a520e4bc630cd60f075ad21632ef677a1}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!bpe\+\_\+tokenize@{bpe\+\_\+tokenize}}
\index{bpe\+\_\+tokenize@{bpe\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{bpe\+\_\+tokenize()}{bpe\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+bpe\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a sequence of BPE-tokens from the text.
\end{DoxyVerb}
 

Definition at line 562 of file dict.\+py.


\begin{DoxyCode}
562     \textcolor{keyword}{def }bpe\_tokenize(self, text):
563         \textcolor{stringliteral}{"""}
564 \textcolor{stringliteral}{        Return a sequence of BPE-tokens from the text.}
565 \textcolor{stringliteral}{        """}
566         \textcolor{keywordflow}{return} self.bpehelper.\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(text)
567 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84faa359351d8b3edfb333e3b5f5ed71}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84faa359351d8b3edfb333e3b5f5ed71}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!copy\+\_\+dict@{copy\+\_\+dict}}
\index{copy\+\_\+dict@{copy\+\_\+dict}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{copy\+\_\+dict()}{copy\_dict()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+copy\+\_\+dict (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{dictionary }\end{DoxyParamCaption})}

\begin{DoxyVerb}Overwrite own state with any state in the other dictionary.

This allows loading of the contents of another dictionary while keeping the
current dictionary version.
\end{DoxyVerb}
 

Definition at line 419 of file dict.\+py.


\begin{DoxyCode}
419     \textcolor{keyword}{def }copy\_dict(self, dictionary):
420         \textcolor{stringliteral}{"""}
421 \textcolor{stringliteral}{        Overwrite own state with any state in the other dictionary.}
422 \textcolor{stringliteral}{}
423 \textcolor{stringliteral}{        This allows loading of the contents of another dictionary while keeping the}
424 \textcolor{stringliteral}{        current dictionary version.}
425 \textcolor{stringliteral}{        """}
426         \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} vars(dictionary).items():
427             setattr(self, k, v)
428 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a72cfec62b2d5117326f514edfe848a1e}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a72cfec62b2d5117326f514edfe848a1e}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!freqs@{freqs}}
\index{freqs@{freqs}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{freqs()}{freqs()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+freqs (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the frequency dictionary.
\end{DoxyVerb}
 

Definition at line 440 of file dict.\+py.


\begin{DoxyCode}
440     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a82fd1621e57caaa8ff7a9c27b0e94125}{freqs}(self):
441         \textcolor{stringliteral}{"""}
442 \textcolor{stringliteral}{        Return the frequency dictionary.}
443 \textcolor{stringliteral}{        """}
444         \textcolor{comment}{# TODO: deprecate this}
445         \textcolor{keywordflow}{return} self.freq
446 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a57685af2fcd0a684b7102c55afe0c8ad}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a57685af2fcd0a684b7102c55afe0c8ad}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!gpt2\+\_\+tokenize@{gpt2\+\_\+tokenize}}
\index{gpt2\+\_\+tokenize@{gpt2\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{gpt2\+\_\+tokenize()}{gpt2\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+gpt2\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text }\end{DoxyParamCaption})}

\begin{DoxyVerb}Tokenize using Gpt2 BPE tokenizer.
\end{DoxyVerb}
 

Definition at line 480 of file dict.\+py.


\begin{DoxyCode}
480     \textcolor{keyword}{def }gpt2\_tokenize(self, text):
481         \textcolor{stringliteral}{"""}
482 \textcolor{stringliteral}{        Tokenize using Gpt2 BPE tokenizer.}
483 \textcolor{stringliteral}{        """}
484         \textcolor{keywordflow}{return} self.gpt2\_bpe.encode(text)
485 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad5abcf174648d88f2383cba7a361dd29}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad5abcf174648d88f2383cba7a361dd29}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!keys@{keys}}
\index{keys@{keys}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{keys()}{keys()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+keys (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return all the words in the dictionary.
\end{DoxyVerb}
 

Definition at line 413 of file dict.\+py.


\begin{DoxyCode}
413     \textcolor{keyword}{def }keys(self):
414         \textcolor{stringliteral}{"""}
415 \textcolor{stringliteral}{        Return all the words in the dictionary.}
416 \textcolor{stringliteral}{        """}
417         \textcolor{keywordflow}{return} self.tok2ind.keys()
418 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aa4229d1ba17932f588e15067afd9bf42}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aa4229d1ba17932f588e15067afd9bf42}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!load@{load}}
\index{load@{load}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+load (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{filename }\end{DoxyParamCaption})}

\begin{DoxyVerb}Load pre-existing dictionary in 'token[<TAB>count]' format.

Initialize counts from other dictionary, or 0 if they aren't included.
\end{DoxyVerb}
 

Definition at line 623 of file dict.\+py.


\begin{DoxyCode}
623     \textcolor{keyword}{def }load(self, filename):
624         \textcolor{stringliteral}{"""}
625 \textcolor{stringliteral}{        Load pre-existing dictionary in 'token[<TAB>count]' format.}
626 \textcolor{stringliteral}{}
627 \textcolor{stringliteral}{        Initialize counts from other dictionary, or 0 if they aren't included.}
628 \textcolor{stringliteral}{        """}
629         print(\textcolor{stringliteral}{'Dictionary: loading dictionary from \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(filename))
630 
631         lower\_special = self.null\_token == self.null\_token.lower()
632         SPECIAL\_TOKENS = \{\textcolor{stringliteral}{'\_\_UNK\_\_'}, \textcolor{stringliteral}{'\_\_NULL\_\_'}, \textcolor{stringliteral}{'\_\_END\_\_'}, \textcolor{stringliteral}{'\_\_START\_\_'}\}
633         with codecs.open(filename, \textcolor{stringliteral}{'r', encoding='}utf-8', errors='ignore') as read:
634             \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} read:
635                 split = line.strip().split(\textcolor{stringliteral}{'\(\backslash\)t'})
636                 token = \hyperlink{namespaceparlai_1_1core_1_1dict_a4d8952ff127b540967c707a58e8ebb48}{unescape}(split[0])
637                 \textcolor{keywordflow}{if} lower\_special \textcolor{keywordflow}{and} token \textcolor{keywordflow}{in} SPECIAL\_TOKENS:
638                     token = token.lower()
639                 cnt = \hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(split[1]) \textcolor{keywordflow}{if} len(split) > 1 \textcolor{keywordflow}{else} 0
640                 self.freq[token] = cnt
641                 self.add\_token(token)
642         print(\textcolor{stringliteral}{'[ num words =  %d ]'} % len(self))
643 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3c3ef6181e0cea58b2650af763db1d17}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3c3ef6181e0cea58b2650af763db1d17}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!max\+\_\+freq@{max\+\_\+freq}}
\index{max\+\_\+freq@{max\+\_\+freq}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{max\+\_\+freq()}{max\_freq()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+max\+\_\+freq (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the largest frequency of any nonspecial token.
\end{DoxyVerb}
 

Definition at line 429 of file dict.\+py.


\begin{DoxyCode}
429     \textcolor{keyword}{def }max\_freq(self):
430         \textcolor{stringliteral}{"""}
431 \textcolor{stringliteral}{        Return the largest frequency of any nonspecial token.}
432 \textcolor{stringliteral}{        """}
433         \textcolor{keywordflow}{return} max(
434             self.freq[k]
435             \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} self.freq.keys()
436             \textcolor{keywordflow}{if} k
437             \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} [self.null\_token, self.end\_token, self.start\_token, self.unk\_token]
438         )
439 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a73fe72e257ace6e8debf2c41995f8390}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a73fe72e257ace6e8debf2c41995f8390}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!nltk\+\_\+tokenize@{nltk\+\_\+tokenize}}
\index{nltk\+\_\+tokenize@{nltk\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{nltk\+\_\+tokenize()}{nltk\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+nltk\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text,  }\item[{}]{building = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Tokenize using NLTK PunktTokenizer.

Uses nltk-trained PunktTokenizer for sentence tokenization and Treebank Word
Tokenizer for tokenizing words within sentences.
\end{DoxyVerb}
 

Definition at line 467 of file dict.\+py.


\begin{DoxyCode}
467     \textcolor{keyword}{def }nltk\_tokenize(self, text, building=False):
468         \textcolor{stringliteral}{"""}
469 \textcolor{stringliteral}{        Tokenize using NLTK PunktTokenizer.}
470 \textcolor{stringliteral}{}
471 \textcolor{stringliteral}{        Uses nltk-trained PunktTokenizer for sentence tokenization and Treebank Word}
472 \textcolor{stringliteral}{        Tokenizer for tokenizing words within sentences.}
473 \textcolor{stringliteral}{        """}
474         \textcolor{keywordflow}{return} (
475             token
476             \textcolor{keywordflow}{for} sent \textcolor{keywordflow}{in} self.sent\_tok.\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(text)
477             \textcolor{keywordflow}{for} token \textcolor{keywordflow}{in} self.word\_tok.\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(sent)
478         )
479 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad34c4135329f6768d22d519c3c483d68}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad34c4135329f6768d22d519c3c483d68}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!parse@{parse}}
\index{parse@{parse}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{parse()}{parse()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+parse (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{txt\+\_\+or\+\_\+vec,  }\item[{}]{vec\+\_\+type = {\ttfamily list} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Parse either text or a vector of indices.

Calls `~txt2vec` if `txt_or_vec is a string, or `~vec2txt` otherwise.

:param vec_type:
    type of the returned vector if the input is a string.
\end{DoxyVerb}
 

Definition at line 719 of file dict.\+py.


\begin{DoxyCode}
719     \textcolor{keyword}{def }parse(self, txt\_or\_vec, vec\_type=list):
720         \textcolor{stringliteral}{"""}
721 \textcolor{stringliteral}{        Parse either text or a vector of indices.}
722 \textcolor{stringliteral}{}
723 \textcolor{stringliteral}{        Calls `~txt2vec` if `txt\_or\_vec is a string, or `~vec2txt` otherwise.}
724 \textcolor{stringliteral}{}
725 \textcolor{stringliteral}{        :param vec\_type:}
726 \textcolor{stringliteral}{            type of the returned vector if the input is a string.}
727 \textcolor{stringliteral}{        """}
728         \textcolor{comment}{# TODO: try to deprecate this, preferring straight txt2vec}
729         \textcolor{keywordflow}{if} \hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_ad5dfae268e23f506da084a9efb72f619}{type}(txt\_or\_vec) == str:
730             \textcolor{keywordflow}{return} self.txt2vec(txt\_or\_vec, vec\_type)
731         \textcolor{keywordflow}{else}:
732             \textcolor{keywordflow}{return} self.vec2txt(txt\_or\_vec)
733 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a78edf54954bf0514e1798ce694a758fe}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a78edf54954bf0514e1798ce694a758fe}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!re\+\_\+tokenize@{re\+\_\+tokenize}}
\index{re\+\_\+tokenize@{re\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{re\+\_\+tokenize()}{re\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+re\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Tokenize using a liberal regular expression.

Find boundaries between word characters, newlines, and non-word
non-whitespace tokens ``(r'[\\w\\n]+ | [^\\w\\s] | \\n')``.

This splits along whitespace and punctuation and keeps the newline as
a token in the returned list.
\end{DoxyVerb}
 

Definition at line 487 of file dict.\+py.


\begin{DoxyCode}
487     \textcolor{keyword}{def }re\_tokenize(text):
488         \textcolor{stringliteral}{r"""}
489 \textcolor{stringliteral}{        Tokenize using a liberal regular expression.}
490 \textcolor{stringliteral}{}
491 \textcolor{stringliteral}{        Find boundaries between word characters, newlines, and non-word}
492 \textcolor{stringliteral}{        non-whitespace tokens ``(r'[\(\backslash\)\(\backslash\)w\(\backslash\)\(\backslash\)n]+ | [^\(\backslash\)\(\backslash\)w\(\backslash\)\(\backslash\)s] | \(\backslash\)\(\backslash\)n')``.}
493 \textcolor{stringliteral}{}
494 \textcolor{stringliteral}{        This splits along whitespace and punctuation and keeps the newline as}
495 \textcolor{stringliteral}{        a token in the returned list.}
496 \textcolor{stringliteral}{        """}
497         \textcolor{keywordflow}{return} RETOK.findall(text)
498 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae828063449b45112d82a97921d35c247}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae828063449b45112d82a97921d35c247}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!remove\+\_\+tail@{remove\+\_\+tail}}
\index{remove\+\_\+tail@{remove\+\_\+tail}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{remove\+\_\+tail()}{remove\_tail()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+remove\+\_\+tail (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{min\+\_\+freq }\end{DoxyParamCaption})}

\begin{DoxyVerb}Remove elements below the frequency cutoff from the dictionary.
\end{DoxyVerb}
 

Definition at line 577 of file dict.\+py.


\begin{DoxyCode}
577     \textcolor{keyword}{def }remove\_tail(self, min\_freq):
578         \textcolor{stringliteral}{"""}
579 \textcolor{stringliteral}{        Remove elements below the frequency cutoff from the dictionary.}
580 \textcolor{stringliteral}{        """}
581         to\_remove = []
582         \textcolor{keywordflow}{for} token, freq \textcolor{keywordflow}{in} self.freq.items():
583             \textcolor{keywordflow}{if} freq < min\_freq:
584                 \textcolor{comment}{# queue up removals since can't mutate dict during iteration}
585                 to\_remove.append(token)
586 
587         \textcolor{keywordflow}{for} token \textcolor{keywordflow}{in} to\_remove:
588             del self.freq[token]
589             idx = self.tok2ind.pop(token)
590             del self.ind2tok[idx]
591 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1a800c1aecdb97986c59fd26f1b55626}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a1a800c1aecdb97986c59fd26f1b55626}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!resize\+\_\+to\+\_\+max@{resize\+\_\+to\+\_\+max}}
\index{resize\+\_\+to\+\_\+max@{resize\+\_\+to\+\_\+max}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{resize\+\_\+to\+\_\+max()}{resize\_to\_max()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+resize\+\_\+to\+\_\+max (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{maxtokens }\end{DoxyParamCaption})}

\begin{DoxyVerb}Trims the dictionary to the maximum number of tokens.
\end{DoxyVerb}
 

Definition at line 612 of file dict.\+py.


\begin{DoxyCode}
612     \textcolor{keyword}{def }resize\_to\_max(self, maxtokens):
613         \textcolor{stringliteral}{"""}
614 \textcolor{stringliteral}{        Trims the dictionary to the maximum number of tokens.}
615 \textcolor{stringliteral}{        """}
616         \textcolor{keywordflow}{if} maxtokens >= 0 \textcolor{keywordflow}{and} len(self.tok2ind) > maxtokens:
617             \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} range(maxtokens, len(self.ind2tok)):
618                 v = self.ind2tok[k]
619                 del self.ind2tok[k]
620                 del self.tok2ind[v]
621                 del self.freq[v]
622 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0c6a8d8b67fe978549b328e7b7b07450}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0c6a8d8b67fe978549b328e7b7b07450}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!save@{save}}
\index{save@{save}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+save (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{filename = {\ttfamily None},  }\item[{}]{append = {\ttfamily False},  }\item[{}]{sort = {\ttfamily True} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save dictionary to file.

Format is 'token<TAB>count' for every token in the dictionary, sorted
by count with the most frequent words first.

If ``append`` (default ``False``) is set to ``True``, appends instead of
overwriting.

If ``sort`` (default ``True``), then first sort the dictionary before saving.
\end{DoxyVerb}
 

Definition at line 644 of file dict.\+py.


\begin{DoxyCode}
644     \textcolor{keyword}{def }save(self, filename=None, append=False, sort=True):
645         \textcolor{stringliteral}{"""}
646 \textcolor{stringliteral}{        Save dictionary to file.}
647 \textcolor{stringliteral}{}
648 \textcolor{stringliteral}{        Format is 'token<TAB>count' for every token in the dictionary, sorted}
649 \textcolor{stringliteral}{        by count with the most frequent words first.}
650 \textcolor{stringliteral}{}
651 \textcolor{stringliteral}{        If ``append`` (default ``False``) is set to ``True``, appends instead of}
652 \textcolor{stringliteral}{        overwriting.}
653 \textcolor{stringliteral}{}
654 \textcolor{stringliteral}{        If ``sort`` (default ``True``), then first sort the dictionary before saving.}
655 \textcolor{stringliteral}{        """}
656         filename = self.opt[\textcolor{stringliteral}{'dict\_file'}] \textcolor{keywordflow}{if} filename \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} filename
657 
658         \textcolor{keywordflow}{if} self.tokenizer == \textcolor{stringliteral}{'bpe'}:
659             needs\_removal = self.bpehelper.finalize(
660                 self.freq, num\_symbols=self.maxtokens, minfreq=self.minfreq
661             )
662             \textcolor{keywordflow}{if} needs\_removal:
663                 self.\_remove\_non\_bpe()
664             \textcolor{keywordflow}{elif} filename != self.opt[\textcolor{stringliteral}{'dict\_file'}]:
665                 \textcolor{comment}{# need to copy over the old codecs file}
666                 self.bpehelper.copy\_codecs\_file(filename + \textcolor{stringliteral}{'.codecs'})
667             \textcolor{keywordflow}{if} sort:
668                 self.sort(trim=\textcolor{keyword}{False})
669         \textcolor{keywordflow}{elif} self.tokenizer == \textcolor{stringliteral}{'gpt2'}:
670             \textcolor{comment}{# never remove or sort tokens from gpt2}
671             \textcolor{keywordflow}{pass}
672         \textcolor{keywordflow}{elif} sort:
673             self.sort(trim=\textcolor{keyword}{True})
674 
675         print(\textcolor{stringliteral}{'Dictionary: saving dictionary to \{\}'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(filename))
676 
677         \hyperlink{namespaceparlai_1_1core_1_1build__data_a6ce042fedd4194bd016845bbe7a8facf}{make\_dir}(os.path.dirname(filename))
678         mode = \textcolor{stringliteral}{'a'} \textcolor{keywordflow}{if} append \textcolor{keywordflow}{else} \textcolor{stringliteral}{'w'}
679         with open(filename, mode, encoding=\textcolor{stringliteral}{'utf-8'}) \textcolor{keyword}{as} write:
680             \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.ind2tok.keys():
681                 tok = self.ind2tok[i]
682                 cnt = self.freq[tok]
683                 write.write(\textcolor{stringliteral}{'\{tok\}\(\backslash\)t\{cnt\}\(\backslash\)n'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(tok=\hyperlink{namespaceparlai_1_1core_1_1dict_ae44fe4a2be005a4023a758a58f656495}{escape}(tok), cnt=cnt))
684 
685         \textcolor{comment}{# save opt file}
686         with open(filename + \textcolor{stringliteral}{'.opt'}, \textcolor{stringliteral}{'w'}, encoding=\textcolor{stringliteral}{'utf-8'}) \textcolor{keyword}{as} handle:
687             json.dump(self.opt, handle, indent=4)
688 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3d8996e367685451f7de85e8284243d7}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3d8996e367685451f7de85e8284243d7}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!share@{share}}
\index{share@{share}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{share()}{share()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+share (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Share internal dicts.
\end{DoxyVerb}
 

Definition at line 792 of file dict.\+py.


\begin{DoxyCode}
792     \textcolor{keyword}{def }share(self):
793         \textcolor{stringliteral}{"""}
794 \textcolor{stringliteral}{        Share internal dicts.}
795 \textcolor{stringliteral}{        """}
796         shared = super().share()
797         shared[\textcolor{stringliteral}{'freq'}] = self.freq
798         shared[\textcolor{stringliteral}{'tok2ind'}] = self.tok2ind
799         shared[\textcolor{stringliteral}{'ind2tok'}] = self.ind2tok
800         \textcolor{keywordflow}{return} shared
801 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aea9aca40dd1bb1976f4042565b172d88}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aea9aca40dd1bb1976f4042565b172d88}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+shutdown (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Save on shutdown if ``save_path`` is set.
\end{DoxyVerb}
 

Definition at line 802 of file dict.\+py.


\begin{DoxyCode}
802     \textcolor{keyword}{def }shutdown(self):
803         \textcolor{stringliteral}{"""}
804 \textcolor{stringliteral}{        Save on shutdown if ``save\_path`` is set.}
805 \textcolor{stringliteral}{        """}
806         \textcolor{keywordflow}{if} hasattr(self, \textcolor{stringliteral}{'save\_path'}):
807             self.save(self.save\_path)
808 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84cb4fabf5d0e92e3f80ac16bdfd0ccc}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a84cb4fabf5d0e92e3f80ac16bdfd0ccc}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!sort@{sort}}
\index{sort@{sort}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{sort()}{sort()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+sort (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{trim = {\ttfamily True} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Sort the dictionary.

Inline operation. Rearranges the dictionary so that the elements with
the lowest index have the highest counts. This reindexes the dictionary
according to the sorted frequencies, breaking ties alphabetically by
token.

:param bool trim:
    If True, truncate the dictionary based on minfreq and maxtokens.
\end{DoxyVerb}
 

Definition at line 689 of file dict.\+py.


\begin{DoxyCode}
689     \textcolor{keyword}{def }sort(self, trim=True):
690         \textcolor{stringliteral}{"""}
691 \textcolor{stringliteral}{        Sort the dictionary.}
692 \textcolor{stringliteral}{}
693 \textcolor{stringliteral}{        Inline operation. Rearranges the dictionary so that the elements with}
694 \textcolor{stringliteral}{        the lowest index have the highest counts. This reindexes the dictionary}
695 \textcolor{stringliteral}{        according to the sorted frequencies, breaking ties alphabetically by}
696 \textcolor{stringliteral}{        token.}
697 \textcolor{stringliteral}{}
698 \textcolor{stringliteral}{        :param bool trim:}
699 \textcolor{stringliteral}{            If True, truncate the dictionary based on minfreq and maxtokens.}
700 \textcolor{stringliteral}{        """}
701         \textcolor{keywordflow}{if} trim \textcolor{keywordflow}{and} self.tokenizer == \textcolor{stringliteral}{'gpt2'}:
702             \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{"You should not trim the dictionary when using gpt-2."})
703         \textcolor{comment}{# sort first by count, then alphabetically}
704         \textcolor{keywordflow}{if} trim:
705             self.remove\_tail(self.minfreq)
706         sorted\_pairs = sorted(self.freq.items(), key=\textcolor{keyword}{lambda} x: (-x[1], x[0]))
707         new\_tok2ind = \{\}
708         new\_ind2tok = \{\}
709         \textcolor{keywordflow}{for} i, (tok, \_) \textcolor{keywordflow}{in} enumerate(sorted\_pairs):
710             new\_tok2ind[tok] = i
711             new\_ind2tok[i] = tok
712         self.tok2ind = new\_tok2ind
713         self.ind2tok = new\_ind2tok
714         \textcolor{keywordflow}{if} trim:
715             self.resize\_to\_max(self.maxtokens)
716         \textcolor{keyword}{assert} len(self.freq) == len(self.ind2tok) == len(self.tok2ind)
717         \textcolor{keywordflow}{return} sorted\_pairs
718 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a437d3aacc7b55dac587643b271ba5f38}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a437d3aacc7b55dac587643b271ba5f38}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!space\+\_\+tokenize@{space\+\_\+tokenize}}
\index{space\+\_\+tokenize@{space\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{space\+\_\+tokenize()}{space\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+space\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Tokenize exactly on spaces.

Useful when text is pre-tokenized.
\end{DoxyVerb}
 

Definition at line 520 of file dict.\+py.


\begin{DoxyCode}
520     \textcolor{keyword}{def }space\_tokenize(text):
521         \textcolor{stringliteral}{"""}
522 \textcolor{stringliteral}{        Tokenize exactly on spaces.}
523 \textcolor{stringliteral}{}
524 \textcolor{stringliteral}{        Useful when text is pre-tokenized.}
525 \textcolor{stringliteral}{        """}
526         \textcolor{keywordflow}{return} text.strip().split(\textcolor{stringliteral}{' '})
527 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6532e92a69be5a68d04963597cd4ba29}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6532e92a69be5a68d04963597cd4ba29}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!spacy\+\_\+span\+\_\+tokenize@{spacy\+\_\+span\+\_\+tokenize}}
\index{spacy\+\_\+span\+\_\+tokenize@{spacy\+\_\+span\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{spacy\+\_\+span\+\_\+tokenize()}{spacy\_span\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+spacy\+\_\+span\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return tuple of tokens, spans.
\end{DoxyVerb}
 

Definition at line 456 of file dict.\+py.


\begin{DoxyCode}
456     \textcolor{keyword}{def }spacy\_span\_tokenize(self, text):
457         \textcolor{stringliteral}{"""}
458 \textcolor{stringliteral}{        Return tuple of tokens, spans.}
459 \textcolor{stringliteral}{        """}
460         \textcolor{comment}{# TODO: can we delete this?}
461         tokens = self.NLP.tokenizer(text)
462         \textcolor{keywordflow}{return} (
463             [t.text \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} tokens],
464             [(t.idx, t.idx + len(t.text)) \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} tokens],
465         )
466 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8e818ad5e11ecb08de6c4b858b2e68f1}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8e818ad5e11ecb08de6c4b858b2e68f1}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!spacy\+\_\+tokenize@{spacy\+\_\+tokenize}}
\index{spacy\+\_\+tokenize@{spacy\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{spacy\+\_\+tokenize()}{spacy\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+spacy\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text,  }\item[{}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Tokenize using spaCy.

Does whatever spaCy does. See https://spacy.io/.
\end{DoxyVerb}
 

Definition at line 447 of file dict.\+py.


\begin{DoxyCode}
447     \textcolor{keyword}{def }spacy\_tokenize(self, text, **kwargs):
448         \textcolor{stringliteral}{"""}
449 \textcolor{stringliteral}{        Tokenize using spaCy.}
450 \textcolor{stringliteral}{}
451 \textcolor{stringliteral}{        Does whatever spaCy does. See https://spacy.io/.}
452 \textcolor{stringliteral}{        """}
453         tokens = self.NLP.tokenizer(text)
454         \textcolor{keywordflow}{return} [t.text \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} tokens]
455 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8fede3cf83af6a47c5dd4bb356de3350}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8fede3cf83af6a47c5dd4bb356de3350}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!span\+\_\+tokenize@{span\+\_\+tokenize}}
\index{span\+\_\+tokenize@{span\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{span\+\_\+tokenize()}{span\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+span\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text }\end{DoxyParamCaption})}

\begin{DoxyVerb}Tokenize and find  starting index of each token in the original string.
\end{DoxyVerb}
 

Definition at line 528 of file dict.\+py.


\begin{DoxyCode}
528     \textcolor{keyword}{def }span\_tokenize(self, text):
529         \textcolor{stringliteral}{"""}
530 \textcolor{stringliteral}{        Tokenize and find  starting index of each token in the original string.}
531 \textcolor{stringliteral}{        """}
532         \textcolor{comment}{# TODO: can this be deleted?}
533         \textcolor{keywordflow}{if} self.tokenizer == \textcolor{stringliteral}{'spacy'}:
534             \textcolor{comment}{# spacy has own}
535             \textcolor{keywordflow}{return} self.spacy\_span\_tokenize(text)
536         tokens = self.tokenize(text)
537         curr\_idx = 0
538         indices = []
539         \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} tokens:
540             \textcolor{keywordflow}{while} text[curr\_idx] != t[0]:
541                 curr\_idx += 1
542             indices.append((curr\_idx, curr\_idx + len(t)))
543             curr\_idx += len(t)
544         \textcolor{keywordflow}{return} tokens, indices
545 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a826ba5c6ff36c8ddf5d7723c50e5616d}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a826ba5c6ff36c8ddf5d7723c50e5616d}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!split\+\_\+tokenize@{split\+\_\+tokenize}}
\index{split\+\_\+tokenize@{split\+\_\+tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{split\+\_\+tokenize()}{split\_tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+split\+\_\+tokenize (\begin{DoxyParamCaption}\item[{}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyVerb}Tokenize on whitespace and some limited punctuation.

Splits tokens based on whitespace after adding whitespace around
punctuation.

Use re_tokenize if you want more robust handling of punctuation.
\end{DoxyVerb}
 

Definition at line 500 of file dict.\+py.


\begin{DoxyCode}
500     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1mturk_1_1tasks_1_1wizard__of__wikipedia_1_1worlds_a040aaf5ecfbddec14f321279454f85a8}{split\_tokenize}(text):
501         \textcolor{stringliteral}{"""}
502 \textcolor{stringliteral}{        Tokenize on whitespace and some limited punctuation.}
503 \textcolor{stringliteral}{}
504 \textcolor{stringliteral}{        Splits tokens based on whitespace after adding whitespace around}
505 \textcolor{stringliteral}{        punctuation.}
506 \textcolor{stringliteral}{}
507 \textcolor{stringliteral}{        Use re\_tokenize if you want more robust handling of punctuation.}
508 \textcolor{stringliteral}{        """}
509         \textcolor{keywordflow}{return} (
510             text.replace(\textcolor{stringliteral}{'.'}, \textcolor{stringliteral}{' . '})
511             .replace(\textcolor{stringliteral}{','}, \textcolor{stringliteral}{' , '})
512             .replace(\textcolor{stringliteral}{';'}, \textcolor{stringliteral}{' ; '})
513             .replace(\textcolor{stringliteral}{':'}, \textcolor{stringliteral}{' : '})
514             .replace(\textcolor{stringliteral}{'!'}, \textcolor{stringliteral}{' ! '})
515             .replace(\textcolor{stringliteral}{'?'}, \textcolor{stringliteral}{' ? '})
516             .split()
517         )
518 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aca7e5edfd6502701277cb83b75ff4e96}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aca7e5edfd6502701277cb83b75ff4e96}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!tokenize@{tokenize}}
\index{tokenize@{tokenize}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{tokenize()}{tokenize()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+tokenize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text,  }\item[{}]{building = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a sequence of tokens from the iterable.
\end{DoxyVerb}
 

Definition at line 546 of file dict.\+py.


\begin{DoxyCode}
546     \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1agents_1_1tfidf__retriever_1_1build__tfidf_a1fdb457e98eb4e4c26047e229686a616}{tokenize}(self, text, building=False):
547         \textcolor{stringliteral}{"""}
548 \textcolor{stringliteral}{        Return a sequence of tokens from the iterable.}
549 \textcolor{stringliteral}{        """}
550         \textcolor{keywordflow}{if} self.lower:
551             text = text.lower()
552 
553         \textcolor{comment}{# calls the selected tokenizer function e.g. 're' => re\_tokenize(text)}
554         word\_tokens = self.tokenizer\_fun(text)
555 
556         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} building \textcolor{keywordflow}{and} self.max\_ngram\_size > 1:
557             \textcolor{comment}{# search for ngrams during parse-time}
558             \textcolor{comment}{# TODO(ahm): support build-time ngrams using word2vec heuristic?}
559             word\_tokens = \hyperlink{namespaceparlai_1_1core_1_1dict_a5e9eb43b6c0dce0b3aab7f3ea3717de6}{find\_ngrams}(self.tok2ind, word\_tokens, self.max\_ngram\_size)
560         \textcolor{keywordflow}{return} word\_tokens
561 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abc3baf742422fc7cdaece698224709d4}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abc3baf742422fc7cdaece698224709d4}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!txt2vec@{txt2vec}}
\index{txt2vec@{txt2vec}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{txt2vec()}{txt2vec()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+txt2vec (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text,  }\item[{}]{vec\+\_\+type = {\ttfamily list} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert a string to a vector (list of ints).

First runs a sentence tokenizer, then a word tokenizer.

:param type vec_type:
    The type of the returned vector if the input is a string. Suggested
    ``list``, ``tuple``, ``set``, or ``np.ndarray``.
\end{DoxyVerb}
 

Definition at line 734 of file dict.\+py.


\begin{DoxyCode}
734     \textcolor{keyword}{def }txt2vec(self, text, vec\_type=list):
735         \textcolor{stringliteral}{"""}
736 \textcolor{stringliteral}{        Convert a string to a vector (list of ints).}
737 \textcolor{stringliteral}{}
738 \textcolor{stringliteral}{        First runs a sentence tokenizer, then a word tokenizer.}
739 \textcolor{stringliteral}{}
740 \textcolor{stringliteral}{        :param type vec\_type:}
741 \textcolor{stringliteral}{            The type of the returned vector if the input is a string. Suggested}
742 \textcolor{stringliteral}{            ``list``, ``tuple``, ``set``, or ``np.ndarray``.}
743 \textcolor{stringliteral}{        """}
744         \textcolor{keywordflow}{if} vec\_type == list \textcolor{keywordflow}{or} vec\_type == tuple \textcolor{keywordflow}{or} vec\_type == set:
745             res = vec\_type((self[token] \textcolor{keywordflow}{for} token \textcolor{keywordflow}{in} self.tokenize(\hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(text))))
746         \textcolor{keywordflow}{elif} vec\_type == np.ndarray:
747             res = np.fromiter((self[token] \textcolor{keywordflow}{for} token \textcolor{keywordflow}{in} self.tokenize(text)), np.int)
748         \textcolor{keywordflow}{else}:
749             \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'Type \{\} not supported by dict'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(vec\_type))
750         \textcolor{keywordflow}{return} res
751 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2eeb50b2cd6cf3a8ca817b729ec7486}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2eeb50b2cd6cf3a8ca817b729ec7486}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!vec2txt@{vec2txt}}
\index{vec2txt@{vec2txt}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{vec2txt()}{vec2txt()}}
{\footnotesize\ttfamily def parlai.\+core.\+dict.\+Dictionary\+Agent.\+vec2txt (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{vector,  }\item[{}]{delimiter = {\ttfamily \textquotesingle{}~\textquotesingle{}} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert a vector of IDs to a string.

Converts a vector (iterable of ints) into a string, with each token separated by
the delimiter (default ``' '``).
\end{DoxyVerb}
 

Definition at line 752 of file dict.\+py.


\begin{DoxyCode}
752     \textcolor{keyword}{def }vec2txt(self, vector, delimiter=' '):
753         \textcolor{stringliteral}{"""}
754 \textcolor{stringliteral}{        Convert a vector of IDs to a string.}
755 \textcolor{stringliteral}{}
756 \textcolor{stringliteral}{        Converts a vector (iterable of ints) into a string, with each token separated by}
757 \textcolor{stringliteral}{        the delimiter (default ``' '``).}
758 \textcolor{stringliteral}{        """}
759         \textcolor{keywordflow}{if} self.tokenizer == \textcolor{stringliteral}{'gpt2'} \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} self.opt.get(\textcolor{stringliteral}{'bpe\_debug'}, \textcolor{keyword}{False}):
760             \textcolor{keywordflow}{return} self.gpt2\_bpe.decode(self[\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(idx)] \textcolor{keywordflow}{for} idx \textcolor{keywordflow}{in} vector)
761         \textcolor{comment}{# if we want to debug into this gpt2 bpe, you will get next line}
762         text = delimiter.join(self[\hyperlink{namespacelanguage__model_1_1eval__ppl_a7d12ee00479673c5c8d1f6d01faa272a}{int}(idx)] \textcolor{keywordflow}{for} idx \textcolor{keywordflow}{in} vector)
763         \textcolor{comment}{# if we used a BPE tokenizer we need to rejoin the encodings}
764         \textcolor{keywordflow}{if} self.tokenizer == \textcolor{stringliteral}{'bpe'} \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} self.opt.get(\textcolor{stringliteral}{'bpe\_debug'}, \textcolor{keyword}{False}):
765             text = text.replace(\textcolor{stringliteral}{'@@ '}, \textcolor{stringliteral}{''})
766             \textcolor{comment}{# It's also possible that we get a BPE encoding on the end of the word}
767             \textcolor{keywordflow}{if} text.endswith(\textcolor{stringliteral}{'@@'}):
768                 text = text[:-2]
769             text = text.replace(\textcolor{stringliteral}{'\_\_newln\_\_'}, \textcolor{stringliteral}{'\(\backslash\)n'})
770         \textcolor{keywordflow}{return} text
771 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2bfd8d00b4733c085a639521e727ceb}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af2bfd8d00b4733c085a639521e727ceb}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!bpehelper@{bpehelper}}
\index{bpehelper@{bpehelper}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{bpehelper}{bpehelper}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+bpehelper}



Definition at line 324 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3917720c8b31e5b99698beca63256511}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3917720c8b31e5b99698beca63256511}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!built@{built}}
\index{built@{built}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{built}{built}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+built}



Definition at line 572 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a93744f41c5a1bbdb57c2c0bec9e08496}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a93744f41c5a1bbdb57c2c0bec9e08496}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+end@{default\+\_\+end}}
\index{default\+\_\+end@{default\+\_\+end}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+end}{default\_end}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+end\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 112 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abaf912ab6b433d48cfc156218276f926}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abaf912ab6b433d48cfc156218276f926}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+lang@{default\+\_\+lang}}
\index{default\+\_\+lang@{default\+\_\+lang}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+lang}{default\_lang}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+lang\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 106 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a59b9ea9bced9ca0a4272e9b5fa93d23b}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a59b9ea9bced9ca0a4272e9b5fa93d23b}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+lower@{default\+\_\+lower}}
\index{default\+\_\+lower@{default\+\_\+lower}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+lower}{default\_lower}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+lower\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 115 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3ba85d9c9f522fd7d14790ab7e228225}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a3ba85d9c9f522fd7d14790ab7e228225}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+maxngram@{default\+\_\+maxngram}}
\index{default\+\_\+maxngram@{default\+\_\+maxngram}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+maxngram}{default\_maxngram}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+maxngram\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 107 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aeddaf81e54e344ddfd8ad1b59a786a7c}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aeddaf81e54e344ddfd8ad1b59a786a7c}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+maxtokens@{default\+\_\+maxtokens}}
\index{default\+\_\+maxtokens@{default\+\_\+maxtokens}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+maxtokens}{default\_maxtokens}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+maxtokens\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 109 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a798ee55bfd917cbf5d2ac766123f16ca}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a798ee55bfd917cbf5d2ac766123f16ca}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+minfreq@{default\+\_\+minfreq}}
\index{default\+\_\+minfreq@{default\+\_\+minfreq}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+minfreq}{default\_minfreq}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+minfreq\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 108 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a056841f6e5531fac1d6e06125e8578c2}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a056841f6e5531fac1d6e06125e8578c2}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+null@{default\+\_\+null}}
\index{default\+\_\+null@{default\+\_\+null}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+null}{default\_null}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+null\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 110 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ab83c2273d1eb86c7bce9c5c3c1866bcb}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ab83c2273d1eb86c7bce9c5c3c1866bcb}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+start@{default\+\_\+start}}
\index{default\+\_\+start@{default\+\_\+start}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+start}{default\_start}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+start\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 111 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aa5b59f6cb7615cf32c6372f365710ce7}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_aa5b59f6cb7615cf32c6372f365710ce7}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+textfields@{default\+\_\+textfields}}
\index{default\+\_\+textfields@{default\+\_\+textfields}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+textfields}{default\_textfields}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+textfields\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 116 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a554fce05a3a164879cc64a597ce8c5bb}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a554fce05a3a164879cc64a597ce8c5bb}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+tok@{default\+\_\+tok}}
\index{default\+\_\+tok@{default\+\_\+tok}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+tok}{default\_tok}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+tok\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 114 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ac60a2c20d7693d14e175032d5185e784}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ac60a2c20d7693d14e175032d5185e784}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!default\+\_\+unk@{default\+\_\+unk}}
\index{default\+\_\+unk@{default\+\_\+unk}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{default\+\_\+unk}{default\_unk}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+default\+\_\+unk\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 113 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a793811f6f290bfcb714fa865745cdcb4}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a793811f6f290bfcb714fa865745cdcb4}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!end\+\_\+token@{end\+\_\+token}}
\index{end\+\_\+token@{end\+\_\+token}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{end\+\_\+token}{end\_token}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+end\+\_\+token}



Definition at line 230 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af3e428f4a5d8ef3a2fc02b01a6f659f2}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af3e428f4a5d8ef3a2fc02b01a6f659f2}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!freq@{freq}}
\index{freq@{freq}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{freq}{freq}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+freq}



Definition at line 251 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ac0fbaa96f4b3d1cef6628da8320d4bc2}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ac0fbaa96f4b3d1cef6628da8320d4bc2}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!gpt2\+\_\+bpe@{gpt2\+\_\+bpe}}
\index{gpt2\+\_\+bpe@{gpt2\+\_\+bpe}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{gpt2\+\_\+bpe}{gpt2\_bpe}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+gpt2\+\_\+bpe}



Definition at line 336 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af425a3810b9c85ac73d9b77a9ee100e6}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_af425a3810b9c85ac73d9b77a9ee100e6}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!ind2tok@{ind2tok}}
\index{ind2tok@{ind2tok}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{ind2tok}{ind2tok}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+ind2tok}



Definition at line 253 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0dc4620f2829a15d822cc29e7fccd677}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0dc4620f2829a15d822cc29e7fccd677}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!lower@{lower}}
\index{lower@{lower}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{lower}{lower}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+lower}



Definition at line 237 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a834b2cdfb978f230b5131e63cf1e7492}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a834b2cdfb978f230b5131e63cf1e7492}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!max\+\_\+ngram\+\_\+size@{max\+\_\+ngram\+\_\+size}}
\index{max\+\_\+ngram\+\_\+size@{max\+\_\+ngram\+\_\+size}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{max\+\_\+ngram\+\_\+size}{max\_ngram\_size}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+max\+\_\+ngram\+\_\+size}



Definition at line 233 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abeece13fbdc77b7479d4fb5d02858816}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_abeece13fbdc77b7479d4fb5d02858816}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!maxtokens@{maxtokens}}
\index{maxtokens@{maxtokens}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{maxtokens}{maxtokens}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+maxtokens}



Definition at line 238 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a50f58c22b998eb75c24393cbccc759a4}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a50f58c22b998eb75c24393cbccc759a4}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!minfreq@{minfreq}}
\index{minfreq@{minfreq}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{minfreq}{minfreq}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+minfreq}



Definition at line 228 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8f4fbeb1e3a220c70e2828e4ce9c3f51}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a8f4fbeb1e3a220c70e2828e4ce9c3f51}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!N\+LP@{N\+LP}}
\index{N\+LP@{N\+LP}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{N\+LP}{NLP}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+N\+LP}



Definition at line 320 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a9db44f9566d7f7678c5528e7c44d76a8}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a9db44f9566d7f7678c5528e7c44d76a8}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!null\+\_\+token@{null\+\_\+token}}
\index{null\+\_\+token@{null\+\_\+token}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{null\+\_\+token}{null\_token}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+null\+\_\+token}



Definition at line 229 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6c0d7c9c31b38e99b747be88395d689f}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a6c0d7c9c31b38e99b747be88395d689f}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!opt@{opt}}
\index{opt@{opt}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+opt}



Definition at line 227 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a98faac965437d58fd2bf59f9d1438272}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a98faac965437d58fd2bf59f9d1438272}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!save\+\_\+path@{save\+\_\+path}}
\index{save\+\_\+path@{save\+\_\+path}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{save\+\_\+path}{save\_path}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+save\+\_\+path}



Definition at line 358 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad883df8ef1d397ea93dd9d018822720e}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ad883df8ef1d397ea93dd9d018822720e}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!sent\+\_\+tok@{sent\+\_\+tok}}
\index{sent\+\_\+tok@{sent\+\_\+tok}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{sent\+\_\+tok}{sent\_tok}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+sent\+\_\+tok}



Definition at line 304 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5ef1b542b4efa5228e957c1e167195bd}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5ef1b542b4efa5228e957c1e167195bd}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!start\+\_\+token@{start\+\_\+token}}
\index{start\+\_\+token@{start\+\_\+token}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{start\+\_\+token}{start\_token}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+start\+\_\+token}



Definition at line 232 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a771c6e70dd433cdc076fd1261f2f3845}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a771c6e70dd433cdc076fd1261f2f3845}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!textfields@{textfields}}
\index{textfields@{textfields}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{textfields}{textfields}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+textfields}



Definition at line 239 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5955a6e5b031b8540694b847a9889bcd}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a5955a6e5b031b8540694b847a9889bcd}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!tok2ind@{tok2ind}}
\index{tok2ind@{tok2ind}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{tok2ind}{tok2ind}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+tok2ind}



Definition at line 252 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a77e32c39f829ba158fd8b4ba834f4db3}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a77e32c39f829ba158fd8b4ba834f4db3}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!tokenizer@{tokenizer}}
\index{tokenizer@{tokenizer}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{tokenizer}{tokenizer}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+tokenizer}



Definition at line 236 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0d3436a2a958f18177df71f59f48e72e}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a0d3436a2a958f18177df71f59f48e72e}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!tokenizer\+\_\+fun@{tokenizer\+\_\+fun}}
\index{tokenizer\+\_\+fun@{tokenizer\+\_\+fun}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{tokenizer\+\_\+fun}{tokenizer\_fun}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+tokenizer\+\_\+fun}



Definition at line 244 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae741c47302ea1add9cc040d68032c38a}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_ae741c47302ea1add9cc040d68032c38a}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!unk\+\_\+token@{unk\+\_\+token}}
\index{unk\+\_\+token@{unk\+\_\+token}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{unk\+\_\+token}{unk\_token}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+unk\+\_\+token}



Definition at line 231 of file dict.\+py.

\mbox{\Hypertarget{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a025ffc815b72c6d2d34c12249956d4f1}\label{classparlai_1_1core_1_1dict_1_1DictionaryAgent_a025ffc815b72c6d2d34c12249956d4f1}} 
\index{parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}!word\+\_\+tok@{word\+\_\+tok}}
\index{word\+\_\+tok@{word\+\_\+tok}!parlai\+::core\+::dict\+::\+Dictionary\+Agent@{parlai\+::core\+::dict\+::\+Dictionary\+Agent}}
\subsubsection{\texorpdfstring{word\+\_\+tok}{word\_tok}}
{\footnotesize\ttfamily parlai.\+core.\+dict.\+Dictionary\+Agent.\+word\+\_\+tok}



Definition at line 308 of file dict.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/core/\hyperlink{dict_8py}{dict.\+py}\end{DoxyCompactItemize}
