\hypertarget{namespaceparlai_1_1scripts_1_1detect__offensive__language}{}\section{parlai.\+scripts.\+detect\+\_\+offensive\+\_\+language Namespace Reference}
\label{namespaceparlai_1_1scripts_1_1detect__offensive__language}\index{parlai.\+scripts.\+detect\+\_\+offensive\+\_\+language@{parlai.\+scripts.\+detect\+\_\+offensive\+\_\+language}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceparlai_1_1scripts_1_1detect__offensive__language_ab3f20447fd2442afdcd45dd77b619378}{setup\+\_\+args} (\hyperlink{namespaceparlai_1_1scripts_1_1detect__offensive__language_a1911e11825f0b58da4e082a1697d968c}{parser}=None)
\item 
def \hyperlink{namespaceparlai_1_1scripts_1_1detect__offensive__language_aecc66ec4441e506a93d25964889c185f}{detect} (opt, printargs=None, \hyperlink{namespaceparlai_1_1scripts_1_1detect__offensive__language_acb74ddd962fd2fc50270c37cdcd65c83}{print\+\_\+parser}=None)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespaceparlai_1_1scripts_1_1detect__offensive__language_a1911e11825f0b58da4e082a1697d968c}{parser}
\item 
\hyperlink{namespaceparlai_1_1scripts_1_1detect__offensive__language_a6d984125c3831773988d61d36c68dc60}{print\+\_\+args}
\item 
\hyperlink{namespaceparlai_1_1scripts_1_1detect__offensive__language_acb74ddd962fd2fc50270c37cdcd65c83}{print\+\_\+parser}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1scripts_1_1detect__offensive__language_aecc66ec4441e506a93d25964889c185f}\label{namespaceparlai_1_1scripts_1_1detect__offensive__language_aecc66ec4441e506a93d25964889c185f}} 
\index{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language@{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language}!detect@{detect}}
\index{detect@{detect}!parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language@{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language}}
\subsubsection{\texorpdfstring{detect()}{detect()}}
{\footnotesize\ttfamily def parlai.\+scripts.\+detect\+\_\+offensive\+\_\+language.\+detect (\begin{DoxyParamCaption}\item[{}]{opt,  }\item[{}]{printargs = {\ttfamily None},  }\item[{}]{print\+\_\+parser = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Checks a task for offensive language.
\end{DoxyVerb}
 

Definition at line 38 of file detect\+\_\+offensive\+\_\+language.\+py.


\begin{DoxyCode}
38 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1scripts_1_1detect__offensive__language_aecc66ec4441e506a93d25964889c185f}{detect}(opt, printargs=None, print\_parser=None):
39     \textcolor{stringliteral}{"""}
40 \textcolor{stringliteral}{    Checks a task for offensive language.}
41 \textcolor{stringliteral}{    """}
42     \textcolor{keywordflow}{if} print\_parser \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
43         \textcolor{keywordflow}{if} print\_parser \textcolor{keywordflow}{is} \textcolor{keyword}{True} \textcolor{keywordflow}{and} isinstance(opt, ParlaiParser):
44             print\_parser = opt
45         \textcolor{keywordflow}{elif} print\_parser \textcolor{keywordflow}{is} \textcolor{keyword}{False}:
46             print\_parser = \textcolor{keywordtype}{None}
47     random.seed(42)
48 
49     \textcolor{comment}{# Create model and assign it to the specified task}
50     agent = \hyperlink{namespaceparlai_1_1core_1_1agents_a00d77a7e26fb89e8bd900f7b2a02982a}{create\_agent}(opt, requireModelExists=\textcolor{keyword}{True})
51     world = \hyperlink{namespaceparlai_1_1core_1_1worlds_a79969c7ba76d4b3c500f5bb776444dc6}{create\_task}(opt, agent)
52     bad = OffensiveStringMatcher()
53 
54     \textcolor{keywordflow}{if} print\_parser:
55         \textcolor{comment}{# Show arguments after loading model}
56         print\_parser.opt = agent.opt
57         print\_parser.print\_args()
58     log\_every\_n\_secs = opt.get(\textcolor{stringliteral}{'log\_every\_n\_secs'}, -1)
59     \textcolor{keywordflow}{if} log\_every\_n\_secs <= 0:
60         log\_every\_n\_secs = \hyperlink{namespaceprojects_1_1controllable__dialogue_1_1make__control__dataset_aa2b7207688c641dbc094ab44eca27113}{float}(\textcolor{stringliteral}{'inf'})
61     log\_time = TimeLogger()
62 
63     \textcolor{comment}{# Show some example dialogs:}
64     cnt = 0
65     \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} world.epoch\_done():
66         world.parley()
67         words = []
68         \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} world.acts:
69             offensive = bad.contains\_offensive\_language(a.get(\textcolor{stringliteral}{'text'}, \textcolor{stringliteral}{''}))
70             \textcolor{keywordflow}{if} offensive:
71                 words.append(offensive)
72             labels = a.get(\textcolor{stringliteral}{'labels'}, a.get(\textcolor{stringliteral}{'eval\_labels'}, \textcolor{stringliteral}{''}))
73             \textcolor{keywordflow}{for} l \textcolor{keywordflow}{in} labels:
74                 offensive = bad.contains\_offensive\_language(l)
75                 \textcolor{keywordflow}{if} offensive:
76                     words.append(offensive)
77         \textcolor{keywordflow}{if} len(words) > 0 \textcolor{keywordflow}{and} opt[\textcolor{stringliteral}{'display\_examples'}]:
78             print(world.display())
79             print(\textcolor{stringliteral}{"[Offensive words detected:]"}, \textcolor{stringliteral}{', '}.join(words))
80             print(\textcolor{stringliteral}{"\(\backslash\)n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\(\backslash\)n"})
81         cnt += len(words)
82         \textcolor{keywordflow}{if} log\_time.time() > log\_every\_n\_secs:
83             report = world.report()
84             log = \{\textcolor{stringliteral}{'offenses'}: cnt\}
85             text, log = log\_time.log(report[\textcolor{stringliteral}{'exs'}], world.num\_examples(), log)
86             print(text)
87 
88     \textcolor{keywordflow}{if} world.epoch\_done():
89         print(\textcolor{stringliteral}{"EPOCH DONE"})
90     print(
91         \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(cnt)
92         + \textcolor{stringliteral}{" offensive messages found out of "}
93         + \hyperlink{namespacegenerate__task__READMEs_a5b88452ffb87b78c8c85ececebafc09f}{str}(world.num\_examples())
94         + \textcolor{stringliteral}{" messages."}
95     )
96     \textcolor{keywordflow}{return} world.report()
97 
98 
\end{DoxyCode}
\mbox{\Hypertarget{namespaceparlai_1_1scripts_1_1detect__offensive__language_ab3f20447fd2442afdcd45dd77b619378}\label{namespaceparlai_1_1scripts_1_1detect__offensive__language_ab3f20447fd2442afdcd45dd77b619378}} 
\index{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language@{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language}!setup\+\_\+args@{setup\+\_\+args}}
\index{setup\+\_\+args@{setup\+\_\+args}!parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language@{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language}}
\subsubsection{\texorpdfstring{setup\+\_\+args()}{setup\_args()}}
{\footnotesize\ttfamily def parlai.\+scripts.\+detect\+\_\+offensive\+\_\+language.\+setup\+\_\+args (\begin{DoxyParamCaption}\item[{}]{parser = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 26 of file detect\+\_\+offensive\+\_\+language.\+py.


\begin{DoxyCode}
26 \textcolor{keyword}{def }\hyperlink{namespaceparlai_1_1scripts_1_1detect__offensive__language_ab3f20447fd2442afdcd45dd77b619378}{setup\_args}(parser=None):
27     \textcolor{keywordflow}{if} parser \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
28         parser = ParlaiParser(\textcolor{keyword}{True}, \textcolor{keyword}{True}, \textcolor{stringliteral}{'Check task for offensive language'})
29     parser.add\_pytorch\_datateacher\_args()
30     \textcolor{comment}{# Get command line arguments}
31     parser.add\_argument(\textcolor{stringliteral}{'-ltim'}, \textcolor{stringliteral}{'--log-every-n-secs'}, type=float, default=2)
32     parser.add\_argument(\textcolor{stringliteral}{'-d'}, \textcolor{stringliteral}{'--display-examples'}, type=\textcolor{stringliteral}{'bool'}, default=\textcolor{keyword}{False})
33     parser.set\_defaults(datatype=\textcolor{stringliteral}{'train:ordered'})
34     parser.set\_defaults(model=\textcolor{stringliteral}{'repeat\_query'})
35     \textcolor{keywordflow}{return} parser
36 
37 
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{namespaceparlai_1_1scripts_1_1detect__offensive__language_a1911e11825f0b58da4e082a1697d968c}\label{namespaceparlai_1_1scripts_1_1detect__offensive__language_a1911e11825f0b58da4e082a1697d968c}} 
\index{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language@{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language}!parser@{parser}}
\index{parser@{parser}!parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language@{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language}}
\subsubsection{\texorpdfstring{parser}{parser}}
{\footnotesize\ttfamily parlai.\+scripts.\+detect\+\_\+offensive\+\_\+language.\+parser}



Definition at line 100 of file detect\+\_\+offensive\+\_\+language.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1scripts_1_1detect__offensive__language_a6d984125c3831773988d61d36c68dc60}\label{namespaceparlai_1_1scripts_1_1detect__offensive__language_a6d984125c3831773988d61d36c68dc60}} 
\index{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language@{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language}!print\+\_\+args@{print\+\_\+args}}
\index{print\+\_\+args@{print\+\_\+args}!parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language@{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language}}
\subsubsection{\texorpdfstring{print\+\_\+args}{print\_args}}
{\footnotesize\ttfamily parlai.\+scripts.\+detect\+\_\+offensive\+\_\+language.\+print\+\_\+args}



Definition at line 101 of file detect\+\_\+offensive\+\_\+language.\+py.

\mbox{\Hypertarget{namespaceparlai_1_1scripts_1_1detect__offensive__language_acb74ddd962fd2fc50270c37cdcd65c83}\label{namespaceparlai_1_1scripts_1_1detect__offensive__language_acb74ddd962fd2fc50270c37cdcd65c83}} 
\index{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language@{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language}!print\+\_\+parser@{print\+\_\+parser}}
\index{print\+\_\+parser@{print\+\_\+parser}!parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language@{parlai\+::scripts\+::detect\+\_\+offensive\+\_\+language}}
\subsubsection{\texorpdfstring{print\+\_\+parser}{print\_parser}}
{\footnotesize\ttfamily parlai.\+scripts.\+detect\+\_\+offensive\+\_\+language.\+print\+\_\+parser}



Definition at line 101 of file detect\+\_\+offensive\+\_\+language.\+py.

