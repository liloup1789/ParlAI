\hypertarget{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs}{}\section{parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs Class Reference}
\label{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs}\index{parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs@{parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs}}


Inheritance diagram for parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{d9/d7a/classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{d3/df8/classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a10a49844810d11e7aecf4b7854c81787}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classparlai_1_1core_1_1agents_1_1Teacher_a3ce6243860ce978a897922863ed32fa4}{opt}, shared=None)
\item 
def \hyperlink{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_aca16cfaf6d38cfc93ace8445811863c3}{add\+\_\+candidates} (self, sample, seed)
\item 
def \hyperlink{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a47304c2339835e7942ae190d4b17fc2d}{get} (self, \hyperlink{classparlai_1_1core_1_1teachers_1_1FixedDialogTeacher_afd4ebab8063eb42d182d30a1a41f133e}{episode\+\_\+idx}, \hyperlink{classparlai_1_1core_1_1teachers_1_1FixedDialogTeacher_ae3201b15f3c3b46a2f3511bad9b43e7d}{entry\+\_\+idx}=0)
\item 
def \hyperlink{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_aef77d69155c1215eb64ec5c1ba895bdf}{next\+\_\+example} (self)
\item 
def \hyperlink{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_aacac8ac1f8b79287b943b85ed21b081b}{share} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a93d31fab305d4b58d377ea9e6d5b7e39}{datatype}
\item 
\hyperlink{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a66c8920874a95611d27a7d5b21c1c128}{num\+\_\+seen}
\item 
\hyperlink{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_ab4625f39fc5003fb1ea94be95c8e8ef9}{all\+\_\+candidates}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Output the exact same data as the default teacher, except for the trainset where it
provides negatives in label_candidates.

(It does not affect valid and test set)
\end{DoxyVerb}
 

Definition at line 116 of file agents.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a10a49844810d11e7aecf4b7854c81787}\label{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a10a49844810d11e7aecf4b7854c81787}} 
\index{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt,  }\item[{}]{shared = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 124 of file agents.\+py.


\begin{DoxyCode}
124     \textcolor{keyword}{def }\_\_init\_\_(self, opt, shared=None):
125         super().\_\_init\_\_(opt, shared)
126         self.datatype = opt[\textcolor{stringliteral}{'datatype'}]
127         self.num\_seen = -1
128         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'train'} \textcolor{keywordflow}{in} self.datatype:
129             \textcolor{keywordflow}{if} shared \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
130                 \textcolor{keywordflow}{if} self.stream:
131                     self.all\_candidates = [
132                         self.data.get()[0][\textcolor{stringliteral}{'labels'}][0]
133                         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(self.num\_episodes())
134                     ]
135                 \textcolor{keywordflow}{else}:
136                     self.all\_candidates = [
137                         self.data.get(i, 0)[0][\textcolor{stringliteral}{'labels'}][0]
138                         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(self.num\_episodes())
139                     ]
140             \textcolor{keywordflow}{else}:
141                 self.all\_candidates = shared[\textcolor{stringliteral}{'all\_candidates'}]
142 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_aca16cfaf6d38cfc93ace8445811863c3}\label{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_aca16cfaf6d38cfc93ace8445811863c3}} 
\index{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}!add\+\_\+candidates@{add\+\_\+candidates}}
\index{add\+\_\+candidates@{add\+\_\+candidates}!parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}}
\subsubsection{\texorpdfstring{add\+\_\+candidates()}{add\_candidates()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs.\+add\+\_\+candidates (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{sample,  }\item[{}]{seed }\end{DoxyParamCaption})}

\begin{DoxyVerb}Add 16 candidates.

Should be called only at train time.
\end{DoxyVerb}
 

Definition at line 143 of file agents.\+py.


\begin{DoxyCode}
143     \textcolor{keyword}{def }add\_candidates(self, sample, seed):
144         \textcolor{stringliteral}{"""}
145 \textcolor{stringliteral}{        Add 16 candidates.}
146 \textcolor{stringliteral}{}
147 \textcolor{stringliteral}{        Should be called only at train time.}
148 \textcolor{stringliteral}{        """}
149         rand = random.Random(seed)
150         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'label\_candidates'} \textcolor{keywordflow}{in} sample:
151             \textcolor{keywordflow}{return}
152         label = sample[\textcolor{stringliteral}{'labels'}][0]
153         negs = []
154         \textcolor{keywordflow}{while} len(negs) < 15:
155             neg\_idx = rand.randint(0, len(self.all\_candidates) - 1)
156             neg = self.all\_candidates[neg\_idx]
157             \textcolor{keywordflow}{if} neg != label:
158                 negs.append(neg)
159         sample[\textcolor{stringliteral}{'label\_candidates'}] = [label] + negs
160 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a47304c2339835e7942ae190d4b17fc2d}\label{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a47304c2339835e7942ae190d4b17fc2d}} 
\index{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}!get@{get}}
\index{get@{get}!parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}}
\subsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs.\+get (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{episode\+\_\+idx,  }\item[{}]{entry\+\_\+idx = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 161 of file agents.\+py.


\begin{DoxyCode}
161     \textcolor{keyword}{def }get(self, episode\_idx, entry\_idx=0):
162         sample = super().get(episode\_idx, entry\_idx)
163         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'train'} \textcolor{keywordflow}{in} self.datatype:
164             self.add\_candidates(sample, episode\_idx)
165         \textcolor{keywordflow}{return} sample
166 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_aef77d69155c1215eb64ec5c1ba895bdf}\label{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_aef77d69155c1215eb64ec5c1ba895bdf}} 
\index{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}!next\+\_\+example@{next\+\_\+example}}
\index{next\+\_\+example@{next\+\_\+example}!parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}}
\subsubsection{\texorpdfstring{next\+\_\+example()}{next\_example()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs.\+next\+\_\+example (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 167 of file agents.\+py.


\begin{DoxyCode}
167     \textcolor{keyword}{def }next\_example(self):
168         sample, episode\_done = super().next\_example()
169         self.num\_seen += 1
170         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'train'} \textcolor{keywordflow}{in} self.datatype:
171             self.add\_candidates(sample, self.num\_seen)
172         \textcolor{keywordflow}{return} sample, episode\_done
173 
\end{DoxyCode}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_aacac8ac1f8b79287b943b85ed21b081b}\label{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_aacac8ac1f8b79287b943b85ed21b081b}} 
\index{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}!share@{share}}
\index{share@{share}!parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}}
\subsubsection{\texorpdfstring{share()}{share()}}
{\footnotesize\ttfamily def parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs.\+share (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 174 of file agents.\+py.


\begin{DoxyCode}
174     \textcolor{keyword}{def }share(self):
175         shared = super().share()
176         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'train'} \textcolor{keywordflow}{in} self.datatype:
177             shared[\textcolor{stringliteral}{'all\_candidates'}] = self.all\_candidates
178         \textcolor{keywordflow}{return} shared
179 
180 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_ab4625f39fc5003fb1ea94be95c8e8ef9}\label{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_ab4625f39fc5003fb1ea94be95c8e8ef9}} 
\index{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}!all\+\_\+candidates@{all\+\_\+candidates}}
\index{all\+\_\+candidates@{all\+\_\+candidates}!parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}}
\subsubsection{\texorpdfstring{all\+\_\+candidates}{all\_candidates}}
{\footnotesize\ttfamily parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs.\+all\+\_\+candidates}



Definition at line 131 of file agents.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a93d31fab305d4b58d377ea9e6d5b7e39}\label{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a93d31fab305d4b58d377ea9e6d5b7e39}} 
\index{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}!datatype@{datatype}}
\index{datatype@{datatype}!parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}}
\subsubsection{\texorpdfstring{datatype}{datatype}}
{\footnotesize\ttfamily parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs.\+datatype}



Definition at line 126 of file agents.\+py.

\mbox{\Hypertarget{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a66c8920874a95611d27a7d5b21c1c128}\label{classparlai_1_1tasks_1_1ubuntu_1_1agents_1_1UbuntuTeacherWithNegs_a66c8920874a95611d27a7d5b21c1c128}} 
\index{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}!num\+\_\+seen@{num\+\_\+seen}}
\index{num\+\_\+seen@{num\+\_\+seen}!parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs@{parlai\+::tasks\+::ubuntu\+::agents\+::\+Ubuntu\+Teacher\+With\+Negs}}
\subsubsection{\texorpdfstring{num\+\_\+seen}{num\_seen}}
{\footnotesize\ttfamily parlai.\+tasks.\+ubuntu.\+agents.\+Ubuntu\+Teacher\+With\+Negs.\+num\+\_\+seen}



Definition at line 127 of file agents.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/tasks/ubuntu/\hyperlink{parlai_2tasks_2ubuntu_2agents_8py}{agents.\+py}\end{DoxyCompactItemize}
