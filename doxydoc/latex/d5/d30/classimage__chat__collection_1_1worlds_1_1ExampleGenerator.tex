\hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator}{}\section{image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator Class Reference}
\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator}\index{image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator@{image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator}}


Inheritance diagram for image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d7/d93/classimage__chat__collection_1_1worlds_1_1ExampleGenerator__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{dc/db2/classimage__chat__collection_1_1worlds_1_1ExampleGenerator__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a17074787229ef3b12887fa756832d45a}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, \hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_af81b2df2aa075818decf714b0194d908}{opt})
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_aa2cc3ca44d92a3aa6a75cb4a4194f4dd}{add\+\_\+idx\+\_\+stack} (self)
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a483f70c4d3d3643b180f4a37b204f586}{pop\+\_\+example} (self)
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a417989f9fbc86367d9e4d1a52486db80}{push\+\_\+example} (self, idx)
\item 
def \hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_ad50213021a72919682cbca2a274d0c4c}{save\+\_\+idx\+\_\+stack} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a1567fe5f2514d3ca587135876f662c91}{second\+\_\+resp}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_ae72fb9efc3997a261057fad00bc3848c}{examples\+\_\+idx\+\_\+stack\+\_\+path}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a900a30f201c1cb5b76cbfbd4de169c1b}{O\+LD}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_af81b2df2aa075818decf714b0194d908}{opt}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a3e87cde07e69d44a919a90690aab456a}{data}
\item 
\hyperlink{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_af50982bf2fe045e42d6d17374300c557}{idx\+\_\+stack}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Retrieve Example from Personality-Captions.
\end{DoxyVerb}
 

Definition at line 100 of file worlds.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a17074787229ef3b12887fa756832d45a}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a17074787229ef3b12887fa756832d45a}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{opt }\end{DoxyParamCaption})}



Definition at line 105 of file worlds.\+py.


\begin{DoxyCode}
105     \textcolor{keyword}{def }\_\_init\_\_(self, opt):
106         self.second\_resp = opt.get(\textcolor{stringliteral}{'second\_response'})
107         self.examples\_idx\_stack\_path = os.path.join(
108             os.getcwd(),
109             \textcolor{stringliteral}{'./\{\}\_examples\_stack\{\}.pkl'}.\hyperlink{namespaceparlai_1_1chat__service_1_1services_1_1messenger_1_1shared__utils_a32e2e2022b824fbaf80c747160b52a76}{format}(
110                 \textcolor{stringliteral}{'second\_response'} \textcolor{keywordflow}{if} self.second\_resp \textcolor{keywordflow}{else} \textcolor{stringliteral}{'first\_response'},
111                 \textcolor{stringliteral}{'\_sandbox'} \textcolor{keywordflow}{if} opt[\textcolor{stringliteral}{'is\_sandbox'}] \textcolor{keywordflow}{else} \textcolor{stringliteral}{''},
112             ),
113         )
114         self.OLD = OffensiveStringMatcher()
115         self.opt = opt
116         build\_pc(opt)
117         build\_ic(opt)
118         df = \textcolor{stringliteral}{'personality\_captions'} \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.second\_resp \textcolor{keywordflow}{else} \textcolor{stringliteral}{'image\_chat'}
119         data\_path = os.path.join(self.opt[\textcolor{stringliteral}{'datapath'}], \textcolor{stringliteral}{'\{\}/\{\}.json'})
120         self.data = []
121         \textcolor{keywordflow}{for} dt \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'train'}, \textcolor{stringliteral}{'val'}, \textcolor{stringliteral}{'test'}]:
122             \textcolor{keywordflow}{if} self.second\_resp \textcolor{keywordflow}{and} dt == \textcolor{stringliteral}{'val'}:
123                 dt = \textcolor{stringliteral}{'valid'}
124             with open(data\_path.format(df, dt)) \textcolor{keyword}{as} f:
125                 self.data += json.load(f)
126 
127         \textcolor{keywordflow}{if} self.second\_resp:
128             self.data = [d \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} self.data \textcolor{keywordflow}{if} len(d[\textcolor{stringliteral}{'dialog'}]) > 1]
129 
130         \textcolor{keywordflow}{if} os.path.exists(self.examples\_idx\_stack\_path):
131             with open(self.examples\_idx\_stack\_path, \textcolor{stringliteral}{'rb'}) \textcolor{keyword}{as} handle:
132                 self.idx\_stack = pickle.load(handle)
133         \textcolor{keywordflow}{else}:
134             self.idx\_stack = []
135             self.add\_idx\_stack()
136             self.save\_idx\_stack()
137 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_aa2cc3ca44d92a3aa6a75cb4a4194f4dd}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_aa2cc3ca44d92a3aa6a75cb4a4194f4dd}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!add\+\_\+idx\+\_\+stack@{add\+\_\+idx\+\_\+stack}}
\index{add\+\_\+idx\+\_\+stack@{add\+\_\+idx\+\_\+stack}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{add\+\_\+idx\+\_\+stack()}{add\_idx\_stack()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+add\+\_\+idx\+\_\+stack (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 138 of file worlds.\+py.


\begin{DoxyCode}
138     \textcolor{keyword}{def }add\_idx\_stack(self):
139         stack = list(range(len(self.data)))
140         random.seed()
141         random.shuffle(stack)
142         self.idx\_stack = stack + self.idx\_stack
143 
\end{DoxyCode}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a483f70c4d3d3643b180f4a37b204f586}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a483f70c4d3d3643b180f4a37b204f586}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!pop\+\_\+example@{pop\+\_\+example}}
\index{pop\+\_\+example@{pop\+\_\+example}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{pop\+\_\+example()}{pop\_example()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+pop\+\_\+example (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 144 of file worlds.\+py.


\begin{DoxyCode}
144     \textcolor{keyword}{def }pop\_example(self):
145         \textcolor{keywordflow}{if} len(self.idx\_stack) == 0:
146             self.add\_idx\_stack()
147         idx = self.idx\_stack.pop()
148         ex = self.data[idx]
149         \textcolor{keywordflow}{return} (idx, ex)
150 
\end{DoxyCode}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a417989f9fbc86367d9e4d1a52486db80}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a417989f9fbc86367d9e4d1a52486db80}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!push\+\_\+example@{push\+\_\+example}}
\index{push\+\_\+example@{push\+\_\+example}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{push\+\_\+example()}{push\_example()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+push\+\_\+example (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{idx }\end{DoxyParamCaption})}



Definition at line 151 of file worlds.\+py.


\begin{DoxyCode}
151     \textcolor{keyword}{def }push\_example(self, idx):
152         self.idx\_stack.append(idx)
153 
\end{DoxyCode}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_ad50213021a72919682cbca2a274d0c4c}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_ad50213021a72919682cbca2a274d0c4c}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!save\+\_\+idx\+\_\+stack@{save\+\_\+idx\+\_\+stack}}
\index{save\+\_\+idx\+\_\+stack@{save\+\_\+idx\+\_\+stack}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{save\+\_\+idx\+\_\+stack()}{save\_idx\_stack()}}
{\footnotesize\ttfamily def image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+save\+\_\+idx\+\_\+stack (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 154 of file worlds.\+py.


\begin{DoxyCode}
154     \textcolor{keyword}{def }save\_idx\_stack(self):
155         with open(self.examples\_idx\_stack\_path, \textcolor{stringliteral}{'wb'}) \textcolor{keyword}{as} handle:
156             pickle.dump(self.idx\_stack, handle)
157 
158 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a3e87cde07e69d44a919a90690aab456a}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a3e87cde07e69d44a919a90690aab456a}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!data@{data}}
\index{data@{data}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{data}{data}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+data}



Definition at line 120 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_ae72fb9efc3997a261057fad00bc3848c}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_ae72fb9efc3997a261057fad00bc3848c}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!examples\+\_\+idx\+\_\+stack\+\_\+path@{examples\+\_\+idx\+\_\+stack\+\_\+path}}
\index{examples\+\_\+idx\+\_\+stack\+\_\+path@{examples\+\_\+idx\+\_\+stack\+\_\+path}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{examples\+\_\+idx\+\_\+stack\+\_\+path}{examples\_idx\_stack\_path}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+examples\+\_\+idx\+\_\+stack\+\_\+path}



Definition at line 107 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_af50982bf2fe045e42d6d17374300c557}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_af50982bf2fe045e42d6d17374300c557}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!idx\+\_\+stack@{idx\+\_\+stack}}
\index{idx\+\_\+stack@{idx\+\_\+stack}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{idx\+\_\+stack}{idx\_stack}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+idx\+\_\+stack}



Definition at line 132 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a900a30f201c1cb5b76cbfbd4de169c1b}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a900a30f201c1cb5b76cbfbd4de169c1b}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!O\+LD@{O\+LD}}
\index{O\+LD@{O\+LD}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{O\+LD}{OLD}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+O\+LD}



Definition at line 114 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_af81b2df2aa075818decf714b0194d908}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_af81b2df2aa075818decf714b0194d908}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!opt@{opt}}
\index{opt@{opt}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{opt}{opt}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+opt}



Definition at line 115 of file worlds.\+py.

\mbox{\Hypertarget{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a1567fe5f2514d3ca587135876f662c91}\label{classimage__chat__collection_1_1worlds_1_1ExampleGenerator_a1567fe5f2514d3ca587135876f662c91}} 
\index{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}!second\+\_\+resp@{second\+\_\+resp}}
\index{second\+\_\+resp@{second\+\_\+resp}!image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator@{image\+\_\+chat\+\_\+collection\+::worlds\+::\+Example\+Generator}}
\subsubsection{\texorpdfstring{second\+\_\+resp}{second\_resp}}
{\footnotesize\ttfamily image\+\_\+chat\+\_\+collection.\+worlds.\+Example\+Generator.\+second\+\_\+resp}



Definition at line 106 of file worlds.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
parlai/mturk/tasks/image\+\_\+chat/image\+\_\+chat\+\_\+collection/\hyperlink{parlai_2mturk_2tasks_2image__chat_2image__chat__collection_2worlds_8py}{worlds.\+py}\end{DoxyCompactItemize}
